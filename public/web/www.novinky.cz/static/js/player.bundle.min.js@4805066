!function(){var e={};e.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.jsx=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,i,n,o){var s=t&&t.defaultProps,r=arguments.length-3;if(i||0===r||(i={}),i&&s)for(var a in s)void 0===i[a]&&(i[a]=s[a]);else i||(i=s||{});if(1===r)i.children=o;else if(r>1){for(var l=Array(r),u=0;u<r;u++)l[u]=arguments[u+3];i.children=l}return{$$typeof:e,type:t,key:void 0===n?null:""+n,ref:null,props:i,_owner:null}}}(),e.asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},e.asyncGenerator=function(){function e(e){this.value=e}function t(t){function i(e,t){return new Promise(function(i,o){var a={key:e,arg:t,resolve:i,reject:o,next:null};r?r=r.next=a:(s=r=a,n(e,t))})}function n(i,s){try{var r=t[i](s),a=r.value;a instanceof e?Promise.resolve(a.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(r.done?"return":"normal",r.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":s.resolve({value:t,done:!0});break;case"throw":s.reject(t);break;default:s.resolve({value:t,done:!1})}s=s.next,s?n(s.key,s.arg):r=null}var s,r;this._invoke=i,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),e.asyncGeneratorDelegate=function(e,t){function i(i,n){return o=!0,n=new Promise(function(t){t(e[i](n))}),{done:!1,value:t(n)}}var n={},o=!1;return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return o?(o=!1,e):i("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(o)throw o=!1,e;return i("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return i("return",e)}),n},e.asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){function n(o,s){try{var r=t[o](s),a=r.value}catch(e){return void i(e)}return r.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}},e.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),e.defineEnumerableProperties=function(e,t){for(var i in t){var n=t[i];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i,n)}return e},e.defaults=function(e,t){for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var o=i[n],s=Object.getOwnPropertyDescriptor(t,o);s&&s.configurable&&void 0===e[o]&&Object.defineProperty(e,o,s)}return e},e.defineProperty=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.get=function e(t,i,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,i);if(void 0===o){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,i,n)}if("value"in o)return o.value;var r=o.get;if(void 0!==r)return r.call(n)},e.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},e.instanceof=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},e.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},e.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},e.newArrowCheck=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},e.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},e.objectWithoutProperties=function(e,t){var i={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i},e.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},e.selfGlobal="undefined"==typeof global?self:global,e.set=function e(t,i,n,o){var s=Object.getOwnPropertyDescriptor(t,i);if(void 0===s){var r=Object.getPrototypeOf(t);null!==r&&e(r,i,n,o)}else if("value"in s&&s.writable)s.value=n;else{var a=s.set;void 0!==a&&a.call(o,n)}return n},e.slicedToArray=function(){function e(e,t){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=e[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.slicedToArrayLoose=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var i,n=[],o=e[Symbol.iterator]();!(i=o.next()).done&&(n.push(i.value),!t||n.length!==t););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},e.taggedTemplateLiteral=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.taggedTemplateLiteralLoose=function(e,t){return e.raw=t,e},e.temporalRef=function(e,t,i){if(e===i)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},e.temporalUndefined={},e.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},e.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)},function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.SznPlayer=e()}}(function(){var t;return function e(t,i,n){function o(r,a){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return o(i?i:e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function s(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!s(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,i,n,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(i=this._events[e],a(i))return!1;if(o(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(r(i))for(s=Array.prototype.slice.call(arguments,1),u=i.slice(),n=u.length,l=0;l<n;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var i,n,s,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],s=i.length,n=-1,i===t||o(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(a=s;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){n=a;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],o(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,i,n){(function(e){!function(o){function s(e){throw new RangeError(O[e])}function r(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function a(e,t){var i=e.split("@"),n="";i.length>1&&(n=i[0]+"@",e=i[1]),e=e.replace(L,".");var o=e.split("."),s=r(o,t).join(".");return n+s}function l(e){for(var t,i,n=[],o=0,s=e.length;o<s;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<s?(i=e.charCodeAt(o++),56320==(64512&i)?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),o--)):n.push(t);return n}function u(e){return r(e,function(e){var t="";return e>65535&&(e-=65536,t+=V(e>>>10&1023|55296),e=56320|1023&e),t+=V(e)}).join("")}function c(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:C}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function _(e,t,i){var n=0;for(e=i?M(e/A):e>>1,e+=M(e/t);e>I*b>>1;n+=C)e=M(e/I);return M(n+(I+1)*e/(e+P))}function h(e){var t,i,n,o,r,a,l,d,h,f,p=[],m=e.length,v=0,y=N,E=R;for(i=e.lastIndexOf(D),i<0&&(i=0),n=0;n<i;++n)e.charCodeAt(n)>=128&&s("not-basic"),p.push(e.charCodeAt(n));for(o=i>0?i+1:0;o<m;){for(r=v,a=1,l=C;o>=m&&s("invalid-input"),d=c(e.charCodeAt(o++)),(d>=C||d>M((T-v)/a))&&s("overflow"),v+=d*a,h=l<=E?S:l>=E+b?b:l-E,!(d<h);l+=C)f=C-h,a>M(T/f)&&s("overflow"),a*=f;t=p.length+1,E=_(v-r,t,0==r),M(v/t)>T-y&&s("overflow"),y+=M(v/t),v%=t,p.splice(v++,0,y)}return u(p)}function f(e){var t,i,n,o,r,a,u,c,h,f,p,m,v,y,E,g=[];for(e=l(e),m=e.length,t=N,i=0,r=R,a=0;a<m;++a)p=e[a],p<128&&g.push(V(p));for(n=o=g.length,o&&g.push(D);n<m;){for(u=T,a=0;a<m;++a)p=e[a],p>=t&&p<u&&(u=p);for(v=n+1,u-t>M((T-i)/v)&&s("overflow"),i+=(u-t)*v,t=u,a=0;a<m;++a)if(p=e[a],p<t&&++i>T&&s("overflow"),p==t){for(c=i,h=C;f=h<=r?S:h>=r+b?b:h-r,!(c<f);h+=C)E=c-f,y=C-f,g.push(V(d(f+E%y,0))),c=M(E/y);g.push(V(d(c,0))),r=_(i,v,n==o),i=0,++n}++i,++t}return g.join("")}function p(e){return a(e,function(e){return x.test(e)?h(e.slice(4).toLowerCase()):e})}function m(e){return a(e,function(e){return w.test(e)?"xn--"+f(e):e})}var v="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof i&&i&&!i.nodeType&&i,E="object"==typeof e&&e;E.global!==E&&E.window!==E&&E.self!==E||(o=E);var g,k,T=2147483647,C=36,S=1,b=26,P=38,A=700,R=72,N=128,D="-",x=/^xn--/,w=/[^\x20-\x7E]/,L=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=C-S,M=Math.floor,V=String.fromCharCode;if(g={version:"1.4.1",ucs2:{decode:l,encode:u},decode:h,encode:f,toASCII:m,toUnicode:p},"function"==typeof t&&"object"==typeof t.amd&&t.amd)t("punycode",function(){return g});else if(v&&y)if(i.exports==v)y.exports=g;else for(k in g)g.hasOwnProperty(k)&&(v[k]=g[k]);else o.punycode=g}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,i){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,i,s){t=t||"&",i=i||"=";var r={};if("string"!=typeof e||0===e.length)return r;var a=/\+/g;e=e.split(t);var l=1e3;s&&"number"==typeof s.maxKeys&&(l=s.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var d,_,h,f,p=e[c].replace(a,"%20"),m=p.indexOf(i);m>=0?(d=p.substr(0,m),_=p.substr(m+1)):(d=p,_=""),h=decodeURIComponent(d),f=decodeURIComponent(_),n(r,h)?o(r[h])?r[h].push(f):r[h]=[r[h],f]:r[h]=f}return r};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,i){"use strict";function n(e,t){if(e.map)return e.map(t);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n],n));return i}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,i,a){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?n(r(e),function(r){var a=encodeURIComponent(o(r))+i;return s(e[r])?n(e[r],function(e){return a+encodeURIComponent(o(e))}).join(t):a+encodeURIComponent(o(e[r]))}).join(t):a?encodeURIComponent(o(a))+i+encodeURIComponent(o(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}},{}],5:[function(e,t,i){"use strict";i.decode=i.parse=e("./decode"),i.encode=i.stringify=e("./encode")},{"./decode":3,"./encode":4}],6:[function(e,t,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,i){if(e&&u.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,i),o}function s(e){return u.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function r(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}var l=e("punycode"),u=e("./util");i.parse=o,i.resolve=r,i.resolveObject=a,i.format=s,i.Url=n;var c=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,_=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],f=["{","}","|","\\","^","`"].concat(h),p=["'"].concat(f),m=["%","/","?",";","#"].concat(p),v=["/","?","#"],y=255,E=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},T={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");n.prototype.parse=function(e,t,i){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(o),r=/\\/g;s[0]=s[0].replace(r,"/"),e=s.join(o);var a=e;if(a=a.trim(),!i&&1===e.split("#").length){var d=_.exec(a);if(d)return this.path=a,this.href=a,this.pathname=d[1],d[2]?(this.search=d[2],t?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=c.exec(a);if(h){h=h[0];var f=h.toLowerCase();this.protocol=f,a=a.substr(h.length)}if(i||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var b="//"===a.substr(0,2);!b||h&&T[h]||(a=a.substr(2),this.slashes=!0)}if(!T[h]&&(b||h&&!C[h])){for(var P=-1,A=0;A<v.length;A++){var R=a.indexOf(v[A]);R!==-1&&(P===-1||R<P)&&(P=R)}var N,D;D=P===-1?a.lastIndexOf("@"):a.lastIndexOf("@",P),D!==-1&&(N=a.slice(0,D),a=a.slice(D+1),this.auth=decodeURIComponent(N)),P=-1;for(var A=0;A<m.length;A++){var R=a.indexOf(m[A]);R!==-1&&(P===-1||R<P)&&(P=R)}P===-1&&(P=a.length),this.host=a.slice(0,P),a=a.slice(P),this.parseHost(),this.hostname=this.hostname||"";var x="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!x)for(var w=this.hostname.split(/\./),A=0,L=w.length;A<L;A++){var O=w[A];if(O&&!O.match(E)){for(var I="",M=0,V=O.length;M<V;M++)I+=O.charCodeAt(M)>127?"x":O[M];if(!I.match(E)){var U=w.slice(0,A),B=w.slice(A+1),F=O.match(g);F&&(U.push(F[1]),B.unshift(F[2])),B.length&&(a="/"+B.join(".")+a),this.hostname=U.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),x||(this.hostname=l.toASCII(this.hostname));var q=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+q,this.href+=this.host,x&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!k[f])for(var A=0,L=p.length;A<L;A++){var H=p[A];if(a.indexOf(H)!==-1){var G=encodeURIComponent(H);G===H&&(G=escape(H)),a=a.split(H).join(G)}}var Q=a.indexOf("#");Q!==-1&&(this.hash=a.substr(Q),a=a.slice(0,Q));var z=a.indexOf("?");if(z!==-1?(this.search=a.substr(z),this.query=a.substr(z+1),t&&(this.query=S.parse(this.query)),a=a.slice(0,z)):t&&(this.search="",this.query={}),a&&(this.pathname=a),C[f]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",Y=this.search||"";this.path=q+Y}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(s=S.stringify(this.query));var r=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&o!==!1?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),i=i.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),r=r.replace("#","%23"),t+o+i+r+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var i=new n,o=Object.keys(this),s=0;s<o.length;s++){var r=o[s];i[r]=this[r]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),l=0;l<a.length;l++){var c=a[l];"protocol"!==c&&(i[c]=e[c])}return C[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!C[e.protocol]){for(var d=Object.keys(e),_=0;_<d.length;_++){var h=d[_];i[h]=e[h]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||T[e.protocol])i.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var p=i.pathname||"",m=i.search||"";i.path=p+m}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=y||v||i.host&&e.pathname,g=E,k=i.pathname&&i.pathname.split("/")||[],f=e.pathname&&e.pathname.split("/")||[],S=i.protocol&&!C[i.protocol];if(S&&(i.hostname="",i.port=null,i.host&&(""===k[0]?k[0]=i.host:k.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),E=E&&(""===f[0]||""===k[0])),y)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,k=f;else if(f.length)k||(k=[]),k.pop(),k=k.concat(f),i.search=e.search,i.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(S){i.hostname=i.host=k.shift();var b=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");b&&(i.auth=b.shift(),i.host=i.hostname=b.shift())}return i.search=e.search,i.query=e.query,u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!k.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var P=k.slice(-1)[0],A=(i.host||e.host||k.length>1)&&("."===P||".."===P)||""===P,R=0,N=k.length;N>=0;N--)P=k[N],"."===P?k.splice(N,1):".."===P?(k.splice(N,1),R++):R&&(k.splice(N,1),R--);if(!E&&!g)for(;R--;R)k.unshift("..");!E||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),A&&"/"!==k.join("/").substr(-1)&&k.push("");var D=""===k[0]||k[0]&&"/"===k[0].charAt(0);if(S){i.hostname=i.host=D?"":k.length?k.shift():"";var b=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");b&&(i.auth=b.shift(),i.host=i.hostname=b.shift())}return E=E||i.host&&k.length,E&&!D&&k.unshift(""),k.length?i.pathname=k.join("/"):(i.pathname=null,i.path=null),u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":7,punycode:2,querystring:5}],7:[function(e,t,i){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={indicator:"#e73c3b",progressBarDefault:"#e73c3b",progressBarAdvert:"#ffffff"}},{}],9:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){var i=this;e.classCallCheck(this,t),this._promise=Promise.resolve(),this._done=!1,this._canceled=!1,this._cancelResolve=null,this._cancelPromise=new Promise(function(e){i._cancelResolve=e})}return e.createClass(t,[{key:"then",value:function(e,t){var i=this;if(!this._done)return this._promise=this._promise.then(function(t){return i._canceled?(i._done=!0,void i._cancelResolve()):e?e(t):void 0},function(e){return i._canceled?(i._done=!0,void i._cancelResolve()):t?t(e):void 0}),this}},{key:"catch",value:function(e){var t=this;return this._promise=this._promise.catch(function(i){return t._canceled?(t._done=!0,void t._cancelResolve()):e?e(i):void 0}),this}},{key:"cancel",value:function(){return this._canceled=!0,this.then(),this._cancelPromise}}]),t}();n.default=o},{}],10:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("events"),s=e.interopRequireDefault(o),r=function(t){function i(){e.classCallCheck(this,i);var t=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t.__listeners=[],t.__requests=[],t.__rejectors=[],t}return e.inherits(i,t),e.createClass(i,[{key:"bindAll",value:function(e){var t=this,i=e instanceof Map?function(i,n){e.set(n,i.bind(t))}:function(i,n){e[n]=i.bind(t)};e.forEach(i)}},{key:"addListeners",value:function(e,t){t.forEach(function(t,i){e.addListener(i,t)})}},{key:"addEventListeners",value:function(e,t){t.forEach(function(t,i){e.addEventListener(i,t)})}},{key:"removeListeners",value:function(e,t){t.forEach(function(t,i){e.removeListener(i,t)})}},{key:"removeEventListeners",value:function(e,t){t.forEach(function(t,i){e.removeEventListener(i,t)})}},{key:"registerPendingEvent",value:function(e,t,i){this.__listeners.push({subject:e,eventName:t,listener:i})}},{key:"registerPendingRequest",value:function(e){this.__requests.push(e)}},{key:"registerPendingPromise",value:function(e){this.__rejectors.push(e)}},{key:"abortPending",value:function(){this.__listeners.forEach(function(e){var t=e.subject,i=e.eventName,n=e.listener;t.removeListener(i,n)}),this.__requests.forEach(function(e){e.abort()}),this.__rejectors.forEach(function(e){var t=new Error("Canceled due Component#abortPending.");t.canceled=!0,e(t)})}},{key:"getErrorIfIsReason",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[reason is unknown]";if(!e)return new Error(t);if(e.canceled)return null;var i=e instanceof Error?e:new Error(String(e));return i}}]),i}(s.default);n.default=r},{events:1}],11:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Request"),s=e.interopRequireDefault(o),r=function(){function t(i,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.classCallCheck(this,t),this._utils=i,this._settings=n,this._options=o,this._url="",this._request=null,this._resolve=null,this._reject=null,this._promise=null,this._info=null,this._attempts=0,this._isLoading=!1,this._done=this._done.bind(this),this._failed=this._failed.bind(this)}return e.createClass(t,[{key:"load",value:function(e){var t=this;return this._promise=new Promise(function(e,i){t._resolve=e,t._reject=i}),this._url=e,this._processRequest(),this._promise}},{key:"abort",value:function(){return this._isLoading=!1,!!this._request&&this._request.abort()}},{key:"getProgressInfo",value:function(){return this._info?this._info:this._request?this._request.getProgressInfo():null}},{key:"isLoading",value:function(){return this._isLoading}},{key:"_processRequest",value:function(){this._isLoading=!0,this._attempts++;var e=null;try{this._request=new s.default(this._utils,this._options),e=this._request.send(this._url)}catch(e){return this._reject({error:e,type:"invalid",request:this,url:this._url})}e.then(this._done).catch(this._failed)}},{key:"_done",value:function(e){return e.status>=400?(e.type="failed",e.error=null,void this._failed(e)):(this._info=this._request.getProgressInfo(),this._request.destroy(),this._request=null,this._isLoading=!1,void(200===e.status?this._resolve(e):this._reject(e)))}},{key:"_failed",value:function(e){this._request.destroy(),this._request=null,"failed"===e.type&&this._attempts<this._settings.maxAttemps?this._processRequest():(this._isLoading=!1,this._reject(e))}}]),t}();n.default=r},{"./Request":13}],12:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Loader"),s=e.interopRequireDefault(o),r=function(){function t(i,n,o){e.classCallCheck(this,t),this._utils=i,this._loaderSettings={maxAttemps:n.maxAttemps||1},this._options={timeout:n.timeout||0},o===t.PROFILE_SEGMENT&&(this._options.responseType="arraybuffer")}return e.createClass(t,[{key:"create",value:function(){return new s.default(this._utils,this._loaderSettings,this._options)}}]),t}();r.PROFILE_PLAYLIST="playlist",r.PROFILE_SEGMENT="segment",r.PROFILE_TEXTTRACK="texttrack",r.PROFILE_VAST="vast",n.default=r}).call(this,"/src\\js\\common\\LoaderFactory.js")},{"./Loader":11}],13:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./errors"),s=e.interopRequireDefault(o),r=new s.default.ErrorFactory(s.default.createSourceName(i)),a=function(){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.classCallCheck(this,t);var o=Object.assign({},n);o.method=n.method||"get",o.timeout=n.timeout||0,o.responseType=n.responseType||"",o.withCredentials="undefined"!=typeof n.withCredentials&&n.withCredentials,this._utils=i,this._options=o,this._state=t._NEW,this._url="",this._xhr=null,this._resolve=null,this._reject=null,this._stats={start:0,end:0,bytes:0,bandwidth:0},this._loaded=0,this._total=0,this._tId=0,this._promise=null,this._headers={},this._progressHandler=this._progressHandler.bind(this)}return e.createClass(t,[{key:"destroy",value:function(){this.abort(),this._xhr&&this._xhr.removeEventListener&&this._xhr.removeEventListener("progress",this._progressHandler),this._tId&&(clearTimeout(this._tId),this._tId=0),this._state=null,this._xhr=null,this._promise=null,this._stats=null,this._reject=null,this._resolve=null,this._options=null,this._utils=null}},{key:"setHeaders",value:function(e){Object.assign(this._headers,e)}},{key:"send",value:function(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this._state!==t._NEW)throw r.createError(s.default.GENERAL,"Request already sent.");this._url=e,this._state=t._SENT;var o=e,a=n;n&&"get"===this._options.method.toLowerCase()&&(o=""+e+(e.indexOf("?")>-1?"&":"?")+n,a=null),this._promise=new Promise(function(e,t){i._resolve=e,i._reject=t});var l=e.match(/^(https?\:)?\/\/(.*?)\//);l&&l[2]!=window.location.host&&window.XDomainRequest&&this._isIE9()&&(!this._options.responseType||"text"===this._options.responseType)?this._xhr=new XDomainRequest:this._xhr=new XMLHttpRequest,this._xhr instanceof XMLHttpRequest?this._xhr.onreadystatechange=this._readyStateHandler.bind(this):(this._xhr.onload=this._xDomainLoadHandler.bind(this),this._xhr.onerror=this._xDomainErrorHandler.bind(this)),this._xhr.addEventListener&&this._xhr.addEventListener("progress",this._progressHandler),this._xhr.open(this._options.method,o,!0),this._options.responseType&&this._xhr instanceof XMLHttpRequest&&(this._xhr.responseType=this._options.responseType),this._options.withCredentials&&(this._xhr.withCredentials=this._options.withCredentials);for(var u in this._headers)this._xhr.setRequestHeader(u,this._headers[u]);return this._stats.start=Date.now(),this._xhr.send(a),this._options.timeout&&(this._tId=setTimeout(this._timeout.bind(this),this._options.timeout)),this._promise}},{key:"getProgressInfo",value:function(){if(this._state!==t._SENT&&this._state!==t._DONE)return null;if(!this._total||!this._loaded)return null;var e=this._state===t._DONE?this._stats.end:Date.now(),i=e-this._stats.start,n=this._total-this._loaded,o=this._utils.calculateBandwidth(this._loaded,i);return{duration:i/1e3,loaded:this._loaded,total:this._total,bandwidth:o,estimatedRemainingTime:8*n/o}}},{key:"abort",value:function(){return this._state===t._SENT&&(this._state=t._ABORTED,this._xhr.abort(),this._reject({type:"abort",request:this,url:this._url}),!0)}},{key:"serializeData",value:function(e){if("string"==typeof e)return e;if(!e)return"";var t=[];for(var i in e){var n=e[i];n instanceof Array||(n=[n]);for(var o=0;o<n.length;o++)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[o]));
}return t.join("&")}},{key:"_isIE9",value:function(){return navigator.userAgent.includes("MSIE 9.0")}},{key:"_timeout",value:function(){this._state===t._SENT&&(this._state=t._TIMEOUT,this._xhr.abort(),this._reject({type:"timeout",request:this,url:this._url}))}},{key:"_readyStateHandler",value:function(){if(this._state===t._SENT&&4===this._xhr.readyState)if(this._xhr.status){var e=Date.now(),i=this._xhr.response||this._xhr.responseText;this._done(i,this._xhr.status,e)}else this._failed()}},{key:"_xDomainLoadHandler",value:function(){if(this._state===t._SENT){var e=Date.now(),i=this._xhr.responseText;this._done(i,200,e)}}},{key:"_xDomainErrorHandler",value:function(){this._state===t._SENT&&this._failed()}},{key:"_done",value:function(e,i,n){this._state=t._DONE,this._stats.total=e.byteLength||e.length,this._stats.end=n,this._stats.duration=(this._stats.end-this._stats.start)/1e3,this._stats.bandwidth=this._utils.calculateBandwidth(this._stats.total,this._stats.end-this._stats.start),this._resolve({status:i,data:e,type:"done",request:this,url:this._url,stats:this._stats})}},{key:"_failed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._state=t._FAILED,this._reject({status:i,type:"failed",request:this,url:this._url,error:e})}},{key:"_progressHandler",value:function(e){this._tId&&(clearTimeout(this._tId),this._tId=0),this._loaded=e.loaded,this._total=e.total}}]),t}();a._NEW=0,a._SENT=1,a._DONE=2,a._ABORTED=3,a._TIMEOUT=4,a._FAILED=5,n.default=a}).call(this,"/src\\js\\common\\Request.js")},{"./errors":18}],14:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./uiDom"),s=t("./errors"),r=e.interopRequireDefault(s),a=new r.default.ErrorFactory(r.default.createSourceName(i)),l=function(){function t(i){e.classCallCheck(this,t),this._dom={root:null,refs:{}},this._flags={},this._component={},this._bind=[],this._props={};var n=this.uiGetDefaultProps(),o=Object.assign({},n,i);this.__checkProps(o),this._props=o,this.__internal={inited:!1,built:!1},this.__eventEmitter=null}return e.createClass(t,[{key:"uiSetEventEmitter",value:function(t){if(!t||"object"!=("undefined"==typeof t?"undefined":e.typeof(t)))throw a.createError(r.default.GENERAL,"In "+this.constructor.name+' "eventEmitter" must be an object.');this.__eventEmitter=t}},{key:"uiGetDeclaredProps",value:function(){return{}}},{key:"uiGetDefaultProps",value:function(){return{}}},{key:"uiInit",value:function(){this.__bindAll(this._bind),this._onUiInit(this._props),this.__internal.inited=!0}},{key:"uiInited",value:function(){return this.__internal.inited}},{key:"uiBuild",value:function(){return this.__uiBuildComponents(this._component,this.__eventEmitter),this._onUiBuild(this._props),this.__internal.built=!0,this}},{key:"uiBuilt",value:function(){return this.__internal.built}},{key:"uiForceUpdate",value:function(){return this._onUiUpdate(this._props),this.__uiForceUpdateComponents(this._component),this}},{key:"uiCanUpdate",value:function(e){return this._onUiCanUpdate(e)}},{key:"uiUpdate",value:function(t){if(!t||"object"!=("undefined"==typeof t?"undefined":e.typeof(t)))throw a.createError(r.default.GENERAL,"In "+this.constructor.name+' "props" must be an object.');var i=Object.assign({},this._props,t);return this.__checkProps(i),this.uiCanUpdate(i)&&(this._onUiUpdate(i),this._props=i),this}},{key:"uiDestroy",value:function(){this.__uiDestroyComponents(this._component),this._onUiDestroy(),this.__uiClearDom(),this._dom={root:null,destroyed:!0}}},{key:"uiHasElement",value:function(e){if(!this._dom.root)throw a.createError(r.default.GENERAL,"In "+this.constructor.name+(" Root element is "+this._dom.root+".")+' Be sure you called "uiBuild" before "uiHasElement".');return this._dom.root==e||this._dom.root.contains(e)}},{key:"uiGetElement",value:function(){if(!this._dom.root)throw a.createError(r.default.GENERAL,"In "+this.constructor.name+(" Root element is "+this._dom.root+".")+' Be sure you called "uiBuild" before "uiGetElement".');return this._dom.root}},{key:"_uiAddListener",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this.__eventEmitter.addListener.apply(this.__eventEmitter,t)}},{key:"_uiEmitEvent",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this.__eventEmitter.emit.apply(this.__eventEmitter,t)}},{key:"_onUiInit",value:function(){this._dom.root=(0,o.createElm)("div",{"data-info":"In "+this.constructor.name+" there is no root."})}},{key:"_onUiBuild",value:function(){}},{key:"_onUiUpdate",value:function(){}},{key:"_onUiCanUpdate",value:function(){return!0}},{key:"_onUiDestroy",value:function(){}},{key:"__checkProps",value:function(t){var i=this.uiGetDeclaredProps(),n=!0,o=!1,s=void 0;try{for(var l,u=Object.keys(t)[Symbol.iterator]();!(n=(l=u.next()).done);n=!0){var c=l.value;if(!(c in i))throw a.createError(r.default.GENERAL," In "+this.constructor.name+(' got unknown prop name "'+c+'".')+' Define this prop in "uiGetDeclaredProps" method or stop setting it in props if it is useless.');var d=[].concat(i[c]).indexOf(e.typeof(t[c]));if(d==-1)throw a.createError(r.default.GENERAL,"In "+this.constructor.name+(' got bad type of "'+c+'" property. Expected ')+(i[c]+" but got "+e.typeof(t[c])+"."))}}catch(e){o=!0,s=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw s}}}},{key:"__bindAll",value:function(e){var t=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;this[r]=this[r].bind(this)}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"__uiBuildComponents",value:function(e,t){var i=!0,n=!1,o=void 0;try{for(var s,l=Object.keys(e)[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(!e[u])throw a.createError(r.default.GENERAL,"In "+this.constructor.name+(' is unitialized component "'+u+'".')+' Method "_onUiInit" is the best place.');Array.isArray(e[u])?e[u].forEach(function(e){e.uiInit(),e.uiSetEventEmitter(t),e.uiBuild()}):(e[u].uiInit(),e[u].uiSetEventEmitter(t),e[u].uiBuild())}}catch(e){n=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(n)throw o}}}},{key:"__uiForceUpdateComponents",value:function(e){var t=!0,i=!1,n=void 0;try{for(var o,s=Object.keys(e)[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;Array.isArray(e[r])?e[r].forEach(function(e){e.uiForceUpdate()}):e[r].uiForceUpdate()}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"__uiDestroyComponents",value:function(e){var t=!0,i=!1,n=void 0;try{for(var o,s=Object.keys(e)[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;Array.isArray(e[r])?e[r].forEach(function(e){e.uiDestroy()}):e[r].uiDestroy()}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"__uiClearDom",value:function(){for(;this._dom.root.firstChild;)this._dom.root.removeChild(this._dom.root.firstChild)}}]),t}();n.default=l}).call(this,"/src\\js\\common\\UiComponent.js")},{"./errors":18,"./uiDom":20}],15:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./updateObject"),s=e.interopRequireDefault(o),r=function(){function t(i){e.classCallCheck(this,t),this._defaultState=Object.assign({},i),this._state=i}return e.createClass(t,[{key:"reset",value:function(){this._state=this._defaultState}},{key:"get",value:function(){return this._state}},{key:"update",value:function(e){this._state=(0,s.default)(this._state,e)}}]),t}();n.default=r},{"./updateObject":22}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.version="7.0.3",i.typeSpl="application/vnd.seznam-cz.spl+json"},{}],17:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","webkitEnterFullscreen","msRequestFullscreen"],o=["exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen"],s=["fullscreenElement","mozFullScreenElement","webkitFullscreenElement","webkitDisplayingFullscreen","msFullscreenElement"],r=navigator.userAgent,a=navigator.vendor;i.default={getScreenResolution:function(){var e=window.devicePixelRatio||1,t=Math.max(window.screen.width,window.screen.height),i=Math.min(window.screen.width,window.screen.height);return{width:t*e,height:i*e}},isBuggyFullscreen:function(){var e=/AppleWebKit\/([\d.]+)/i.exec(r),t=/Chrome\/([\d.]+)/i.exec(r);return r.search(/android/i)!=-1&&!/Windows Phone/i.test(r)&&e&&parseFloat(e[1])<=537.36&&t&&parseFloat(t[1])<=37||this.isIE11()},isBuggyCustomUi:function(){var e=/AppleWebKit\/([\d.]+)/i.exec(r);return r.search(/android/i)!=-1&&!/Windows Phone/i.test(r)&&e&&parseFloat(e[1])<537.36},getFSRequestMethodName:function(e){for(var t=0,i=n.length;t<i;t++){var o=n[t];if("function"==typeof e[o])return o}return""},getFSExitMethodName:function(e){for(var t=0,i=o.length;t<i;t++){var n=o[t];if("function"==typeof e[n])return n}return""},getFSStateIndicatorPropertyName:function(e){for(var t=0,i=s.length;t<i;t++){var n=s[t];if("undefined"!=typeof e[n])return n}return""},getFSChangeEventName:function(e){return"undefined"!=typeof e.onfullscreenchange?"fullscreenchange":"undefined"!=typeof e.onmozfullscreenchange?"mozfullscreenchange":"undefined"!=typeof e.onwebkitfullscreenchange?"webkitfullscreenchange":"undefined"!=typeof e.onmsfullscreenchange?"MSFullscreenChange":""},isIPhone:function(){return/iPhone/.test(r)&&!window.MSStream},isIPad:function(){return/iPad/.test(r)&&!window.MSStream},isIPod:function(){return/iPod/.test(r)&&!window.MSStream},isSamsungBrowser:function(){return/SamsungBrowser/.test(r)&&!window.MSStream},isAndroid4:function(){var e=r.includes("Android")&&!r.includes("Windows Phone"),t=r.match(/Android\s([0-9\.]+)/);return!!(e&&t&&t[1])&&parseInt(t[1].split(".")[0],10)<5},isTouch:function(){return"ontouchstart"in window&&!this.isAutoplayAllowed()},isAutoplayAllowed:function(){return!/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/.test(r)},isIE11:function(){return!!(r.includes("MSIE")||r.includes("Trident")||r.includes("IEMobile"))&&r.includes("rv:11")},isMac:function(){return r.includes("Macintosh")},isSafari:function(){return!r.includes("Chrome")&&(r.includes("Safari")&&"string"==typeof a&&a.includes("Apple Computer"))},isInIframe:function(){try{return window.self!==window.top}catch(e){return!0}},isWindowsPhone:function(){return r.includes("Windows Phone")}}},{}],18:[function(t,i,n){"use strict";function o(e){return e.replace(/\\/g,"/").replace(/^\//,"").replace(/\.js$/,"").replace(/\//g,".")}Object.defineProperty(n,"__esModule",{value:!0});var s="ERROR_UNSPECIFIED",r="ERROR_GENERAL",a="ERROR_SETTING",l="ERROR_NETWORK",u="ERROR_SOURCE",c="ERROR_SOURCE_TECH",d="ERROR_SOURCE_SPL",_="ERROR_TEXTSOURCE",h="ERROR_MEDIA",f="ERROR_AD",p="ERROR_AD_IM",m="ERROR_AD_VPAID_SOURCE",v="ERROR_AD_IM_REQUEST",y="ERROR_ANALYTICS",E=function(){function t(i){e.classCallCheck(this,t),this._name=i}return e.createClass(t,[{key:"createError",value:function(e,t){var i=new Error(t);return i.category=e,i.source=this._name,i}}]),t}();n.default={UNSPECIFIED:s,GENERAL:r,SETTING:a,NETWORK:l,SOURCE:u,SOURCE_TECH:c,SOURCE_SPL:d,AD_VPAID_SOURCE:m,TEXTSOURCE:_,MEDIA:h,AD:f,AD_IM:p,AD_IM_REQUEST:v,ANALYTICS:y,createSourceName:o,ErrorFactory:E}},{}],19:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n="application/x-shockwave-flash",o={width:"100%",height:"100%"},s={allowScriptAccess:"always",allowFullScreen:"true",quality:"high",bgcolor:"#000000",scale:"noscale"},r="Microsoft Internet Explorer"===navigator.appName;i.default={createElement:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=window.document.createElement("div");return s.innerHTML=this.getEmbedCode(e,t,i,n,o),s.firstChild},getEmbedCode:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l="",u=Object.assign(o,r),c=Object.assign(s,a);u.id=t,c.flashVars=this._createFlashVarsString(i),l='<object type="'+n+'" data="'+e+'"';for(var d in u)l+=" "+d+'="'+u[d]+'"';l+=">";for(var _ in c)l+='<param name="'+_+'" value="'+c[_]+'">';return l+="</object>"},removeElement:function(e){r?(e.style.display="none",function t(){if(4===e.readyState){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}else setTimeout(t,10)}()):e.parentNode.removeChild(e)},_createFlashVarsString:function(e){var t="";for(var i in e)t+=i+"="+e[i]+"&amp;";return t}}},{}],20:[function(t,i,n){"use strict";function o(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=t.toLowerCase(),s=["svg","use"].indexOf(o)>-1;if(n=s?document.createElementNS(r,t):document.createElement(t),!i||"object"!=("undefined"==typeof i?"undefined":e.typeof(i)))throw new Error("[createElm] Attrs argument must be an object");var l=!0,u=!1,c=void 0;try{for(var d,_=Object.keys(i)[Symbol.iterator]();!(l=(d=_.next()).done);l=!0){var h=d.value;if("style"!=h)if("className"!=h)if("innerHTML"!=h){var f=["use"].indexOf(o)>-1;f?n.setAttributeNS(a,h,i[h]):n.setAttribute(h,i[h])}else n.innerHTML=i.innerHTML;else n.setAttribute("class",i.className);else{var p=!0,m=!1,v=void 0;try{for(var y,E=Object.keys(i.style)[Symbol.iterator]();!(p=(y=E.next()).done);p=!0){var g=y.value;n.style[g]=i.style[g]}}catch(e){m=!0,v=e}finally{try{!p&&E.return&&E.return()}finally{if(m)throw v}}}}}catch(e){u=!0,c=e}finally{try{!l&&_.return&&_.return()}finally{if(u)throw c}}return n}function s(e){return"__dom_helper__"in e&&(e=e.node()),{__dom_helper__:!0,node:function(){return e},append:function(){for(var t=this,i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return n.forEach(function(i){return Array.isArray(i)?void t.append.apply(t,i):("__dom_helper__"in i&&(i=i.node()),void e.appendChild(i))}),this},remove:function(t){return e.removeChild(t),this},clear:function(){for(;e.firstChild;)this.remove(e.firstChild);return this},moveChildrenFrom:function(t){for(;t.firstChild;)e.appendChild(t.firstChild);return this},cssClasses:function(t){var i=!0,n=!1,o=void 0;try{for(var s,r=Object.keys(t)[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var a=s.value;a&&(t[a]&&!e.classList.contains(a)?e.classList.add(a):!t[a]&&e.classList.contains(a)&&e.classList.remove(a),e.offsetHeight)}}catch(e){n=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}return this},setStyle:function(t){var i=!0,n=!1,o=void 0;try{for(var s,r=Object.keys(t)[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var a=s.value;e.style[a]!==t[a]&&(e.style[a]=t[a])}}catch(e){n=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}},setDisplayed:function(e){return this.cssClasses({"sznp-hidden":!e}),this},setBoxShadow:function(t){var i=e.style;return"boxShadow"in i&&i.boxShadow!==t&&(i.boxShadow=t),"webkitBoxShadow"in i&&i.webkitBoxShadow!==t&&(i.webkitBoxShadow=t),this}}}Object.defineProperty(n,"__esModule",{value:!0}),n.createElm=o,n.elm=s;var r="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xlink"},{}],21:[function(t,i,n){(function(i){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#fff",i=r(e);return i.querySelector("svg").style.fill=t,i.querySelector("svg").style.stroke=t,i}function s(e,t){var i=e.getAttribute("data-icon-type");if(!i)throw c.createError(u.default.GENERAL,"Incompatible icon element.");var n=o(i,t);(0,a.elm)(e).clear(),(0,a.elm)(e).moveChildrenFrom(n)}function r(e){var t=(0,a.createElm)("span",{className:"sznp-icon sznp-icon-"+e,"data-icon-type":e});switch(e){case"arrow-right":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path fill="none" stroke-width="3.696" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="round" d="M11.625 30.667l12.751-12.751-12.751-12.583"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"circle":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path d="M33.333 18c0 8.468-6.865 15.333-15.333 15.333s-15.333-6.865-15.333-15.333c0-8.468 6.865-15.333 15.333-15.333s15.333 6.865 15.333 15.333z"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"close":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="64" height="64" viewBox="0 0 64 64">\n\t\t\t\t\t<circle cx="32" cy="32" r="32" fill="#000000"/>\n\t\t\t\t\t<path fill="none" transform="translate(14, 14)" stroke-width="5" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M5.333 5.333l25.333 25.333"></path>\n\t\t\t\t\t<path fill="none" transform="translate(14, 14)" stroke-width="5" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M30.667 5.333l-25.333 25.333"></path>\n\t\t\t\t</svg>\n\n\t\t\t';break;case"cross":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path fill="none" stroke-width="3.6" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M5.333 5.333l25.333 25.333"></path>\n\t\t\t\t\t<path fill="none" stroke-width="3.6" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M30.667 5.333l-25.333 25.333"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"fullscreen-off":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path fill="none" stroke-width="3.4286" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="round" d="M15.121 28.876v-7.844h-7.844"></path>\n\t\t\t\t\t<path fill="none" stroke-width="3.4286" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M13.664 22.489l-8.348 8.348"></path>\n\t\t\t\t\t<path fill="none" stroke-width="3.4286" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="round" d="M20.879 7.124v7.844h7.844"></path>\n\t\t\t\t\t<path fill="none" stroke-width="3.4286" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M22.336 13.511l8.348-8.348"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"fullscreen-on":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path fill="none" stroke-width="3.6" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="round" d="M4.67 22.855v8.252h8.252"></path>\n\t\t\t\t\t<path fill="none" stroke-width="3.6" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M6.202 29.575l8.783-8.783"></path>\n\t\t\t\t\t<path fill="none" stroke-width="3.6" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="round" d="M31.33 13.145v-8.252h-8.252"></path>\n\t\t\t\t\t<path fill="none" stroke-width="3.6" stroke-miterlimit="4" stroke-linecap="square" stroke-linejoin="miter" d="M29.798 6.425l-8.783 8.783"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"mute":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path fill="none" stroke-width="2.7692" stroke-miterlimit="4" stroke-linecap="butt" stroke-linejoin="miter" d="M9.061 30.819l25.034-25.034"></path>\n\t\t\t\t\t<path d="M10.121 24.051h-1.883v-12.217h5.769l11.146-7.905c0 0 1.764-1.262 1.764 0.029v3.296l-16.797 16.797zM18.423 27.164l6.491 4.577c0 0 2.004 1.592 2.004-0.053v-13.019l-8.495 8.495z"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"pause":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path d="M7.302 2.667h6.419c0.394 0 0.713 0.319 0.713 0.713v29.24c0 0.394-0.319 0.713-0.713 0.713h-6.419c-0.394 0-0.713-0.319-0.713-0.713v-29.24c0-0.394 0.319-0.713 0.713-0.713z"></path>\n\t\t\t\t\t<path d="M22.279 2.667h6.419c0.394 0 0.713 0.319 0.713 0.713v29.24c0 0.394-0.319 0.713-0.713 0.713h-6.419c-0.394 0-0.713-0.319-0.713-0.713v-29.24c0-0.394 0.319-0.713 0.713-0.713z"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"play":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path d="M29.37 18l-20.074 15.333v-30.667z"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"play-timer":t.innerHTML='\n\t\t\t\t<svg width="72" height="72" viewBox="0 0 72 72">\n\t\t\t\t\t<path class="sznp-icon-play-timer-countdown" stroke="none" transform="translate(36, 36)" d="M 0 0 v -36 A 36 36 1 0 1 0 -36 z"></path>\n\t\t\t\t\t<path d="M29.37 18l-20.074 15.333v-30.667z" transform="translate(18, 18)"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"quality":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M29.231 14.071l-0.527-1.275c1.805-4.163 1.685-4.287 1.335-4.648l-2.306-2.299-0.229-0.197h-0.267c-0.141 0-0.561 0-4.066 1.622l-1.29-0.531c-1.667-4.218-1.838-4.218-2.326-4.218h-3.253c-0.488 0-0.677-0-2.223 4.233l-1.284 0.532c-2.369-1.021-3.758-1.537-4.133-1.537l-0.307 0.010-2.48 2.481c-0.376 0.361-0.508 0.488 1.401 4.587l-0.525 1.271c-4.222 1.666-4.222 1.827-4.222 2.337v3.255c0 0.511 0 0.691 4.237 2.239l0.525 1.268c-1.805 4.161-1.683 4.286-1.333 4.643l2.306 2.302 0.229 0.201h0.268c0.139 0 0.554 0 4.064-1.626l1.288 0.534c1.667 4.217 1.839 4.216 2.328 4.216h3.253c0.497 0 0.674 0 2.225-4.231l1.291-0.533c2.366 1.021 3.752 1.539 4.124 1.539l0.31-0.009 2.499-2.497c0.355-0.366 0.48-0.493-1.418-4.574l0.522-1.272c4.229-1.667 4.229-1.842 4.229-2.341v-3.251c-0-0.512-0-0.691-4.242-2.234v0zM17.999 23.414c-2.983 0-5.412-2.43-5.412-5.417 0-2.984 2.429-5.412 5.412-5.412 2.981 0 5.405 2.429 5.405 5.412-0 2.986-2.424 5.417-5.405 5.417v0z"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"reload":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M32.449 18.689c0.444-8.48-6.116-15.741-14.625-16.187-3.983-0.209-7.874 1.132-10.876 3.7 0 0-0.873-0.443-1.95-0.991-1.077-0.547-1.892 0.116-1.821 1.483l0.419 8.001c0.071 1.366 1.062 1.871 2.214 1.127l6.744-4.36c1.151-0.745 1.336-1.728 0.412-2.198l-1.672-0.85c1.882-1.129 4.069-1.7 6.302-1.583 6.115 0.32 10.828 5.538 10.508 11.631s-5.553 10.79-11.667 10.47c-1.926-0.101-3.796-0.699-5.407-1.731-1.011-0.647-2.356-0.355-3.005 0.652s-0.356 2.348 0.656 2.995c2.246 1.438 4.849 2.273 7.53 2.413 8.509 0.446 15.793-6.091 16.237-14.571v0z"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"subtitles":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path\n\t\t\t\t\t\td="M28.012 27.549h2.323c1.584 0 2.893-1.302 2.893-2.908v-16.785c0-1.596-1.295-2.908-2.893-2.908h-24.671c-1.584 0-2.893 1.302-2.893 2.908v16.785c0 1.596 1.295 2.908 2.893 2.908h17.579l2.601 3.503 2.167-3.503zM18 10.639c0-0.397 0.337-0.719 0.727-0.719h7.429c0.402 0 0.727 0.327 0.727 0.719v0.916c0 0.397-0.337 0.719-0.727 0.719h-7.429c-0.402 0-0.727-0.327-0.727-0.719v-0.916zM15.462 20.584c0-0.397 0.329-0.719 0.714-0.719h9.992c0.395 0 0.714 0.327 0.714 0.719v0.916c0 0.397-0.329 0.719-0.714 0.719h-9.992c-0.395 0-0.714-0.327-0.714-0.719v-0.916zM9.117 20.584c0-0.397 0.333-0.719 0.727-0.719h3.622c0.402 0 0.727 0.327 0.727 0.719v0.916c0 0.397-0.333 0.719-0.727 0.719h-3.622c-0.402 0-0.727-0.327-0.727-0.719v-0.916zM18 15.611c0-0.397 0.325-0.719 0.734-0.719h2.339c0.405 0 0.734 0.327 0.734 0.719v0.916c0 0.397-0.325 0.719-0.734 0.719h-2.339c-0.405 0-0.734-0.327-0.734-0.719v-0.916zM23.076 15.611c0-0.397 0.325-0.719 0.734-0.719h2.339c0.405 0 0.734 0.327 0.734 0.719v0.916c0 0.397-0.325 0.719-0.734 0.719h-2.339c-0.405 0-0.734-0.327-0.734-0.719v-0.916zM13.215 17.379h-1.796v-5.744l-2.302-0.001v-1.714h6.43v1.714l-2.332 0.001v5.744z"></path>\n\t\t\t\t</svg>\n\t\t\t';break;case"volume":t.innerHTML='\n\t\t\t\t<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36" viewBox="0 0 36 36">\n\t\t\t\t\t<path d="M8.255 11.566v12.749h6.020l11.38 8.024c0 0 2.091 1.661 2.091-0.055v-28.936c0-1.348-1.841-0.031-1.841-0.031l-11.631 8.249h-6.020z"></path>\n\t\t\t\t</svg>\n\t\t\t';break;default:throw c.createError(u.default.GENERAL,"Unknown icon type "+e+".")}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.getIcon=o,n.updateIcon=s;var a=t("./uiDom"),l=t("./errors"),u=e.interopRequireDefault(l),c=new u.default.ErrorFactory(u.default.createSourceName(i))}).call(this,"/src\\js\\common\\uiIcon.js")},{"./errors":18,"./uiDom":20}],22:[function(t,i,n){"use strict";function o(t,i){var n=Object.assign({},t),s=!0,r=!1,a=void 0;try{for(var l,u=Object.keys(i)[Symbol.iterator]();!(s=(l=u.next()).done);s=!0){var c=l.value;t[c]&&Array.isArray(t[c])?n[c]=i[c].slice():t[c]&&"object"==e.typeof(t[c])?n[c]=o(t[c],i[c]):n[c]=i[c]}}catch(e){r=!0,a=e}finally{try{!s&&u.return&&u.return()}finally{if(r)throw a}}return n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o},{}],23:[function(t,i,n){"use strict";function o(t){var i="object"===("undefined"==typeof t?"undefined":e.typeof(t))?t:t.prototype,n=[],o=i;do n=n.concat(Object.getOwnPropertyNames(o));while(o=Object.getPrototypeOf(o));return n.filter(function(e){return"function"==typeof i[e]&&0!==e.indexOf("_")})}Object.defineProperty(n,"__esModule",{value:!0});var s=1e7,r=0;n.default={generateId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pdg";r=r<s?r:0;var t=e+"t"+Date.now()+"c"+r;return r++,t},decorate:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_$origin",n=Object.keys(t);e[i]={};var o=!0,s=!1,r=void 0;try{for(var a,l=n[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;e[u]&&(e[i][u]=e[u]),e[u]=t[u]}}catch(e){s=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}},undecorate:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_$origin",n=Object.keys(t),o=!0,s=!1,r=void 0;try{for(var a,l=n[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;e[i][u]?e[u]=e[i][u]:delete e[u]}}catch(e){s=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}delete e[i]},formatTime:function(e){isFinite(e)||(e=0);var t=[],i=Math.floor(e/3600),n=Math.floor((e-3600*i)/60),o=Math.round(e-(3600*i+60*n));return 60==o&&(o=0,n+=1,60==n&&(n=0,i+=1)),i&&t.push(i<10?"0"+i:i),t.push(n<10?"0"+n:n),t.push(o<10?"0"+o:o),t.join(":")},formatPx:function(e){var t=parseInt(e,10);return String(t)===String(e)?t+"px":e},getUrlScheme:function(e){var t=e.split("//");return 1===t.length?"":t[0].replace(":","")},addParameterToUrlHash:function(e,t,i){var n=e.indexOf("#")>-1?"&":"#";return""+e+n+t+"="+i},getFileExt:function(e){if(!e||"string"!=typeof e)return"";var t=e,i=t.indexOf("?");i>-1&&(t=t.slice(0,i));var n=t.indexOf("#");n>-1&&(t=t.slice(0,n));var o=t.lastIndexOf(".");return o<1?"":t.slice(o+1).toLowerCase()},getTypeByFileExt:function(e){return"m3u8"===e||"m3u"===e?"application/vnd.apple.mpegurl":"mp4"===e?"video/mp4":"webm"===e?"video/webm":""},cutText:function(e,t){return e.length>t?e.substring(0,t-3)+"...":e},getElement:function(t){return"object"===("undefined"==typeof t?"undefined":e.typeof(t))&&1===t.nodeType?t:"string"==typeof t?window.document.querySelector(t):null},replaceElement:function(e,t){var i=e.parentNode;i.replaceChild(t,e)},calculateBandwidth:function(e,t){return Math.round(8*e/(t/1e3))},clone:function(t){return null===t||"object"!==("undefined"==typeof t?"undefined":e.typeof(t))?t:JSON.parse(JSON.stringify(t))},hasInterface:function(t,i){if(!t||"object"!==("undefined"==typeof t?"undefined":e.typeof(t)))throw new Error('Argument "imp" must be an object.');if(!i||"function"!=typeof i)throw new Error('Argument "itf" must be a class.');if(t instanceof i)return!0;for(var n=o(i),s=o(t),r=0,a=n.length;r<a;r++)if(s.indexOf(n[r])===-1)return!1;return!0},getOwnMethods:function(t){var i="object"===("undefined"==typeof t?"undefined":e.typeof(t))?t:t.prototype,n=Object.getOwnPropertyNames(i);return n.filter(function(e){return"function"==typeof i[e]&&0!==e.indexOf("_")})}}},{}],24:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SplExtension=n.createSplResource=n.SplResource=n.singleContentSetup=n.StandardPlaylist=n.Playlist=n.createSznRichMediaPlayer=n.SznRichMediaPlayer=n.Tracker=n.TrackerController=n.createRichMediaPlayer=n.RichMediaPlayer=n.StrategyPlayer=n.VpaidPlayer=n.createUiMediaPlayer=n.createMediaPlayer=n.MediaPlayer=n.QualityListFactory=n.QualityList=n.env=n.utils=n.config=n.version=void 0;var o=t("./common/constants"),s=t("./common/utils"),r=e.interopRequireDefault(s),a=t("./common/env"),l=e.interopRequireDefault(a),u=t("./mediaplayer/streaming/QualityList"),c=e.interopRequireDefault(u),d=t("./mediaplayer/streaming/QualityListFactory"),_=e.interopRequireDefault(d),h=t("./mediaplayer/config"),f=e.interopRequireDefault(h),p=t("./mediaplayer/tech/Tech"),m=e.interopRequireDefault(p),v=t("./mediaplayer/createMediaPlayer"),y=e.interopRequireDefault(v),E=t("./richmediaplayer/createUiMediaPlayer"),g=e.interopRequireDefault(E),k=t("./richmediaplayer/RichMediaPlayer"),T=e.interopRequireDefault(k),C=t("./richmediaplayer/createRichMediaPlayer"),S=e.interopRequireDefault(C),b=t("./richmediaplayer/tracking/TrackerController"),P=e.interopRequireDefault(b),A=t("./richmediaplayer/tracking/Tracker"),R=e.interopRequireDefault(A),N=t("./richmediaplayer/VpaidPlayer"),D=e.interopRequireDefault(N),x=t("./richmediaplayer/StrategyPlayer"),w=e.interopRequireDefault(x),L=t("./sznplayer/SznRichMediaPlayer"),O=e.interopRequireDefault(L),I=t("./sznplayer/createSznRichMediaPlayer"),M=e.interopRequireDefault(I),V=t("./sznplayer/Playlist"),U=e.interopRequireDefault(V),B=t("./sznplayer/StandardPlaylist"),F=e.interopRequireDefault(B),q=t("./sznplayer/singleContentSetup"),j=e.interopRequireDefault(q),H=t("./sznplayer/spl/SplResource"),G=e.interopRequireDefault(H),Q=t("./sznplayer/spl/createSplResource"),z=e.interopRequireDefault(Q),Y=t("./sznplayer/SplExtension"),K=e.interopRequireDefault(Y);n.version=o.version,n.config=f.default,n.utils=r.default,n.env=l.default,n.QualityList=c.default,n.QualityListFactory=_.default,n.MediaPlayer=m.default,n.createMediaPlayer=y.default,n.createUiMediaPlayer=g.default,n.VpaidPlayer=D.default,n.StrategyPlayer=w.default,n.RichMediaPlayer=T.default,n.createRichMediaPlayer=S.default,n.TrackerController=P.default,n.Tracker=R.default,n.SznRichMediaPlayer=O.default,n.createSznRichMediaPlayer=M.default,n.Playlist=U.default,n.StandardPlaylist=F.default,n.singleContentSetup=j.default,n.SplResource=G.default,n.createSplResource=z.default,n.SplExtension=K.default},{"./common/constants":16,"./common/env":17,"./common/utils":23,"./mediaplayer/config":25,"./mediaplayer/createMediaPlayer":26,"./mediaplayer/streaming/QualityList":36,"./mediaplayer/streaming/QualityListFactory":37,"./mediaplayer/tech/Tech":42,"./richmediaplayer/RichMediaPlayer":54,"./richmediaplayer/StrategyPlayer":55,"./richmediaplayer/VpaidPlayer":56,"./richmediaplayer/createRichMediaPlayer":57,"./richmediaplayer/createUiMediaPlayer":58,"./richmediaplayer/tracking/Tracker":83,"./richmediaplayer/tracking/TrackerController":84,"./sznplayer/Playlist":94,"./sznplayer/SplExtension":95,"./sznplayer/StandardPlaylist":97,"./sznplayer/SznRichMediaPlayer":99,
"./sznplayer/createSznRichMediaPlayer":126,"./sznplayer/singleContentSetup":128,"./sznplayer/spl/SplResource":129,"./sznplayer/spl/createSplResource":130}],25:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={swf:"/player/dist/Player.swf?[CACHEBUSTING]",wmode:"direct",videoControls:!0,videoPreload:"",videoMuted:!1,videoCrossorigin:"",techOrder:["html","flash"],requiredTypes:['video/mp4;codecs="avc1.42c01e,mp4a.40.2"'],optimalTypes:["application/vnd.apple.mpegurl"],requestTimeout:4e3,loadAttemps:2,appendAttemps:3,qualityDict:[{minBR:0,name:"-",label:"-"},{minBR:64e3,name:"64k",label:"64k"},{minBR:24e4,name:"240k",label:"240k"},{minBR:44e4,name:"440k",label:"440k"},{minBR:64e4,name:"640k",label:"640k"},{minBR:104e4,name:"1040k",label:"1040k"},{minBR:154e4,name:"1540k",label:"1540k"},{minBR:204e4,name:"2040k",label:"2040k"}],maxNext:42,loadOnSource:!1,preferredBitrate:16e5,vpaidResponseTimeout:2e3,stopBufferingOnPause:!1}},{}],26:[function(t,i,n){(function(i){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.techOrder&&!Array.isArray(e.techOrder))throw D.createError(f.default.SETTING,'Option "techOrder" must be an array.');if(e.requiredTypes&&!Array.isArray(e.requiredTypes))throw D.createError(f.default.SETTING,'Option "requiredTypes" must be an array.');var t={order:e.techOrder||l.default.techOrder,required:e.requiredTypes||l.default.requiredTypes,optimalTypes:e.optimalTypes||l.default.optimalTypes,swf:e.swf||l.default.swf,wmode:e.wmode||l.default.wmode,loadAttemps:e.loadAttemps||l.default.loadAttemps,appendAttemps:e.appendAttemps||l.default.appendAttemps,id:e.id||c.default.generateId("me"),element:e.element||"",elmId:e.elmId||"",maxNext:e.maxNext||l.default.maxNext,loadOnSource:"undefined"!=typeof e.loadOnSource?e.loadOnSource:l.default.loadOnSource,preferredBitrate:e.preferredBitrate||l.default.preferredBitrate,controls:"controls"in e?!!e.controls:l.default.videoControls,preload:"preload"in e?e.preload:l.default.videoPreload,muted:"muted"in e?!!e.muted:l.default.videoMuted,crossorigin:"crossorigin"in e?e.crossorigin:l.default.videoCrossorigin,stopBufferingOnPause:"stopBufferingOnPause"in e?e.stopBufferingOnPause:l.default.stopBufferingOnPause},i={maxAttemps:l.default.loadAttemps,timeout:l.default.requestTimeout},n=new A.default(new m.default(c.default,i,m.default.PROFILE_PLAYLIST),new b.default(new C.default,r.default)),o=new m.default(c.default,i,m.default.PROFILE_TEXTTRACK),s=new k.default(n,new N.default(l.default.qualityDict)),a=E.default.create(_.default,c.default,o,s,t);return a}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var s=t("url"),r=e.interopRequireDefault(s),a=t("./config"),l=e.interopRequireDefault(a),u=t("../common/utils"),c=e.interopRequireDefault(u),d=t("../common/env"),_=e.interopRequireDefault(d),h=t("../common/errors"),f=e.interopRequireDefault(h),p=t("../common/LoaderFactory"),m=e.interopRequireDefault(p),v=t("./tech/Tech"),y=(e.interopRequireDefault(v),t("./tech/techFactory")),E=e.interopRequireDefault(y),g=t("./streaming/QualityListService"),k=e.interopRequireDefault(g),T=t("./hls/M3uTokenizer"),C=e.interopRequireDefault(T),S=t("./hls/M3uParser"),b=e.interopRequireDefault(S),P=t("./hls/M3uResource"),A=e.interopRequireDefault(P),R=t("./streaming/QualityListFactory"),N=e.interopRequireDefault(R),D=new f.default.ErrorFactory(f.default.createSourceName(i))}).call(this,"/src\\js\\mediaplayer\\createMediaPlayer.js")},{"../common/LoaderFactory":12,"../common/env":17,"../common/errors":18,"../common/utils":23,"./config":25,"./hls/M3uParser":27,"./hls/M3uResource":28,"./hls/M3uTokenizer":29,"./streaming/QualityListFactory":37,"./streaming/QualityListService":38,"./tech/Tech":42,"./tech/techFactory":51,url:6}],27:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../streaming/QualityList"),s=e.interopRequireDefault(o),r=t("../../common/errors"),a=e.interopRequireDefault(r),l=new a.default.ErrorFactory(a.default.createSourceName(i)),u="master",c="media",d=function(){var e="[^=]*",t="\"[^\"]*\"|'[^']*'|[^,]*",i="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+i+")")}(),_=function(){function t(i,n){e.classCallCheck(this,t),this._tokenizer=i,this._url=n}return e.createClass(t,null,[{key:"_setDefaultsIfNecessary",value:function(e,t){e===c&&(t.isChanged=!0,t.isDiscontinuity=!1,"undefined"==typeof t.sequence&&(t.sequence=0),"undefined"==typeof t.dsequence&&(t.dsequence=0),"undefined"==typeof t.allowCache&&(t.allowCache=!0),"undefined"==typeof t.isLive&&(t.isLive=!0),"undefined"==typeof t.isEvent&&(t.isEvent=!1))}}]),e.createClass(t,[{key:"parse",value:function(e,i){var n=null,o={},r="",a=null,l=0,d=null,_=null;for(this._tokenizer.setInput(i);n=this._tokenizer.getToken();)if(n.type===this._tokenizer.TAG){var h=this.parseTag(n.value),f=h.name,p=h.attributes;if("#EXTINF"===f){this._checkPlaylistType(r,c),r=c;var m=this.parseInfAttributes(p);d={},d.duration=s.default.fromMicroseconds(s.default.toMicroseconds(m[0])),"undefined"==typeof o.duration&&(o.duration=0),d.start=o.duration,o.duration=s.default.fromMicroseconds(s.default.toMicroseconds(o.duration)+s.default.toMicroseconds(d.duration)),m[1]&&(d.title=m[1]),a&&(d.key=a)}else if("#EXT-X-ENDLIST"===f)o.isLive=!1;else if("#EXT-X-PLAYLIST-TYPE"===f)o.isEvent="EVENT"===p;else if("#EXT-X-STREAM-INF"===f){this._checkPlaylistType(r,u),r=u;var v=this.parseKeyValueAttributes(p);if(_={},v.BANDWIDTH&&(_.bandwidth=_.bitrate=parseInt(v.BANDWIDTH,10)),v["PROGRAM-ID"]&&(_.programId=parseInt(v["PROGRAM-ID"],10)),v.CODECS&&(_.codecs=v.CODECS),v.RESOLUTION){var y=v.RESOLUTION.split("x");_.resolution={width:parseInt(y[0],10),height:parseInt(y[1],10)}}}else if("#EXT-X-VERSION"===f)o.version=parseInt(p,10);else if("#EXT-X-TARGETDURATION"===f)o.targetDuration=parseFloat(p,10);else if("#EXT-X-MEDIA-SEQUENCE"===f)o.sequence=parseInt(p,10);else if("#EXT-X-DISCONTINUITY-SEQUENCE"===f)o.dsequence=parseInt(p,10);else if("#EXT-X-KEY"===f){var E=this.parseKeyValueAttributes(p);a={},a.method=E.METHOD,E.URI&&(a.uri=E.URI),E.IV&&(a.iv=E.IV)}else"#EXT-X-PROGRAM-DATE-TIME"===f?o.programDateTime=new Date(p):"#EXT-X-ALLOW-CACHE"===f?o.allowCache="YES"===p:"#EXT-X-DISCONTINUITY"===f&&l++}else _?(_.url=this._resolveUrl(e,n.value),o.playlists=o.playlists||[],o.playlists.push(_),_=null):(d.url=this._resolveUrl(e,n.value),"undefined"==typeof o.dsequence&&(o.dsequence=0),d.discontinuity=o.dsequence+l,o.segments=o.segments||[],o.segments.push(d),d=null);return t._setDefaultsIfNecessary(r,o),o}},{key:"parseTag",value:function(e){var t="",i="";if(/#[A-Z-]+:/.test(e)){var n=e.indexOf(":");t=e.substring(0,n),i=e.substring(n+1)}else t=e;return{name:t,attributes:i}}},{key:"parseInfAttributes",value:function(e){if(!e)throw l.createError(a.default.GENERAL,"EXTINF tag must have attributes.");var t=e.indexOf(",");if(t===-1)throw l.createError(a.default.GENERAL,"Invalid EXTINF tag attributes.");return[parseFloat(e.substring(0,t),10),e.substring(t+1)]}},{key:"parseKeyValueAttributes",value:function(e){if(!e)return{};for(var t=e.split(d),i={},n=t.length-1;n>=0;n--){var o=t[n];if(""!==o){var s=o.indexOf("="),r=o.substring(0,s),a=o.substring(s+1);r=r.replace(/^\s+|\s+$/g,""),a=a.replace(/^\s+|\s+$/g,""),a=a.replace(/^['"]|['"]$/g,""),i[r]=a}}return i}},{key:"_checkPlaylistType",value:function(e,t){if(e&&e!==t)throw l.createError(a.default.GENERAL,"A HLS Playlist must contain only segments or only another playlists.")}},{key:"_resolveUrl",value:function(e,t){return decodeURI(this._url.resolve(e,t))}}]),t}();n.default=_}).call(this,"/src\\js\\mediaplayer\\hls\\M3uParser.js")},{"../../common/errors":18,"../streaming/QualityList":36}],28:[function(t,i,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(i,n){e.classCallCheck(this,t),this._loader=null,this._loaderFactory=i,this._m3uParser=n}return e.createClass(t,[{key:"get",value:function(e){var t=this;return this._loader=this._loaderFactory.create(),this._loader.load(e).then(function(i){return t._m3uParser.parse(e,i.data)})}},{key:"abort",value:function(){var e=!1;return this._loader&&(e=this._loader.abort(),this._loader=null),e}}]),t}();n.default=i}).call(this,"/src\\js\\mediaplayer\\hls\\M3uResource.js")},{}],29:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){e.classCallCheck(this,t),this.TAG="tag",this.URI="uri",this._lines=null,this._pointer=-1}return e.createClass(t,[{key:"setInput",value:function(e){this._lines=e.split("\n"),this._pointer=0}},{key:"getToken",value:function(){for(var e="",t=null,i=null;"undefined"!=typeof(e=this._lines.shift())&&(this._pointer++,e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),!(e.length>0||"#"===e[0]&&"#EXT"!==e[0]||0===e.indexOf("#EXT"))););return"undefined"==typeof e?null:(t="#"!==e[0]?this.URI:this.TAG,i={type:t,value:e},{type:t,value:e})}}]),t}();n.default=o},{}],30:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/Component"),s=e.interopRequireDefault(o),r=t("../tech/PlaybackElement"),a=e.interopRequireDefault(r),l=t("../../common/errors"),u=e.interopRequireDefault(l),c=new u.default.ErrorFactory(u.default.createSourceName(i)),d=function(t){function i(t,n,o){e.classCallCheck(this,i);var s=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return s._adaptiveStreamModel=t,s._qualityListService=n,s._playbackElement=o,s._elementEventsMap=new Map([[a.default.EVENT_SOURCE_SET,s._handleSourceSet],[a.default.EVENT_SOURCE_CANCEL,s._handleSourceCancel],[a.default.EVENT_QUALITY_SET,s._handleQualitySet],[a.default.EVENT_BUFFER_READY,s._handleBufferReady],[a.default.EVENT_LOADED_SEGMENT,s._handleLoaded],[a.default.EVENT_LOADING_PROGRESS,s._handleLoadProgress],[a.default.EVENT_LOADING_FAILED,s._handleFailedLoad],[a.default.EVENT_LOADING_ABORTED,s._handleAbortedLoad],[a.default.EVENT_DESTROY,s._handleDestroy]]),s._elementNoLoadSourceMap=new Map([[a.default.EVENT_PLAY,s._handleNoLoadSource]]),s._isProcessing=!1,s._isLoadAborting=!1,s._isLoadAfterAbort=!1,s._isFirstLoad=!0,s._maxNext=null,s._lastLoadedSegmentIdx=null,s._isSourcePreload=null,s._isNoLoadSourceHandled=!1,s._seekPending=null,s._liveTimer=null,s._qualityItemData=null,s.bindAll(s._elementNoLoadSourceMap),s.bindAll(s._elementEventsMap),s.addListeners(s._playbackElement,s._elementEventsMap),s}return e.inherits(i,t),e.createClass(i,[{key:"destroy",value:function(){var e=Object.keys(this);this.removeListeners(this._playbackElement,this._elementEventsMap),this.removeListeners(this._playbackElement,this._elementNoLoadSourceMap);var t=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;this[r]=null}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"_processNextStep",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=this._playbackElement.getCurrentTime(),s=this._playbackElement.getBuffered(o),r=s.end,a=this._playbackElement.getResolvedSource(),l=this._playbackElement.getQuality(),d=a.getQuality();if(null!==t){var _=a.getSegmentIdx(r);if(_>-1&&_<=t&&(this._maxNext=Math.max(s.length/2,i.MIN_MAX_NEXT),this._lastLoadedSegmentIdx===t)){var h=c.createError(u.default.GENERAL,"Attempt to fill buffer has failed.");return this._playbackElement.handleError(h),void(this._isProcessing=!1)}}if(this._lastLoadedSegmentIdx=t,this._qualityItemData){var f=this._qualityListService.refillQuality(a,this._qualityItemData,r);this._playbackElement.updateSourceSrc(d,f),this._qualityItemData=null}if(!this._adaptiveStreamModel.shouldDownloadNext(a.getDuration(),o,s,l,this._maxNext,this._playbackElement.isPaused()))return void(this._isProcessing=!1);if(this._maxNext=null,null===l){var p=null!==d?a.getSourceSrc(d):null;l=this._adaptiveStreamModel.getQuality(this._playbackElement.isPlaying(),this._playbackElement.isSeeking(),this._playbackElement.getStatsHistory(),this._playbackElement.getDefaultQuality(),s,!p||n!==-1||p.isLive&&(!p.isEvent||this._isFirstLoad)?-1:a.getSegmentIdx(r))}if(l===-1){var m=c.createError(u.default.SOURCE,"No valid quality available.");return this._playbackElement.handleError(m),void(this._isProcessing=!1)}this._qualityListService.isQualityFilled(a,l)||(this._liveTimer&&(clearTimeout(this._liveTimer),this._liveTimer=null),this._qualityItemData=null),this._qualityListService.fillQuality(a,l,r).then(function(t){var i=t.getSourceSrc(l),s=e._playbackElement.getStartTime();if(null!==s&&e._isFirstLoad){var a=t.getSegmentIdx(s);a>-1&&(r=s,e._seekPending=r)}else if(i.isLive&&i.isEvent&&e._isFirstLoad){var u=t.getDuration(!0);if(u){var c=t.getSegmentIdx(u);c>-1&&(r=i.segments[c].start,e._seekPending=r)}}var d=t.getSegmentIdx(r);null===e._seekPending&&n!==-1&&(i.isLive&&d<0?(d=0,r=i.segments[d].start):r=o,e._seekPending=r),d>-1&&!t.isDisabled(l,d)?(e._playbackElement.updateSourceSrc(l,i),e._playbackElement.loadSegment(l,d)):e._isProcessing=!1,i.isLive&&!e._liveTimer&&e._setReload(i)},function(t){"abort"!==t.type&&e._handleInvalidQualityItem(l)}).catch(function(t){e._handleFatalError(t)})}},{key:"_reloadQuality",value:function(){var e=this,t=this._playbackElement.getResolvedSource();if(t){var i=t.getQuality();this._qualityListService.loadQuality(t,i).then(function(n){if(e._qualityItemData=n,e._liveTimer&&(clearTimeout(e._liveTimer),e._liveTimer=null),n.isLive){var o=t.getSourceSrc(i);n.isChanged=o.sequence!==n.sequence,e._setReload(n)}e._isProcessing||(e._isProcessing=!0,e._processNextStep())},function(n){var o=t.getSourceSrc(i);e._setReload(o)}).catch(function(t){e._handleFatalError(t)})}}},{key:"_setReload",value:function(e){var t=e.targetDuration*(e.isChanged?1e3:500);this._liveTimer=setTimeout(this._reloadQuality.bind(this),t)}},{key:"_handleSourceSet",value:function(e){this._adaptiveStreamModel.setQualityList(e.source),this._maxNext=null,this._isNoLoadSourceHandled=!1,this._isLoadAborting=!1,this._isLoadAfterAbort=!1,this._isFirstLoad=!0,this._isSourcePreload=this._playbackElement.getSourcePreload(),null===this._isSourcePreload&&(this._isSourcePreload=this._adaptiveStreamModel.isLoadOnSource()),this._isSourcePreload?(this._isProcessing=!0,this._processNextStep()):(this._isProcessing=!1,this.addListeners(this._playbackElement,this._elementNoLoadSourceMap))}},{key:"_handleSourceCancel",value:function(){this._qualityListService.abortFill(),this._isProcessing=!1}},{key:"_handleQualitySet",value:function(e){(this._isSourcePreload||this._isNoLoadSourceHandled)&&(this._qualityListService.abortFill(),this._isProcessing=!0,this._maxNext=null,this._processNextStep(null,e.qualityIdx))}},{key:"_handleBufferReady",value:function(){this._isProcessing||(this._isProcessing=!0,this._processNextStep())}},{key:"_handleLoaded",value:function(e){var t=e.qualityIdx,i=e.segmentIdx,n=this._playbackElement.getResolvedSource(),o=n.getSourceSrc(t);if(o.isDiscontinuity=!1,this._isLoadAfterAbort=!1,this._isProcessing=!0,null!==this._seekPending){if(!this._playbackElement.seekInBuffer(this._seekPending)){var s=c.createError(u.default.MEDIA,"Seek in buffer failed.");return this._playbackElement.handleError(s),this._seekPending=null,void(this._isFirstLoad=!1)}this._seekPending=null}this._isFirstLoad=!1,this._processNextStep(i)}},{key:"_handleLoadProgress",value:function(e){var t=e.stats,n=e.qualityIdx,o=(e.segmentIdx,this._playbackElement.getResolvedSource()),s=o.getSourceSrc(n);if(!(s.isLive||this._isLoadAfterAbort||this._playbackElement.isSeeking()||!this._playbackElement.isPlaying()||null!==this._playbackElement.getQuality()||this._playbackElement.isBufferEmpty())&&n){var r=this._playbackElement.getCurrentTime(),a=this._playbackElement.getBuffered(r);t.estimatedRemainingTime-a.length>i.MIN_TIME_DIFFERENCE&&t.loaded>i.MIN_JUDGED_LOADED?(this._playbackElement.addStats({bandwidth:a.length/t.estimatedRemainingTime*t.bandwidth*i.BANDWIDTH_FACTOR_CRITICAL}),this._isLoadAborting=!0,this._playbackElement.loadAbort()):t.duration+t.estimatedRemainingTime-t.segmentDuration>i.MIN_TIME_DIFFERENCE&&this._adaptiveStreamModel.isBufferLow(a)&&t.loaded>i.MIN_JUDGED_LOADED&&(this._playbackElement.addStats({bandwidth:t.segmentDuration/(t.duration+t.estimatedRemainingTime)*t.bandwidth*i.BANDWIDTH_FACTOR_LOW}),this._isLoadAborting=!0,this._playbackElement.loadAbort())}}},{key:"_handleFailedLoad",value:function(e){var t=e.qualityIdx,i=e.segmentIdx,n=this._playbackElement.getResolvedSource(),o=n.getSourceSrc(t);n.disable(t,o.isLive&&!o.isEvent?-1:i),o.isLive&&!o.isEvent||null===this._playbackElement.getQuality()?(this._isLoadAfterAbort=!1,this._isProcessing=!0,this._processNextStep()):(this._isProcessing=!1,this._playbackElement.setQuality(null))}},{key:"_handleAbortedLoad",value:function(){this._isProcessing=!1,this._isLoadAborting&&(this._isLoadAborting=!1,this._isLoadAfterAbort=!0,this._isProcessing=!0,this._processNextStep())}},{key:"_handleDestroy",value:function(){this._liveTimer&&(clearTimeout(this._liveTimer),this._liveTimer=null)}},{key:"_handleNoLoadSource",value:function(){if(this._playbackElement.getResolvedSource())this._isProcessing=!0,this._isNoLoadSourceHandled=!0,this.removeListeners(this._playbackElement,this._elementNoLoadSourceMap),this._processNextStep();else{var e=c.createError(u.default.SOURCE,"No source specified.");this._playbackElement.handleError(e)}}},{key:"_handleInvalidQualityItem",value:function(e){var t=this._playbackElement.getResolvedSource();t&&(t.disable(e),this._isProcessing=!0,this._processNextStep())}},{key:"_handleFatalError",value:function(e){this._isProcessing=!1,this._playbackElement.handleError(e)}}]),i}(s.default);d.MIN_JUDGED_LOADED=153600,d.MIN_TIME_DIFFERENCE=.5,d.BANDWIDTH_FACTOR_CRITICAL=.8,d.BANDWIDTH_FACTOR_LOW=.9,d.MIN_MAX_NEXT=10,n.default=d}).call(this,"/src\\js\\mediaplayer\\streaming\\AdaptiveStreamController.js")},{"../../common/Component":10,"../../common/errors":18,"../tech/PlaybackElement":41}],31:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./AdaptiveStreamModel"),s=e.interopRequireDefault(o),r=t("./AdaptiveStreamController"),a=e.interopRequireDefault(r),l=function(){function t(i,n,o,s){e.classCallCheck(this,t),this._env=i,this._utils=n,this._qualityListService=o,this._options=s}return e.createClass(t,[{key:"create",value:function(e){var t=new s.default({loadOnSource:this._options.loadOnSource,maxNext:this._options.maxNext,resolution:this._env.getScreenResolution(),loadSegmentsWhilePaused:!this._options.stopBufferingOnPause}),i=new a.default(t,this._qualityListService,e);return i}}]),t}();n.default=l},{"./AdaptiveStreamController":30,"./AdaptiveStreamModel":32}],32:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./NativeStreamModel"),s=e.interopRequireDefault(o),r=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,[{key:"shouldDownloadNext",value:function(e,t,i,n,o,s){var r=null!==o?o:this._settings.maxNext;return(!e||i.end<e)&&(null===r||i.length<r)&&(!s||!i.length||this._settings.loadSegmentsWhilePaused)}}]),i}(s.default);n.default=r}).call(this,"/src\\js\\mediaplayer\\streaming\\AdaptiveStreamModel.js")},{"./NativeStreamModel":35}],33:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/Component"),s=e.interopRequireDefault(o),r=t("../tech/PlaybackElement"),a=e.interopRequireDefault(r),l=t("../../common/errors"),u=e.interopRequireDefault(l),c=function(t){function i(t,n,o){e.classCallCheck(this,i);var s=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return s._nativeStreamModel=t,s._qualityListService=n,s._playbackElement=o,s._elementEventsMap=new Map([[a.default.EVENT_SOURCE_SET,s._handleSourceSet],[a.default.EVENT_QUALITY_SET,s._handleQualitySet],[a.default.EVENT_LOADED_META,s._handleLoadedMetadata],[a.default.EVENT_DURATION_CHANGE,s._handleDurationChange]]),s._elementNoLoadSourceMap=new Map([[a.default.EVENT_PLAY,s._handleNoLoadSource]]),s._isProcessing=!1,s._isSourcePreload=null,s._isNoLoadSourceHandled=!1,s._isQualitySet=!1,s._isMetadataLoaded=!1,s._wasPlaying=null,s._wasPlayingSent=null,s._seekPending=null,s.bindAll(s._elementNoLoadSourceMap),s.bindAll(s._elementEventsMap),s.addListeners(s._playbackElement,s._elementEventsMap),s}return e.inherits(i,t),e.createClass(i,[{key:"destroy",value:function(){var e=Object.keys(this);this.removeListeners(this._playbackElement,this._elementEventsMap),this.removeListeners(this._playbackElement,this._elementNoLoadSourceMap);var t=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;this[r]=null}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"_processNextStep",value:function(){var e=this._playbackElement.getResolvedSource(),t=this._playbackElement.getQuality();if(null===t&&!e.isAdaptive()){var i=this._playbackElement.getDefaultQuality();t=null===i?this._nativeStreamModel.getQuality(this._playbackElement.isPlaying(),this._playbackElement.isSeeking(),this._playbackElement.getStatsHistory()):i,this._playbackElement.setDefaultQuality(t)}if(t===-1){var n=Error("[NativeStreamController] No valid quality available.");return void this._playbackElement.handleError(n,u.default.SOURCE)}this._playbackElement.loadSource(t,this._seekPending),this._isProcessing=!1}},{key:"_handleSourceSet",value:function(e){this._nativeStreamModel.setQualityList(e.source),this._isNoLoadSourceHandled=!1,this._isSourcePreload=this._playbackElement.getSourcePreload(),null===this._isSourcePreload&&(this._isSourcePreload=this._nativeStreamModel.isLoadOnSource()),this._isSourcePreload?(this._isProcessing=!0,this._isQualitySet=!1,this._isMetadataLoaded=!1,this._seekPending=this._playbackElement.getStartTime(),this._processNextStep()):(this._isProcessing=!1,this.addListeners(this._playbackElement,this._elementNoLoadSourceMap))}},{key:"_handleQualitySet",value:function(e){this._isProcessing||!this._isSourcePreload&&!this._isNoLoadSourceHandled||(this._isProcessing=!0,this._isMetadataLoaded=!1,this._isQualitySet=!0,this._seekPending=this._playbackElement.getCurrentTime(),this._wasPlaying="wasPlaying"in e?e.wasPlaying:null,this._wasPlayingSent="wasPlayingSent"in e&&e.wasPlayingSent,this._processNextStep())}},{key:"_handleNoLoadSource",value:function(){if(this._playbackElement.getResolvedSource())this._isProcessing=!0,this._isQualitySet=!1,this._isMetadataLoaded=!1,this._seekPending=this._playbackElement.getStartTime(),this._isNoLoadSourceHandled=!0,this.removeListeners(this._playbackElement,this._elementNoLoadSourceMap),this._processNextStep();else{var e=Error("[NativeStreamController] No source specified.");this._playbackElement.handleError(e,u.default.SOURCE)}}},{key:"_handleLoadedMetadata",value:function(){this._isMetadataLoaded=!0,this._handlePendingSeek()}},{key:"_handleDurationChange",value:function(){this._handlePendingSeek()}},{key:"_handlePendingSeek",value:function(){null!==this._seekPending&&this._isMetadataLoaded&&this._seekPending<=this._playbackElement.getDuration()&&(this._isQualitySet&&null!==this._wasPlaying?(this._playbackElement.seekInBuffer(this._seekPending),this._wasPlaying&&this._playbackElement.play(!this._wasPlayingSent)):this._isQualitySet||this._playbackElement.seekInBuffer(this._seekPending),this._seekPending=null)}}]),i}(s.default);n.default=c}).call(this,"/src\\js\\mediaplayer\\streaming\\NativeStreamController.js")},{"../../common/Component":10,"../../common/errors":18,"../tech/PlaybackElement":41}],34:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./NativeStreamModel"),s=e.interopRequireDefault(o),r=t("./NativeStreamController"),a=e.interopRequireDefault(r),l=function(){function t(i,n,o,s){e.classCallCheck(this,t),this._env=i,this._utils=n,this._qualityListService=o,this._options=s}return e.createClass(t,[{key:"create",value:function(e){var t=new s.default({loadOnSource:this._options.loadOnSource,resolution:this._env.getScreenResolution(),preferredBitrate:this._options.preferredBitrate}),i=new a.default(t,this._qualityListService,e);return i}}]),t}();n.default=l},{"./NativeStreamController":33,"./NativeStreamModel":35}],35:[function(t,i,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(i){e.classCallCheck(this,t),this._settings=i,this._defaultSettings=Object.assign({},this._settings),this._qualityList=null}return e.createClass(t,[{key:"isLoadOnSource",value:function(){return this._settings.loadOnSource}},{key:"isBufferLow",value:function(e){return e.length<this._settings.maxNext/4}},{key:"setQualityList",value:function(e){this._qualityList=e,this._disableQualitiesByResolution()}},{key:"getQuality",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1,a=(arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,0);if(this._isEmpty(r))a=-1;else if(n&&n.length&&this._hasBitrates()){var l=n[n.length-1],u=l.bandwidth*t.BANDWIDTH_REDUCE;if(e&&l.duration&&s&&s.length<this._settings.maxNext/3)if(i&&!s.length){var c=this._qualityList.getQualityItem(l.qualityIdx),d=this._qualityList.getQualityItem(l.qualityIdx>t.MAX_SEEK_QUALITY_DROP?l.qualityIdx-t.MAX_SEEK_QUALITY_DROP:0);u=Math.max(Math.min(c.source.bitrate*(t.MAX_TOLERABLE_SEEK_TIME/l.duration),u),d.source.bitrate)}else u=Math.min(l.bandwidth*(l.segmentDuration/l.duration),u);a=this._getFitQualityIdx(u,r)}else a=null!==o?o:this._hasBitrates()&&this._settings.preferredBitrate?this._getFitQualityIdx(this._settings.preferredBitrate,r):this._getMiddleQualityIdx(r);return a}},{key:"_disableQualitiesByResolution",value:function(){for(var e=0,i=this._qualityList.getLength();e<i;e++){var n=this._qualityList.getSourceResolution(e);n&&n.width>this._settings.resolution.width*t.RESOLUTION_FACTOR&&n.height>this._settings.resolution.height*t.RESOLUTION_FACTOR&&this._qualityList.disable(e)}}},{key:"_isEmpty",value:function(e){if(this._qualityList)for(var t=this._qualityList.getLength()-1;t>=0;t--)if(!this._qualityList.isDisabled(t,e))return!1;return!0}},{key:"_getMiddleQualityIdx",value:function(e){for(var t=Math.floor((this._qualityList.getLength()-1)/2),i=t;i>=0;i--)if(!this._qualityList.isDisabled(i,e))return i;for(var n=t+1,o=this._qualityList.getLength();n<o;n++)if(!this._qualityList.isDisabled(n,e))return n;return-1}},{key:"_getFitQualityIdx",value:function(e,t){for(var i=this._qualityList.getLength()-1;i>=0;i--)if(!this._qualityList.isDisabled(i,t)){var n=this._qualityList.getQualityItem(i);if(n.source.bitrate<=e)return i}return 0}},{key:"_hasBitrates",value:function(){for(var e=this._qualityList.getLength()-1;e>=0;e--){var t=this._qualityList.getQualityItem(e);if(!t.source||!t.source.bitrate)return!1}return!0}}]),t}();i.EVENT_ERROR="error",i.EVENT_LOAD="load",i.BANDWIDTH_REDUCE=.85,i.RESOLUTION_FACTOR=1.15,i.MAX_TOLERABLE_SEEK_TIME=2,i.MAX_SEEK_QUALITY_DROP=2,n.default=i}).call(this,"/src\\js\\mediaplayer\\streaming\\NativeStreamModel.js")},{}],36:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/errors"),s=e.interopRequireDefault(o),r=new s.default.ErrorFactory(s.default.createSourceName(i)),a=function(){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.classCallCheck(this,t),!i||!Array.isArray(i)||!i.length)throw r.createError(s.default.SOURCE,"Invalid data.");if(i.some(function(e){return!Array.isArray(e.source)||!e.source.length}))throw r.createError(s.default.SOURCE,"Invalid data source.");if(i.some(function(e){return e.source.some(function(e){return!e.type||"undefined"==typeof e.src})}))throw r.createError(s.default.SOURCE,"Invalid data source - missing attribute src or type.");this.type="quality",this.data=i,this.adaptiveSource=n,this._qualityIdx=null,this.data.sort(function(e,t){return e.source[0].bitrate-t.source[0].bitrate})}return e.createClass(t,[{key:"isAdaptive",value:function(){return!!this.getAdaptiveType()}},{key:"getAdaptiveType",value:function(){return this.adaptiveSource.type||""}},{key:"getData",value:function(){return this.data}},{key:"getLength",value:function(){return this.data.length}},{key:"getName",value:function(e){return this.data[e].name}},{key:"getSource",value:function(e){return this.data[e].source}},{key:"getSourceSrc",value:function(e){return this.data[e].source.src}},{key:"getSourceResolution",value:function(e){return this.data[e].source.resolution}},{key:"getSegmentIdx",value:function(e){return this.isAdaptive()&&null!==this._qualityIdx?t.findSegmentIdx(e,this.data[this._qualityIdx].source.src.segments):0}},{key:"getDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isAdaptive()||null===this._qualityIdx)return NaN;if(e){var i=this.data[this._qualityIdx].source.src.segments.length;return i<t.MIN_LIVE_SEGMENTS_LENGTH?NaN:this.data[this._qualityIdx].source.src.segments[i-t.MIN_LIVE_SEGMENTS_LENGTH].start}return this.data[this._qualityIdx].source.src.duration}},{key:"getQualityItem",value:function(e){return this.data[e]}},{key:"getAvailableQualitySettings",value:function(){var e=this.data.map(function(e,t){return{name:e.name,idx:t}});return this.isAdaptive()&&(e=e.concat({name:"",idx:null})),e}},{key:"getQualityItemUrl",value:function(e){return null!==e?this.data[e].url:this.isAdaptive()?this.adaptiveSource.src:null}},{key:"getQuality",value:function(){return this._qualityIdx}},{key:"isDisabled",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return!!this.data[e]._disabled||!!(t>-1&&this.data[e]._blackList)&&!!this.data[e]._blackList[t]}},{key:"isLive",value:function(){return null!==this._qualityIdx&&this.data[this._qualityIdx].source.src.isLive}},{key:"isEvent",value:function(){return null!==this._qualityIdx&&this.data[this._qualityIdx].source.src.isEvent}},{key:"hasSourceSrc",value:function(e){return!!this.data[e].source.src}},{key:"setSourceSrc",value:function(e,t){this._qualityIdx=e,this.data[e]._disabled=!1,this.data[e]._blackList=null,this.data[e].source.src=t}},{key:"setSource",value:function(e,t){t?this.data[e].source=t:this.data.splice(e,1)}},{key:"disable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t===-1?this.data[e]._disabled=!0:(this.data[e]._blackList=this.data[e]._blackList||{},this.data[e]._blackList[t]=!0)}},{key:"enable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t===-1?this.data[e]._disabled=!1:this.data[e]._blackList&&(this.data[e]._blackList[t]=!1)}}],[{key:"toMicroseconds",value:function(e){var t=String(e),i=t.indexOf("."),n=6;if(i>-1){var o=t.substring(0,i),s=t.substring(i+1,i+1+n);return parseInt(o,10)*Math.pow(10,n)+parseInt(s,10)*Math.pow(10,n-s.length)}return e*Math.pow(10,n)}},{key:"fromMicroseconds",value:function(e){return e/1e6}},{key:"findSegmentIdx",value:function(e,i){for(var n=t.toMicroseconds(e),o=0;o<i.length;o++){var s=t.toMicroseconds(i[o].start),r=t.toMicroseconds(i[o].duration);if(s<=n&&s+r>n)return o}return-1}}]),t}();a.MIN_LIVE_SEGMENTS_LENGTH=3,n.default=a}).call(this,"/src\\js\\mediaplayer\\streaming\\QualityList.js")},{"../../common/errors":18}],37:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/errors"),s=e.interopRequireDefault(o),r=t("../streaming/QualityList"),a=e.interopRequireDefault(r),l=new s.default.ErrorFactory(s.default.createSourceName(i)),u=function(){
function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.classCallCheck(this,t),this._dict=i}return e.createClass(t,[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.playlists)throw l.createError(s.default.GENERAL,"There isn't any playlist file in the master playlist.");for(var i=[],n=0,o=e.playlists.length;n<o;n++){var r=e.playlists[n],u=this._getMeta(r,n);i.push({name:u.name,label:u.label,url:r.url,source:[{src:null,type:"video/mp2t",codecs:r.codecs,bitrate:r.bitrate,resolution:r.resolution,width:"",height:""}]})}return new a.default(i,t)}},{key:"_getMeta",value:function(e,t){var i=e.name||(e.resolution?e.resolution.height+"p":"")||(this._dict.length?this._getMetaByDict(e).name:"")||(e.bitrate?String(e.bitrate):""),n=e.label||(e.resolution?e.resolution.height+"p":"")||(this._dict.length?this._getMetaByDict(e).label:"")||"#"+t;return{name:i,label:n}}},{key:"_getMetaByDict",value:function(e){for(var t=this._dict.length-1;t>=0;t--)if(e.bitrate>=this._dict[t].minBR)return this._dict[t]}}]),t}();n.default=u}).call(this,"/src\\js\\mediaplayer\\streaming\\QualityListFactory.js")},{"../../common/errors":18,"../streaming/QualityList":36}],38:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./QualityList"),s=e.interopRequireDefault(o),r=function(){function t(i,n){e.classCallCheck(this,t),this._resource=i,this._factory=n,this._liveTimer=null,this._isFilledPromise=null,this._isFilledResolve=null,this._isFilledReject=null,this._isFilledTimeout=null}return e.createClass(t,[{key:"get",value:function(e){var t=this;return this._resource.get(e.src).then(function(i){return t._factory.create(i,{src:e.src,type:e.type})})}},{key:"loadQuality",value:function(e,t){return this._resource.get(e.getQualityItemUrl(t)).then(function(e){return e})}},{key:"isQualityFilled",value:function(e,t){return e.hasSourceSrc(t)&&(!e.getSourceSrc(t).isLive||t===e.getQuality())}},{key:"abortFill",value:function(){if(this._isFilledPromise){this._isFilledPromise=null,this._isFilledTimeout&&(this._isFilledTimeout=null,clearTimeout(this._isFilledTimeout));var e=new Error("abortFill");e.type="abort",this._isFilledReject(e)}this._resource.abort()}},{key:"fillQuality",value:function(e,t,i){var n=this;return this._isFilledPromise=null,this.isQualityFilled(e,t)?(this._isFilledPromise=new Promise(function(e,t){n._isFilledResolve=e,n._isFilledReject=t}),this._isFilledTimeout=setTimeout(function(){n._isFilledResolve(e)},0),this._isFilledPromise):this.loadQuality(e,t).then(function(o){var s=e.getQuality(),r=null!==s?e.getSourceSrc(s):null;if(r&&!o.isEvent&&(o.isLive||r.isLive)){var a=n._mergeQuality(r,o,i);a.isChanged||(a.isChanged=e.getQuality()!==t),e.setSourceSrc(t,a)}else{if(e.hasSourceSrc(t)){var l=e.getSourceSrc(t);o.isChanged=o.segments.length!==l.segments.length}e.setSourceSrc(t,o)}return e})}},{key:"refillQuality",value:function(e,t,i){var n=void 0,o=e.getQuality();if(t.isEvent){if(e.hasSourceSrc(o)){var s=e.getSourceSrc(o);t.isChanged=t.segments.length!==s.segments.length}n=t}else n=this._mergeQuality(e.getSourceSrc(o),t,i);return e.setSourceSrc(o,n),n}},{key:"_mergeQuality",value:function(e,t,i){var n=e.segments,o=s.default.findSegmentIdx(i,n),r=void 0,a=void 0;o>-1?(r=s.default.toMicroseconds(n[o].start),a=e.sequence+o):(r=s.default.toMicroseconds(e.duration),a=e.sequence+n.length);var l=e.isDiscontinuity,u=[],c=0;if(a>=t.sequence&&a<=t.sequence+t.segments.length-1)for(c=a-t.sequence;c>0;){var d=s.default.toMicroseconds(t.segments[c-1].duration);if(!(r>=d))break;r-=d,c--}else if(t.sequence>a)l=!0;else{var _=t.sequence,h=t.sequence+t.segments.length,f=e.sequence;if(f>=_&&f<=h)for(r=s.default.toMicroseconds(e.segments[0].start),c=h===f?t.segments.length:f-_;c>0;){var p=s.default.toMicroseconds(e.segments[c-1].duration);if(!(r>=p))break;r-=p,c--}else l=!0}for(var m=Object.assign({},t),v=c;v<m.segments.length;v++)m.segments[v].start=s.default.fromMicroseconds(r),u.push(m.segments[v]),r+=s.default.toMicroseconds(m.segments[v].duration);return m.sequence=t.sequence+c,m.segments=u,m.duration=s.default.fromMicroseconds(r),m.isDiscontinuity=l,m.isChanged=t.sequence!==e.sequence,m}}]),t}();n.default=r}).call(this,"/src\\js\\mediaplayer\\streaming\\QualityListService.js")},{"./QualityList":36}],39:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Tech"),s=e.interopRequireDefault(o),r=t("./PlaybackElement"),a=e.interopRequireDefault(r),l=t("../streaming/QualityList"),u=(e.interopRequireDefault(l),t("../streaming/NativeStreamFactory")),c=e.interopRequireDefault(u),d=t("../streaming/AdaptiveStreamFactory"),_=e.interopRequireDefault(d),h=t("./flash/FlashElement"),f=e.interopRequireDefault(h),p=t("../../common/errors"),m=e.interopRequireDefault(p),v=new m.default.ErrorFactory(m.default.createSourceName(i)),y=function(t){function i(t,n,o,s,r){e.classCallCheck(this,i);var l=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,n,o,r));return l._qualityListService=s,l._element=new f.default(t,n,l._options),l._nsFactory=new c.default(l._env,l._utils,l._qualityListService,l._options),l._nativeCtrl=null,l._asFactory=new _.default(l._env,l._utils,l._qualityListService,l._options),l._adaptiveCtrl=null,l._eventsMap=new Map([[a.default.EVENT_READY,l.dispatchReady],[a.default.EVENT_SOURCE_READY,l.dispatchSourceReady],[a.default.EVENT_SOURCE_SET,l.dispatchSourceSet],[a.default.EVENT_QUALITY_SET,l.dispatchQualitySet],[a.default.EVENT_TEXT_TRACK_REQUEST,l._handleTextTrackRequest],[a.default.EVENT_TEXT_TRACK_SET,l.dispatchTextTrackSet],[a.default.EVENT_DURATION_CHANGE,l.dispatchDurationChange],[a.default.EVENT_VOLUME_CHANGE,l.dispatchVolumeChange],[a.default.EVENT_LIVE_PLAYING_CHANGE,l.dispatchLivePlayingChange],[a.default.EVENT_LIVE_STREAMING_CHANGE,l.dispatchLiveStreamingChange],[a.default.EVENT_FULLSCREEN_CHANGE,l._handleFullscreenChange],[a.default.EVENT_SKIP_VIDEO_REQUEST,l._handleSkipVideoRequest],[a.default.EVENT_VIDEO_CLICKTHROUGH,l._handleVideoClickthrough],[a.default.EVENT_VE_CLICKTHROUGH,l._handleVEClickthrough],[a.default.EVENT_VE_CLOSE,l._handleVEClose],[a.default.EVENT_LOAD_START,l.dispatchLoadStart],[a.default.EVENT_LOADED_META,l.dispatchLoadedMeta],[a.default.EVENT_LOADED_DATA,l.dispatchLoadedData],[a.default.EVENT_LOADED_SEGMENT,l.dispatchLoadedSegment],[a.default.EVENT_LOADING_FAILED,l._handleLoadingFailed],[a.default.EVENT_PROGRESS,l.dispatchProgress],[a.default.EVENT_PLAY,l.dispatchPlay],[a.default.EVENT_PLAYING,l.dispatchPlaying],[a.default.EVENT_PAUSED,l.dispatchPaused],[a.default.EVENT_TIMEUPDATE,l.dispatchTimeUpdate],[a.default.EVENT_SEEKSTART,l.dispatchSeekstart],[a.default.EVENT_SEEKING,l.dispatchSeeking],[a.default.EVENT_SEEKED,l.dispatchSeeked],[a.default.EVENT_ENDED,l.dispatchEnded],[a.default.EVENT_BUFFER_EMPTY,l.dispatchBufferEmpty],[a.default.EVENT_CAN_PLAY,l.dispatchCanPlay],[a.default.EVENT_ERROR,l._handleErrorEvent]]),l.bindAll(l._eventsMap),l.addListeners(l._element,l._eventsMap),l}return e.inherits(i,t),e.createClass(i,null,[{key:"getTechName",value:function(){return"flash"}},{key:"isSupported",value:function(){return i._isBasicSupport()}},{key:"canPlayType",value:function(e){return e.indexOf(s.default.TYPE_MP4)>-1||e===s.default.TYPE_HLS}},{key:"canPlaySource",value:function(e){var t=e.codecs?s.default.parseCodecs(e.codecs):null;if(!t)return e.type===s.default.TYPE_MP4||e.type===s.default.TYPE_TS?"maybe":"";var i=["40.2","40.5"],n=["42","4D","64"];return"undefined"!=typeof t.mp4a&&"undefined"!=typeof t.avc1&&i.indexOf(t.mp4a)!==-1&&n.indexOf(t.avc1.substr(0,2))!==-1?"probably":""}},{key:"_isBasicSupport",value:function(){try{return!!(window.navigator.mimeTypes&&window.navigator.mimeTypes["application/x-shockwave-flash"]&&window.navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin||window.ActiveXObject&&new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){return!1}}}]),e.createClass(i,[{key:"getElement",value:function(){return this._element.getElement()}},{key:"getResolvedSource",value:function(){return this._element.getResolvedSource()}},{key:"getCurrentSrc",value:function(){return this._element.getCurrentSrc()}},{key:"getTextTrack",value:function(){return this._element.getTextTrack()}},{key:"getQuality",value:function(){return this._element.getQuality()}},{key:"getVideoWidth",value:function(){return this._element.getVideoWidth()}},{key:"getVideoHeight",value:function(){return this._element.getVideoHeight()}},{key:"getVolume",value:function(){return this._element.getVolume()}},{key:"getCurrentTime",value:function(){return this._element.getCurrentTime()}},{key:"getStartTime",value:function(){return this._element.getStartTime()}},{key:"getDuration",value:function(){return this._element.getDuration()}},{key:"getBuffered",value:function(e){return this._element.getBuffered(e)}},{key:"getStatsHistory",value:function(){return this._element.getStatsHistory()}},{key:"isCustomUiCapable",value:function(){return!1}},{key:"isReady",value:function(){return this._element.isReady()}},{key:"isSourceReady",value:function(){return this._element.isSourceReady()}},{key:"isMuted",value:function(){return this._element.isMuted()}},{key:"isPlaying",value:function(){return this._element.isPlaying()}},{key:"isPaused",value:function(){return this._element.isPaused()}},{key:"isEnded",value:function(){return this._element.isEnded()}},{key:"isBufferEmpty",value:function(){return this._element.isBufferEmpty()}},{key:"isLive",value:function(){return this._element.isLive()}},{key:"isEvent",value:function(){return this._element.isEvent()}},{key:"isLivePlaying",value:function(){return this._element.isLivePlaying()}},{key:"isLiveStreaming",value:function(){return this._element.isLiveStreaming()}},{key:"hasQuality",value:function(e){var t=this._element.getResolvedSource(),i=t&&t.getAvailableQualitySettings();if(!i)return!1;for(var n=0,o=i.length;n<o;n++)if(i[n].idx===e)return!0;return!1}},{key:"isFullscreen",value:function(){return this._element.isFullscreen()}},{key:"setLocalizedTexts",value:function(e){this._element.setLocalizedTexts(e)}},{key:"setDefaultLayout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._element.setStyle(Object.assign({ad:!1},this._parseLayoutOptions(e)))}},{key:"setAdvertLayout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._element.setStyle(Object.assign({ad:!0},this._parseLayoutOptions(e)))}},{key:"hide",value:function(){var e=this._element.getElement();e.style.width="0",e.style.height="0"}},{key:"show",value:function(){var e=this._element.getElement();e.style.width="",e.style.height=""}},{key:"setLogo",value:function(e){this._element.setLogo(e)}},{key:"showLogo",value:function(){this._element.showLogo()}},{key:"hideLogo",value:function(){this._element.hideLogo()}},{key:"setActionArea",value:function(e){}},{key:"setSponsor",value:function(e){this._element.setSponsor(e)}},{key:"showSponsor",value:function(){this._element.showSponsor()}},{key:"hideSponsor",value:function(){this._element.hideSponsor()}},{key:"setPp",value:function(e){this._element.setPp(e)}},{key:"showPp",value:function(){this._element.showPp()}},{key:"hidePp",value:function(){this._element.hidePp()}},{key:"canRunVisualElementType",value:function(e){return this._element.canRunVisualElementType(e)}},{key:"getVisualElements",value:function(){return this._element.getVisualElements()}},{key:"addVisualElement",value:function(e){this._element.addVisualElement(e)}},{key:"removeVisualElement",value:function(e){this._element.removeVisualElement(e)}},{key:"removeVisualElements",value:function(){this._element.removeVisualElements()}},{key:"setVisualElementDefaultPosition",value:function(e,t){this._element.setVisualElementDefaultPosition(e,t)}},{key:"isVisualElementShown",value:function(e){return this._element.isVisualElementShown(e)}},{key:"showVisualElement",value:function(e){this._element.showVisualElement(e),this.emit(s.default.EVENT_VE_DISPLAYED,{id:e})}},{key:"showVisualElementClose",value:function(e){this._element.showVisualElementClose(e)}},{key:"hideVisualElement",value:function(e){this._element.hideVisualElement(e),this.emit(s.default.EVENT_VE_HIDDEN,{id:e})}},{key:"abortVisualElement",value:function(e){this._element.hideVisualElement(e)}},{key:"addAdPoint",value:function(e){this._element.addAdPoint(e)}},{key:"removeAdPoint",value:function(e){this._element.removeAdPoint(e)}},{key:"resetAdPoints",value:function(){this._element.resetAdPoints()}},{key:"showAdPoints",value:function(){this._element.showAdPoints()}},{key:"hideAdPoints",value:function(){this._element.hideAdPoints()}},{key:"setPoster",value:function(e){this._element.setPoster(e)}},{key:"setVolume",value:function(e){this._element.setVolume(e)}},{key:"setMute",value:function(e){this._element.setMute(e)}},{key:"setQuality",value:function(e){this._element.setQuality(e)}},{key:"setControlsHidden",value:function(e){this._element.setStyle({controlsHidden:e})}},{key:"addStats",value:function(e){this._element.addStats(e)}},{key:"play",value:function(){this._element.play()}},{key:"pause",value:function(){this._element.pause()}},{key:"seek",value:function(e){this._element.seek(e)}},{key:"seekToLive",value:function(){this._element.seekToLive()}},{key:"skip",value:function(){}},{key:"setViewMode",value:function(e){}},{key:"canConfigureFullscreen",value:function(){return!1}},{key:"configureFullscreen",value:function(e){}},{key:"enterFullscreen",value:function(){this._element.enterFullscreen()}},{key:"exitFullscreen",value:function(){this._element.exitFullscreen()}},{key:"setSourcePreload",value:function(e){this._element.setSourcePreload(e)}},{key:"installAdPlayer",value:function(e){throw v.createError(m.default.SETTING,'Method "installAdPlayer" is not implemented.')}},{key:"processSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.prepareSource(e),!e.getLength()){var i=v.createError(m.default.SOURCE,"No supported source found.");return void this.processError(i)}e.isAdaptive()?(this._nativeCtrl&&(this._nativeCtrl.destroy(),this._nativeCtrl=null),this._adaptiveCtrl||(this._adaptiveCtrl=this._asFactory.create(this._element))):(this._adaptiveCtrl&&(this._adaptiveCtrl.destroy(),this._adaptiveCtrl=null),this._nativeCtrl||(this._nativeCtrl=this._nsFactory.create(this._element))),this._element.setSource(e,t)}},{key:"processTextSource",value:function(e){this._element.setTextSource(e),this.dispatchTextSourceSet()}},{key:"processTextTrack",value:function(e,t){this._element.setTextTrack(e,t)}},{key:"processResetSource",value:function(){this._element.resetSource()}},{key:"processReset",value:function(){this._element.reset()}},{key:"processDestroy",value:function(){this._element.destroy()}},{key:"_parseLayoutOptions",value:function(e){var t={};return"undefined"!=typeof e.videoSkippableAfter&&e.videoSkippableAfter>=0&&(t.adSkipAfter=e.videoSkippableAfter),"undefined"!=typeof e.videoCountdownBefore&&e.videoCountdownBefore>=0&&(t.adCountdownBefore=e.videoCountdownBefore),"undefined"!=typeof e.adUrl&&(t.adUrl=e.adUrl),"undefined"!=typeof e.adUrlTarget&&(t.adUrlTarget=e.adUrlTarget),"undefined"!=typeof e.adLayout&&(t.adLayout=e.adLayout),"undefined"!=typeof e.seekingEnabled&&(t.seekBarDisabled=!e.seekingEnabled),"undefined"!=typeof e.settingSubtitlesVisible&&(t.subtitlesVisible=e.settingSubtitlesVisible),"undefined"!=typeof e.settingSubtitlesEnabled&&(t.subtitlesDisabled=!e.settingSubtitlesEnabled),"undefined"!=typeof e.settingQualityVisible&&(t.qualitiesVisible=e.settingQualityVisible),"undefined"!=typeof e.settingQualityEnabled&&(t.qualitiesDisabled=!e.settingQualityEnabled),"undefined"!=typeof e.settingFullscreenVisible&&(t.fullscreenVisible=e.settingFullscreenVisible),"undefined"!=typeof e.settingFullscreenEnabled&&(t.fullscreenDisabled=!e.settingFullscreenEnabled),"undefined"!=typeof e.colors&&(t.seekBarColor=e.colors.progressBar,t.subtitlesIndicatorColor=e.colors.subtitlesIndicator,t.liveIndicatorColor=e.colors.liveIndicator),t}},{key:"_handleTextTrackRequest",value:function(e){var t=e.textTrackIdx;this.setTextTrack(t)}},{key:"_handleFullscreenChange",value:function(e){this.emit(s.default.EVENT_FULLSCREEN_CHANGE,e)}},{key:"_handleSkipVideoRequest",value:function(e){this.emit(s.default.EVENT_SKIP_VIDEO_REQUEST,e)}},{key:"_handleVideoClickthrough",value:function(e){this.emit(s.default.EVENT_VIDEO_CLICKTHROUGH,e)}},{key:"_handleVEClickthrough",value:function(e){this.emit(s.default.EVENT_VE_CLICKTHROUGH,e)}},{key:"_handleVEClose",value:function(e){this.emit(s.default.EVENT_VE_CLOSE,e)}},{key:"_handleLoadingFailed",value:function(e){if("undefined"==typeof e.segmentIdx){var t=v.createError(m.default.SOURCE,'Failed to load quality "'+e.qualityIdx+'"');this.processError(t)}}},{key:"_handleErrorEvent",value:function(e){this.processError(e)}}]),i}(s.default);n.default=y}).call(this,"/src\\js\\mediaplayer\\tech\\Flash.js")},{"../../common/errors":18,"../streaming/AdaptiveStreamFactory":31,"../streaming/NativeStreamFactory":34,"../streaming/QualityList":36,"./PlaybackElement":41,"./Tech":42,"./flash/FlashElement":43}],40:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Tech"),s=e.interopRequireDefault(o),r=t("./PlaybackElement"),a=e.interopRequireDefault(r),l=t("../streaming/NativeStreamFactory"),u=e.interopRequireDefault(l),c=t("../streaming/AdaptiveStreamFactory"),d=e.interopRequireDefault(c),_=t("../streaming/QualityList"),h=(e.interopRequireDefault(_),t("./html/VideoElement")),f=e.interopRequireDefault(h),p=t("./html/TextTrackProcessor"),m=e.interopRequireDefault(p),v=t("./html/VideoElementAdaptive"),y=e.interopRequireDefault(v),E=t("../../common/errors"),g=e.interopRequireDefault(E),k=t("../../common/env"),T=e.interopRequireDefault(k),C=new g.default.ErrorFactory(g.default.createSourceName(i)),S=null,b=function(t){function i(t,n,o,s,r){e.classCallCheck(this,i);var l=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,n,o,r));return l._qualityListService=s,l._element=new f.default(t,n,l._options),l._elementAdaptive=y.default,l._textTrackIdx=null,l._ttProcessor=new m.default(l._element),l._nsFactory=new u.default(l._env,l._utils,l._qualityListService,l._options),l._nativeCtrl=null,l._asFactory=new d.default(l._env,l._utils,l._qualityListService,l._options),l._adaptiveCtrl=null,l._eventsMap=new Map([[a.default.EVENT_READY,l.dispatchReady],[a.default.EVENT_SOURCE_READY,l.dispatchSourceReady],[a.default.EVENT_SOURCE_SET,l.dispatchSourceSet],[a.default.EVENT_QUALITY_SET,l.dispatchQualitySet],[a.default.EVENT_DURATION_CHANGE,l.dispatchDurationChange],[a.default.EVENT_VOLUME_CHANGE,l.dispatchVolumeChange],[a.default.EVENT_LIVE_PLAYING_CHANGE,l.dispatchLivePlayingChange],[a.default.EVENT_LIVE_STREAMING_CHANGE,l.dispatchLiveStreamingChange],[a.default.EVENT_LOAD_START,l.dispatchLoadStart],[a.default.EVENT_LOADED_META,l.dispatchLoadedMeta],[a.default.EVENT_LOADED_DATA,l.dispatchLoadedData],[a.default.EVENT_LOADED_SEGMENT,l.dispatchLoadedSegment],[a.default.EVENT_PROGRESS,l.dispatchProgress],[a.default.EVENT_MEDIA_ABORT,l.dispatchAbort],[a.default.EVENT_PLAY,l.dispatchPlay],[a.default.EVENT_PLAYING,l.dispatchPlaying],[a.default.EVENT_PAUSED,l.dispatchPaused],[a.default.EVENT_SEEKSTART,l.dispatchSeekstart],[a.default.EVENT_SEEKING,l.dispatchSeeking],[a.default.EVENT_SEEKED,l.dispatchSeeked],[a.default.EVENT_TIMEUPDATE,l.dispatchTimeUpdate],[a.default.EVENT_ENDED,l.dispatchEnded],[a.default.EVENT_BUFFER_EMPTY,l.dispatchBufferEmpty],[a.default.EVENT_CAN_PLAY,l.dispatchCanPlay],[a.default.EVENT_ERROR,l._handleErrorEvent]]),l._ttEventsMap=new Map([[m.default.EVENT_CUE_CHANGE,l.dispatchCueChange]]),l.bindAll(l._eventsMap),l.bindAll(l._ttEventsMap),l.addListeners(l._element,l._eventsMap),l.addListeners(l._ttProcessor,l._ttEventsMap),l}return e.inherits(i,t),e.createClass(i,null,[{key:"getTechName",value:function(){return"html"}},{key:"_createEmptyVideo",value:function(){S||(S=window.document.createElement("video"))}},{key:"isSupported",value:function(){return i._createEmptyVideo(),!!S.canPlayType}},{key:"canPlayType",value:function(e){return i.canPlayTypeNative(e)||i.canPlayTypeNonNative(e)}},{key:"canPlayTypeNative",value:function(e){return i._createEmptyVideo(),S.canPlayType(e)&&(e!==s.default.TYPE_HLS||T.default.isIPhone()||T.default.isIPad()||T.default.isIPod()||T.default.isSamsungBrowser())}},{key:"canPlayTypeNonNative",value:function(e){return window.MediaSource&&e===s.default.TYPE_HLS&&!T.default.isAndroid4()}},{key:"canPlaySource",value:function(e){i._createEmptyVideo();var t=(e.type===s.default.TYPE_TS?s.default.TYPE_MP4:e.type)+(e.codecs?';codecs="'+s.default.parseCodecs(e.codecs).fullName+'"':"");return S.canPlayType(t)}}]),e.createClass(i,[{key:"getElement",value:function(){return this._element.getElement()}},{key:"getResolvedSource",value:function(){return this._element.getResolvedSource()}},{key:"getCurrentSrc",value:function(){return this._element.getCurrentSrc()}},{key:"getTextTrack",value:function(){return this._textTrackIdx}},{key:"getPoster",value:function(){return this._element.getPoster()}},{key:"getQuality",value:function(){return this._element.getQuality()}},{key:"getVideoWidth",value:function(){return this._element.getVideoWidth()}},{key:"getVideoHeight",value:function(){return this._element.getVideoHeight()}},{key:"getVideoDimensions",value:function(){return this._element.getVideoDimensions()}},{key:"getVolume",value:function(){return this._element.getVolume()}},{key:"getCurrentTime",value:function(){return this._element.getCurrentTime()}},{key:"getStartTime",value:function(){return this._element.getStartTime()}},{key:"getDuration",value:function(){return this._element.getDuration()}},{key:"getBuffered",value:function(e){return this._element.getBuffered(e)}},{key:"getStatsHistory",value:function(){return this._element.getStatsHistory()}},{key:"isCustomUiCapable",value:function(){return!this.constructor.canPlayTypeNative(s.default.TYPE_HLS)&&!T.default.isBuggyCustomUi()}},{key:"isReady",value:function(){return!0}},{key:"isSourceReady",value:function(){return this._element.isSourceReady()}},{key:"isMuted",value:function(){return this._element.isMuted()}},{key:"isPlaying",value:function(){return this._element.isPlaying()}},{key:"isPaused",value:function(){return this._element.isPaused()}},{key:"isEnded",value:function(){return this._element.isEnded()}},{key:"isBufferEmpty",value:function(){return this._element.isBufferEmpty()}},{key:"isLive",value:function(){return this._element.isLive()}},{key:"isEvent",value:function(){return this._element.isEvent()}},{key:"isLivePlaying",value:function(){return this._element.isLivePlaying()}},{key:"isLiveStreaming",value:function(){return this._element.isLiveStreaming()}},{key:"hasQuality",value:function(e){var t=this._element.getResolvedSource(),i=t&&t.getAvailableQualitySettings();if(!i)return!1;for(var n=0,o=i.length;n<o;n++)if(i[n].idx===e)return!0;return!1}},{key:"setPoster",value:function(e){this._element.setPoster(e)}},{key:"setVolume",value:function(e){this._element.setVolume(e)}},{key:"setMute",value:function(e){this._element.setMute(e)}},{key:"setQuality",value:function(e){this._element.setQuality(e)}},{key:"addStats",value:function(e){this._element.addStats(e)}},{key:"play",value:function(){this._element.play()}},{key:"pause",value:function(){this._element.pause()}},{key:"seek",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._element.seek(e,t)}},{key:"seekToLive",value:function(){this._element.seekToLive()}},{key:"skip",value:function(){}},{key:"setViewMode",value:function(e){}},{key:"setSourcePreload",value:function(e){this._element.setSourcePreload(e)}},{key:"processSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.prepareSource(e),!e.getLength()){var i=C.createError(g.default.SOURCE,"No supported source found.");return void this.processError(i,g.default.SOURCE)}if(e.isAdaptive()&&!this.constructor.canPlayTypeNative(e.getAdaptiveType())&&this.constructor.canPlayTypeNonNative(e.getAdaptiveType()))this._nativeCtrl&&(this._nativeCtrl.destroy(),this._nativeCtrl=null),this._adaptiveCtrl||(this._utils.decorate(this._element,this._elementAdaptive),this._adaptiveCtrl=this._asFactory.create(this._element),"function"==typeof this._element.init&&this._element.init());else{if(e.isAdaptive()&&!this.constructor.canPlayTypeNative(e.getAdaptiveType())){var n=C.createError(g.default.SOURCE_TECH,"No technology for adaptive playback found.");return void this.processError(n)}this._adaptiveCtrl&&(this._element.resetAdaptive(),this._utils.undecorate(this._element,this._elementAdaptive),this._adaptiveCtrl.destroy(),this._adaptiveCtrl=null),this._nativeCtrl||(this._nativeCtrl=this._nsFactory.create(this._element))}this._element.setSource(e,t)}},{key:"processTextSource",value:function(e){this.dispatchTextSourceSet()}},{key:"processTextTrack",value:function(e,t){this._textTrackIdx=e,this._ttProcessor.setTextTrack(null===e?null:this._textTracks[e]),this.dispatchTextTrackSet({textTrackIdx:e})}},{key:"processResetSource",value:function(){this._element.pause(!1),this._element.resetSource()}},{key:"processReset",value:function(){this._element.pause(!1),this._element.reset()}},{key:"processDestroy",value:function(){this._element.destroy()}},{key:"_handleErrorEvent",value:function(e){this.processError(e)}}]),i}(s.default);n.default=b}).call(this,"/src\\js\\mediaplayer\\tech\\Html.js")},{"../../common/env":17,"../../common/errors":18,"../streaming/AdaptiveStreamFactory":31,"../streaming/NativeStreamFactory":34,"../streaming/QualityList":36,"./PlaybackElement":41,"./Tech":42,"./html/TextTrackProcessor":44,"./html/VideoElement":45,"./html/VideoElementAdaptive":46}],41:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/Component"),s=e.interopRequireDefault(o),r=function(t){function i(){e.classCallCheck(this,i);var t=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t._statsHistory=[],t._sourceSettings=null,t._isSourcePreload=null,t}return e.inherits(i,t),e.createClass(i,[{key:"destroy",value:function(){throw new Error('[Tech/PlaybackElement] Method "destroy" is not implemented.')}},{key:"getElement",value:function(){throw new Error('[Tech/PlaybackElement] Method "getElement" is not implemented.')}},{key:"getResolvedSource",value:function(){throw new Error('[Tech/PlaybackElement] Method "getResolvedSource" is not implemented.')}},{key:"getCurrentSrc",value:function(){throw new Error('[Tech/PlaybackElement] Method "getCurrentSrc" is not implemented.')}},{key:"getPoster",value:function(){throw new Error('[Tech/PlaybackElement] Method "getPoster" is not implemented.')}},{key:"getVideoWidth",value:function(){throw new Error('[Tech/PlaybackElement] Method "getVideoWidth" is not implemented.')}},{key:"getVideoHeight",value:function(){throw new Error('[Tech/PlaybackElement] Method "getVideoHeight" is not implemented.')}},{key:"getVideoDimensions",value:function(){throw new Error('[Tech/PlaybackElement] Method "getVideoDimensions" is not implemented.')}},{key:"getVolume",value:function(){throw new Error('[Tech/PlaybackElement] Method "getVolume" is not implemented.')}},{key:"getCurrentTime",value:function(){throw new Error('[Tech/PlaybackElement] Method "getCurrentTime" is not implemented.')}},{key:"getDuration",value:function(){throw new Error('[Tech/PlaybackElement] Method "getDuration" is not implemented.')}},{key:"getBuffered",value:function(){throw new Error('[Tech/PlaybackElement] Method "getBuffered" is not implemented.')}},{key:"getQuality",value:function(){throw new Error('[Tech/PlaybackElement] Method "getQuality" is not implemented.')}},{key:"getDefaultQuality",value:function(){return this._sourceSettings&&"undefined"!=typeof this._sourceSettings.qualityIdx?this._sourceSettings.qualityIdx:null}},{key:"getStartTime",value:function(){throw new Error('[Tech/PlaybackElement] Method "getStartTime" is not implemented.')}},{key:"getStatsHistory",value:function(){return this._statsHistory}},{key:"getSourcePreload",value:function(){return this._isSourcePreload}},{key:"isReady",value:function(){throw new Error('[Tech/PlaybackElement] Method "isReady" is not implemented.')}},{key:"isSourceReady",value:function(){throw new Error('[Tech/PlaybackElement] Method "isSourceReady" is not implemented.')}},{key:"isMuted",value:function(){throw new Error('[Tech/PlaybackElement] Method "isMuted" is not implemented.')}},{key:"isPlaying",value:function(){throw new Error('[Tech/PlaybackElement] Method "isPlaying" is not implemented.')}},{key:"isPaused",value:function(){throw new Error('[Tech/PlaybackElement] Method "isPaused" is not implemented.')}},{key:"isSeeking",value:function(){throw new Error('[Tech/PlaybackElement] Method "isSeeking" is not implemented.')}},{key:"isEnded",value:function(){throw new Error('[Tech/PlaybackElement] Method "isEnded" is not implemented.')}},{key:"isBufferEmpty",value:function(){throw new Error('[Tech/PlaybackElement] Method "isBufferEmpty" is not implemented.')}},{key:"isLive",value:function(){throw new Error('[Tech/PlaybackElement] Method "isLive" is not implemented.')}},{key:"isEvent",value:function(){throw new Error('[Tech/PlaybackElement] Method "isEvent" is not implemented.')}},{key:"isLivePlaying",value:function(){throw new Error('[Tech/PlaybackElement] Method "isLivePlaying" is not implemented.')}},{key:"isLiveStreaming",value:function(){throw new Error('[Tech/PlaybackElement] Method "isLiveStreaming" is not implemented.')}},{key:"setSourceSettings",value:function(e){this._sourceSettings=e}},{key:"setSourcePreload",value:function(e){this._isSourcePreload=e}},{key:"setSource",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;throw new Error('[Tech/PlaybackElement] Method "setSource" is not implemented.')}},{key:"setPoster",value:function(e){throw new Error('[Tech/PlaybackElement] Method "setPoster" is not implemented.')}},{key:"setVolume",value:function(e){throw new Error('[Tech/PlaybackElement]Method "setVolume" is not implemented.')}},{key:"setMute",value:function(e){throw new Error('[Tech/PlaybackElement] Method "setMute" is not implemented.')}},{key:"setQuality",value:function(e){throw new Error('[Tech/PlaybackElement] Method "setQuality" is not implemented.')}},{key:"setDefaultQuality",value:function(e){throw new Error('[Tech/PlaybackElement] Method "setDefaultQuality" is not implemented.')}},{key:"addStats",value:function(e){this._statsHistory.push(e)}},{key:"play",value:function(){throw new Error('[Tech/PlaybackElement] Method "play" is not implemented.')}},{key:"pause",value:function(){throw new Error('[Tech/PlaybackElement] Method "pause" is not implemented.')}},{key:"seek",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];throw new Error('[Tech/PlaybackElement] Method "seek" is not implemented.')}},{key:"seekToLive",value:function(){throw new Error('[Tech/PlaybackElement] Method "seekToLive" is not implemented.')}},{key:"resetSource",value:function(){throw new Error('[Tech/PlaybackElement] Method "resetSource" is not implemented.')}},{key:"reset",value:function(){throw new Error('[Tech/PlaybackElement] Method "reset" is not implemented.')}},{key:"handleError",value:function(e){throw new Error('[Tech/PlaybackElement] Method "handleError" is not implemented.')}}]),i}(s.default);r.EVENT_READY="ready",r.EVENT_SOURCE_SET="sourceset",r.EVENT_SOURCE_READY="sourceready",r.EVENT_SOURCE_CANCEL="sourcecancel",r.EVENT_QUALITY_SET="qualityset",r.EVENT_TEXT_TRACK_REQUEST="texttrackrequest",r.EVENT_TEXT_TRACK_SET="texttrackset",r.EVENT_DURATION_CHANGE="durationchange",r.EVENT_VOLUME_CHANGE="volumechange",r.EVENT_LIVE_PLAYING_CHANGE="liveplayingchange",
r.EVENT_LIVE_STREAMING_CHANGE="livestreamingchange",r.EVENT_MEDIA_ABORT="abort",r.EVENT_PROGRESS="progress",r.EVENT_LOAD_START="loadstart",r.EVENT_LOADED_META="loadedmetadata",r.EVENT_LOADED_DATA="loadeddata",r.EVENT_LOADED_SEGMENT="loadedsegment",r.EVENT_LOADING_PROGRESS="loadingprogress",r.EVENT_LOADING_FAILED="loadingfailed",r.EVENT_LOADING_ABORTED="loadingaborted",r.EVENT_PLAY="play",r.EVENT_PLAYING="playing",r.EVENT_PAUSED="paused",r.EVENT_TIMEUPDATE="timeupdate",r.EVENT_SEEKSTART="seekstart",r.EVENT_SEEKING="seeking",r.EVENT_SEEKED="seeked",r.EVENT_ENDED="ended",r.EVENT_BUFFER_READY="bufferready",r.EVENT_BUFFER_EMPTY="bufferempty",r.EVENT_CAN_PLAY="canplay",r.EVENT_FULLSCREEN_CHANGE="fullscreenchange",r.EVENT_SKIP_VIDEO_REQUEST="skipvideorequest",r.EVENT_VIDEO_CLICKTHROUGH="videoclickthrough",r.EVENT_VE_CLICKTHROUGH="visualelement-clickthrough",r.EVENT_VE_CLOSE="visualelement-close",r.EVENT_DESTROY="destroy",r.EVENT_ERROR="error",n.default=r},{"../../common/Component":10}],42:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/Component"),s=e.interopRequireDefault(o),r=t("../streaming/QualityList"),a=e.interopRequireDefault(r),l=t("../../common/errors"),u=e.interopRequireDefault(l),c=new u.default.ErrorFactory(u.default.createSourceName(i)),d=function(t){function i(t,n,o,s){e.classCallCheck(this,i);var r=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));if(!s||"object"!==("undefined"==typeof s?"undefined":e.typeof(s)))throw c.createError(u.default.SETTING,'Argument "options" must be an object.');if(!s.id||"string"!=typeof s.id)throw c.createError(u.default.SETTING,'Option "id" must be a string.');return r._env=t,r._utils=n,r._ttLoaderFactory=o,r._options=s,r._source=null,r._isAdaptiveSource=!1,r._textSource="",r._textTracks=null,r}return e.inherits(i,t),e.createClass(i,null,[{key:"getTechName",value:function(){throw new Error('[Tech] Method "getTechName" is not implemented.')}},{key:"isSupported",value:function(){throw new Error('[Tech] Method "isSupported" is not implemented.')}},{key:"canPlayType",value:function(e){throw new Error('[Tech] Method "canPlayType" is not implemented.')}},{key:"canPlaySource",value:function(e){throw new Error('[Tech] Method "canPlaySource" is not implemented.')}},{key:"copySource",value:function(t){var i=this;return t instanceof a.default?new a.default(this.copySource(t.getData())):Array.isArray(t)?t.map(function(e){return i.copySource(e)}):t&&"object"===("undefined"==typeof t?"undefined":e.typeof(t))?Object.assign({},t):t}},{key:"parseCodecs",value:function(t){var i={},n=[];return t.split(",").forEach(function(t){var o=t.toLowerCase().split("."),s=e.toArray(o),r=s[0],a=s.slice(1),l=a.join(".").toUpperCase();switch(r){case"avc1":if(2===a.length){var u=parseInt(a[0],10),c=parseInt(a[1],10);!isNaN(u)&&!isNaN(c)&&u>=0&&c>=0&&u<=255&&c<=255&&(l=(("0"+u.toString(16)).slice(-2)+"00"+("0"+c.toString(16)).slice(-2)).toUpperCase())}case"mp4a":i[r]=l;default:n.push(r+"."+l)}}),i.fullName=n.join(","),i}}]),e.createClass(i,[{key:"destroy",value:function(){this.emit(i.EVENT_DESTROYING),this.processDestroy()}},{key:"getPlayerId",value:function(){return this._options.id}},{key:"getElement",value:function(){throw new Error('[Tech] Method "getElement" is not implemented.')}},{key:"getSource",value:function(){return this._source}},{key:"getResolvedSource",value:function(){throw new Error('[Tech] Method "getResolvedSource" is not implemented.')}},{key:"getCurrentSrc",value:function(){throw new Error('[Tech] Method "getCurrentSrc" is not implemented.')}},{key:"getTextSource",value:function(){return this._textSource}},{key:"getTextTrack",value:function(){throw new Error('[Tech] Method "getTextTrack" is not implemented.')}},{key:"getPoster",value:function(){throw new Error('[Tech] Method "getPoster" is not implemented.')}},{key:"getQuality",value:function(){throw new Error('[Tech] Method "getQuality" is not implemented.')}},{key:"getVideoWidth",value:function(){throw new Error('[Tech] Method "getVideoWidth" is not implemented.')}},{key:"getVideoHeight",value:function(){throw new Error('[Tech] Method "getVideoHeight" is not implemented.')}},{key:"getVideoDimensions",value:function(){throw new Error('[Tech] Method "getVideoDimensions" is not implemented.')}},{key:"getVolume",value:function(){throw new Error('[Tech] Method "getVolume" is not implemented.')}},{key:"getCurrentTime",value:function(){throw new Error('[Tech] Method "getCurrentTime" is not implemented.')}},{key:"getStartTime",value:function(){throw new Error('[Tech] Method "getStartTime" is not implemented.')}},{key:"getDuration",value:function(){throw new Error('[Tech] Method "getDuration" is not implemented.')}},{key:"getBuffered",value:function(e){throw new Error('[Tech] Method "getBuffered" is not implemented.')}},{key:"getStatsHistory",value:function(){throw new Error('[Tech] Method "getStatsHistory" is not implemented.')}},{key:"isCustomUiCapable",value:function(){throw new Error('[Tech] Method "isCustomUiCapable" is not implemented.')}},{key:"isReady",value:function(){throw new Error('[Tech] Method "isReady" is not implemented.')}},{key:"isSourceReady",value:function(){throw new Error('[Tech] Method "isSourceReady" is not implemented.')}},{key:"isAdaptiveSource",value:function(){return this._isAdaptiveSource}},{key:"isMuted",value:function(){throw new Error('[Tech] Method "isMuted" is not implemented.')}},{key:"isPlaying",value:function(){throw new Error('[Tech] Method "isPlaying" is not implemented.')}},{key:"isPaused",value:function(){throw new Error('[Tech] Method "isPaused" is not implemented.')}},{key:"isEnded",value:function(){throw new Error('[Tech] Method "isEnded" is not implemented.')}},{key:"isBufferEmpty",value:function(){throw new Error('[Tech] Method "isBufferEmpty" is not implemented.')}},{key:"isLive",value:function(){throw new Error('[Tech] Method "isLive" is not implemented.')}},{key:"isEvent",value:function(){throw new Error('[Tech] Method "isEvent" is not implemented.')}},{key:"isLivePlaying",value:function(){throw new Error('[Tech] Method "isLivePlaying" is not implemented.')}},{key:"isLiveStreaming",value:function(){throw new Error('[Tech] Method "isLiveStreaming" is not implemented.')}},{key:"hasQuality",value:function(e){throw new Error('[Tech] Method "hasQuality" is not implemented.')}},{key:"hasTextTrack",value:function(e){var t=this._textSource;return Array.isArray(t)||(t=[t]),!!t[e]}},{key:"setSourcePreload",value:function(e){throw new Error('[Tech] Method "setSourcePreload" is not implemented.')}},{key:"setSource",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.resetSource(),this._source=e;var o=i.copySource(e),s=this.resolveSource(o),r=n&&n.disableAdaptive?null:this.getAdaptiveSource(s),a=null;if(r&&this.constructor.canPlayType(r.type))a=this._qualityListService.get(r),this._isAdaptiveSource=!0;else{if(s=this.getNonAdaptiveQualityList(s),!s){var l=c.createError(u.default.SOURCE,"No playable sources found.");return void this.processError(l)}a=Promise.resolve(s),this._isAdaptiveSource=!1}a.then(function(e){t.processSource(e,n)},function(e){t._handleRequestError(e)})}},{key:"setTextSource",value:function(e){var t=null;this._textSource=e,t="string"==typeof e?{src:e,kind:"subtitles",type:i.TYPE_VTT}:i.copySource(e),Array.isArray(t)||(t=[t]),t.forEach(function(e){e.type=e.type||i.TYPE_VTT}),this._textTracks=t,this.processTextSource(t)}},{key:"setTextTrack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t)return void this.processTextTrack(t);if(!this._textTracks){var n=c.createError(u.default.SETTING,"There is no text track.");return void this.processError(n)}var o=this._textTracks[t];if(!o){var s=c.createError(u.default.SETTING,"There isn't any text track for index "+t+".");return void this.processError(s)}if(o.type===i.TYPE_VTT){var r=c.createError(u.default.SETTING,"WebVTT is not supported in this configuration.");return void this.processError(r)}if(o.type!==i.TYPE_JSON){var a=c.createError(u.default.SETTING," Text track type "+o.type+" is not supported.");return void this.processError(a)}var l=null;if(o.data)l=Promise.resolve(o.data);else{var d=this._ttLoaderFactory.create();l=d.load(o.src).then(function(e){return JSON.parse(e.data)})}l.then(function(i){o.data=i,e.processTextTrack(t,i)}).catch(function(t){t instanceof Error||(t=c.createError(u.default.TEXTSOURCE,String(t))),e.processError(t)})}},{key:"setLocalizedTexts",value:function(e){throw new Error('[Tech] Method "setLocalizedTexts" is not implemented.')}},{key:"setPoster",value:function(e){throw new Error('[Tech] Method "setPoster" is not implemented.')}},{key:"setQuality",value:function(e){throw new Error('[Tech] Method "setQuality" is not implemented.')}},{key:"setVolume",value:function(e){throw new Error('[Tech] Method "setVolume" is not implemented.')}},{key:"setMute",value:function(e){throw new Error('[Tech] Method "setMute" is not implemented.')}},{key:"addStats",value:function(e){throw new Error('[Tech] Method "addStats" is not implemented.')}},{key:"play",value:function(){throw new Error('[Tech] Method "play" is not implemented.')}},{key:"pause",value:function(){throw new Error('[Tech] Method "pause" is not implemented.')}},{key:"seek",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];throw new Error('[Tech] Method "seek" is not implemented.')}},{key:"seekToLive",value:function(){throw new Error('[Tech] Method "seekToLive" is not implemented.')}},{key:"skip",value:function(){throw new Error('[Tech] Method "skip" is not implemented.')}},{key:"setViewMode",value:function(e){throw new Error('[Tech] Method "setViewMode" is not implemented.')}},{key:"resetSource",value:function(){this._source=null,this._isAdaptiveSource=!1,this.processResetSource()}},{key:"reset",value:function(){this._source=null,this._isAdaptiveSource=!1,this._textSource="",this._textTracks=null,this.processReset()}},{key:"processSource",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;throw new Error('[Tech] Method "processSource" is not implemented.')}},{key:"processTextSource",value:function(e){throw new Error('[Tech] Method "processTextSource" is not implemented.')}},{key:"processTextTrack",value:function(e,t){throw new Error('[Tech] Method "processTextTrack" is not implemented.')}},{key:"processResetSource",value:function(){throw new Error('[Tech] Method "processResetSource" is not implemented.')}},{key:"processReset",value:function(){throw new Error('[Tech] Method "processReset" is not implemented.')}},{key:"processDestroy",value:function(){throw new Error('[Tech] Method "processDestroy" is not implemented.')}},{key:"processError",value:function(e){e instanceof Error||(e=new Error(String(e))),"undefined"==typeof e.category&&(e.category=u.default.UNSPECIFIED),this.emit(i.EVENT_ERROR,e)}},{key:"resolveSource",value:function(t){if(!t)throw c.createError(u.default.SETTING,"Source must be specified.");var i=null;if(t instanceof a.default)i=t;else if(Array.isArray(t))i=new a.default([{name:"?",source:t}]);else if("object"===("undefined"==typeof t?"undefined":e.typeof(t)))i=new a.default([{name:"?",source:[t]}]);else{if("string"!=typeof t)throw c.createError(u.default.SOURCE,"Unsupported source.");var n=this._getTypeFromUrl(t);if(!n)throw c.createError(u.default.SOURCE,"Unrecognized source type.");i=new a.default([{name:"?",source:[{type:n,src:t}]}])}return i}},{key:"getAdaptiveSource",value:function(e){for(var t=e.getLength()-1;t>=0;t--){var i=e.getSource(t);Array.isArray(i)||(i=[i]);for(var n=i.length-1;n>=0;n--){var o=this._getTypeFromSource(i[n]);if(this._isAdaptiveType(o))return{src:i[n].src||i[n],type:o}}}return null}},{key:"getNonAdaptiveQualityList",value:function(e){for(var t=[],i=0;i<e.getLength();i++){var n=e.getName(i),o=e.getSource(i);Array.isArray(o)||(o=[o]);for(var s=o.length-1;s>=0;s--){var r=this._getTypeFromSource(o[s]);this._isAdaptiveType(r)||t.push({name:n,source:[{src:o[s].src||o[s],type:r,bitrate:o[s].bitrate||null,codecs:o[s].codecs||null}]})}}return t.length?new a.default(t):null}},{key:"prepareSource",value:function(e){for(var t=e.getLength()-1;t>=0;t--){var i=e.getSource(t);Array.isArray(i)||(i=[i]),e.setSource(t,this.getOptimalSource(i))}}},{key:"getOptimalSource",value:function(e){for(var t=-1,i="",n=0,o=e.length;n<o;n++)if(e[n]&&"undefined"!=typeof e[n].src){if(i=this.constructor.canPlaySource(e[n]),"probably"===i){t=n;break}i&&(t=n)}return t>-1?e[t]:null}},{key:"dispatchReady",value:function(){this.emit(i.EVENT_READY)}},{key:"dispatchSourceSet",value:function(e){this.emit(i.EVENT_SOURCE_SET,e)}},{key:"dispatchSourceReady",value:function(e){this.emit(i.EVENT_SOURCE_READY,e)}},{key:"dispatchTextSourceSet",value:function(){this.emit(i.EVENT_TEXT_SOURCE_SET,{textSource:this._textSource})}},{key:"dispatchTextTrackSet",value:function(e){this.emit(i.EVENT_TEXT_TRACK_SET,e)}},{key:"dispatchQualitySet",value:function(e){this.emit(i.EVENT_QUALITY_SET,e)}},{key:"dispatchVolumeChange",value:function(e){this.emit(i.EVENT_VOLUME_CHANGE,e)}},{key:"dispatchDurationChange",value:function(e){this.emit(i.EVENT_DURATION_CHANGE,e)}},{key:"dispatchCueChange",value:function(e){this.emit(i.EVENT_CUE_CHANGE,e)}},{key:"dispatchLivePlayingChange",value:function(e){this.emit(i.EVENT_LIVE_PLAYING_CHANGE,e)}},{key:"dispatchLiveStreamingChange",value:function(e){this.emit(i.EVENT_LIVE_STREAMING_CHANGE,e)}},{key:"dispatchAbort",value:function(){this.emit(i.EVENT_ABORT)}},{key:"dispatchProgress",value:function(){this.emit(i.EVENT_PROGRESS)}},{key:"dispatchLoadStart",value:function(){this.emit(i.EVENT_LOAD_START)}},{key:"dispatchLoadedMeta",value:function(e){this.emit(i.EVENT_LOADED_META,e)}},{key:"dispatchLoadedData",value:function(){this.emit(i.EVENT_LOADED_DATA)}},{key:"dispatchLoadedSegment",value:function(e){this.emit(i.EVENT_LOADED_SEGMENT,e)}},{key:"dispatchPlay",value:function(e){this.emit(i.EVENT_PLAY,e)}},{key:"dispatchPlaying",value:function(e){this.emit(i.EVENT_PLAYING,e)}},{key:"dispatchPaused",value:function(e){this.emit(i.EVENT_PAUSED,e)}},{key:"dispatchTimeUpdate",value:function(e){this.emit(i.EVENT_TIMEUPDATE,e)}},{key:"dispatchSeekstart",value:function(e){this.emit(i.EVENT_SEEKSTART,e)}},{key:"dispatchSeeking",value:function(e){this.emit(i.EVENT_SEEKING,e)}},{key:"dispatchSeeked",value:function(e){this.emit(i.EVENT_SEEKED,e)}},{key:"dispatchEnded",value:function(){this.emit(i.EVENT_ENDED)}},{key:"dispatchBufferEmpty",value:function(){this.emit(i.EVENT_BUFFER_EMPTY)}},{key:"dispatchCanPlay",value:function(){this.emit(i.EVENT_CAN_PLAY)}},{key:"_handleRequestError",value:function(e){var t=e.type,i=e.url,n=e.status,o=void 0===n?0:n;if("abort"!==t){var s="done"===t?"server response with status "+o:t,r=c.createError(u.default.NETWORK,"Request to "+i+" was rejected because "+s+".");r.resultType=t,r.url=i,r.status=o,this.processError(r)}}},{key:"_isAdaptiveType",value:function(e){return e===i.TYPE_HLS}},{key:"_getTypeFromSource",value:function(t){var i="";return i="object"===("undefined"==typeof t?"undefined":e.typeof(t))?t.type:this._getTypeFromUrl(t)}},{key:"_getTypeFromUrl",value:function(e){return this._utils.getTypeByFileExt(this._utils.getFileExt(e))}}]),i}(s.default);d.TYPE_HLS="application/vnd.apple.mpegurl",d.TYPE_TS="video/mp2t",d.TYPE_MP4="video/mp4",d.TYPE_VTT="text/vtt",d.TYPE_JSON="application/json",d.EVENT_READY="ready",d.EVENT_SOURCE_SET="sourceset",d.EVENT_SOURCE_READY="sourceready",d.EVENT_TEXT_SOURCE_SET="textsourceset",d.EVENT_TEXT_TRACK_SET="texttrackset",d.EVENT_QUALITY_SET="qualityset",d.EVENT_VOLUME_CHANGE="volumechange",d.EVENT_DURATION_CHANGE="durationchange",d.EVENT_CUE_CHANGE="texttrackcuechange",d.EVENT_LIVE_PLAYING_CHANGE="liveplayingchange",d.EVENT_LIVE_STREAMING_CHANGE="livestreamingchange",d.EVENT_ABORT="abort",d.EVENT_PROGRESS="progress",d.EVENT_LOAD_START="loadstart",d.EVENT_LOADED_META="loadedmetadata",d.EVENT_LOADED_DATA="loadeddata",d.EVENT_LOADED_SEGMENT="loadedsegment",d.EVENT_LOADING_FAILED="loadingfailed",d.EVENT_PLAY="play",d.EVENT_PLAYING="playing",d.EVENT_PAUSED="paused",d.EVENT_TIMEUPDATE="timeupdate",d.EVENT_PLAYBACK_PROGRESS="playbackprogress",d.EVENT_SEEKSTART="seekstart",d.EVENT_SEEKING="seeking",d.EVENT_SEEKED="seeked",d.EVENT_ENDED="ended",d.EVENT_BUFFER_EMPTY="bufferempty",d.EVENT_CAN_PLAY="canplay",d.EVENT_DESTROYING="destroying",d.EVENT_ERROR="error",d.EVENT_FULLSCREEN_CHANGE="fullscreenchange",d.EVENT_SKIP_VIDEO_REQUEST="skipvideorequest",d.EVENT_VIDEO_CLICKTHROUGH="videoclickthrough",d.EVENT_ACTION_CLICKTHROUGH="actionclickthrough",d.EVENT_VE_DISPLAYED="visualelement-displayed",d.EVENT_VE_HIDDEN="visualelement-hidden",d.EVENT_VE_CLICKTHROUGH="visualelement-clickthrough",d.EVENT_VE_CLOSE="visualelement-close",d.EVENT_VE_ERROR="visualelement-error",d.EVENT_USER_ACCEPT_INVITATION="user-acceptinvitation",d.EVENT_USER_MINIMIZE="user-minimize",d.EVENT_USER_CLOSE="user-close",d.EVENT_IMPRESSION="impression",d.EVENT_SKIPPABLE_STATE_CHANGE="skippablestatechange",n.default=d}).call(this,"/src\\js\\mediaplayer\\tech\\Tech.js")},{"../../common/Component":10,"../../common/errors":18,"../streaming/QualityList":36}],43:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../PlaybackElement"),s=e.interopRequireDefault(o),r=t("../../../common/constants"),a=t("../../../common/swf"),l=e.interopRequireDefault(a),u=t("../../../common/errors"),c=e.interopRequireDefault(u),d=new c.default.ErrorFactory(c.default.createSourceName(i)),_={callbackEvent:"_flashEventHandler"},h=function(t){function i(t,n,o){e.classCallCheck(this,i);var s=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),a=Object.assign({},o);a.elmId=o.elmId||"flm"+o.id,a.wmode=o.wmode||"direct",a.globalId="_"+a.elmId,a.swf=i._addCacheBustingIfNeeded(o.swf).replace(i.CACHEBUSTING_PATTERN,r.version),s._env=t,s._utils=n,s._options=a,s._element=null,s._source=null,s._isReady=!1,s._isSourceReady=!1,s._isSourceReadyPending=!1,s._wasLoading=!1,s._wasLive=!1,s._isLoadedFirstData=!1,s._registerInstance();var u={},c="window['"+s._options.globalId+"']";for(var d in _)u[d]=c+"."+_[d];s._element=l.default.createElement(s._options.swf,s._options.elmId,u,{},{wmode:s._options.wmode});var h=null;return o.element&&(h=s._utils.getElement(o.element)),h&&s._utils.replaceElement(h,s._element),s}return e.inherits(i,t),e.createClass(i,null,[{key:"_addCacheBustingIfNeeded",value:function(e){return e.indexOf(i.CACHEBUSTING_PATTERN)>-1?e:e+"?"+i.CACHEBUSTING_PATTERN}}]),e.createClass(i,[{key:"destroy",value:function(){this._element.pause(),this._unregisterInstance(),l.default.removeElement(this._element)}},{key:"getElement",value:function(){return this._element}},{key:"getResolvedSource",value:function(){return this._source}},{key:"getCurrentSrc",value:function(){return this._element.getLastUrl()}},{key:"getTextTrack",value:function(){return this._element.getTextTrack()}},{key:"getVideoWidth",value:function(){return this._element.getVideoWidth()}},{key:"getVideoHeight",value:function(){return this._element.getVideoHeight()}},{key:"getVolume",value:function(){return this._element.getVolume()}},{key:"getCurrentTime",value:function(){return this._element.getPosition()}},{key:"getDuration",value:function(){return this._element.getDuration()}},{key:"getBuffered",value:function(e){for(var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this._element.getBuffered()),i=0;i<t.length;i++)if(t[i].start<=e&&t[i].end>e)return{start:t[i].start,end:t[i].end,length:t[i].end-e};return{start:e,end:e,length:0}}},{key:"getQuality",value:function(){return this._element.getQuality()}},{key:"getStartTime",value:function(){return this._sourceSettings&&"undefined"!=typeof this._sourceSettings.startTime?this._sourceSettings.startTime:null}},{key:"isReady",value:function(){return this._isReady}},{key:"isSourceReady",value:function(){return this._isSourceReady}},{key:"isMuted",value:function(){return this._element.isMuted()}},{key:"isPlaying",value:function(){return this._element.isPlaying()}},{key:"isPaused",value:function(){return this._element.isPaused()}},{key:"isSeeking",value:function(){return this._element.isSeeking()}},{key:"isEnded",value:function(){return this._element.isEnded()}},{key:"isBufferEmpty",value:function(){return this._element.isBufferEmpty()}},{key:"isLive",value:function(){return!this.isEvent()&&(!!this._sourceSettings&&"undefined"!=typeof this._sourceSettings.streamingType&&"live"===this._sourceSettings.streamingType||this._wasLive)}},{key:"isEvent",value:function(){var e=this._getLastSourceSrc();return!!this._sourceSettings&&"undefined"!=typeof this._sourceSettings.streamingType&&"event"===this._sourceSettings.streamingType||!!e&&e.isEvent}},{key:"isLivePlaying",value:function(){return this._element.isLivePlaying()}},{key:"isLiveStreaming",value:function(){return this._element.isLiveStreaming()}},{key:"isFullscreen",value:function(){return this._element.isFullScreen()}},{key:"setLocalizedTexts",value:function(e){this._element.setLocalizedTexts(e)}},{key:"setStyle",value:function(e){this._element.setStyle(e)}},{key:"setSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this._source=e,this.setSourceSettings(t),this._isSourceReady=!1,this._isSourceReadyPending=!0,t&&"undefined"!=typeof t.bandwidth&&!this.getStatsHistory().length){var i=parseInt(t.bandwidth,10);!isNaN(i)&&i>0&&this.addStats({bandwidth:i})}if(t&&"function"==typeof t.forcedQualityFunc)try{var n=t.forcedQualityFunc(e);(null===n&&this._source.isAdaptive()||"number"==typeof n&&e.getQualityItem(n))&&this._element.setSource(e,null===n?-1:n)}catch(e){}else t&&"undefined"!=typeof t.forcedQualityIdx&&(null===t.forcedQualityIdx&&this._source.isAdaptive()||null!==t.forcedQualityIdx&&this._source.getQualityItem(t.forcedQualityIdx))?this._element.setSource(e,null===t.forcedQualityIdx?-1:t.forcedQualityIdx):t&&"undefined"!=typeof t.storedQualityIdx&&null!==t.storedQualityIdx&&this._source.getQualityItem(t.storedQualityIdx)?this._element.setSource(e,t.storedQualityIdx):this._element.setSource(e);this.emit(s.default.EVENT_SOURCE_SET,{source:e})}},{key:"updateSourceSrc",value:function(e,t){t.isLive&&(this._wasLive=!0),this._isSourceReadyPending&&(this._isSourceReady=!0,this._isSourceReadyPending=!1,this.emit(s.default.EVENT_SOURCE_READY)),this._element.updateSourceSrc(e,t)}},{key:"setLogo",value:function(e){this._element.setLogo(e)}},{key:"showLogo",value:function(){this._element.showLogo()}},{key:"hideLogo",value:function(){this._element.hideLogo()}},{key:"setSponsor",value:function(e){this._element.setSponsor(e)}},{key:"showSponsor",value:function(){this._element.showSponsor()}},{key:"hideSponsor",value:function(){this._element.hideSponsor()}},{key:"setPp",value:function(e){this._element.setPp(e)}},{key:"showPp",value:function(){this._element.showPp()}},{key:"hidePp",value:function(){this._element.hidePp()}},{key:"canRunVisualElementType",value:function(e){return this._element.isSupportedInjectionType(e)}},{key:"getVisualElements",value:function(){return this._element.getInjections()}},{key:"addVisualElement",value:function(e){this._element.addInjection(e)}},{key:"removeVisualElement",value:function(e){this._element.removeInjection(e)}},{key:"removeVisualElements",value:function(){this._element.resetInjections()}},{key:"setVisualElementDefaultPosition",value:function(e,t){this._element.setInjectionDefaultPosition(e,t)}},{key:"isVisualElementShown",value:function(e){return this._element.isInjectionShown(e)}},{key:"showVisualElement",value:function(e){this._element.showInjection(e)}},{key:"showVisualElementClose",value:function(e){this._element.showInjectionClose(e)}},{key:"hideVisualElement",value:function(e){this._element.hideInjection(e)}},{key:"addAdPoint",value:function(e){this._element.addAdPoint(e)}},{key:"removeAdPoint",value:function(e){this._element.removeAdPoint(e)}},{key:"resetAdPoints",value:function(){this._element.resetAdPoints()}},{key:"showAdPoints",value:function(){this._element.showAdPoints()}},{key:"hideAdPoints",value:function(){this._element.hideAdPoints()}},{key:"setPoster",value:function(e){this._element.setPoster(e)}},{key:"setVolume",value:function(e){this._element.setVolume(e)}},{key:"setMute",value:function(e){this._element.setMute(e)}},{key:"setQuality",value:function(e){this._element.setQuality(e)}},{key:"setDefaultQuality",value:function(e){this._element.setQuality(e,!0)}},{key:"setTextSource",value:function(e){this._element.setTextSource(e)}},{key:"setTextTrack",value:function(e,t){this._element.setTextTrack(e,t)}},{key:"loadSource",value:function(e){this._element.loadSource({quality:e}),this._isSourceReadyPending&&(this._isSourceReady=!0,this._isSourceReadyPending=!1,this.emit(s.default.EVENT_LOAD_START),this.emit(s.default.EVENT_SOURCE_READY))}},{key:"loadSegment",value:function(e,t){return this._wasLoading||(this._wasLoading=!0,this.emit(s.default.EVENT_LOAD_START)),this._element.loadSourceSegment({quality:e,segment:t})}},{key:"loadAbort",value:function(){this._element.loadSourceAbort()}},{key:"play",value:function(){this._element.play()}},{key:"pause",value:function(){this._element.pause()}},{key:"seek",value:function(e){this._element.seek(e)}},{key:"seekInBuffer",value:function(e){var t=this._element.getBuffered();if(t.length){var i=this.getBuffered(e);return this._element.seek(i.length?e:t[0].start,!0,!1),!0}return!1}},{key:"seekToLive",value:function(){}},{key:"resetSource",value:function(){this._element.resetSource(),this._source=null,this.setSourceSettings(null),this._isSourceReady=!1,this._isSourceReadyPending=!1,this._wasLoading=!1,this._wasLive=!1,this._isLoadedFirstData=!1,this.emit(s.default.EVENT_SOURCE_CANCEL)}},{key:"reset",value:function(){this.resetSource(),this._element.setPoster(""),this._element.setLogo(""),this._element.setSponsor(""),this._element.setPp(""),this._element.hidePp(),this._element.setTextSource(null),this._element.resetInjections(),this._element.resetStyle()}},{key:"handleError",value:function(e){this.emit(s.default.EVENT_ERROR,e)}},{key:"enterFullscreen",value:function(){this._element.setFullScreen(!0)}},{key:"exitFullscreen",value:function(){this._element.setFullScreen(!1)}},{key:"_getLastSourceSrc",value:function(){var e=this._source?this._source.getQuality():null;return null!==e?this._source.getSourceSrc(e):null}},{key:"_registerInstance",value:function(){if("undefined"!=typeof window[this._options.globalId])throw d.createError(c.default.SETTING,' Identifier "'+this._options.globalId+'" is already exists in global scope.');window[this._options.globalId]=this}},{key:"_unregisterInstance",value:function(){window[this._options.globalId]&&delete window[this._options.globalId]}},{key:"_flashEventHandler",value:function(e,t){var i="__event_"+e;this[i]&&this[i].apply(this,t)}},{key:"__event_ready",value:function(){this._isReady=!0,this.emit(s.default.EVENT_READY)}},{key:"__event_qualitySet",value:function(e){var t=e.quality,i=e.defaultQuality;this.emit(s.default.EVENT_QUALITY_SET,{qualityIdx:t,autoset:i})}},{key:"__event_textTrackRequest",value:function(e){this.emit(s.default.EVENT_TEXT_TRACK_REQUEST,{textTrackIdx:e.textTrack})}},{key:"__event_textTrackSet",value:function(e){this.emit(s.default.EVENT_TEXT_TRACK_SET,{textTrackIdx:e.textTrack})}},{key:"__event_duration",value:function(e){this.emit(s.default.EVENT_DURATION_CHANGE,{duration:e.duration})}},{key:"__event_volume",value:function(e){this.emit(s.default.EVENT_VOLUME_CHANGE,{level:e.volume,muted:e.mute})}},{key:"__event_fullScreen",value:function(e){this.emit(s.default.EVENT_FULLSCREEN_CHANGE,{isFullscreen:e.state})}},{key:"__event_adSkip",value:function(){this.emit(s.default.EVENT_SKIP_VIDEO_REQUEST)}},{key:"__event_adClick",value:function(e){this.emit(s.default.EVENT_VIDEO_CLICKTHROUGH)}},{key:"__event_injectionClick",value:function(e){this.emit(s.default.EVENT_VE_CLICKTHROUGH,{id:e.id})}},{key:"__event_injectionClose",value:function(e){this.emit(s.default.EVENT_VE_CLOSE,{id:e.id})}},{key:"__event_loadProgress",value:function(e){var t=Object.assign({},{stats:e},{qualityIdx:e.quality},{segmentIdx:e.segment});this.emit(s.default.EVENT_LOADING_PROGRESS,t),this.emit(s.default.EVENT_PROGRESS)}},{key:"__event_loadedMetadata",value:function(e){this.emit(s.default.EVENT_LOADED_META)}},{key:"__event_loadedData",value:function(e){var t=Object.assign({},{qualityIdx:e.quality},"undefined"!=typeof e.segment?{segmentIdx:e.segment}:{});if("undefined"!=typeof e.segment){var i=Object.assign({},e,t);this.addStats(i),this.emit(s.default.EVENT_LOADED_SEGMENT,i)}this._isLoadedFirstData||(this._isLoadedFirstData=!0,this.emit(s.default.EVENT_LOADED_DATA))}},{key:"__event_loadFailed",value:function(e){var t=Object.assign({},{qualityIdx:e.quality},"undefined"!=typeof e.segment?{segmentIdx:e.segment}:{});this.emit(s.default.EVENT_LOADING_FAILED,t)}},{key:"__event_loadAborted",value:function(e){var t=Object.assign({},{qualityIdx:e.quality},"undefined"!=typeof e.segment?{segmentIdx:e.segment}:{});this.emit(s.default.EVENT_LOADING_ABORTED,t)}},{key:"__event_play",value:function(){this.emit(s.default.EVENT_PLAY)}},{key:"__event_playing",value:function(){var e=this._element.getPosition();this.emit(s.default.EVENT_PLAYING,{time:e})}},{key:"__event_paused",value:function(){this.emit(s.default.EVENT_PAUSED)}},{key:"__event_position",value:function(e){this.emit(s.default.EVENT_TIMEUPDATE,{time:e.position,qualityIdx:e.quality}),this.emit(s.default.EVENT_BUFFER_READY)}},{key:"__event_seekStart",value:function(e){this.emit(s.default.EVENT_SEEKSTART,{time:e.position})}},{key:"__event_seeking",value:function(e){this.emit(s.default.EVENT_SEEKING,{time:e.position})}},{key:"__event_seeked",value:function(e){this.emit(s.default.EVENT_SEEKED,{time:e.position})}},{key:"__event_ended",value:function(){this.emit(s.default.EVENT_ENDED)}},{key:"__event_canPlay",value:function(){this.emit(s.default.EVENT_CAN_PLAY)}},{key:"__event_bufferEmpty",value:function(){this.emit(s.default.EVENT_BUFFER_EMPTY)}},{key:"__event_livePlaying",value:function(e){this.emit(s.default.EVENT_LIVE_PLAYING_CHANGE,{livePlaying:e.livePlaying})}},{key:"__event_liveStreaming",value:function(e){this.emit(s.default.EVENT_LIVE_STREAMING_CHANGE,{liveStreaming:e.liveStreaming})}},{key:"__event_error",value:function(e){var t=d.createError(c.default.GENERAL,e.type);t.src=this._element.getLastUrl(),this.handleError(t)}}]),i}(s.default);h.CACHEBUSTING_PATTERN="[CACHEBUSTING]",n.default=h}).call(this,"/src\\js\\mediaplayer\\tech\\flash\\FlashElement.js")},{"../../../common/constants":16,"../../../common/errors":18,"../../../common/swf":19,"../PlaybackElement":41}],44:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../common/Component"),s=e.interopRequireDefault(o),r=t("../PlaybackElement"),a=e.interopRequireDefault(r),l=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._videoElement=t,n._textTrack=null,n._lastCueIdx=-1,n._eventsMap=new Map([[a.default.EVENT_TIMEUPDATE,n._handleTimeUpdate]]),n.bindAll(n._eventsMap),n}return e.inherits(i,t),e.createClass(i,[{key:"setTextTrack",value:function(e){this.removeListeners(this._videoElement,this._eventsMap),this._textTrack=null,this._lastCueIdx=-1,null!==e&&(this._textTrack=e,this.addListeners(this._videoElement,this._eventsMap))}},{key:"_handleTimeUpdate",value:function(e){for(var t=this._textTrack.data,n=e.time,o=0,s=t.length-1,r=void 0;o<=s;)if(r=Math.floor((o+s)/2),t[r].end<n)o=r+1;else{if(!(t[r].start>n))return r!==this._lastCueIdx&&this.emit(i.EVENT_CUE_CHANGE,{cue:t[r]}),void(this._lastCueIdx=r);s=r-1}this._lastCueIdx>-1&&(this.emit(i.EVENT_CUE_CHANGE,{cue:null}),this._lastCueIdx=-1)}}]),i}(s.default);l.EVENT_CUE_CHANGE="cuechange",
n.default=l},{"../../../common/Component":10,"../PlaybackElement":41}],45:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../PlaybackElement"),s=e.interopRequireDefault(o),r=t("../../../common/errors"),a=e.interopRequireDefault(r),l=new a.default.ErrorFactory(a.default.createSourceName(i)),u=function(t){function i(t,n,o){e.classCallCheck(this,i);var r=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));r._env=t,r._utils=n,r._options=o,r._element=null,r._eventsMap=new Map([["durationchange",r.__event_durationchange],["volumechange",r.__event_volumechange],["abort",r.__event_abort],["progress",r.__event_progress],["loadstart",r.__event_loadstart],["loadedmetadata",r.__event_loadedmetadata],["loadeddata",r.__event_loadeddata],["play",r.__event_play],["playing",r.__event_playing],["pause",r.__event_pause],["timeupdate",r.__event_timeupdate],["seeking",r.__event_seeking],["seeked",r.__event_seeked],["ended",r.__event_ended],["error",r.__event_error]]),r._isReady=!1,r._isSourceReady=!1,r._isPaused=!0,r._isPlayingPending=!1,r._isPlayingSent=!1,r._isBufferEmpty=null,r._isBufferEmptyPending=!1,r._isSeekingInBuffer=!1,r._isSeekingToLive=!1,r._isLivePlaying=!1,r._isSeekWaitingToLoad=!1,r._wasLoading=!1,r._qualityIdx=null,r._source=null,r._eventTimer=null,r._timeupdateTimer=null,r._pauseTimer=null,r._seekErrorTimer=null,r._mediaErrorCounter=0;var u=null;if(r._options.element){if(u=r._utils.getElement(r._options.element),!u)throw l.createError(a.default.SETTING,'Element "'+r._options.element+"\" doesn't exist.")}else u=window.document.createElement("video");var c=r._options.elmId||u.id||"hlm"+r._options.id;return r._attachElement(u),r._element.setAttribute("id",c),r._options.controls?r._element.setAttribute("controls","controls"):r._element.removeAttribute("controls"),r._options.muted?r._element.setAttribute("muted","muted"):r._element.removeAttribute("muted"),r._options.preload?r._element.setAttribute("preload",r._options.preload):r._element.removeAttribute("preload"),r._options.crossorigin?r._element.setAttribute("crossorigin",r._options.crossorigin):r._element.removeAttribute("crossorigin"),r.bindAll(r._eventsMap),r.addEventListeners(r._element,r._eventsMap),setTimeout(function(){r.emit(s.default.EVENT_READY)},0),r}return e.inherits(i,t),e.createClass(i,[{key:"destroy",value:function(){this.reset(),"undefined"!=typeof this._isActive&&this._isActive&&this.resetAdaptive(),this.removeEventListeners(this._element,this._eventsMap)}},{key:"getElement",value:function(){return this._element}},{key:"getResolvedSource",value:function(){return this._source}},{key:"getCurrentSrc",value:function(){return this._source?this._element.currentSrc:""}},{key:"getPoster",value:function(){return this._element.poster}},{key:"getVideoWidth",value:function(){return this._element.videoWidth}},{key:"getVideoHeight",value:function(){return this._element.videoHeight}},{key:"getVideoDimensions",value:function(){if(!this._element.videoWidth||!this._element.videoHeight)return null;var e=this._element.offsetWidth,t=this._element.offsetHeight,i=this._element.videoWidth,n=this._element.videoHeight,o=e/i,s=t/n,r=o<s?o:s,a=Math.ceil(Math.min(i*r,e)),l=Math.ceil(n*r),u=Math.round((e-a)/2),c=Math.round((t-l)/2);return{x:u,y:c,width:a,height:l,videoWidth:i,videoHeight:n}}},{key:"getVolume",value:function(){return this._element.volume}},{key:"getCurrentTime",value:function(){return this._element.currentTime}},{key:"getDuration",value:function(){return this._element.duration}},{key:"getBuffered",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.BUFFER_HOLE_TOLERANCE,n=void 0,o=[],s=this._element.buffered;for(n=0;n<s.length;n++)o.length&&s.start(n)-o[o.length-1].end<t?o[o.length-1].end=s.end(n):o.push({start:s.start(n),end:s.end(n)});for(n=0;n<o.length;n++)if(o[n].start<=e+t&&o[n].end>e)return{start:o[n].start,end:o[n].end+t,length:o[n].end+t-e};return{start:e,end:e,length:0}}},{key:"getQuality",value:function(){return this._qualityIdx}},{key:"getQualityByTime",value:function(e){return this.getQuality()}},{key:"getStartTime",value:function(){return this._sourceSettings&&"undefined"!=typeof this._sourceSettings.startTime?this._sourceSettings.startTime:null}},{key:"isReady",value:function(){return!0}},{key:"isSourceReady",value:function(){return this._isSourceReady}},{key:"isMuted",value:function(){return this._element.muted}},{key:"isPlaying",value:function(){return!this._isPaused}},{key:"isPaused",value:function(){return this._isPaused}},{key:"isSeeking",value:function(){return this._element.seeking}},{key:"isEnded",value:function(){return this._element.ended}},{key:"isBufferEmpty",value:function(){return this.isEnded()||null===this._isBufferEmpty||this._isBufferEmpty}},{key:"isLive",value:function(){return!1}},{key:"isEvent",value:function(){return!1}},{key:"isLivePlaying",value:function(){return this._isLivePlaying}},{key:"isLiveStreaming",value:function(){return!1}},{key:"setSource",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=function(){t._isSourceReady=!0,t.emit(s.default.EVENT_SOURCE_READY,{source:e})};if(this._source=e,this._isSourceReady=!1,this.setSourceSettings(i),i&&"function"==typeof i.forcedQualityFunc)try{var o=i.forcedQualityFunc(e);(null===o&&this._source.isAdaptive()||"number"==typeof o&&e.getQualityItem(o))&&(this._qualityIdx=o)}catch(e){}else i&&"undefined"!=typeof i.forcedQualityIdx&&(null===i.forcedQualityIdx&&this._source.isAdaptive()||null!==i.forcedQualityIdx&&this._source.getQualityItem(i.forcedQualityIdx))?this._qualityIdx=i.forcedQualityIdx:i&&"undefined"!=typeof i.storedQualityIdx&&null!==i.storedQualityIdx&&this._source.getQualityItem(i.storedQualityIdx)&&(this._qualityIdx=i.storedQualityIdx);if(i&&"undefined"!=typeof i.bandwidth&&!this.getStatsHistory().length){var r=parseInt(i.bandwidth,10);!isNaN(r)&&r>0&&this.addStats({bandwidth:r})}this.getCurrentTime()>0&&this.seekInBuffer(0),this._eventTimer=setInterval(this._onEventTimer.bind(this),100),this.emit(s.default.EVENT_SOURCE_SET,{source:e}),this.once(s.default.EVENT_LOAD_START,n),this.registerPendingEvent(this,s.default.EVENT_LOAD_START,n)}},{key:"setPoster",value:function(e){e?this._element.setAttribute("poster",e):this._element.hasAttribute("poster")&&this._element.removeAttribute("poster")}},{key:"setVolume",value:function(e){this._element.volume=e}},{key:"setMute",value:function(e){this._element.removeAttribute("muted"),this._element.muted=!!e}},{key:"setQuality",value:function(e){if(!this._source||null===e&&!this._source.isAdaptive()||null!==e&&!this._source.getQualityItem(e)){var t=l.createError(a.default.SETTING,'Quality "'+e+"\" doesn't exist.");return void this.handleError(t)}if(this._qualityIdx!==e){this._qualityIdx=e;var i=this.isPlaying(),n=this._isPlayingSent;this.pause(!1),this.emit(s.default.EVENT_QUALITY_SET,{qualityIdx:e,wasPlaying:i,wasPlayingSent:n})}}},{key:"setDefaultQuality",value:function(e){null===this._qualityIdx&&(this._qualityIdx=e,this.emit(s.default.EVENT_QUALITY_SET,{qualityIdx:e,autoset:!0}))}},{key:"loadSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._wasLoading=!0,this._isSeekingInBuffer=!0;var i=this._source.isAdaptive()?this._source.getQualityItemUrl(e):this._source.getSourceSrc(e);null!==t&&(i=this._utils.addParameterToUrlHash(i,"t",t)),this.setSrc(i)}},{key:"play",value:function(){var t=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._setPlay(i);var n=this._element.play();null!==n&&"object"===("undefined"==typeof n?"undefined":e.typeof(n))&&n.catch(function(){t._isSourceReady&&t._element.paused&&t._element.play()})}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._setPaused(e),this._element.pause()}},{key:"seek",value:function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._isSeekingInBuffer=!1,this.emit(s.default.EVENT_SEEKSTART,{time:e}),this._element.currentTime=e}},{key:"seekInBuffer",value:function(e){return this._isSeekingInBuffer=!0,this._element.currentTime=e,!0}},{key:"seekToLive",value:function(){this._isSeekingToLive=!0,this.seek(this.getDuration())}},{key:"resetSource",value:function(){this.abortPending(),this.setSrc(""),this._source=null,this.setSourceSettings(null),this._qualityIdx=null,this._isSourceReady=!1,this._isBufferEmptyPending=!1,this._isSeekingInBuffer=!1,this._isSeekingToLive=!1,this._isLivePlaying=!1,this._clearEventTimer(),this._clearTimeupdateTimer(),this._clearPauseTimer(),this._clearSeekErrorTimer(),this._isPaused=!0,this._isPlayingPending=!1,this._isPlayingSent=!1,this._isBufferEmpty=null,this._wasLoading=!1,this._mediaErrorCounter=0,"undefined"!=typeof this._isActive&&this._isActive&&this.resetSourceAdaptive()}},{key:"reset",value:function(){this.resetSource(),this._removeAllTracks(),this.setPoster("")}},{key:"handleError",value:function(e){this.emit(s.default.EVENT_ERROR,e)}},{key:"setSrc",value:function(t){if(t){var i=this._element.paused;if(this._element.src=t,!i&&this._element.paused){var n=this._element.play();null!==n&&"object"===("undefined"==typeof n?"undefined":e.typeof(n))&&n.catch(function(){})}}else this._element.removeAttribute("src"),this._element.load()}},{key:"_setLivePlaying",value:function(e){this._isLivePlaying!==e&&(this._isLivePlaying=e,this.emit(s.default.EVENT_LIVE_PLAYING_CHANGE,{livePlaying:this._isLivePlaying}))}},{key:"_setPlay",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isPaused=!1,this._isPlayingPending=e,e&&this.emit(s.default.EVENT_PLAY),(this._isBufferEmpty||null===this._isBufferEmpty)&&(this._isBufferEmpty=!0,this.emit(s.default.EVENT_BUFFER_EMPTY))}},{key:"_setPaused",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isPaused=!0,this._isPlayingSent=!1,this._isPlayingPending=!1,e){var t=this.isEnded();this.emit(s.default.EVENT_PAUSED,{ended:t})}}},{key:"_onEventTimer",value:function(){var e=this.isEnded(),t=this._element.readyState<this._element.HAVE_FUTURE_DATA||this._isBufferEmptyPending;if(this._wasLoading&&this._isBufferEmpty!==t)if(this._isBufferEmpty=t,this._isBufferEmpty){if(!e){var n=this.getCurrentTime(),o=this.getBuffered(n,0);if(o.length<i.BUFFER_HOLE_TOLERANCE){var r=this.getBuffered(n+o.length+i.BUFFER_HOLE_TOLERANCE,0);if(r.length>0)return void this.seekInBuffer(r.start)}this._isSeekWaitingToLoad=!0,this.emit(s.default.EVENT_BUFFER_EMPTY)}}else this._clearSeekErrorTimer(),this.emit(s.default.EVENT_CAN_PLAY)}},{key:"_onTimeupdateTimer",value:function(){this._element.paused||this.isEnded()||(this._isBufferEmptyPending=!0)}},{key:"_clearEventTimer",value:function(){this._eventTimer&&(clearInterval(this._eventTimer),this._eventTimer=null)}},{key:"_clearTimeupdateTimer",value:function(){this._timeupdateTimer&&(clearInterval(this._timeupdateTimer),this._timeupdateTimer=null)}},{key:"_clearPauseTimer",value:function(){this._pauseTimer&&(clearTimeout(this._pauseTimer),this._pauseTimer=null)}},{key:"_clearSeekErrorTimer",value:function(){this._isSeekWaitingToLoad=!1,this._seekErrorTimer&&(clearTimeout(this._seekErrorTimer),this._seekErrorTimer=null)}},{key:"_setSeekErrorTimer",value:function(){var e=this;this._seekErrorTimer=setTimeout(function(){e._seekErrorTimer=null,"undefined"!=typeof e._isActive&&e._isActive&&e._element.readyState<e._element.HAVE_FUTURE_DATA&&e._softReset()},600)}},{key:"_softReset",value:function(){this.loadSource(this._qualityIdx,this._element.currentTime)}},{key:"_attachElement",value:function(e){if(!e)throw l.createError(a.default.SETTING,"Element must be specified.");if(!e.canPlayType)throw l.createError(a.default.SETTING,'Element "'+e+'" is not valid. Element must have a type of HTMLMediaElement.');this._element=e}},{key:"_createTrackElement",value:function(e){var t=document.createElement("track");return t.setAttribute("src",e.src),t.setAttribute("kind",e.kind),e.srclang&&t.setAttribute("srclang",e.srclang),e.label&&t.setAttribute("label",e.label),e.default&&t.setAttribute("default",!0),t}},{key:"_removeAllTracks",value:function(){for(var e=this._element.querySelectorAll("track"),t=e.length-1;t>=0;t--)e[t].parentNode.removeChild(e[t])}},{key:"__event_volumechange",value:function(e){var t=this._element.muted,i=this._element.volume;this.emit(s.default.EVENT_VOLUME_CHANGE,{muted:t,level:i})}},{key:"__event_durationchange",value:function(e){"undefined"!=typeof this._isActive&&this._isActive||this.emit(s.default.EVENT_DURATION_CHANGE,{duration:this.getDuration()})}},{key:"__event_abort",value:function(e){this.emit(s.default.EVENT_MEDIA_ABORT)}},{key:"__event_progress",value:function(e){this.emit(s.default.EVENT_PROGRESS)}},{key:"__event_loadstart",value:function(e){this._wasLoading&&this.emit(s.default.EVENT_LOAD_START)}},{key:"__event_loadedmetadata",value:function(e){this.emit(s.default.EVENT_LOADED_META,{duration:this.getDuration()})}},{key:"__event_loadeddata",value:function(e){this.emit(s.default.EVENT_LOADED_DATA)}},{key:"__event_play",value:function(e){this._isPaused&&this._setPlay()}},{key:"__event_playing",value:function(e){if(this._isPlayingPending){var t=this._element.currentTime;this._isPlayingPending=!1,this._isPlayingSent=!0,this.emit(s.default.EVENT_PLAYING,{time:t})}}},{key:"__event_pause",value:function(e){var t=this,i=this.isEnded();this._isPaused||this._element.seeking||i?i&&this._setPaused():(this._clearPauseTimer(),this._pauseTimer=setTimeout(function(){t._element.seeking||t._setPaused()},0))}},{key:"__event_timeupdate",value:function(e){if(this._isSourceReady){var t=this._element.currentTime,i=this.getQualityByTime(t),n=this._element.paused;this.emit(s.default.EVENT_TIMEUPDATE,{time:t,qualityIdx:i}),this._element.readyState>=this._element.HAVE_FUTURE_DATA&&this._clearSeekErrorTimer(),this._clearTimeupdateTimer(),n||(this._isBufferEmptyPending=!1,this.isBufferEmpty()||(this._timeupdateTimer=setTimeout(this._onTimeupdateTimer.bind(this),500)))}}},{key:"__event_seeking",value:function(e){if(this._clearSeekErrorTimer(),"undefined"!=typeof this._isActive&&this._isActive){var t=this.getBuffered(this._element.currentTime,0);t.length>=1?this._setSeekErrorTimer():this._isSeekWaitingToLoad=!0}if(!this._isSeekingInBuffer){this._setLivePlaying(this._isSeekingToLive),this._isSeekingToLive=!1;var i=this._element.currentTime;this.emit(s.default.EVENT_SEEKING,{time:i})}}},{key:"__event_seeked",value:function(e){if(this._clearSeekErrorTimer(),this._isSeekingInBuffer)return void(this._isSeekingInBuffer=!1);var t=this._element.currentTime;this.emit(s.default.EVENT_SEEKED,{time:t})}},{key:"__event_ended",value:function(e){this.emit(s.default.EVENT_ENDED)}},{key:"__event_error",value:function(e){var t=e.target.error;if(t&&(t.code!==t.MEDIA_ERR_SRC_NOT_SUPPORTED||this._element.src)){if((t.code===t.MEDIA_ERR_SRC_NOT_SUPPORTED||t.code===t.MEDIA_ERR_DECODE)&&this._mediaErrorCounter<i.MEDIA_ERRORS_MAX)return this._mediaErrorCounter++,void this._softReset();var n="";switch(t.code){case t.MEDIA_ERR_ABORTED:return void(n="The fetching process for the media resource was aborted by the user agent at the user's request.");case t.MEDIA_ERR_NETWORK:n="A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";break;case t.MEDIA_ERR_DECODE:n="An error of some description occurred while decoding the media resource, after the resource was established to be usable.";break;case t.MEDIA_ERR_SRC_NOT_SUPPORTED:n="The media resource indicated by the src attribute was not suitable.";break;default:n="An unknown error occurred."}var o=new l.createError(a.default.MEDIA,n);o.code=t.code,o.src=this._element.src,this.handleError(o)}}}]),i}(s.default);u.BUFFER_HOLE_TOLERANCE=.2,u.MEDIA_ERRORS_MAX=2,n.default=u}).call(this,"/src\\js\\mediaplayer\\tech\\html\\VideoElement.js")},{"../../../common/errors":18,"../PlaybackElement":41}],46:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../PlaybackElement"),s=e.interopRequireDefault(o),r=t("../../../common/LoaderFactory"),a=e.interopRequireDefault(r),l=t("../../streaming/QualityList"),u=e.interopRequireDefault(l),c=t("./mux/M2ts"),d=e.interopRequireDefault(c),_=t("./mux/Fmp4"),h=e.interopRequireDefault(_),f=t("../../../common/errors"),p=e.interopRequireDefault(f),m=new p.default.ErrorFactory(p.default.createSourceName(i)),v={init:function(){this._isActive=!0,this._loader=null,this._loaderFactory=new a.default(this._utils,{maxAttemps:this._options.loadAttemps||1},a.default.PROFILE_SEGMENT),this._mediaSource=null,this._remuxer=new h.default,this._toAdd=[],this._lastAppended=null,this._sourceBuffer={},this._timer=null,this._timerProgress=null,this._isChangingQuality=!1,this._qualityHistory=[],this._sourceBufferRemovalPending=0,this._appendErrorCount=0,this._isSourceReadyPending=!1,this._lastQualityIdx=void 0,this._lastDiscontinuity=null,this._lastAudioWasFake=!1,this._lastDuration=null,this._wasLive=!1,this._wasLoaded=!1,this._isLiveStreaming=!1,this._sourceOpenHandler=null,this._eventsMap=new Map([["seeking",this.__eventAdaptive_seeking],["timeupdate",this.__eventAdaptive_timeupdate]]),this.bindAll(this._eventsMap),this.addEventListeners(this._element,this._eventsMap),this.__event_sourceUpdateEnd=this.__event_sourceUpdateEnd.bind(this),this.__event_sourceError=this.__event_sourceError.bind(this)},resetAdaptive:function(){this._isActive=!1,this.loadAbort(),this._clearRemuxTimer(),this._clearProgressTimer(),this._resetSourceBuffer(),this._resetSourceOpenHandler(),this.removeEventListeners(this._element,this._eventsMap),this._element.removeAttribute("src"),this.emit(s.default.EVENT_DESTROY),delete this._sourceBufferRemovalPending,delete this._qualityHistory,delete this._isChangingQuality,delete this._timer,delete this._timerProgress,delete this._loader,delete this._loaderFactory,delete this._mediaSource,delete this._remuxer,delete this._toAdd,delete this._lastAppended,delete this._sourceBuffer,delete this._appendErrorCount,delete this._isSourceReadyPending,delete this._lastQualityIdx,delete this._lastDiscontinuity,delete this._lastAudioWasFake,delete this._lastDuration,delete this._wasLive,delete this._wasLoaded,delete this._isLiveStreaming,delete this._sourceOpenHandler},isLive:function(){return!this.isEvent()&&(!!this._sourceSettings&&"undefined"!=typeof this._sourceSettings.streamingType&&"live"===this._sourceSettings.streamingType||this._wasLive)},isEvent:function(){var e=this._getLastSourceSrc();return!!this._sourceSettings&&"undefined"!=typeof this._sourceSettings.streamingType&&"event"===this._sourceSettings.streamingType||!!e&&e.isEvent},isLiveStreaming:function(){return this._isLiveStreaming},getDuration:function(){return this._source.getDuration(this.isLiveStreaming())},getQualityByTime:function(e){var t=u.default.toMicroseconds(e);for(var i in this._qualityHistory)if(i<=t&&this._qualityHistory[i].end>t)return this._qualityHistory[i].qualityIdx;return null},setSource:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.resetSourceAdaptive(),this._source=e,this._isSourceReady=!1,this._isSourceReadyPending=!0,this.setSourceSettings(i),i&&"function"==typeof i.forcedQualityFunc)try{var n=i.forcedQualityFunc(e);(null===n||"number"==typeof n&&e.getQualityItem(n))&&(this._qualityIdx=n)}catch(e){}else i&&"undefined"!=typeof i.forcedQualityIdx&&(null===i.forcedQualityIdx||this._source.getQualityItem(i.forcedQualityIdx))?this._qualityIdx=i.forcedQualityIdx:i&&"undefined"!=typeof i.storedQualityIdx&&null!==i.storedQualityIdx&&this._source.getQualityItem(i.storedQualityIdx)&&(this._qualityIdx=i.storedQualityIdx);if(i&&"undefined"!=typeof i.bandwidth&&!this.getStatsHistory().length){var o=parseInt(i.bandwidth,10);!isNaN(o)&&o>0&&this.addStats({bandwidth:o})}this._sourceOpenHandler=function(){t._resetSourceOpenHandler(),t.emit(s.default.EVENT_SOURCE_SET,{source:e})},this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._sourceOpenHandler),this._timer=setInterval(this._onTimer.bind(this),100),this._eventTimer=setInterval(this._onEventTimer.bind(this),100);var r=this._element.paused;this._element.src=URL.createObjectURL(this._mediaSource),!r&&this._element.paused&&this._element.play()},resetSourceAdaptive:function(){this.loadAbort(),this._clearRemuxTimer(),this._clearProgressTimer(),this._resetSourceBuffer(),this._resetSourceOpenHandler(),this._source=null,this._wasLive=!1,this._wasLoaded=!1,this._toAdd=[],this._lastAppended=null,this._sourceBufferRemovalPending=0,this._qualityHistory=[],this._lastQualityIdx=void 0,this._lastDiscontinuity=null,this._lastAudioWasFake=!1,this._lastDuration=null,this._isChangingQuality=!1,this._appendErrorCount=0,this._isSourceReadyPending=!1,this._isLiveStreaming=!1,this._remuxer.reset(),this.emit(s.default.EVENT_SOURCE_CANCEL)},updateSourceSrc:function(e,t){if(t.isLive&&(this._wasLive=!0),this._isLiveStreaming!==t.isLive){var i=this._isLiveStreaming&&!t.isLive;this._isLiveStreaming=t.isLive,this.emit(s.default.EVENT_LIVE_STREAMING_CHANGE,{liveStreaming:t.isLive}),i&&this._evaluateEndOfStream()}var n=this.getDuration();null!==this._lastDuration&&this._lastDuration==n||(this._lastDuration=n,this.isPaused()&&this._setLivePlaying(!1),this.emit(s.default.EVENT_DURATION_CHANGE,{duration:n})),this._isSourceReadyPending&&(this._isSourceReady=!0,this._isSourceReadyPending=!1,this.emit(s.default.EVENT_SOURCE_READY,{source:this._source}))},setQuality:function(e){if(!(null===e||this._source&&this._source.getQualityItem(e))){var t=m.createError(p.default.SETTING,'Quality "'+e+"\" doesn't exist.");return void this.handleError(t)}this._qualityIdx!==e&&(this.loadAbort(),this._toAdd=[],this._lastAppended=null,this._qualityHistory=[],this._qualityIdx=e,this._isChangingQuality=!0,this._flushBuffers()||(this._isChangingQuality=!1,this.emit(s.default.EVENT_QUALITY_SET,{qualityIdx:this._qualityIdx})))},seek:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._isSeekingInBuffer=!1;var i=e;if(!t){var n=this._source?this._source.getSegmentIdx(e):-1,o=this._getLastSourceSrc();if(o&&n>-1){var r=o.segments[n];r.start+r.duration-e<1&&o.segments[n+1]&&(i=o.segments[n+1].start)}}this.emit(s.default.EVENT_SEEKSTART,{time:i}),this._element.currentTime=i},seekInBuffer:function(e){var t=this._element.buffered;if(t.length){this._isSeekingInBuffer=!0;var i=this.getBuffered(e,0);return this._element.currentTime=i.length?e:t.start(0),!0}return!1},loadSegment:function(e,t){var i=this;this._wasLoading||(this._wasLoading=!0,this.emit(s.default.EVENT_LOAD_START));var n=this._source.getSourceSrc(e).segments[t],o=u.default.toMicroseconds(n.start),r=u.default.toMicroseconds(n.duration);this._qualityHistory[o]={end:o+r,qualityIdx:e},this._clearProgressTimer(),this._timerProgress=setInterval(this._onTimerProgress.bind(this,e,t),500),this._loader=this._loaderFactory.create(),this._loader.load(n.url).then(function(n){i._isActive&&i._handleSegmentLoaded(e,t,n)},function(n){i._isActive&&("abort"===n.type?i._handleSegmentLoadAborted(e,t):i._handleSegmentLoadFailed(e,t,n))}).catch(function(e){i.handleError(e)})},loadAbort:function(){this._loader&&(this._loader.abort()&&(this._clearProgressTimer(),this.emit(s.default.EVENT_LOADING_ABORTED)),this._loader=null)},_resetSourceBuffer:function(){for(var e in this._sourceBuffer)this._sourceBuffer[e].removeEventListener("error",this.__event_sourceError),this._sourceBuffer[e].removeEventListener("updateend",this.__event_sourceUpdateEnd);this._sourceBuffer={}},_resetSourceOpenHandler:function(){this._sourceOpenHandler&&(this._mediaSource.removeEventListener("sourceopen",this._sourceOpenHandler),this._sourceOpenHandler=null)},_softReset:function(){var e=this,t=this._element.currentTime,i=this.isPlaying();this.loadAbort(),this._resetSourceBuffer(),this._resetSourceOpenHandler(),this._toAdd=[],this._lastAppended=null,this._sourceBufferRemovalPending=0,this._qualityHistory=[],this._lastQualityIdx=void 0,this._lastDiscontinuity=null,this._lastAudioWasFake=!1,this._isChangingQuality=!1,this._appendErrorCount=0,this._remuxer.reset(),this.emit(s.default.EVENT_SOURCE_CANCEL),this._sourceOpenHandler=function(){e._resetSourceOpenHandler(),e._isSeekingInBuffer=!0,e._element.currentTime=t,i&&e._element.play(),e.emit(s.default.EVENT_BUFFER_READY)},this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._sourceOpenHandler),this._element.src=URL.createObjectURL(this._mediaSource)},_getLastSourceSrc:function(){var e=this._source?this._source.getQuality():null;return null!==e?this._source.getSourceSrc(e):null},_clearProgressTimer:function(){this._timerProgress&&(clearInterval(this._timerProgress),this._timerProgress=null)},_clearRemuxTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},_evaluateEndOfStream:function(){this._mediaSource&&"open"===this._mediaSource.readyState&&!this._isBufferUpdating()&&!this.isLiveStreaming()&&this.getBuffered(this.getCurrentTime()).end>=this._source.getDuration()&&this._mediaSource.endOfStream()},_flushBuffers:function(){if(this._sourceBufferRemovalPending)return this._sourceBufferRemovalPending;this._sourceBufferRemovalPending=0;for(var e in this._sourceBuffer)if("open"!==this._mediaSource.readyState||this._env.isMac()&&this._env.isSafari()||this._sourceBuffer[e].abort(),this._sourceBuffer[e].buffered.length){this._sourceBufferRemovalPending++;try{this._sourceBuffer[e].remove(0,Number.MAX_VALUE)}catch(e){var t=m.createError(p.default.GENERAL,"Flushing buffer failed.");t.code=e.code,this.handleError(t)}}return this._sourceBufferRemovalPending},_isBufferUpdating:function(){return!!(!(this._toAdd.length<=1)||this._sourceBuffer.audio&&this._sourceBuffer.audio.updating||this._sourceBuffer.video&&this._sourceBuffer.video.updating||this._sourceBufferRemovalPending)},_handleSegmentLoaded:function(e,t,i){this._clearProgressTimer();var n=null,o=null,s=this._source.getSourceSrc(e),r=s.segments[t];try{n=d.default.demux(new Uint8Array(i.data),r.start,r.duration,this._source.getDuration()),s.isDiscontinuity||this._lastDiscontinuity!=r.discontinuity?(this._lastAudioWasFake=!!n.audio.isFake,this._remuxer.reset()):(n.audio.isFake||this._lastAudioWasFake||"undefined"!=typeof this._lastQualityIdx&&this._lastQualityIdx!=e)&&(this._lastAudioWasFake=!!n.audio.isFake,this._remuxer.resetHeader()),o=this._remuxer.remux(n.audio,n.video)}catch(i){return this._handleSegmentLoadFailed(e,t),void this.handleError(i)}this._lastDiscontinuity=r.discontinuity,this._lastQualityIdx=e,"undefined"!=typeof o.audio.moov&&"undefined"==typeof this._sourceBuffer.audio&&(this._sourceBuffer.audio=this._mediaSource.addSourceBuffer("video/mp4;codecs="+n.audio.codec),this._sourceBuffer.audio.addEventListener("error",this.__event_sourceError),this._sourceBuffer.audio.addEventListener("updateend",this.__event_sourceUpdateEnd)),"undefined"!=typeof o.video.moov&&"undefined"==typeof this._sourceBuffer.video&&(this._sourceBuffer.video=this._mediaSource.addSourceBuffer("video/mp4;codecs="+n.video.codec),this._sourceBuffer.video.addEventListener("error",this.__event_sourceError),this._sourceBuffer.video.addEventListener("updateend",this.__event_sourceUpdateEnd)),"undefined"!=typeof o.audio.moof&&this._toAdd.push({qualityIdx:e,segmentIdx:t,start:r.start,end:r.start+r.duration,type:"audio",data:"undefined"!=typeof o.audio.moov?d.default.appendArray(o.audio.moov,o.audio.moof,o.audio.mdat):d.default.appendArray(o.audio.moof,o.audio.mdat)}),"undefined"!=typeof o.video.moof&&this._toAdd.push({qualityIdx:e,segmentIdx:t,start:r.start,end:r.start+r.duration,type:"video",data:"undefined"!=typeof o.video.moov?d.default.appendArray(o.video.moov,o.video.moof,o.video.mdat):d.default.appendArray(o.video.moof,o.video.mdat)}),this._toAdd.push({qualityIdx:e,segmentIdx:t,type:"stats",data:Object.assign({qualityIdx:e},i.stats,{segmentDuration:r.duration})})},_handleSegmentLoadFailed:function(e,t){arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._clearProgressTimer(),this.emit(s.default.EVENT_LOADING_FAILED,{qualityIdx:e,segmentIdx:t})},_handleSegmentLoadAborted:function(e,t){},_onTimer:function(){if(this._toAdd.length&&(!this._sourceBuffer.audio||!this._sourceBuffer.audio.updating)&&(!this._sourceBuffer.video||!this._sourceBuffer.video.updating)&&!this._sourceBufferRemovalPending){var e=this._toAdd.shift();if("stats"!==e.type)try{this._sourceBuffer[e.type].appendBuffer(e.data),this._appendErrorCount=0,this._lastAppended=e}catch(i){if(i.code!==DOMException.QUOTA_EXCEEDED_ERR)if(++this._appendErrorCount<=(this._options.appendAttemps||1))this._toAdd.unshift(e);else{this._toAdd=[],this._lastAppended=null;var t=m.createError(p.default.GENERAL,'Appending "'+e.qualityIdx+'"'+(' x "'+e.segmentIdx+'" failed. Cannot')+" append data to the source buffer.");t.code=i.code,this.handleError(t)}else e.start<=this._element.currentTime&&e.end>=this._element.currentTime&&(this._flushBuffers(),this._toAdd.unshift(e),"video"===e.type&&this._lastAppended&&"audio"===this._lastAppended.type&&this._lastAppended.start<=this._element.currentTime&&this._lastAppended.end>=this._element.currentTime&&this._toAdd.unshift(this._lastAppended),this._lastAppended=null)}else{if(this.addStats(e.data),this._wasLoaded||(this._wasLoaded=!0,this.isLiveStreaming()&&this._setLivePlaying(!0)),this._isSeekWaitingToLoad){this._clearSeekErrorTimer();var i=this.getBuffered(this._element.currentTime,0);!this.isLive()&&i.length>=1&&this._setSeekErrorTimer()}this.emit(s.default.EVENT_LOADED_SEGMENT,{qualityIdx:e.qualityIdx,segmentIdx:e.segmentIdx,bandwidth:e.data.bandwidth})}}},_onTimerProgress:function(e,t){if(this._loader){var i=this._loader.getProgressInfo();if(null!==i){var n=this._source.getSourceSrc(e).segments[t];Object.assign(i,{segmentDuration:n.duration}),this.emit(s.default.EVENT_LOADING_PROGRESS,{stats:i,qualityIdx:e,segmentIdx:t})}}},__eventAdaptive_timeupdate:function(e){this._isSourceReady&&!this._isChangingQuality&&this.emit(s.default.EVENT_BUFFER_READY),this._evaluateEndOfStream()},__eventAdaptive_seeking:function(e){!this.isLiveStreaming()&&this._element.currentTime>=this._source.getDuration()&&(this._element.currentTime=this._source.getDuration()-.01),this._isSeekingInBuffer||!this.loadAbort()&&this._toAdd.length||this.emit(s.default.EVENT_BUFFER_READY)},__event_sourceUpdateEnd:function(e){this._sourceBufferRemovalPending&&this._sourceBufferRemovalPending--,this._isBufferUpdating()||(this._isChangingQuality&&(this._isChangingQuality=!1,this.emit(s.default.EVENT_QUALITY_SET,{qualityIdx:this._qualityIdx})),this._evaluateEndOfStream())},__event_sourceError:function(e){}};n.default=v}).call(this,"/src\\js\\mediaplayer\\tech\\html\\VideoElementAdaptive.js")},{"../../../common/LoaderFactory":12,"../../../common/errors":18,"../../streaming/QualityList":36,"../PlaybackElement":41,"./mux/Fmp4":49,"./mux/M2ts":50}],47:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"getGolomb",value:function(e,i){var n=[0,1,3,7,15,31,63,127,255,511],o=e.indexOf("1",i)-i;return 0===o?{end:i,value:0}:{end:i+2*o,value:n[o]+t.toNumber(e.substr(i+o+1,o))}}},{key:"toNumber",value:function(e){for(var t=0,i=1;i<=e.length;i++)t+=parseInt(e.charAt(e.length-i))*Math.pow(2,i-1);return t}},{key:"toString",value:function(e){for(var t=0,i="",n=["0000","0001","0010","0011","0100","0101","0110","0111","1000","1001","1010","1011","1100","1101","1110","1111"];t<e.length;)i+=n[(240&e[t])>>4]+n[15&e[t]],t++;return i}}]),t}();n.default=o},{}],48:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"init",value:function(){
t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:i,audio:n};var o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=s,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var r=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,r,l,r,a),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,o))}},{key:"box",value:function(e){for(var t,i=Array.prototype.slice.call(arguments,1),n=8,o=i.length,s=o;o--;)n+=i[o].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),o=0,n=8;o<s;o++)t.set(i[o],n),n+=i[o].byteLength;return t}},{key:"hdlr",value:function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}},{key:"mdhd",value:function(e,i){return i*=e,t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,85,196,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))}},{key:"mfhd",value:function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))}},{key:"minf",value:function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))}},{key:"moof",value:function(e,i,n){return t.box(t.types.moof,t.mfhd(e),t.traf(n,i))}},{key:"moov",value:function(e){for(var i=e.length,n=[];i--;)n[i]=t.trak(e[i]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(t.mvex(e)))}},{key:"mvex",value:function(e){for(var i=e.length,n=[];i--;)n[i]=t.trex(e[i]);return t.box.apply(null,[t.types.mvex].concat(n))}},{key:"mvhd",value:function(e,i){i*=e;var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24&255,i>>16&255,i>>8&255,255&i,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,n)}},{key:"sdtp",value:function(e){var i,n,o=e.samples||[],s=new Uint8Array(4+o.length);for(n=0;n<o.length;n++)i=o[n].flags,s[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,s)}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))}},{key:"avc1",value:function(e){var i,n,o,s=[],r=[];for(i=0;i<e.sps.length;i++)n=e.sps[i],o=n.byteLength,s.push(o>>>8&255),s.push(255&o),s=s.concat(Array.prototype.slice.call(n));for(i=0;i<e.pps.length;i++)n=e.pps[i],o=n.byteLength,r.push(o>>>8&255),r.push(255&o),r=r.concat(Array.prototype.slice.call(n));var a=t.box(t.types.avcC,new Uint8Array([1,s[3],s[4],s[5],255,224|e.sps.length].concat(s).concat([e.pps.length]).concat(r))),l=e.width,u=e.height;return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(e){var i=e.audiosamplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,i>>8&255,255&i,0,0]),t.box(t.types.esds,t.esds(e)))}},{key:"stsd",value:function(e){return"audio"===e.type?t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))}},{key:"tkhd",value:function(e){var i=e.id,n=e.duration*e.timescale,o=e.width,s=e.height;return t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,i>>24&255,i>>16&255,i>>8&255,255&i,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,s>>8&255,255&s,0,0]))}},{key:"traf",value:function(e,i){var n=t.sdtp(e),o=e.id;return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),t.box(t.types.tfdt,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i])),t.trun(e,n.length+16+16+8+16+8+8),n)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"trex",value:function(e){var i=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,i){var n,o,s,r,a,l,u=e.samples||[],c=u.length,d=12+16*c,_=new Uint8Array(d);for(i+=8+d,_.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,i>>>24&255,i>>>16&255,i>>>8&255,255&i],0),n=0;n<c;n++)o=u[n],s=o.duration,r=o.size,a=o.flags,l=o.cts,_.set([s>>>24&255,s>>>16&255,s>>>8&255,255&s,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a.isLeading<<2|a.dependsOn,a.isDependedOn<<6|a.hasRedundancy<<4|a.paddingValue<<1|a.isNonSync,61440&a.degradPrio,15&a.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return t.box(t.types.trun,_)}},{key:"initSegment",value:function(e){t.types||t.init();var i,n=t.moov(e);return i=new Uint8Array(t.FTYP.byteLength+n.byteLength),i.set(t.FTYP),i.set(n,t.FTYP.byteLength),i}}]),t}();n.default=o},{}],49:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Fmp4-structs"),s=e.interopRequireDefault(o),r=9e4,a=22500,l=function(){function t(){e.classCallCheck(this,t),this.reset()}return e.createClass(t,[{key:"resetHeader",value:function(){this._isHeader=!1,this._audioTimescale=void 0,this._videoTimescale=void 0,this._audioSequence=0,this._videoSequence=0}},{key:"reset",value:function(){this.resetHeader(),this._baseDts=void 0}},{key:"_mergeObj",value:function(e,t){return Object.keys(t).forEach(function(i){e[i]=t[i]}),e}},{key:"remux",value:function(e,t){var i={audio:{},video:{}};return this._isHeader||(i=this._remuxHeader(e,t)),t.samples.length&&this._mergeObj(i.video,this._remuxVideo(t)),e.samples.length&&this._mergeObj(i.audio,this._remuxAudio(e)),i}},{key:"_remuxHeader",value:function(e,t){var i=this,n=e.samples.length&&e.config,o=t.samples.length&&t.sps&&t.pps,l={audio:{},video:{}};return n&&!function(){var t=function e(t,i){return i?e(i,t%i):t};i._audioTimescale=e.sampleRate/t(e.sampleRate,1024),e.timescale=i._audioTimescale,l.audio={moov:s.default.initSegment([e])}}(),o&&(this._videoTimescale=a,t.timescale=this._videoTimescale,l.video={moov:s.default.initSegment([t])}),(n||o)&&(this._isHeader=!0,"undefined"==typeof this._baseDts&&(this._baseDts=(n&&o?Math.min(t.samples[0].dts,e.samples[0].dts):n?e.samples[0].dts:t.samples[0].dts)-r*(o?t.timeOffset:e.timeOffset))),l}},{key:"_remuxVideo",value:function(e){var t,i,n,o,a=8,l=[];for(i=new Uint8Array(e.length+4*e.unitCount+8),t=new DataView(i.buffer),t.setUint32(0,i.byteLength),i.set(s.default.types.mdat,4);e.samples.length;){for(var u=e.samples.shift(),c=0;u.units.length;){var d=u.units.shift();t.setUint32(a,d.data.byteLength),a+=4,i.set(d.data,a),a+=d.data.byteLength,c+=4+d.data.byteLength}l.push({size:c,duration:e.samples.length?Math.round((e.samples[0].dts-u.dts)/(r/this._videoTimescale)):l[l.length-1].duration,cts:Math.round((u.pts-u.dts)/(r/this._videoTimescale)),flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:u.key?2:1,isNonSync:u.key?0:1}}),"undefined"==typeof o&&(o=u.dts>this._baseDts?u.dts-this._baseDts:0)}return e.samples=l,n=s.default.moof(this._videoSequence++,Math.round(o/(r/this._videoTimescale)),e),e.samples=[],{moof:n,mdat:i}}},{key:"_remuxAudio",value:function(e){var t,i,n,o,a=8,l=[];for(i=new Uint8Array(e.length+8),t=new DataView(i.buffer),t.setUint32(0,i.byteLength),i.set(s.default.types.mdat,4);e.samples.length;){var u=e.samples.shift();i.set(u.unit,a),a+=u.unit.byteLength,l.push({size:u.unit.byteLength,duration:e.samples.length?Math.round((e.samples[0].dts-u.dts)/(r/this._audioTimescale)):l[l.length-1].duration,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),"undefined"==typeof o&&(o=u.dts>this._baseDts?u.dts-this._baseDts:0)}return e.samples=l,n=s.default.moof(this._audioSequence++,Math.round(o/(r/this._audioTimescale)),e),e.samples=[],{moof:n,mdat:i}}}]),t}();n.default=l}).call(this,"/src\\js\\mediaplayer\\tech\\html\\mux\\Fmp4.js")},{"./Fmp4-structs":48}],50:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/errors"),s=e.interopRequireDefault(o),r=t("./Bytes"),a=e.interopRequireDefault(r),l=new s.default.ErrorFactory(s.default.createSourceName(i)),u=9e4,c=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"demux",value:function(e,i,n,o){var r,a,u,c,d=e.length,_=[],h={},f=!1,p=null,m=null,v={type:"audio",codec:null,duration:o,timeOffset:i,id:null,samples:[],length:0},y={type:"video",codec:null,duration:o,timeOffset:i,id:null,samples:[],length:0,unitCount:0};for(d-=d%188,r=0;r<d;r+=188){if(71!==e[r])throw l.createError(s.default.GENERAL,"TS packet not found.");if(a=!!(64&e[r+1]),u=((31&e[r+1])<<8)+e[r+2],(48&e[r+3])>>4>1){if(c=r+5+e[r+4],c===r+188)continue}else c=r+4;if(f)u!==y.id&&u!==v.id||(a?(_.push({type:u,size:r+188-c,data:[[c,r+188]]}),h[u]=_.length-1):"undefined"!=typeof h[u]&&(_[h[u]].data.push([c,r+188]),_[h[u]].size+=r+188-c));else if(c+=a?e[c]+1:0,0===u)p=t._parsePAT(e,c);else if(u===p){var E=t._parsePMT(e,c);v.id=E.audio,y.id=E.video,f=!0}}for(var g=0;g<_.length;g++){for(var k=new Uint8Array(_[g].size),T=0;_[g].data.length;){var C=_[g].data.shift();k.set(e.subarray(C[0],C[1]),T),T+=C[1]-C[0]}switch(_[g].type){case y.id:t._parseAVC(t._parsePES(k),y);break;case v.id:t._parseAAC(t._parsePES(k),v,m)}}return t._addMissingAudio(v,y,n),{audio:v,video:y}}},{key:"_parsePAT",value:function(e,t){return(31&e[t+10])<<8|e[t+11]}},{key:"_parsePMT",value:function(e,t){var i=t+((15&e[t+1])<<8|e[t+2]-1),n={audio:null,video:null};for(t+=12+((15&e[t+10])<<8|e[t+11]);t<i;){var o=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 15:n.audio=o;break;case 27:n.video=o}t+=((15&e[t+3])<<8|e[t+4])+5}return n}},{key:"_parsePTS",value:function(e,t){var i=536870912*(14&e[t])+4194304*(255&e[t+1])+16384*(254&e[t+2])+128*(255&e[t+3])+(254&e[t+4])/2;return i>4294967295?i-8589934592:i}},{key:"_parsePES",value:function(e){var i,n;return(e[0]<<16)+(e[1]<<8)+e[2]===1?(192&e[7]&&(i=t._parsePTS(e,9),n=64&e[7]?t._parsePTS(e,14):i),{data:e.subarray(e[8]+9),pts:i,dts:n,length:(e[4]<<8)+e[5]}):null}},{key:"appendArray",value:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.reduce(function(e,t){return e+t.byteLength},0),o=new Uint8Array(n),s=0;return t.forEach(function(e){o.set(e,s),s+=e.byteLength}),o}},{key:"_parseNAL",value:function(e,i){for(var n,o,s=0,r=e.byteLength,a=[];s+3<r;){var l=1;if(0===e[s]&&0===e[s+1]&&0===e[s+2]&&1===e[s+3]?l=4:0===e[s]&&0===e[s+1]&&1===e[s+2]&&(l=3),s+=l,1!==l){if(n)a.push({data:e.subarray(n,s-l),type:o});else{var u=s-l;if(u&&i.samples.length){var c=i.samples[i.samples.length-1],d=c.units[c.units.length-1];d.data=t.appendArray(d.data,e.subarray(0,u)),c.length+=u,i.length+=u}}if(n=s,o=31&e[s],1===o||5===o)break}}return n&&a.push({data:e.subarray(n,r),type:o}),a}},{key:"_parseAVC",value:function(e,i){var n=t._parseNAL(e.data,i),o=[],r=!1,u=!1,c=0;if(0===n.length&i.samples.length>0){var d=i.samples[i.samples.length-1],_=d.units[d.units.length-1];_.data=t.appendArray(_.data,e.data),d.length+=e.data.byteLength,i.length+=e.data.byteLength}e.data=null,n.forEach(function(e){switch(e.type){case 1:u=!0;break;case 5:u=!0,r=!0;break;case 7:if(!i.sps){i.sps=[e.data],i.profileIdc=e.data[1],i.profileCompat=a.default.toNumber(a.default.toString([e.data[2]]).substr(0,5)),i.levelIdc=e.data[3];for(var t=e.data.subarray(1,4),n="avc1.",d=0;d<3;d++){var _=t[d].toString(16);n+=(_.length<2?"0":"")+_}i.codec=n;var h=a.default.toString(e.data.subarray(4)),f=a.default.getGolomb(h,0),p=[100,110,122,244,44,83,86,118,128,138];if(p.indexOf(i.profileIdc)!==-1){f=a.default.getGolomb(h,f.end+1);var m=3===f.value;if(m&&f.end++,f=a.default.getGolomb(h,f.end+1),f=a.default.getGolomb(h,f.end+1),f.end++,f.end++,"1"===h.charAt(f.end))throw l.createError(s.default.GENERAL,"Scaling matrix not supported.")}if(f=a.default.getGolomb(h,f.end+1),f=a.default.getGolomb(h,f.end+1),0===f.value)f=a.default.getGolomb(h,f.end+1);else if(1===f.value){f.end++,f=a.default.getGolomb(h,f.end+1),f=a.default.getGolomb(h,f.end+1),f=a.default.getGolomb(h,f.end+1);for(var v=0,y=f.value;v<y;v++)f=a.default.getGolomb(h,f.end+1)}f=a.default.getGolomb(h,f.end+1),f.end++,f=a.default.getGolomb(h,f.end+1),i.width=16*(f.value+1),f=a.default.getGolomb(h,f.end+1),i.height=16*(f.value+1),f.end++,"0"===h.charAt(f.end)&&f.end++,f.end++,f.end++,"1"===h.charAt(f.end)&&(f=a.default.getGolomb(h,f.end+1),i.width-=2*f.value,f=a.default.getGolomb(h,f.end+1),i.width-=2*f.value,f=a.default.getGolomb(h,f.end+1),i.height-=2*f.value,f=a.default.getGolomb(h,f.end+1),i.height-=2*f.value)}break;case 8:i.pps||(i.pps=[e.data])}u&&(o.push(e),c+=e.data.byteLength)}),o.length&&(r===!0||i.sps)&&(i.samples.push({units:o,length:c,pts:e.pts,dts:e.dts,key:r}),i.length+=c,i.unitCount+=o.length)}},{key:"_getAudioPts",value:function(e,t,i){return Math.round(e+1024*t*u/i)}},{key:"_parseAAC",value:function(e,i,n){var o,r,a=n?t.appendArray(n,e.data):e.data,u=0;for(r=0,o=a.length;r<o-1&&(255!==a[r]||240!==(240&a[r+1]));r++);if(r)throw r<o-1?l.createError(s.default.GENERAL,"AAC stream not starting with ADTS header."):l.createError(s.default.GENERAL,"ADTS header not found in AAC stream.");if(!i.sampleRate){var c=t._buildADIF(a,r);i.config=c.adif,i.sampleRate=c.sampleRate,i.channelCount=c.channelCount,i.codec=c.codec}for(;r+5<o;){var d=(3&a[r+3])<<11|a[r+4]<<3|(224&a[r+5])>>>5,_=1&a[r+1]?7:9;if(!(r+d<=o))break;var h=t._getAudioPts(e.pts,u,i.sampleRate);i.samples.push({unit:a.subarray(r+_,r+d),pts:h,dts:h,basePts:e.pts,frame:u}),i.length+=d-_,r+=d,u++}n=r<o?a.subarray(r,o):null}},{key:"_getSilentFrame",value:function(e){if("mp4a.40.2"===e.codec){if(1===e.channelCount)return new Uint8Array([0,200,0,128,35,128]);if(2===e.channelCount)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e.channelCount)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e.channelCount)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e.channelCount)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e.channelCount)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}return null}},{key:"_addMissingAudio",value:function(e,i,n){if(!e.config){var o=t._buildFakeADIF();e.config=o.adif,e.sampleRate=o.sampleRate,e.channelCount=o.channelCount,e.codec=o.codec,e.isFake=!0}var s=t._getSilentFrame(e);if(s&&(e.samples.length||i.samples.length)){var r=!!e.samples.length,a=null,l=null,c=null,d=null;r?(l=e.samples[e.samples.length-1],a=l.frame+1,c=l.basePts,d=e.samples[0].pts):(l=i.samples[i.samples.length-1],a=0,d=i.samples[0].pts,c=d);for(var _=d+u*n;t._getAudioPts(c,a+1,e.sampleRate)<=_;){var h=t._getAudioPts(c,a,e.sampleRate);e.samples.push({unit:s,pts:h,dts:h,basePts:c,frame:a}),e.length+=s.byteLength,a++}}}},{key:"_getSampleRate",value:function(e){var t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return e>t.length-1?null:t[e]}},{key:"_buildADIF",value:function(e,i){var n=((192&e[i+2])>>>6)+1,o=(60&e[i+2])>>>2,r=(1&e[i+2])<<2|(192&e[i+3])>>>6,a=t._getSampleRate(o);if(!a)throw l.createError(s.default.GENERAL,"Sample rate found in AAC stream is invalid.");var u=new Array(5===n?4:2);return u[0]=n<<3|(14&o)>>1,u[1]=(1&o)<<7|r<<3,5===n&&(u[1]|=(14&o)>>1,u[2]=(1&o)<<7|8,u[3]=0),{adif:u,sampleRate:a,channelCount:r,codec:"mp4a.40."+n}}},{key:"_buildFakeADIF",value:function(){var e=2,i=4,n=2,o=t._getSampleRate(i),s=new Array(2);return s[0]=e<<3|(14&i)>>1,s[1]=(1&i)<<7|n<<3,{adif:s,sampleRate:o,channelCount:n,codec:"mp4a.40."+e}}}]),t}();n.default=c}).call(this,"/src\\js\\mediaplayer\\tech\\html\\mux\\M2ts.js")},{"../../../../common/errors":18,"./Bytes":47}],51:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Flash"),s=e.interopRequireDefault(o),r=t("./Html"),a=e.interopRequireDefault(r),l=t("../../common/errors"),u=e.interopRequireDefault(l),c=new u.default.ErrorFactory(u.default.createSourceName(i)),d={flash:s.default,html:a.default};n.default={create:function(e,t,i,n,o){if(!o.swf)throw c.createError(u.default.SETTING,'Option "swf" must be specified.');if(!o.id)throw c.createError(u.default.SETTING,'Option "id" must be specified.');if(!o.order)throw c.createError(u.default.SETTING,'Option "order" must be specified.');if(!o.required)throw c.createError(u.default.SETTING,'Option "required" must be specified.');var s=Object.values(o.order),r=s.filter(function(e){var t=d[e];return t&&t.isSupported()&&o.required.every(function(e){return!!t.canPlayType(e)})}),a=[],l=null;if(!r.length)throw c.createError(u.default.GENERAL,"No usable technology found.");return o.optimalTypes.length&&r.length>1&&(a=r.filter(function(e){var t=d[e];return o.optimalTypes.every(function(e){return!!t.canPlayType(e)})})),l=a.length?a[0]:r[0],new d[l](e,t,i,n,o)}}}).call(this,"/src\\js\\mediaplayer\\tech\\techFactory.js")},{"../../common/errors":18,"./Flash":39,"./Html":40}],52:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){e.classCallCheck(this,t),this._currentTime=0,this._wasInterrupted=!1,this._uninterruptedSince=0}return e.createClass(t,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._currentTime=e||0,this._uninterruptedSince=0,this._wasInterrupted=!1}},{key:"update",value:function(e){this._currentTime=e,this._wasInterrupted&&(this._uninterruptedSince=Math.ceil(this._currentTime),this._wasInterrupted=!1)}},{key:"reset",value:function(){this._wasInterrupted=!0}},{key:"isFragmentComplete",value:function(e){var t=Math.floor(this._currentTime);return t%e===0&&this._currentTime-this._uninterruptedSince>=e}},{key:"getCompleteRestFragmentLength",value:function(e){var t=this._currentTime%e;return this._currentTime-this._uninterruptedSince>=t?Math.round(t):0}}]),t}();n.default=o},{}],53:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){e.classCallCheck(this,t),this._currentProgress=null,this._progressHistory=[]}return e.createClass(t,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._currentProgress={start:e||0,end:0},this._progressHistory=[],this._progressHistory.push(this._currentProgress)}},{key:"update",value:function(e){if(this._currentProgress){if(e>this._currentProgress.end){var t=this._progressHistory.find(function(t){return e>=t.start&&e<=t.end});if(t){var i=this._progressHistory.indexOf(t);this._progressHistory.splice(i,1),this._currentProgress.end=t.end}else this._currentProgress.end=e}}else this._currentProgress=this._progressHistory.find(function(t){return e>=t.start&&e<=t.end}),this._currentProgress||(this._currentProgress={start:e,end:e},this._progressHistory.push(this._currentProgress))}},{key:"reset",value:function(){this._currentProgress=null}},{key:"getHistory",value:function(){return this._progressHistory}},{key:"getLength",value:function(){return this._progressHistory.reduce(function(e,t){return e+(t.end-t.start)},0)}},{key:"getStart",value:function(){return this._progressHistory.length?this._progressHistory[0].start:null}}]),t}();n.default=o},{}],54:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/Component"),s=e.interopRequireDefault(o),r=t("../common/errors"),a=e.interopRequireDefault(r),l=t("../mediaplayer/tech/Tech"),u=e.interopRequireDefault(l),c=t("../color/profile"),d=e.interopRequireDefault(c),_=t("./ui/UiAgent"),h=e.interopRequireDefault(_),f=t("./ui/dialogscreen/DialogScreen"),p=e.interopRequireDefault(f),m=t("./StrategyPlayer"),v=e.interopRequireDefault(m),y=t("./PlaybackFragmentProcessor"),E=e.interopRequireDefault(y),g=t("./PlaybackProgressProcessor"),k=e.interopRequireDefault(g),T=new a.default.ErrorFactory(a.default.createSourceName(i)),C="IDLE",S="AD",b="CONTENT",P=function(t){function i(t,n,o,s,r){e.classCallCheck(this,i);var a=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));a._utils=t,a._env=n,a._uiMediaPlayerCreator=o,a._uiVpaidPlayerCreator=s,a._options=Object.assign({},r),a._mainPlayer=null,a._vpaidPlayer=null,a._uiMediaPlayer=null,a._dialogScreen=new p.default,a._uiAgent=new h.default("sznp-rich-wrapper"),a._fsElement=a._uiAgent.getElement(),a._uiMediaPlayerReady=new Promise(function(e,t){a._techReadyResolve=e,a._techReadyReject=t}),a._eventsMap=new Map([[u.default.EVENT_READY,a._handleReady],[u.default.EVENT_FULLSCREEN_CHANGE,a._handleFullscreenChange],[u.default.EVENT_VOLUME_CHANGE,a._handleVolumeChange],[u.default.EVENT_QUALITY_SET,a._handleQualitySet],[u.default.EVENT_DURATION_CHANGE,a._handleDurationChange],[u.default.EVENT_LOADED_DATA,a._handleLoadedData],[u.default.EVENT_LOADED_SEGMENT,a._handleLoadedSegment],[u.default.EVENT_LOADED_META,a._handleLoadedMetadata],[u.default.EVENT_SOURCE_SET,a._handleSourceSet],[u.default.EVENT_TEXT_SOURCE_SET,a._handleTextSourceSet],[u.default.EVENT_TEXT_TRACK_SET,a._handleTextTrackSet],[u.default.EVENT_BUFFER_EMPTY,a._handleBufferEmpty],[u.default.EVENT_CAN_PLAY,a._handleCanPlay],[u.default.EVENT_PLAY,a._handlePlay],[u.default.EVENT_PLAYING,a._handlePlaying],[u.default.EVENT_PAUSED,a._handlePaused],[u.default.EVENT_TIMEUPDATE,a._handleTimeUpdate],[u.default.EVENT_PLAYBACK_PROGRESS,a._handlePlaybackProgress],[u.default.EVENT_SEEKSTART,a._handleSeekstart],[u.default.EVENT_SEEKING,a._handleSeeking],[u.default.EVENT_SEEKED,a._handleSeeked],[u.default.EVENT_ENDED,a._handleEnded],[u.default.EVENT_ERROR,a._handleError],[u.default.EVENT_VIDEO_CLICKTHROUGH,a._handleVideoClickthrough],[u.default.EVENT_ACTION_CLICKTHROUGH,a._handleActionClickthrough],[u.default.EVENT_VE_DISPLAYED,a._handleVEDisplayed],[u.default.EVENT_VE_HIDDEN,a._handleVEHidden],[u.default.EVENT_VE_CLICKTHROUGH,a._handleVEClickthrough],[u.default.EVENT_VE_CLOSE,a._handleVEClose],[u.default.EVENT_VE_ERROR,a._handleVEError],[u.default.EVENT_SKIP_VIDEO_REQUEST,a.skip],[u.default.EVENT_USER_ACCEPT_INVITATION,a._handleUserAcceptInvitation],[u.default.EVENT_USER_MINIMIZE,a._handleUserMinimize],[u.default.EVENT_USER_CLOSE,a._handleUserClose],[u.default.EVENT_IMPRESSION,a._handleImpression]]),a._uiAgentEventsMap=new Map([[h.default.EVENT_REPLAY_REQUEST,a._handleReplayRequest]]),a._originalContent=null,a._content=null,a._currentLinearAd=null,a._logoSrc="",a._overlays=[],a._originalOverlays=[],a._actionCaption="",a._sponsors=[],a._promos=[],a._prerolls=[],a._adPoints=[],a._midrollsNow=[],a._postrolls=[],a._endAdScreen=null,a._mode=C,a._adsCount={},a._lastContentTime=null,a._lastNearAdPointIdx=null,a._isContentEnded=!1,a._contentReady=!1,a._notPlayed=!0,a._wasPlaying=!1,a._isNearEnd=!1,a._isReplay=!1,a._wasContentAlreadySet=!1,a._stopPropagation={},a._colorProfile=d.default,a._settingQualityVisible=!0,a._settingSubtitlesVisible=!0,a._exactTimeTimer=null,a._settingFullscreenVisible=!0,a._controlsHidden=!1,a._fragmentors={AD:new E.default,CONTENT:new E.default},a._played={AD:new k.default,CONTENT:new k.default},a.bindAll(a._uiAgentEventsMap),a.addListeners(a._uiAgent,a._uiAgentEventsMap),window.addEventListener("unload",function(){a.emit(i.EVENT_UNLOAD)}),a._options.id=a._options.id||a._utils.generateId("rmp"),a._uiAgent.setDialogScreen(a._dialogScreen);var l=["_finishCancelStop","_finishStop","_finishSkip","_finishReplay"];return l.forEach(function(e){a[e]=a[e].bind(a)},a),a}return e.inherits(i,t),e.createClass(i,[{key:"destroy",value:function(){this.emit(i.EVENT_DESTROYING),this._stopCheckingExactTime(),this._uiMediaPlayer&&this._uiMediaPlayer.destroy()}},{key:"getPlayerId",value:function(){return this._options.id}},{key:"getElement",value:function(){return this._uiAgent.getElement()}},{key:"getTechName",value:function(){return this._mainPlayer?this._mainPlayer.constructor.getTechName():""}},{key:"getLocalStoragePrefix",value:function(){return this._options.localStoragePrefix}},{key:"getCurrentAd",value:function(){return this._currentLinearAd}},{key:"getContent",value:function(){return this._originalContent}},{key:"getResolvedContent",value:function(){if(!this._uiMediaPlayer||!this._content)return null;var e={};return this._mode===b&&(e={source:this._uiMediaPlayer.getResolvedSource(),textSource:this._uiMediaPlayer.getTextSource()}),Object.assign({},this._content,e)}},{key:"getCurrentSrc",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getCurrentSrc():""}},{key:"getQuality",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getQuality():null}},{key:"getTextTrack",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getTextTrack():null}},{key:"getVideoWidth",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getVideoWidth():0}},{key:"getVideoHeight",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getVideoHeight():0}},{key:"getVolume",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getVolume():1}},{key:"getInitMute",value:function(){return!!this._options.muted}},{key:"getTransitionWaitingTime",value:function(){return this._options.transitionWaitingTime}},{key:"getCurrentTime",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getCurrentTime():NaN}},{key:"getStartTime",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getStartTime():NaN}},{key:"getDuration",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getDuration():NaN}},{key:"getBuffered",value:function(e){return this._uiMediaPlayer?this._uiMediaPlayer.getBuffered(e):null}},{key:"getProgressHistory",value:function(){return this._mode===C?null:this._uiMediaPlayer?this._played[this._mode].getHistory():null}},{key:"getProgressStart",value:function(){return this._mode===C?null:this._uiMediaPlayer?this._played[this._mode].getStart():null}},{key:"getProgressLength",value:function(){return this._mode===C?null:this._uiMediaPlayer?this._played[this._mode].getLength():null}},{key:"getCompleteRestFragmentLength",value:function(e){return this._mode===C?null:this._uiMediaPlayer?this._fragmentors[this._mode].getCompleteRestFragmentLength(e):null}},{key:"getVisualElements",value:function(){return this._uiMediaPlayer?this._uiMediaPlayer.getVisualElements():[]}},{key:"getOverlays",value:function(){return this._overlays}},{key:"getAdsCount",value:function(e){return this._adsCount[e]||0}},{key:"isReady",value:function(){return this._uiMediaPlayer&&this._uiMediaPlayer.isReady()}},{key:"isContentReady",value:function(){return!!this._uiMediaPlayer&&this._contentReady}},{key:"isMuted",value:function(){return!!this._uiMediaPlayer&&this._uiMediaPlayer.isMuted()}},{key:"isPlaying",value:function(){return!!this._uiMediaPlayer&&this._uiMediaPlayer.isPlaying()}},{key:"isPaused",value:function(){return!this._uiMediaPlayer||this._uiMediaPlayer.isPaused()}},{key:"isEnded",value:function(){return!!this._uiMediaPlayer&&this._uiMediaPlayer.isEnded()}},{key:"isBufferEmpty",value:function(){return!this._uiMediaPlayer||this._uiMediaPlayer.isBufferEmpty()}},{key:"isDisplayingAdScreen",value:function(){return this._endAdScreen&&this._uiAgent.isDialogActive()}},{key:"isFullscreen",value:function(){return!!this._uiMediaPlayer&&this._uiMediaPlayer.isFullscreen()}},{key:"isAdaptive",value:function(){return!!this._uiMediaPlayer&&this._uiMediaPlayer.isAdaptiveSource()}},{key:"isLive",value:function(){return!!this._uiMediaPlayer&&(this._uiMediaPlayer.isLive()||this._uiMediaPlayer.isEvent())}},{key:"isLiveStreaming",value:function(){return!!this._uiMediaPlayer&&this._uiMediaPlayer.isLiveStreaming()}},{key:"isAdMode",value:function(){return!!this._uiMediaPlayer&&this._mode===S}},{key:"isReplay",value:function(){return this._isReplay}},{key:"isFragmentComplete",value:function(e){return this._mode===C?null:!!this._uiMediaPlayer&&this._fragmentors[this._mode].isFragmentComplete(e)}},{key:"isVisualElementShown",value:function(e){return!!this._uiMediaPlayer&&this._uiMediaPlayer.isVisualElementShown(e)}},{key:"isFeatureSupported",value:function(e){return"vpaid"===e.toLowerCase()?"html"===this._mainPlayer.constructor.getTechName()&&!this._env.isTouch():"vast"===e.toLowerCase()}},{key:"hasQuality",value:function(e){return!!this._uiMediaPlayer&&this._uiMediaPlayer.hasQuality(e)}},{key:"hasTextTrack",value:function(e){return!!this._uiMediaPlayer&&this._uiMediaPlayer.hasTextTrack(e)}},{key:"canRunVisualElementType",value:function(e){return!!this._uiMediaPlayer&&this._uiMediaPlayer.canRunVisualElementType(e)}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._uiMediaPlayer){e&&e.fsElement&&(this._fsElement=e.fsElement);try{this._mainPlayer=this._uiMediaPlayerCreator(this._options),this._uiMediaPlayer=new v.default({},{},{},this._options),this._uiMediaPlayer.registerStrategy("main",this._mainPlayer),this._uiMediaPlayer.switchStrategy("main")}catch(e){return void this._handleError(e)}this._uiAgent.setPlayer(this._uiMediaPlayer),this._mainPlayer.canConfigureFullscreen()&&this._mainPlayer.configureFullscreen({element:this._fsElement}),this.bindAll(this._eventsMap),this.addListeners(this._uiMediaPlayer,this._eventsMap),this._uiMediaPlayer.isReady()&&this._techReadyResolve()}}},{key:"setColorProfile",value:function(e){this._colorProfile=e}},{key:"settingQualityVisible",value:function(e){this._settingQualityVisible=e}},{key:"settingSubtitlesVisible",value:function(e){this._settingSubtitlesVisible=e}},{key:"settingFullscreenVisible",value:function(e){this._settingFullscreenVisible=e}},{key:"setLogo",value:function(e){this._logoSrc=e,this._mode===b&&(this._uiMediaPlayer.setLogo(this._logoSrc),this._uiMediaPlayer.showLogo())}},{key:"setActionArea",value:function(e){this._actionCaption=e,this._mode===b&&this._uiMediaPlayer.setActionArea(this._actionCaption)}},{key:"setLocalizedTexts",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.setLocalizedTexts(e)})}},{key:"setSourcePreload",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.setSourcePreload(e)})}},{key:"setVolume",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.setVolume(e)})}},{key:"setMute",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.setMute(e)})}},{key:"setContent",value:function(e){var t=this;if(!e.id){var n=T.createError(a.default.SETTING,"Content ID must be specified.");return Promise.reject(n)}if("string"!=typeof e.id){
var o=T.createError(a.default.SETTING,"Content ID must be a string.");return Promise.reject(o)}if(!e.source){var s=T.createError(a.default.SETTING,"Content source must be specified.");return Promise.reject(s)}return this.reset(),this._originalContent=e,this._content=Object.assign({},e,{source:u.default.copySource(e.source),textSource:u.default.copySource(e.textSource)}),this.emit(i.EVENT_CONTENT_SET,{content:e}),this.emit(i.EVENT_PROGRAMME_BEGIN,{content:e}),this._uiMediaPlayerReady.then(function(){return t._setAndPlayNext()})}},{key:"setSponsor",value:function(t){var n,o=Array.isArray(t)?t:[t];(n=this._sponsors).push.apply(n,e.toConsumableArray(o)),this._adsCount[i.adRole.SPONSOR]=this._sponsors.length}},{key:"setPromo",value:function(t){var n,o=Array.isArray(t)?t:[t];(n=this._promos).push.apply(n,e.toConsumableArray(o)),this._adsCount[i.adRole.PROMO]=this._promos.length}},{key:"setPreroll",value:function(t){var n,o=Array.isArray(t)?t:[t];(n=this._prerolls).push.apply(n,e.toConsumableArray(o)),this._adsCount[i.adRole.PREROLL]=this._prerolls.length}},{key:"setMidroll",value:function(t){var n,o=Array.isArray(t)?t:[t];(n=this._midrollsNow).push.apply(n,e.toConsumableArray(o)),this._adsCount[i.adRole.MIDROLL]=this._midrollsNow.length,this._uiMediaPlayer.isPlaying()&&this._tryStartPlayingMidrolls()}},{key:"addMidrollPoint",value:function(e){var t=this,i=Array.isArray(e)?e:[e];this._adPoints.forEach(function(e){t._uiMediaPlayer.removeAdPoint({time:e.time})}),this._adPoints=this._adPoints.concat(i),this._adPoints.sort(function(e,t){return e.time-t.time}),this._adPoints=this._adPoints.filter(function(e,i,n){var o=i>0?n[i-1]:{};return e.time===o.time?("condition"in e&&(o.condition=e.condition),"keywords"in e&&("keywords"in o?o.keywords=o.keywords+" "+e.keywords:o.keywords=e.keywords),!1):(e.isSuccessful&&t._uiMediaPlayer.addAdPoint({time:e.time}),!0)})}},{key:"setPostroll",value:function(t){var n,o=Array.isArray(t)?t:[t];(n=this._postrolls).push.apply(n,e.toConsumableArray(o)),this._adsCount[i.adRole.POSTROLL]=this._postrolls.length}},{key:"setEndAdScreen",value:function(e){this._endAdScreen=e}},{key:"setQuality",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.setQuality(e)})}},{key:"setTextTrack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._uiMediaPlayerReady.then(function(){e._uiMediaPlayer.setTextTrack(t)})}},{key:"setControlsHidden",value:function(e){this._controlsHidden=e}},{key:"setPp",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.setPp(e)})}},{key:"setOverlays",value:function(e){if(!e||!Array.isArray(e))throw T.createError(a.default.SETTING,"Overlays must be an Array.");this._originalOverlays=e,this._mode===b&&this._setOverlays(this._originalOverlays)}},{key:"addVisualElement",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.addVisualElement(e)})}},{key:"showVisualElement",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.showVisualElement(e)})}},{key:"showVisualElementClose",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.showVisualElementClose(e)})}},{key:"hideVisualElement",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.hideVisualElement(e)})}},{key:"abortVisualElement",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.abortVisualElement(e)})}},{key:"removeVisualElement",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._uiMediaPlayer.removeVisualElement(e)})}},{key:"removeVisualElements",value:function(){var e=this;this._uiMediaPlayerReady.then(function(){e._uiMediaPlayer.removeVisualElements()})}},{key:"setVisualElementDefaultPosition",value:function(e,t){var i=this;this._uiMediaPlayerReady.then(function(){i._uiMediaPlayer.setVisualElementDefaultPosition(e,t)})}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t&&this._uiMediaPlayer&&this._uiMediaPlayer.isReady()?(this._cancelStop(),this._wasPlaying=!0,void this._uiMediaPlayer.play()):void this._uiMediaPlayerReady.then(function(){e._cancelStop(),e._wasPlaying=!0,e._uiMediaPlayer.play()})}},{key:"pause",value:function(){var e=this;this._uiMediaPlayerReady.then(function(){e._uiMediaPlayer.pause()})}},{key:"stop",value:function(){var e=this;this._uiMediaPlayer&&this._uiMediaPlayerReady.then(function(){e._stopPropagation[u.default.EVENT_PAUSED]=!0,e._uiMediaPlayer.once(u.default.EVENT_PAUSED,e._finishStop),e.registerPendingEvent(e._uiMediaPlayer,u.default.EVENT_PAUSED,e._finishStop),e._uiMediaPlayer.pause(),e._restoreContent().then(function(){e._isStopped=!0},function(t){var i=e.getErrorIfIsReason(t);i&&e._handleError(i)}),e.emit(i.EVENT_STOPPED),e.showDialog({kind:p.default.layout.STOP,poster:e._content.poster})})}},{key:"replay",value:function(){var e=this;this._uiMediaPlayer&&this._uiMediaPlayerReady.then(function(){e._stopPropagation[u.default.EVENT_PAUSED]=!0,e._uiMediaPlayer.once(u.default.EVENT_PAUSED,e._finishReplay),e.registerPendingEvent(e._uiMediaPlayer,u.default.EVENT_PAUSED,e._finishReplay),e._uiMediaPlayer.pause(),e._restoreContent().then(function(){e._uiMediaPlayer.seek(0),e._isReplay=!0,e._uiMediaPlayer.play()},function(t){var i=e.getErrorIfIsReason(t);i&&e._handleError(i)})})}},{key:"seek",value:function(e){var t=this;this._uiMediaPlayerReady.then(function(){t._isStopped=!1,t._uiMediaPlayer.seek(e)})}},{key:"skip",value:function(){this._uiMediaPlayer&&(this.emit(i.EVENT_SKIP,{time:this._uiMediaPlayer.getCurrentTime()}),this._stopPropagation[u.default.EVENT_PAUSED]=!0,this._uiMediaPlayer.once(u.default.EVENT_PAUSED,this._finishSkip),this.registerPendingEvent(this._uiMediaPlayer,u.default.EVENT_PAUSED,this._finishSkip),this._uiMediaPlayer.pause(),this._uiMediaPlayer.skip(),this._mode===S&&(null===this._lastContentTime?this._prerolls.length?this._prerolls.shift():this._promos.length?this._promos.shift():this._sponsors.shift():this._isContentEnded?this._postrolls.shift():this._midrollsNow.shift()),this._setAndPlayNext())}},{key:"showPp",value:function(){var e=this;this._uiMediaPlayerReady.then(function(){e._uiMediaPlayer.showPp()})}},{key:"hidePp",value:function(){var e=this;this._uiMediaPlayerReady.then(function(){e._uiMediaPlayer.hidePp()})}},{key:"showDialog",value:function(t){if("object"!==("undefined"==typeof t?"undefined":e.typeof(t))||!t)throw T.createError(a.default.SETTING,"Invalid argument options.");var i=Object.assign({},t);this._uiAgent.showDialog(i)}},{key:"hideDialog",value:function(){this._uiAgent.hideDialog()}},{key:"enterFullscreen",value:function(){this._uiMediaPlayer&&this._uiMediaPlayer.enterFullscreen()}},{key:"exitFullscreen",value:function(){this._uiMediaPlayer&&this._uiMediaPlayer.exitFullscreen()}},{key:"reset",value:function(){this._mode!==C&&this.emit(i["EVENT_"+this._mode+"_END"]),this._stopCheckingExactTime(),this.abortPending(),this._resetAdPoints(),this._uiAgent.hideDialog(),this._isStopped=!1,this._uiMediaPlayer&&this._uiMediaPlayer.isReady()&&this._uiMediaPlayer.reset(),this._mode=C,this._adsCount={},this._originalContent=null,this._content=null,this._currentLinearAd=null,this._sponsors=[],this._promos=[],this._prerolls=[],this._midrollsNow=[],this._postrolls=[],this._endAdScreen=null,this._lastNearAdPointIdx=null,this._lastContentTime=null,this._isContentEnded=!1,this._isNearEnd=!1,this._contentReady=!1,this._notPlayed=!0,this._wasPlaying=!1,this._wasContentAlreadySet=!1,this._isReplay=!1,this._stopPropagation={}}},{key:"_setOverlays",value:function(e){var t=this,i=[],n=[];e.forEach(function(e){var o=t._getCreativeIdx(e);if(null!==o){var s=e.creatives[o],r={};s.position&&s.position.x&&(r.x={origin:s.position.x.origin,center:!!s.position.x.center,value:t._utils.formatPx(s.position.x.value)}),s.position&&s.position.y&&(r.y={origin:s.position.y.origin,center:!!s.position.y.center,value:t._utils.formatPx(s.position.y.value)});var a=Object.assign({id:e.id,start:e.start,duration:e.duration},s,{width:t._utils.formatPx(s.width),height:t._utils.formatPx(s.height),position:r});t._validateOverlay(a)&&(i.push(a),n.push(t._getVisualElementFromOverlay(a)))}}),this._overlays.forEach(function(e){i.find(function(t){return t.id===e.id})||t.removeVisualElement(e.id)}),n.forEach(function(e){t._overlays.find(function(t){return t.id===e.id})||t.addVisualElement(e)}),this._overlays=i}},{key:"_validateOverlay",value:function(e){if(!e.id){var t=T.createError(a.default.SETTING,"Visual element ID must be specified.");return this._handleError(t),!1}if(!e.start||"atTime"!==e.start.type&&"afterStart"!==e.start.type&&"beforeEnd"!==e.start.type){var i=T.createError(a.default.SETTING,"Visual element start is not defined.");return this._handleError(i),!1}if(!e.duration){var n=T.createError(a.default.SETTING,"Visual element duration must be specified.");return this._handleError(n),!1}if(!(e.position&&e.position.x&&e.position.y)){var o=T.createError(a.default.SETTING,"Visual element position is not defined.");return this._handleError(o),!1}if("left"!==e.position.x.origin&&"right"!==e.position.x.origin){var s=T.createError(a.default.SETTING,"Unknown visual element x-origin: "+('"'+e.position.x.origin+'".'));return this._handleError(s),!1}if("top"!==e.position.y.origin&&"bottom"!==e.position.y.origin){var r=T.createError(a.default.SETTING,"Unknown visual element y-origin: "+('"'+e.position.y.origin+'".'));return this._handleError(r),!1}if(e.click&&!Array.isArray(e.click)){var l=T.createError(a.default.SETTING,"Visual element click actions must be an array.");return this._handleError(l),!1}if(e.animation){if(!e.animation.params){var u=T.createError(a.default.SETTING,"VisualElementual element animation params must be defined");return this._handleError(u),!1}if(!e.animation.params.duration){var c=T.createError(a.default.SETTING,"VisualElementual element animation duration must be defined");return this._handleError(c),!1}if("top"!==e.animation.params.direction&&"bottom"!==e.animation.params.direction&&"left"!==e.animation.params.direction&&"right"!==e.animation.params.direction){var d=T.createError(a.default.SETTING,"VisualElementual element animation direction must be defined");return this._handleError(d),!1}}return!0}},{key:"_getCreativeIdx",value:function(e){for(var t=0;t<e.creatives.length;t++){var i=e.creatives[t];if(this.canRunVisualElementType(i.type))return t}return null}},{key:"_getVisualElementFromOverlay",value:function(e){var t=e.click&&e.click.find(function(e){return"clickthrough"===e.command&&e.params&&e.params.uri}),i={id:e.id,start:e.start,src:e.src||"",bgcolor:e.bgcolor||"",content:e.content||"",type:e.type,width:e.width,height:e.height,position:e.position,animation:e.animation||null,clickthrough:t?t.params.uri:""};return i}},{key:"_removeOverlayVisualElements",value:function(){var e=this;this._overlays.forEach(function(t){e.removeVisualElement(t.id)}),this._overlays=[]}},{key:"_restoreContent",value:function(){var e=this;if(this._uiMediaPlayer.isPlaying()){var t=T.createError(a.default.GENERAL,"Player must be paused.");return Promise.reject(t)}var n=null;return this._mode===S&&(this.emit(i.EVENT_SKIP,{time:this._uiMediaPlayer.getCurrentTime()}),this.emit(i.EVENT_AD_END),this._mode=C),this._mode===b&&(this.emit(i.EVENT_CONTENT_END),this._mode=C),this.abortPending(),this._resetAdPoints(),this._uiAgent.hideDialog(),this._sponsors=[],this._promos=[],this._prerolls=[],this._midrollsNow=[],this._postrolls=[],this._endAdScreen=null,this._lastNearAdPointIdx=null,this._lastContentTime=null,this._isContentEnded=!1,this._isNearEnd=!1,this._isStopped=!1,this._mode!==b&&(this.emit(i.EVENT_CONTENT_SET,{content:this._originalContent}),this.emit(i.EVENT_PROGRAMME_BEGIN,{content:this._originalContent}),this._setContent(this._content).catch(function(t){var i=e.getErrorIfIsReason(t);i&&e._handleError(i)})),n=this._contentReady?Promise.resolve():new Promise(function(t,i){e._uiMediaPlayer.once(u.default.EVENT_SOURCE_READY,function(){t()}),e.registerPendingPromise(i)})}},{key:"_setAd",value:function(e,t){var n=this;this._isStopped=!1,this._uiMediaPlayer.reset(),this._mode=S;var o=e.sourceVpaid&&this.isFeatureSupported("vpaid");if(o)this._vpaidPlayer=this._vpaidPlayer||function(){var e=n._uiVpaidPlayerCreator();return e.configureFullscreen({element:n._fsElement}),n._uiMediaPlayer.registerStrategy("vpaid",e),e}(),this._uiMediaPlayer.switchStrategy("vpaid");else{if(!e.source){var s=T.createError(a.default.AD,"No supported linear-ad found.");return s.hitData={ERRORCODE:403},this._handleError(s),Promise.resolve()}this._uiMediaPlayer.switchStrategy("main")}this._wasPlaying&&this._uiMediaPlayer.setSourcePreload(!0),this.emit(i.EVENT_AD_BEGIN,{role:t,material:e}),this._fragmentors[S].start(),this._played[S].start();var r=null,l=new Promise(function(e,t){r=e,n.registerPendingPromise(t)}),c=function(){r()};this._uiMediaPlayer.once(u.default.EVENT_SOURCE_READY,c),this.registerPendingEvent(this._uiMediaPlayer,u.default.EVENT_SOURCE_READY,c);try{this._uiMediaPlayer.setSource(o?e.sourceVpaid:e.source,{disableAdaptive:this._content.disableAdaptive,forcedQualityIdx:this._content.forcedQualityIdx,forcedQualityFunc:this._content.forcedQualityFunc,storedQualityIdx:this._content.storedQualityIdx,bandwidth:this._content.bandwidth})}catch(e){return e.hitData||(e.hitData={ERRORCODE:400}),this._handleError(e),l}return this._uiMediaPlayer.setAdvertLayout({seekingEnabled:!1,settingQualityVisible:this._settingQualityVisible,settingQualityEnabled:!1,settingSubtitlesVisible:this._settingSubtitlesVisible,settingSubtitlesEnabled:!1,settingFullscreenVisible:this._settingFullscreenVisible,settingFullscreenEnabled:!0,videoSkippableAfter:e.skipOffset||-1,adLayout:e.layout||"default",adUrl:e.clickthrough||"",adUrlTarget:e.clickthroughTarget||"_blank",colors:{progressBar:this._colorProfile.progressBarAdvert,indicator:this._colorProfile.indicator}}),this._uiMediaPlayer.hideLogo(),this._uiMediaPlayer.hideAdPoints(),this._controlsHidden&&this._uiMediaPlayer.setControlsHidden(this._controlsHidden),this._removeOverlayVisualElements(),this._notPlayed=!0,this._currentLinearAd=e,e.textSource&&this._uiMediaPlayer.setTextSource(e.textSource),l}},{key:"_setContent",value:function(e,t){var n=this;this._isStopped=!1,this._uiMediaPlayer.reset(),this._mode=b,this._uiMediaPlayer.switchStrategy("main"),this._wasPlaying&&this._uiMediaPlayer.setSourcePreload(!0),t?this.emit(i.EVENT_CONTENT_RESTORE,{material:this._originalContent}):(this.emit(i.EVENT_CONTENT_BEGIN,{material:this._originalContent}),this._fragmentors[b].start(e.startTime),this._played[b].start(e.startTime)),this._contentReady=!1;var o=null,s=new Promise(function(e,t){o=e,n.registerPendingPromise(t)}),r=function(){n._contentReady=!0,n.emit(i.EVENT_CONTENT_READY,{content:n.getResolvedContent()}),o()};return this._uiMediaPlayer.once(u.default.EVENT_SOURCE_READY,r),this.registerPendingEvent(this._uiMediaPlayer,u.default.EVENT_SOURCE_READY,r),this._uiMediaPlayer.setSource(e.source,{startTime:null!==this._lastContentTime?this._lastContentTime:e.startTime,streamingType:e.streamingType,disableAdaptive:e.disableAdaptive,forcedQualityIdx:e.forcedQualityIdx,forcedQualityFunc:e.forcedQualityFunc,storedQualityIdx:e.storedQualityIdx,bandwidth:e.bandwidth}),this._uiMediaPlayer.setDefaultLayout({videoCountdownBefore:this._options.countdownBeforeAd||0,settingQualityVisible:this._settingQualityVisible,settingQualityEnabled:this._settingQualityVisible,settingSubtitlesVisible:this._settingSubtitlesVisible,settingSubtitlesEnabled:this._settingSubtitlesVisible,settingFullscreenVisible:this._settingFullscreenVisible,settingFullscreenEnabled:this._settingFullscreenVisible,colors:{progressBar:this._colorProfile.progressBarDefault,indicator:this._colorProfile.indicator}}),this._uiMediaPlayer.setLogo(this._logoSrc),this._uiMediaPlayer.showLogo(),this._uiMediaPlayer.setActionArea(this._actionCaption),this._uiMediaPlayer.showAdPoints(),this._controlsHidden&&this._uiMediaPlayer.setControlsHidden(this._controlsHidden),this._originalOverlays.length&&this._setOverlays(this._originalOverlays),this._notPlayed=!t,this._wasContentAlreadySet=!0,this._currentLinearAd=null,e.textSource&&this._uiMediaPlayer.setTextSource(e.textSource),s}},{key:"_getAdPointIdx",value:function(e){for(var t=0,i=this._adPoints.length-1,n=void 0,o=-1;t<=i;)n=Math.floor((t+i)/2),this._adPoints[n].time<e?(t=n+1,this._adPoints[n].disabled||(o=n)):i=n-1;return o!==-1&&e-this._adPoints[o].time<1?o:-1}},{key:"_tryStartPlayingMidrolls",value:function(){var e=this;this._mode!==S&&this._midrollsNow.length&&(this._uiMediaPlayer.pause(),this._setAd(this._midrollsNow[0],i.adRole.MIDROLL).then(function(){e._uiMediaPlayer.play()}).catch(function(t){var i=e.getErrorIfIsReason(t);i&&(i.hitData||(i.hitData={ERRORCODE:400}),e._handleError(i))}))}},{key:"_cancelStop",value:function(){this._isStopped&&(this._isStopped=!1,this._stopPropagation[u.default.EVENT_SEEKSTART]=this._stopPropagation[u.default.EVENT_SEEKING]=this._stopPropagation[u.default.EVENT_SEEKED]=!0,this._uiMediaPlayer.once(u.default.EVENT_SEEKED,this._finishCancelStop),this.registerPendingEvent(this._uiMediaPlayer,u.default.EVENT_SEEKED,this._finishCancelStop),this._uiMediaPlayer.seek(0))}},{key:"_handleReplayRequest",value:function(){this._isReplay=!0,this.play()}},{key:"_resetAdPoints",value:function(){this._adPoints=[],this._uiMediaPlayer&&this._uiMediaPlayer.resetAdPoints()}},{key:"_startCheckingExactTime",value:function(){var e=this;this._exactTimeTimer||(this._exactTimeTimer=requestAnimationFrame(function(){return e._checkExactTime()}))}},{key:"_stopCheckingExactTime",value:function(){this._exactTimeTimer&&(cancelAnimationFrame(this._exactTimeTimer),this._exactTimeTimer=null)}},{key:"_checkExactTime",value:function(){var e=this,t=this.getCurrentTime();if(this._mode===b&&!isNaN(t)){this._lastContentTime=t;var n=Math.round(100*t)/100,o=this._getAdPointIdx(n);if(o>-1){var s=this._adPoints[o];this._adPoints[o].disabled=!0,this._uiMediaPlayer.removeAdPoint({time:s.time}),s&&this.emit(i.EVENT_ADPOINT,s)}}this._exactTimeTimer=requestAnimationFrame(function(){return e._checkExactTime()})}},{key:"_handleReady",value:function(){this._techReadyResolve(),this.emit(i.EVENT_READY)}},{key:"_handleFullscreenChange",value:function(e){this.emit(i.EVENT_FULLSCREEN_CHANGE,e)}},{key:"_handleVolumeChange",value:function(e){this.emit(i.EVENT_VOLUME_CHANGE,e),e.muted&&this._uiMediaPlayer.getTextSource()&&null===this._uiMediaPlayer.getTextTrack()&&this._uiMediaPlayer.setTextTrack(0)}},{key:"_handleQualitySet",value:function(e){e.autoset||(this._content.storedQualityIdx=e.qualityIdx),this.emit(i.EVENT_QUALITY_SET,e)}},{key:"_handleDurationChange",value:function(e){this.emit(i["EVENT_"+this._mode+"_DURATION_CHANGE"],e)}},{key:"_handleLoadedMetadata",value:function(e){this.emit(i["EVENT_"+this._mode+"_LOADED_METADATA"],e)}},{key:"_handleSourceSet",value:function(e){this.emit(i["EVENT_"+this._mode+"_SOURCE_SET"],e)}},{key:"_handleTextSourceSet",value:function(e){this.emit(i["EVENT_"+this._mode+"_TEXT_SOURCE_SET"],e)}},{key:"_handleTextTrackSet",value:function(e){this.emit(i.EVENT_TEXT_TRACK_SET,e)}},{key:"_handleLoadedData",value:function(e){this.emit(i["EVENT_"+this._mode+"_LOADED_DATA"])}},{key:"_handleLoadedSegment",value:function(e){this.emit(i["EVENT_"+this._mode+"_LOADED_SEGMENT"],e)}},{key:"_handleBufferEmpty",value:function(e){this.emit(i.EVENT_BUFFER_EMPTY,e)}},{key:"_handleCanPlay",value:function(e){this.emit(i["EVENT_"+this._mode+"_CAN_PLAY"],e)}},{key:"_handlePlay",value:function(e){this._startCheckingExactTime()}},{key:"_handlePlaying",value:function(e){this.emit(i.EVENT_PLAYING,Object.assign(e,{mode:this._mode,first:this._notPlayed})),this._notPlayed=!1,this._wasPlaying=!0,this._tryStartPlayingMidrolls()}},{key:"_handlePaused",value:function(e){this._stopCheckingExactTime(),this._stopPropagation[u.default.EVENT_PAUSED]||this.emit(i.EVENT_PAUSED,Object.assign(e,{mode:this._mode}))}},{key:"_handleTimeUpdate",value:function(e){var t=e.time;if(this._mode!==C){this._fragmentors[this._mode].update(t),this._played[this._mode].update(t);var n=this._uiMediaPlayer.getDuration();if(n){var o=this._played[this._mode].getLength(),s=o/n*100;this.emit(i.EVENT_PLAYBACK_PROGRESS,{time:o,percent:s})}this._mode===b&&(this._lastContentTime=t,this.isPlaying()&&!this._isNearEnd&&!this._uiMediaPlayer.isLiveStreaming()&&t+i.NEAR_TIME>=this._uiMediaPlayer.getDuration()&&(this._isNearEnd=!0,this.emit(i.EVENT_NEAR_END,{}))),this.emit(i.EVENT_TIMEUPDATE,e)}}},{key:"_handlePlaybackProgress",value:function(e){this.emit(i.EVENT_PLAYBACK_PROGRESS,e)}},{key:"_handleSeekstart",value:function(e){this._stopPropagation[u.default.EVENT_SEEKSTART]||this.emit(i.EVENT_SEEKSTART,e)}},{key:"_handleSeeking",value:function(e){this._fragmentors[this._mode].reset(),this._played[this._mode].reset(),this._stopPropagation[u.default.EVENT_SEEKING]||this.emit(i.EVENT_SEEKING,e)}},{key:"_handleSeeked",value:function(e){this._stopPropagation[u.default.EVENT_SEEKED]||this.emit(i.EVENT_SEEKED,e)}},{key:"_handleEnded",value:function(){this._fragmentors[this._mode].update(this._uiMediaPlayer.getDuration()),this._played[this._mode].update(this._uiMediaPlayer.getDuration()),this._isNearEnd||(this._isNearEnd=!0,this.emit(i.EVENT_NEAR_END,{})),this.emit(i.EVENT_ENDED,{mode:this._mode}),this._mode===S?(null===this._lastContentTime?this._prerolls.length?this._prerolls.shift():this._promos.length?this._promos.shift():this._sponsors.shift():this._isContentEnded?this._postrolls.shift():this._midrollsNow.shift(),this._setAndPlayNext()):this._mode===b&&(this._isContentEnded=!0,this._setAndPlayNext())}},{key:"_handleVideoClickthrough",value:function(e){this.pause(),this.emit(i.EVENT_VIDEO_CLICKTHROUGH,e)}},{key:"_handleActionClickthrough",value:function(e){this.emit(i.EVENT_ACTION_CLICKTHROUGH,e)}},{key:"_handleVEDisplayed",value:function(e){this.emit(i.EVENT_VE_DISPLAYED,e)}},{key:"_handleVEHidden",value:function(e){this.emit(i.EVENT_VE_HIDDEN,e)}},{key:"_handleVEClickthrough",value:function(e){this.pause(),this.emit(i.EVENT_VE_CLICKTHROUGH,e)}},{key:"_handleVEClose",value:function(e){this.emit(i.EVENT_VE_CLOSE,e)}},{key:"_handleVEError",value:function(e){var t=T.createError(a.default.SETTING,'Visual element with id "'+e.id+'" threw the following'+(" error: "+e.error+"."));this.emit(i.EVENT_ERROR,t)}},{key:"_handleUserAcceptInvitation",value:function(e){this.emit(i.EVENT_USER_ACCEPT_INVITATION,e)}},{key:"_handleUserMinimize",value:function(e){this.emit(i.EVENT_USER_MINIMIZE,e)}},{key:"_handleUserClose",value:function(e){this.emit(i.EVENT_USER_CLOSE,e)}},{key:"_handleImpression",value:function(e){this.emit(i.EVENT_IMPRESSION,e)}},{key:"_setAndPlayNext",value:function(){var e=this,t=null===this._lastContentTime;this._mode===S&&(this.emit(i.EVENT_AD_END),this._mode=C);var n=null;if(t&&this._prerolls.length)n=this._setAd(this._prerolls[0],i.adRole.PREROLL);else if(t&&this._promos.length)n=this._setAd(this._promos[0],i.adRole.PROMO);else if(t&&this._sponsors.length)n=this._setAd(this._sponsors[0],i.adRole.SPONSOR);else if(t||this._isContentEnded||!this._midrollsNow.length)if(!t&&this._isContentEnded&&this._postrolls.length)this.emit(i.EVENT_CONTENT_END),this._mode=C,n=this._setAd(this._postrolls[0],i.adRole.POSTROLL);else if(this._isContentEnded){if(this.emit(i.EVENT_CONTENT_END),this._mode=C,this.emit(i.EVENT_ENDADSCREEN_POINT),this._endAdScreen)return this.exitFullscreen(),this.showDialog({kind:p.default.layout.AD,caption:this._endAdScreen.caption,content:this._endAdScreen.content}),this.emit(i.EVENT_PROGRAMME_END),Promise.resolve();this.emit(i.EVENT_PROGRAMME_END)}else this._isContentEnded||(n=this._setContent(this._content,!t));else n=this._setAd(this._midrollsNow[0],i.adRole.MIDROLL);return null!==n?n.then(function(){e._wasPlaying&&e._uiMediaPlayer.play()}).catch(function(t){var i=e.getErrorIfIsReason(t);i&&e._handleError(i)}):(this.stop(),Promise.resolve())}},{key:"_finishCancelStop",value:function(){this._stopPropagation[u.default.EVENT_SEEKSTART]=this._stopPropagation[u.default.EVENT_SEEKING]=this._stopPropagation[u.default.EVENT_SEEKED]=!1}},{key:"_finishStop",value:function(){this._stopPropagation[u.default.EVENT_PAUSED]=!1}},{key:"_finishSkip",value:function(){this._stopPropagation[u.default.EVENT_PAUSED]=!1}},{key:"_finishReplay",value:function(){this._stopPropagation[u.default.EVENT_PAUSED]=!1}},{key:"_handleError",value:function(e){if(this.abortPending(),this.emit(i.EVENT_ERROR,e),this._mode===S){var t=null===this._lastContentTime;t?this._prerolls.length?this._prerolls.shift():this._promos.length?this._promos.shift():this._sponsors.shift():this._isContentEnded?this._postrolls.shift():this._midrollsNow.shift(),this._setAndPlayNext()}}}]),i}(s.default);P.adRole={PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll",SPONSOR:"sponsor",PROMO:"promo"},P.MODE_IDLE=C,P.MODE_CONTENT=b,P.MODE_AD=S,P.NEAR_TIME=10,P.EVENT_READY="ready",P.EVENT_ERROR="error",P.EVENT_FULLSCREEN_CHANGE="fullscreenchange",P.EVENT_VOLUME_CHANGE="volumechange",P.EVENT_QUALITY_SET="qualityset",P.EVENT_TEXT_TRACK_SET="texttrackset",P.EVENT_BUFFER_EMPTY="bufferempty",P.EVENT_PLAYING="playing",P.EVENT_PAUSED="paused",P.EVENT_STOPPED="stopped",P.EVENT_TIMEUPDATE="timeupdate",P.EVENT_SEEKSTART="seekstart",P.EVENT_SEEKING="seeking",P.EVENT_SEEKED="seeked",P.EVENT_NEAR_END="nearend",P.EVENT_ENDED="ended",P.EVENT_SKIP="skip",P.EVENT_VIDEO_CLICKTHROUGH="videoclickthrough",P.EVENT_ACTION_CLICKTHROUGH="actionclickthrough",P.EVENT_VE_DISPLAYED="visualelement-displayed",P.EVENT_VE_HIDDEN="visualelement-hidden",P.EVENT_VE_CLICKTHROUGH="visualelement-clickthrough",P.EVENT_VE_CLOSE="visualelement-close",P.EVENT_USER_ACCEPT_INVITATION="user-acceptinvitation",P.EVENT_USER_MINIMIZE="user-minimize",P.EVENT_USER_CLOSE="user-close",P.EVENT_IMPRESSION="impression",P.EVENT_PROGRAMME_BEGIN="programme-begin",P.EVENT_PROGRAMME_END="programme-end",P.EVENT_CONTENT_BEGIN="content-begin",P.EVENT_CONTENT_RESTORE="content-restore",P.EVENT_CONTENT_SET="content-set",P.EVENT_CONTENT_SOURCE_SET="content-sourceset",P.EVENT_CONTENT_READY="content-ready",P.EVENT_CONTENT_TEXT_SOURCE_SET="content-textsourceset",P.EVENT_CONTENT_DURATION_CHANGE="content-durationchange",P.EVENT_CONTENT_LOADED_DATA="content-loadeddata",P.EVENT_CONTENT_LOADED_SEGMENT="content-loadedsegment",P.EVENT_CONTENT_LOADED_METADATA="content-loadedmetadata",P.EVENT_CONTENT_CAN_PLAY="content-canplay",P.EVENT_CONTENT_END="content-end",P.EVENT_AD_BEGIN="ad-begin",P.EVENT_AD_SOURCE_SET="ad-sourceset",P.EVENT_AD_TEXT_SOURCE_SET="ad-textsourceset",P.EVENT_AD_DURATION_CHANGE="ad-durationchange",P.EVENT_AD_LOADED_DATA="ad-loadeddata",P.EVENT_AD_LOADED_SEGMENT="ad-loadedsegment",P.EVENT_AD_LOADED_METADATA="ad-loadedmetadata",P.EVENT_AD_CAN_PLAY="ad-canplay",P.EVENT_AD_END="ad-end",P.EVENT_ADPOINT="adpoint",P.EVENT_ENDADSCREEN_POINT="endadscreenpoint",P.EVENT_DESTROYING="destroying",P.EVENT_UNLOAD="EVENT_UNLOAD",n.default=P}).call(this,"/src\\js\\richmediaplayer\\RichMediaPlayer.js")},{"../color/profile":8,"../common/Component":10,"../common/errors":18,"../mediaplayer/tech/Tech":42,"./PlaybackFragmentProcessor":52,"./PlaybackProgressProcessor":53,"./StrategyPlayer":55,"./ui/UiAgent":85,"./ui/dialogscreen/DialogScreen":86}],55:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/Component"),s=(e.interopRequireDefault(o),t("../common/errors")),r=e.interopRequireDefault(s),a=t("../mediaplayer/tech/Tech"),l=e.interopRequireDefault(a),u=(new r.default.ErrorFactory(r.default.createSourceName(i)),function(t){function i(t,n,o,s){e.classCallCheck(this,i);var r=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,n,o,s));return r._players={},r._strategy=null,r._container=document.createElement("div"),r._eventsMap=new Map([[l.default.EVENT_ERROR,r._propEvent.bind(r,l.default.EVENT_ERROR)],[l.default.EVENT_READY,r._propEvent.bind(r,l.default.EVENT_READY)],[l.default.EVENT_SOURCE_SET,r._propEvent.bind(r,l.default.EVENT_SOURCE_SET)],[l.default.EVENT_SOURCE_READY,r._propEvent.bind(r,l.default.EVENT_SOURCE_READY)],[l.default.EVENT_LOAD_START,r._propEvent.bind(r,l.default.EVENT_LOAD_START)],[l.default.EVENT_LOADED_META,r._propEvent.bind(r,l.default.EVENT_LOADED_META)],[l.default.EVENT_LOADED_DATA,r._propEvent.bind(r,l.default.EVENT_LOADED_DATA)],[l.default.EVENT_LOADED_SEGMENT,r._propEvent.bind(r,l.default.EVENT_LOADED_SEGMENT)],[l.default.EVENT_DURATION_CHANGE,r._propEvent.bind(r,l.default.EVENT_DURATION_CHANGE)],[l.default.EVENT_CAN_PLAY,r._propEvent.bind(r,l.default.EVENT_CAN_PLAY)],[l.default.EVENT_PLAY,r._propEvent.bind(r,l.default.EVENT_PLAY)],[l.default.EVENT_PLAYING,r._propEvent.bind(r,l.default.EVENT_PLAYING)],[l.default.EVENT_PAUSED,r._propEvent.bind(r,l.default.EVENT_PAUSED)],[l.default.EVENT_ENDED,r._propEvent.bind(r,l.default.EVENT_ENDED)],[l.default.EVENT_TIMEUPDATE,r._propEvent.bind(r,l.default.EVENT_TIMEUPDATE)],[l.default.EVENT_PLAYBACK_PROGRESS,r._propEvent.bind(r,l.default.EVENT_PLAYBACK_PROGRESS)],[l.default.EVENT_SEEKSTART,r._propEvent.bind(r,l.default.EVENT_SEEKSTART)],[l.default.EVENT_SEEKING,r._propEvent.bind(r,l.default.EVENT_SEEKING)],[l.default.EVENT_SEEKED,r._propEvent.bind(r,l.default.EVENT_SEEKED)],[l.default.EVENT_TEXT_SOURCE_SET,r._propEvent.bind(r,l.default.EVENT_TEXT_SOURCE_SET)],[l.default.EVENT_TEXT_TRACK_SET,r._propEvent.bind(r,l.default.EVENT_TEXT_TRACK_SET)],[l.default.EVENT_QUALITY_SET,r._propEvent.bind(r,l.default.EVENT_QUALITY_SET)],[l.default.EVENT_VOLUME_CHANGE,r._propEvent.bind(r,l.default.EVENT_VOLUME_CHANGE)],[l.default.EVENT_FULLSCREEN_CHANGE,r._propEvent.bind(r,l.default.EVENT_FULLSCREEN_CHANGE)],[l.default.EVENT_CUE_CHANGE,r._propEvent.bind(r,l.default.EVENT_CUE_CHANGE)],[l.default.EVENT_LIVE_PLAYING_CHANGE,r._propEvent.bind(r,l.default.EVENT_LIVE_PLAYING_CHANGE)],[l.default.EVENT_LIVE_STREAMING_CHANGE,r._propEvent.bind(r,l.default.EVENT_LIVE_STREAMING_CHANGE)],[l.default.EVENT_ABORT,r._propEvent.bind(r,l.default.EVENT_ABORT)],[l.default.EVENT_PROGRESS,r._propEvent.bind(r,l.default.EVENT_PROGRESS)],[l.default.EVENT_LOADING_FAILED,r._propEvent.bind(r,l.default.EVENT_LOADING_FAILED)],[l.default.EVENT_BUFFER_EMPTY,r._propEvent.bind(r,l.default.EVENT_BUFFER_EMPTY)],[l.default.EVENT_SKIP_VIDEO_REQUEST,r._propEvent.bind(r,l.default.EVENT_SKIP_VIDEO_REQUEST)],[l.default.EVENT_VIDEO_CLICKTHROUGH,r._propEvent.bind(r,l.default.EVENT_VIDEO_CLICKTHROUGH)],[l.default.EVENT_ACTION_CLICKTHROUGH,r._propEvent.bind(r,l.default.EVENT_ACTION_CLICKTHROUGH)],[l.default.EVENT_VE_DISPLAYED,r._propEvent.bind(r,l.default.EVENT_VE_DISPLAYED)],[l.default.EVENT_VE_HIDDEN,r._propEvent.bind(r,l.default.EVENT_VE_HIDDEN)],[l.default.EVENT_VE_CLICKTHROUGH,r._propEvent.bind(r,l.default.EVENT_VE_CLICKTHROUGH)],[l.default.EVENT_VE_CLOSE,r._propEvent.bind(r,l.default.EVENT_VE_CLOSE)],[l.default.EVENT_VE_ERROR,r._propEvent.bind(r,l.default.EVENT_VE_ERROR)],[l.default.EVENT_USER_ACCEPT_INVITATION,r._propEvent.bind(r,l.default.EVENT_USER_ACCEPT_INVITATION)],[l.default.EVENT_USER_MINIMIZE,r._propEvent.bind(r,l.default.EVENT_USER_MINIMIZE)],[l.default.EVENT_USER_CLOSE,r._propEvent.bind(r,l.default.EVENT_USER_CLOSE)],[l.default.EVENT_IMPRESSION,r._propEvent.bind(r,l.default.EVENT_IMPRESSION)],[l.default.EVENT_SKIPPABLE_STATE_CHANGE,r._propEvent.bind(r,l.default.EVENT_SKIPPABLE_STATE_CHANGE)],[l.default.EVENT_DESTROYING,r._propEvent.bind(r,l.default.EVENT_DESTROYING)]]),r._container.classList.add("sznp-uimediaplayer-wrapper"),r}return e.inherits(i,t),e.createClass(i,null,[{key:"getTechName",value:function(){}},{key:"isSupported",value:function(){}},{key:"canPlayType",value:function(e){}},{key:"canPlaySource",value:function(e){}},{key:"_setDisplayed",value:function(e,t){t?e.classList.remove("sznp-hidden"):e.classList.add("sznp-hidden")}}]),e.createClass(i,[{
key:"registerStrategy",value:function(e,t){var n=t.getElement();this._players[e]=t,i._setDisplayed(n,!1),this._container.appendChild(n)}},{key:"switchStrategy",value:function(e){this._strategy!==this._players[e]&&(this._strategy&&(this.removeListeners(this._strategy,this._eventsMap),i._setDisplayed(this._strategy.getElement(),!1),this._strategy.reset()),this._syncPlayer(this._players[e]),this._strategy=this._players[e],i._setDisplayed(this._strategy.getElement(),!0),this.addListeners(this._strategy,this._eventsMap))}},{key:"destroy",value:function(){this._strategy.destroy()}},{key:"getElement",value:function(){return this._container}},{key:"getPlayerId",value:function(){return this._strategy.getPlayerId()}},{key:"getSource",value:function(){return this._strategy.getSource()}},{key:"getResolvedSource",value:function(){return this._strategy.getResolvedSource()}},{key:"getCurrentSrc",value:function(){return this._strategy.getCurrentSrc()}},{key:"getTextSource",value:function(){return this._strategy.getTextSource()}},{key:"getTextTrack",value:function(){return this._strategy.getTextTrack()}},{key:"getPoster",value:function(){return this._strategy.getPoster()}},{key:"getQuality",value:function(){return this._strategy.getQuality()}},{key:"getVideoWidth",value:function(){return this._strategy.getVideoWidth()}},{key:"getVideoHeight",value:function(){return this._strategy.getVideoHeight()}},{key:"getVideoDimensions",value:function(){return this._strategy.getVideoDimensions()}},{key:"getVolume",value:function(){return this._strategy.getVolume()}},{key:"getCurrentTime",value:function(){return this._strategy.getCurrentTime()}},{key:"getStartTime",value:function(){return this._strategy.getStartTime()}},{key:"getDuration",value:function(){return this._strategy.getDuration()}},{key:"getBuffered",value:function(e){return this._strategy.getBuffered(e)}},{key:"getStatsHistory",value:function(){return this._strategy.getStatsHistory()}},{key:"isCustomUiCapable",value:function(){return this._strategy.isCustomUiCapable()}},{key:"isReady",value:function(){return this._strategy&&this._strategy.isReady()}},{key:"isSourceReady",value:function(){return this._strategy.isSourceReady()}},{key:"isAdaptiveSource",value:function(){return this._strategy.isAdaptiveSource()}},{key:"isMuted",value:function(){return this._strategy.isMuted()}},{key:"isPlaying",value:function(){return this._strategy.isPlaying()}},{key:"isPaused",value:function(){return this._strategy.isPaused()}},{key:"isEnded",value:function(){return this._strategy.isEnded()}},{key:"isBufferEmpty",value:function(){return this._strategy.isBufferEmpty()}},{key:"isLive",value:function(){return this._strategy.isLive()}},{key:"isEvent",value:function(){return this._strategy.isEvent()}},{key:"isLivePlaying",value:function(){return this._strategy.isLivePlaying()}},{key:"isLiveStreaming",value:function(){return this._strategy.isLiveStreaming()}},{key:"isFullscreen",value:function(){return this._strategy.isFullscreen()}},{key:"hasQuality",value:function(e){return this._strategy.hasQuality(e)}},{key:"hasTextTrack",value:function(e){return this._strategy.hasTextTrack(e)}},{key:"setSourcePreload",value:function(e){this._strategy.setSourcePreload(e)}},{key:"setSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._strategy.setSource(e,t)}},{key:"setTextSource",value:function(e){this._strategy.setTextSource(e)}},{key:"setTextTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._strategy.setTextTrack(e)}},{key:"setLocalizedTexts",value:function(e){this._strategy.setLocalizedTexts(e)}},{key:"setPoster",value:function(e){this._strategy.setPoster(e)}},{key:"setQuality",value:function(e){this._strategy.setQuality(e)}},{key:"setVolume",value:function(e){this._strategy.setVolume(e)}},{key:"setMute",value:function(e){this._strategy.setMute(e)}},{key:"addStats",value:function(e){this._strategy.addStats(e)}},{key:"play",value:function(){this._strategy.play()}},{key:"pause",value:function(){this._strategy.pause()}},{key:"seek",value:function(e){this._strategy.seek(e)}},{key:"seekToLive",value:function(){this._strategy.seekToLive()}},{key:"skip",value:function(){this._strategy.skip()}},{key:"setViewMode",value:function(e){this._strategy.setViewMode(e)}},{key:"resetSource",value:function(){this._strategy.resetSource()}},{key:"reset",value:function(){this._strategy.reset()}},{key:"show",value:function(){this._strategy.show()}},{key:"hide",value:function(){this._strategy.hide()}},{key:"setLogo",value:function(e){this._strategy.setLogo(e)}},{key:"showLogo",value:function(){this._strategy.showLogo()}},{key:"hideLogo",value:function(){this._strategy.hideLogo()}},{key:"setActionArea",value:function(e){this._strategy.setActionArea(e)}},{key:"setDefaultLayout",value:function(e){this._strategy.setDefaultLayout(e)}},{key:"setAdvertLayout",value:function(e){this._strategy.setAdvertLayout(e)}},{key:"setPp",value:function(e){this._strategy.setPp(e)}},{key:"showPp",value:function(){this._strategy.showPp()}},{key:"hidePp",value:function(){this._strategy.hidePp()}},{key:"setControlsHidden",value:function(e){this._strategy.setControlsHidden(e)}},{key:"canRunVisualElementType",value:function(e){return this._strategy.canRunVisualElementType(e)}},{key:"getVisualElements",value:function(){return this._strategy.getVisualElements()}},{key:"addVisualElement",value:function(e){this._strategy.addVisualElement(e)}},{key:"removeVisualElement",value:function(e){this._strategy.removeVisualElement(e)}},{key:"removeVisualElements",value:function(){this._strategy.removeVisualElements()}},{key:"setVisualElementDefaultPosition",value:function(e,t){this._strategy.setVisualElementDefaultPosition(e,t)}},{key:"isVisualElementShown",value:function(e){return this._strategy.isVisualElementShown(e)}},{key:"showVisualElement",value:function(e){this._strategy.showVisualElement(e)}},{key:"showVisualElementClose",value:function(e){this._strategy.showVisualElementClose(e)}},{key:"hideVisualElement",value:function(e){this._strategy.hideVisualElement(e)}},{key:"abortVisualElement",value:function(e){this._strategy.hideVisualElement(e)}},{key:"addAdPoint",value:function(e){this._strategy.addAdPoint(e)}},{key:"removeAdPoint",value:function(e){this._strategy.removeAdPoint(e)}},{key:"resetAdPoints",value:function(){this._strategy.resetAdPoints()}},{key:"showAdPoints",value:function(){this._strategy.showAdPoints()}},{key:"hideAdPoints",value:function(){this._strategy.hideAdPoints()}},{key:"canConfigureFullscreen",value:function(){return this._strategy.canConfigureFullscreen()}},{key:"configureFullscreen",value:function(e){this._strategy.configureFullscreen(e)}},{key:"enterFullscreen",value:function(){this._strategy.enterFullscreen()}},{key:"exitFullscreen",value:function(){this._strategy.exitFullscreen()}},{key:"_syncPlayer",value:function(e){if(this._strategy){e.setViewMode(this._strategy.isFullscreen()?"fullscreen":"normal");var t=this._strategy.getStatsHistory();t.length&&e.addStats(t[t.length-1]);var i=this._strategy.getVolume(),n=this._strategy.isMuted();setTimeout(function(){e.setVolume(i),e.setMute(n)},0)}}},{key:"_propEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.emit(e,t)}}]),i}(l.default));n.default=u}).call(this,"/src\\js\\richmediaplayer\\StrategyPlayer.js")},{"../common/Component":10,"../common/errors":18,"../mediaplayer/tech/Tech":42}],56:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/errors"),s=e.interopRequireDefault(o),r=t("../mediaplayer/tech/Tech"),a=e.interopRequireDefault(r),l={mode:"normal",sourceReady:!1,started:!1,playing:!1,deposit:{volume:1,muted:!1}},u=new s.default.ErrorFactory(s.default.createSourceName(i)),c=function(t){function i(t,n,o){e.classCallCheck(this,i);var s={id:o.id||"vpaidplayer",timeout:o.timeout},r=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,n,{},s));return r._container=document.createElement("div"),r._iframe=null,r._slot=null,r._video=null,r._source=null,r._creative=null,r._flags=l,r._vastAd=null,r._statsHistory=[],r._queue=[],r._timers=[],r._handleVideoError=r._handleVideoError.bind(r),r._creativeEventsMap=new Map([["AdLoaded",r._handleLoaded],["AdStarted",r._handleStarted],["AdStopped",r._handleStopped],["AdSkipped",r._handleSkipped],["AdSkippableStateChange",r._handleSkippableStateChange],["AdSizeChange",r._handleSizeChange],["AdLinearChange",r._handleLinearChange],["AdDurationChange",r._handleDurationChange],["AdExpandedChange",r._handleExpandedChange],["AdRemainingTimeChange",r._handleRemainingTimeChange],["AdVolumeChange",r._handleVolumeChange],["AdImpression",r._handleImpression],["AdVideoStart",r._handleStart],["AdVideoFirstQuartile",r._handleFirstQuartile],["AdVideoMidpoint",r._handleMidpoint],["AdVideoThirdQuartile",r._handleThirdQuartile],["AdVideoComplete",r._handleComplete],["AdClickThru",r._handleClick],["AdInteraction",r._handleInteraction],["AdUserAcceptInvitation",r._handleUserAcceptInvitation],["AdUserMinimize",r._handleUserMinimize],["AdUserClose",r._handleUserClose],["AdPaused",r._handlePaused],["AdPlaying",r._handlePlaying],["AdLog",r._handleLog],["AdError",r._handleCreativeError]]),r._container.classList.add("sznp-vpaid-player"),r}return e.inherits(i,t),e.createClass(i,null,[{key:"getTechName",value:function(){return"vpaid_html"}},{key:"isSupported",value:function(){return!!window.document.createElement("video").canPlayType}},{key:"canPlayType",value:function(e){return"application/javascript"===e}},{key:"canPlaySource",value:function(e){return e&&"application/javascript"===e.type}}]),e.createClass(i,[{key:"destroy",value:function(){this.resetSource(),this._queue_clean(),this._creative=null,this._source=null,this._flags=null,this._container=null,this._creativeEventsMap=null,this.func=null,this._options=null}},{key:"getElement",value:function(){return this._container}},{key:"getPlayerId",value:function(){return this._options.id}},{key:"getSource",value:function(){return this._source}},{key:"getResolvedSource",value:function(){return this._source}},{key:"getCurrentSrc",value:function(){return this._source?this._source.src:""}},{key:"getTextSource",value:function(){return""}},{key:"getTextTrack",value:function(){return null}},{key:"getPoster",value:function(){return""}},{key:"getQuality",value:function(){return null}},{key:"getVideoWidth",value:function(){return this._video?this._video.videoWidth:0}},{key:"getVideoHeight",value:function(){return this._video?this._video.videoHeight:0}},{key:"getVideoDimensions",value:function(){return null}},{key:"getVolume",value:function(){if(!this._creative)return this._flags.deposit.volume;if(this.isMuted())return this._flags.deposit.volume;if("function"==typeof this._creative.getAdVolume){var e=this._callCreative("getAdVolume");return e>-1?e:1}}},{key:"getCurrentTime",value:function(){if(!this._creative)return 0;var e=this._creative.adRemainingTime||"function"==typeof this._creative.getAdRemainingTime&&this._callCreative("getAdRemainingTime"),t=this.getDuration();return e>-1&&t>0&&t>=e?t-e:this._video.currentTime||0}},{key:"getStartTime",value:function(){return null}},{key:"getDuration",value:function(){if(!this._creative)return 0;var e=this._creative.adDuration||"function"==typeof this._creative.getAdDuration&&this._callCreative("getAdDuration");return e>0?e:this._source.options&&this._source.options.vastDuration||this._video.duration||0}},{key:"getBuffered",value:function(e){return{}}},{key:"getStatsHistory",value:function(){return this._statsHistory}},{key:"isCustomUiCapable",value:function(){return!0}},{key:"isReady",value:function(){return!0}},{key:"isSourceReady",value:function(){return this._flags.sourceReady}},{key:"isAdaptiveSource",value:function(){return!1}},{key:"isMuted",value:function(){if(!this._creative)return this._flags.deposit.muted;var e=1;return"function"==typeof this._creative.getAdVolume&&(e=this._callCreative("getAdVolume")),0===e}},{key:"isPlaying",value:function(){return this._flags.playing}},{key:"isPaused",value:function(){return!this._flags.playing}},{key:"isEnded",value:function(){return!!this._video&&this._video.ended}},{key:"isBufferEmpty",value:function(){return!this._flags.sourceReady}},{key:"isLive",value:function(){return!1}},{key:"isEvent",value:function(){return!1}},{key:"isLivePlaying",value:function(){return!1}},{key:"isLiveStreaming",value:function(){return!1}},{key:"hasQuality",value:function(e){return!1}},{key:"hasTextTrack",value:function(e){return!1}},{key:"setSourcePreload",value:function(e){}},{key:"setSource",value:function(t){var n=this;arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"object"!==("undefined"==typeof t?"undefined":e.typeof(t)))throw u.createError(s.default.AD_VPAID_SOURCE,"Source must be an object.");if(!i.canPlayType(t.type))throw u.createError(s.default.AD_VPAID_SOURCE,'Type "'+t.type+'" is not supported.');this.reset(),this._source=t,this._createStage().then(function(){return n.emit(a.default.EVENT_BUFFER_EMPTY),n._loadCreative(t.src)}).then(function(e){if(n._creative=e,!n._checkCreative())throw u.createError(s.default.AD_VPAID_SOURCE,"VPAID Creative is not valid.");n._doHandshake()}).then(function(){n._addCreativeListeners()}).then(function(){n._initCreative()}).catch(function(e){n._handleError(e)})}},{key:"setTextSource",value:function(e){}},{key:"setTextTrack",value:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}},{key:"setLocalizedTexts",value:function(e){}},{key:"setPoster",value:function(e){}},{key:"setQuality",value:function(e){}},{key:"setVolume",value:function(e){return this._flags.deposit.volume=e,this._flags.sourceReady?void("function"==typeof this._creative.setAdVolume&&this._callCreative("setAdVolume",e)):void this._queue_add("setVolume",[e])}},{key:"setMute",value:function(e){return this._flags.deposit.muted=e,this._flags.sourceReady?void("function"==typeof this._creative.setAdVolume&&this._callCreative("setAdVolume",e?0:this._flags.deposit.volume)):void this._queue_add("setMute",[e])}},{key:"addStats",value:function(e){this._statsHistory.push(e)}},{key:"play",value:function(){var e=this;if(!this._flags.sourceReady)return void this._queue_add("play");if(this._flags.started){if(this._flags.playing)return;this._startTimer("AdPlaying",function(){var t=u.createError(s.default.AD_VPAID_SOURCE,"Event AdPlaying timeouted.");e._handleError(t)},this._options.timeout),this._callCreative("resumeAd")}else this._startTimer("AdStarted",function(){var t=u.createError(s.default.AD_VPAID_SOURCE,"Event AdStarted timeouted.");e._handleError(t)},this._options.timeout),this._callCreative("startAd");this._flags.playing=!0}},{key:"pause",value:function(){var e=this;return this._flags.sourceReady?void(this._flags.playing&&(this._startTimer("AdPaused",function(){var t=u.createError(s.default.AD_VPAID_SOURCE,"Event AdPaused timeouted.");e._handleError(t)},this._options.timeout),this._callCreative("pauseAd"),this._flags.playing=!1)):void this._queue_add("pause")}},{key:"seek",value:function(e){return this._flags.sourceReady?void(this._video.currentTime=e):void this._queue_add("seek",[e])}},{key:"seekToLive",value:function(){}},{key:"skip",value:function(){var e=this;return"function"==typeof this._creative.skipAd&&"function"==typeof this._creative.getAdSkippableState&&this._callCreative("getAdSkippableState")?(this._startTimer("AdSkipped",function(){var t=u.createError(s.default.AD_VPAID_SOURCE,"Event AdSkipped timeouted.");e._handleError(t)},this._options.timeout),void this._callCreative("skipAd")):(this._startTimer("AdStopped",function(){var t=u.createError(s.default.AD_VPAID_SOURCE,"Event AdStopped timeouted.");e._handleError(t)},this._options.timeout),void this._callCreative("stopAd"))}},{key:"setViewMode",value:function(e){var t=this;"normal"!==e&&"fullscreen"!==e&&"thumbnail"!==e||this._source&&setTimeout(function(){t._flags.mode=e,t._callCreative("resizeAd",t._container.clientWidth,t._container.clientHeight,e)},0)}},{key:"resetSource",value:function(){this._removeCreativeListeners(),this._clearStage(),this._clearTimers(),this._flags.started&&this._flags.sourceReady&&this._callCreative("stopAd"),this._source=null,this._creative=null,this._flags.sourceReady=!1,this._flags.started=!1,this._flags.playing=!1}},{key:"reset",value:function(){this._removeCreativeListeners(),this._clearStage(),this._clearTimers(),this._flags.started&&this._flags.sourceReady&&this._callCreative("stopAd"),this._source=null,this._creative=null,this._flags=Object.assign({},l)}},{key:"_createStage",value:function(){var e=this,t=null,i=null,n=new Promise(function(e,n){t=e,i=n});return this._iframe=document.createElement("iframe"),this._iframe.onload=function(){var i=e._iframe.contentWindow.document.createElement("style");i.type="text/css",i.innerHTML="video { width: 100%; height: 100%; } body { margin: 0px; padding: 0px; }",e._iframe.contentWindow.document.head.appendChild(i),e._slot=e._iframe.contentWindow.document.createElement("div"),e._iframe.contentWindow.document.body.appendChild(e._slot),e._video=e._iframe.contentWindow.document.createElement("video"),e._video.addEventListener("error",e._handleVideoError),e._slot.appendChild(e._video),t(e._iframe)},this._iframe.onerror=function(){i(u.createError(s.default.AD_VPAID_SOURCE,"Loading iframe failed."))},this._iframe.src="about:blank",this._iframe.scrolling="no",this._iframe.classList.add("sznp-vpaid-container"),this._iframe.style.visibility="hidden",this._container.appendChild(this._iframe),n}},{key:"_clearStage",value:function(){this._iframe&&this._container.removeChild(this._iframe),this._video&&this._video.removeEventListener("error",this._handleVideoError),this._video=null,this._spot=null,this._iframe=null}},{key:"_loadCreative",value:function(e){var t=this,i=null,n=null,o=new Promise(function(e,t){i=e,n=t}),r=this._iframe.contentWindow.document.createElement("script");return r.type="text/javascript",r.onload=function(){t._clearTimer("ScriptLoaded");var o=t._iframe.contentWindow.getVPAIDAd;o&&"function"==typeof o?i(o()):n(u.createError(s.default.AD_VPAID_SOURCE,'There isn\'t "getVPAIDAd" function in "'+e+'".'))},r.onerror=function(){n(u.createError(s.default.AD_VPAID_SOURCE,'Loading script "'+e+'" failed.'))},this._startTimer("ScriptLoaded",function(){n(u.createError(s.default.AD_VPAID_SOURCE,'Loading script "'+e+'" timeouted.'))},this._options.timeout),r.src=e,this._iframe.contentWindow.document.head.appendChild(r),o}},{key:"_checkCreative",value:function(){var e=this,t=["handshakeVersion","initAd","startAd","stopAd","resizeAd","pauseAd","resumeAd","expandAd","collapseAd","subscribe","unsubscribe"];return!t.some(function(t){return!e._creative[t]||"function"!=typeof e._creative[t]})}},{key:"_addCreativeListeners",value:function(){var e=this;this._creativeEventsMap.forEach(function(t,i){e._callCreative("subscribe",t,i,e)})}},{key:"_removeCreativeListeners",value:function(){var e=this;this._creative&&this._creativeEventsMap.forEach(function(t,i){e._callCreative("unsubscribe",t,i,e)})}},{key:"_startTimer",value:function(e,t,i){this._clearTimer(e),this._timers[e]=setTimeout(t,i)}},{key:"_clearTimer",value:function(e){this._timers[e]&&(clearTimeout(this._timers[e]),this._timers[e]=null)}},{key:"_clearTimers",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,o=Object.keys(this._timers)[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;this._timers[s]&&(clearTimeout(this._timers[s]),this._timers[s]=null)}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}}},{key:"_doHandshake",value:function(){var e=this._creative.handshakeVersion(i.VPAID_VERSION),t=parseInt(e,10);if(isNaN(t)||t<1||t>i.VPAID_VERSION)throw u.createError(s.default.AD_VPAID_SOURCE,'VPAID Creative version "'+e+'" is not supported.')}},{key:"_initCreative",value:function(){var e=this,t=this._container.clientWidth,i=this._container.clientHeight,n=this._flags.mode,o=this._statsHistory,r=o.length?Math.round(o[o.length-1].bandwidth/1e3):1200,a={AdParameters:this._source.options?this._source.options.adParameters:""},l={slot:this._slot,videoSlot:this._video,videoSlotCanAutoPlay:!0};this._vastAd=this._source.options?this._source.options.vastAd:null,this._startTimer("AdLoaded",function(){var t=u.createError(s.default.AD_VPAID_SOURCE,"Event AdLoaded timeouted.");e._handleError(t)},this._options.timeout),this._creative.initAd(t,i,n,r,a,l)}},{key:"_callCreative",value:function(e){try{for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return i.length?this._creative[e].apply(this._creative,i):this._creative[e]()}catch(t){var o=u.createError(s.default.AD_VPAID_SOURCE,'Unhandled creative error when calling "'+e+'".');this._handleError(o)}}},{key:"_handleLoaded",value:function(){this._clearTimer("AdLoaded"),this._flags.sourceReady=!0,this._iframe.style.visibility="visible",this._queue_process(),this.emit(a.default.EVENT_SOURCE_READY,{source:this._source}),this.emit(a.default.EVENT_CAN_PLAY)}},{key:"_handleStarted",value:function(){this._clearTimer("AdStarted"),this._flags.started=!0,this._flags.playing=!0,this.emit(a.default.EVENT_PLAY),this.emit(a.default.EVENT_PLAYING,{first:!0,time:0})}},{key:"_handleStopped",value:function(){this._clearTimer("AdStopped"),this._flags.playing=!1,this._flags.sourceReady=!1,this.emit(a.default.EVENT_ENDED)}},{key:"_handleSkipped",value:function(){this._clearTimer("AdSkipped"),this._flags.playing=!1,this._flags.sourceReady=!1,this.emit(a.default.EVENT_ENDED)}},{key:"_handleSkippableStateChange",value:function(){if("function"==typeof this._creative.getAdSkippableState){var e=this._callCreative("getAdSkippableState");this.emit(a.default.EVENT_SKIPPABLE_STATE_CHANGE,{isSkippable:e})}}},{key:"_handleSizeChange",value:function(){}},{key:"_handleLinearChange",value:function(){}},{key:"_handleDurationChange",value:function(){this.emit(a.default.EVENT_DURATION_CHANGE,{duration:this.getDuration()})}},{key:"_handleExpandedChange",value:function(){}},{key:"_handleRemainingTimeChange",value:function(){var e=this.getDuration();e>0&&this.emit(a.default.EVENT_DURATION_CHANGE,{duration:e})}},{key:"_handleVolumeChange",value:function(){this._flags.deposit.muted=this.isMuted(),this._flags.deposit.volume=this.getVolume(),this.emit(a.default.EVENT_VOLUME_CHANGE,{muted:this._flags.deposit.muted,level:this._flags.deposit.volume})}},{key:"_handleImpression",value:function(){this.emit(a.default.EVENT_IMPRESSION)}},{key:"_handleStart",value:function(){this.emit(a.default.EVENT_PLAYBACK_PROGRESS,{percent:0});var e=this.getDuration();e>0&&this.emit(a.default.EVENT_DURATION_CHANGE,{duration:e})}},{key:"_handleFirstQuartile",value:function(){this.emit(a.default.EVENT_PLAYBACK_PROGRESS,{percent:25})}},{key:"_handleMidpoint",value:function(){this.emit(a.default.EVENT_PLAYBACK_PROGRESS,{percent:50})}},{key:"_handleThirdQuartile",value:function(){this.emit(a.default.EVENT_PLAYBACK_PROGRESS,{percent:75})}},{key:"_handleComplete",value:function(){this.emit(a.default.EVENT_PLAYBACK_PROGRESS,{percent:100})}},{key:"_handleClick",value:function(e,t,i){if(i){var n=this._vastAd?this._vastAd.getVideoClicks():{},o=e||n.clickThrough;o&&window.open(o,"_blank")}this.emit(a.default.EVENT_VIDEO_CLICKTHROUGH)}},{key:"_handleInteraction",value:function(){}},{key:"_handleUserAcceptInvitation",value:function(){this.emit(a.default.EVENT_USER_ACCEPT_INVITATION)}},{key:"_handleUserMinimize",value:function(){this.emit(a.default.EVENT_USER_MINIMIZE)}},{key:"_handleUserClose",value:function(){this.emit(a.default.EVENT_USER_CLOSE)}},{key:"_handlePaused",value:function(){this._clearTimer("AdPaused"),this._flags.playing=!1,this.emit(a.default.EVENT_PAUSED,{ended:!1})}},{key:"_handlePlaying",value:function(){this._clearTimer("AdPlaying"),this._flags.playing=!0,this.emit(a.default.EVENT_PLAY),this.emit(a.default.EVENT_PLAYING,{time:this.getCurrentTime()})}},{key:"_handleLog",value:function(){}},{key:"_handleCreativeError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=u.createError(s.default.AD_VPAID_SOURCE,e);this._handleError(t)}},{key:"_handleVideoError",value:function(e){var t=e.target.error;if(t&&t.code!==t.MEDIA_ERR_ABORTED){var i=new u.createError(s.default.AD_VPAID_SOURCE,"Vpaid video element error.");i.code=t.code,this._handleError(i)}}},{key:"_handleError",value:function(e){e.hitData={ERRORCODE:901},this.emit(a.default.EVENT_ERROR,e)}},{key:"_queue_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._queue.push({method:e,params:t})}},{key:"_queue_process",value:function(){for(var e=null;e=this._queue.shift();)Array.isArray(e.params)?this[e.method].apply(this,e.params):this[e.method].apply(this)}},{key:"_queue_clean",value:function(){this._queue=[]}}]),i}(a.default);c.VPAID_VERSION="2.0",n.default=c}).call(this,"/src\\js\\richmediaplayer\\VpaidPlayer.js")},{"../common/errors":18,"../mediaplayer/tech/Tech":42}],57:[function(t,i,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new f.default(r.default,l.default,c.default,_.default,e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var s=t("../common/utils"),r=e.interopRequireDefault(s),a=t("../common/env"),l=e.interopRequireDefault(a),u=t("./createUiMediaPlayer"),c=e.interopRequireDefault(u),d=t("./createUiVpaidPlayer"),_=e.interopRequireDefault(d),h=t("./RichMediaPlayer"),f=e.interopRequireDefault(h)},{"../common/env":17,"../common/utils":23,"./RichMediaPlayer":54,"./createUiMediaPlayer":58,"./createUiVpaidPlayer":59}],58:[function(t,i,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,r.default)(e);if("html"===t.constructor.getTechName()){var i=t.getElement();t.MP_ORIGIN=Symbol("MediaPlayerOrigin"),l.default.decorate(t,c.default,t.MP_ORIGIN),t.initUi(i)}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var s=t("../mediaplayer/createMediaPlayer"),r=e.interopRequireDefault(s),a=t("../common/utils"),l=e.interopRequireDefault(a),u=t("./tech/html/uiMediaPlayer/index"),c=e.interopRequireDefault(u)},{"../common/utils":23,"../mediaplayer/createMediaPlayer":26,"./tech/html/uiMediaPlayer/index":75}],59:[function(t,i,n){"use strict";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={timeout:e.timeout||_.default.vpaidResponseTimeout},i=new r.default(c.default,l.default,t),n=i.getElement();return i.MP_ORIGIN=Symbol("MediaPlayerOrigin"),l.default.decorate(i,f.default,i.MP_ORIGIN),i.initUi(n,"transparent"),i.addStats({bandwidth:_.default.preferredBitrate}),i}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var s=t("./VpaidPlayer"),r=e.interopRequireDefault(s),a=t("../common/utils"),l=e.interopRequireDefault(a),u=t("../common/env"),c=e.interopRequireDefault(u),d=t("../mediaplayer/config"),_=e.interopRequireDefault(d),h=t("./tech/html/uiMediaPlayer/index"),f=e.interopRequireDefault(h)},{"../common/env":17,"../common/utils":23,"../mediaplayer/config":25,"./VpaidPlayer":56,"./tech/html/uiMediaPlayer/index":75}],60:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("events"),s=e.interopRequireDefault(o),r=function(t){function i(t,n){e.classCallCheck(this,i);var o=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o._env=t,o._container=n,o._methodRequest=null,o._methodExit=null,o._methodState=null,o._isFakeFullscreen=!1,o._emitFullscreenChange=o._emitFullscreenChange.bind(o),o._changeEventName="",o._env.getFSRequestMethodName(n)&&!o._env.isBuggyFullscreen()?!function(){var e=o._env.getFSRequestMethodName(n),t=o._env.getFSExitMethodName(document),i=o._env.getFSStateIndicatorPropertyName(document);o._changeEventName=o._env.getFSChangeEventName(document),o._methodRequest=n[e].bind(n),o._methodExit=document[t].bind(document),o._methodState=function(){return document[i]===n},document.addEventListener(o._changeEventName,o._emitFullscreenChange)}():(o._methodRequest=o._turnOnFakeFullsreen.bind(o),o._methodExit=o._turnOffFakeFullsreen.bind(o),o._methodState=o._isFakeFullsreen.bind(o)),o}return e.inherits(i,t),e.createClass(i,[{key:"destroy",value:function(){this.exitFullscreen(),this._changeEventName&&document.removeEventListener(this._changeEventName,this._emitFullscreenChange),this._env=null,this._container=null,this._methodRequest=null,this._methodExit=null,this._methodState=null,this._isFakeFullscreen=null,this._emitFullscreenChange=null,this._changeEventName=null}},{key:"isFullscreen",value:function(){return this._methodState()}},{key:"enterFullscreen",value:function(){this._methodRequest()}},{key:"exitFullscreen",value:function(){this._methodExit()}},{key:"_emitFullscreenChange",value:function(){this.emit(i.EVENT_CHANGE,{isFullscreen:this.isFullscreen()})}},{key:"_isFakeFullsreen",value:function(){return this._isFakeFullscreen}},{key:"_turnOnFakeFullsreen",value:function(){this._container.classList.add("sznp-ui-fake-fullscreen"),this._isFakeFullscreen=!0,this._emitFullscreenChange()}},{key:"_turnOffFakeFullsreen",value:function(){this._container.classList.remove("sznp-ui-fake-fullscreen"),this._isFakeFullscreen=!1,this._emitFullscreenChange()}}]),i}(s.default);r.EVENT_CHANGE="fullscreenchange",n.default=r},{events:1}],61:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../common/uiDom"),a=t("./event/list"),l=(e.interopRequireDefault(a),t("./UiTechContainer")),u=e.interopRequireDefault(l),c=t("./UiOverlaysContainer"),d=e.interopRequireDefault(c),_=t("./UiControlsContainer"),h=e.interopRequireDefault(_),f=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null},n._component={techContainer:null,overlaysContainer:null,controlsContainer:null},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{tech:"object",overlays:"object",controls:"object"}}},{key:"_onUiInit",value:function(e){this._component.techContainer=new u.default(e.tech),this._component.overlaysContainer=new d.default(e.overlays),this._component.controlsContainer=new h.default(e.controls)}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui"}),(0,r.elm)(this._dom.root).append(this._component.techContainer.uiGetElement(),this._component.overlaysContainer.uiGetElement(),this._component.controlsContainer.uiGetElement())}},{key:"_onUiUpdate",value:function(e){this._component.techContainer.uiUpdate(e.tech),this._component.overlaysContainer.uiUpdate(e.overlays),this._component.controlsContainer.uiUpdate(e.controls)}}]),i}(s.default);n.default=f},{"../../../../common/UiComponent":14,"../../../../common/uiDom":20,"./UiControlsContainer":62,"./UiOverlaysContainer":63,"./UiTechContainer":64,"./event/list":74}],62:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../common/uiDom"),a=t("./controlLayouts/DesktopLayout"),l=e.interopRequireDefault(a),u=t("./controlLayouts/TouchLayout"),c=e.interopRequireDefault(u),d=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{controls:null}},n._component={desktopLayout:null,touchLayout:null},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{adLayout:"string",clickthroughTarget:"string",clickthroughUrl:"string",controlPanelShown:"boolean",controlPanelHovered:"boolean",controlPanelFulltimeHidden:"boolean",startTime:"number",currentTime:"number",displayed:"boolean",adPoints:"object",
duration:"number",fullscreenEnabled:"boolean",fullscreenOn:"boolean",indicatorColor:"string",isEvent:"boolean",isLive:"boolean",layout:"string",loading:"boolean",seeking:"boolean",playing:"boolean",playingLive:"boolean",progressBarColor:"string",settingQualityEnabled:"boolean",settingQualityVisible:"boolean",qualities:"object",qualityId:["object","number"],qualityMenuShown:"boolean",settingSubtitlesEnabled:"boolean",settingSubtitlesVisible:"boolean",settingFullscreenEnabled:"boolean",settingFullscreenVisible:"boolean",seekingEnabled:"boolean",skippableAfter:"number",countdownBefore:"number",allowedToSkip:"boolean",streamingLive:"boolean",subtitlesShown:"boolean",textLoading:"string",textPlay:"string",textPause:"string",textMute:"string",textUnmute:"string",textVolume:"string",textSeekbarEnabled:"string",textSeekbarDisabled:"string",textSubtitlesEnabled:"string",textSubtitlesDisabled:"string",textQuality:"string",textQualityEnabled:"string",textQualityDisabled:"string",textFullscreenOn:"string",textFullscreenOff:"string",textAd:"string",textAdPoint:"string",textAdSkip:"string",textAdSkipAfter:"string",textAdCountdown:"string",textAdWeb:"string",textSponsor:"string",textPromo:"string",textLive:"string",textLiveFromStart:"string",textAction:"string",useTouch:"boolean",volume:"number",volumeMuted:"boolean",injections:"object",tech:"object",videoDimensions:"object",controlPanelIntersectionHeight:"number"}}},{key:"_onUiInit",value:function(e){this._component.desktopLayout=new l.default(this.__getPropsForLayout(e,{displayed:!e.useTouch})),this._component.touchLayout=new c.default(this.__getPropsForLayout(e,{displayed:e.useTouch}))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-controls-container"}),this._dom.refs.controls=(0,r.createElm)("div",{className:"sznp-ui-controls"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.controls).append(this._component.desktopLayout.uiGetElement(),this._component.touchLayout.uiGetElement())),this.__setDisplayed(e.displayed)}},{key:"_onUiCanUpdate",value:function(e){return e.displayed||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._component.desktopLayout.uiUpdate(this.__getPropsForLayout(e,{displayed:!e.useTouch})),this._component.touchLayout.uiUpdate(this.__getPropsForLayout(e,{displayed:e.useTouch}))}},{key:"__getPropsForLayout",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!1;"displayed"in t&&(i=t.displayed);var n=e.adLayout,o=e.clickthroughTarget,s=e.clickthroughUrl,r=e.controlPanelShown,a=e.startTime,l=e.currentTime,u=e.adPoints,c=e.duration,d=e.fullscreenEnabled,_=e.fullscreenOn,h=e.indicatorColor,f=e.isEvent,p=e.isLive,m=e.layout,v=e.loading,y=e.seeking,E=e.playing,g=e.playingLive,k=e.progressBarColor,T=e.settingQualityEnabled,C=e.settingQualityVisible,S=e.qualityId,b=e.qualityMenuShown,P=e.qualities,A=e.seekingEnabled,R=e.settingSubtitlesEnabled,N=e.settingSubtitlesVisible,D=e.settingFullscreenEnabled,x=e.settingFullscreenVisible,w=e.skippableAfter,L=e.countdownBefore,O=e.allowedToSkip,I=e.streamingLive,M=e.subtitlesShown,V=e.textLoading,U=e.textPlay,B=e.textPause,F=e.textMute,q=e.textUnmute,j=e.textVolume,H=e.textSeekbarEnabled,G=e.textSeekbarDisabled,Q=e.textSubtitlesEnabled,z=e.textSubtitlesDisabled,Y=e.textQuality,K=e.textQualityEnabled,W=e.textQualityDisabled,X=e.textFullscreenOn,J=e.textFullscreenOff,Z=e.textAd,$=e.textAdPoint,ee=e.textAdSkip,te=e.textAdSkipAfter,ie=e.textAdCountdown,ne=e.textAdWeb,oe=e.textSponsor,se=e.textPromo,re=e.textLive,ae=e.textLiveFromStart,le=e.textAction,ue=e.volume,ce=e.volumeMuted,de=e.injections,_e=e.tech,he=e.videoDimensions,fe=e.controlPanelIntersectionHeight;return{adLayout:n,clickthroughTarget:o,clickthroughUrl:s,controlPanelShown:r,startTime:a,currentTime:l,displayed:i,adPoints:u,duration:c,fullscreenEnabled:d,fullscreenOn:_,indicatorColor:h,isEvent:f,isLive:p,layout:m,loading:v,seeking:y,playing:E,playingLive:g,progressBarColor:k,settingQualityEnabled:T,settingQualityVisible:C,qualityId:S,qualityMenuShown:b,qualities:P,seekingEnabled:A,settingSubtitlesEnabled:R,settingSubtitlesVisible:N,settingFullscreenEnabled:D,settingFullscreenVisible:x,skippableAfter:w,countdownBefore:L,allowedToSkip:O,streamingLive:I,subtitlesShown:M,textLoading:V,textPlay:U,textPause:B,textMute:F,textUnmute:q,textVolume:j,textSeekbarEnabled:H,textSeekbarDisabled:G,textSubtitlesEnabled:Q,textSubtitlesDisabled:z,textQuality:Y,textQualityEnabled:K,textQualityDisabled:W,textFullscreenOn:X,textFullscreenOff:J,textAd:Z,textAdPoint:$,textAdSkip:ee,textAdSkipAfter:te,textAdCountdown:ie,textAdWeb:ne,textSponsor:oe,textPromo:se,textLive:re,textLiveFromStart:ae,textAction:le,volume:ue,volumeMuted:ce,injections:de,tech:_e,videoDimensions:he,controlPanelIntersectionHeight:fe}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}}]),i}(s.default);n.default=d},{"../../../../common/UiComponent":14,"../../../../common/uiDom":20,"./controlLayouts/DesktopLayout":66,"./controlLayouts/TouchLayout":67}],63:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../common/uiDom"),a=t("./overlays/OverlayElement"),l=e.interopRequireDefault(a),u=t("./overlays/LogoLive"),c=e.interopRequireDefault(u),d=t("./overlays/Captions"),_=e.interopRequireDefault(d),h=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{logosContainer:null}},n._component={logo:null,logoLive:null,pp:null,captions:null},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",logo:"boolean",logoSrc:"string",logoLive:"boolean",logoLiveText:"string",pp:"boolean",ppSrc:"string",captions:"boolean",captionText:"string"}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,logo:!1,logoSrc:"",logoLive:!1,logoLiveText:"",pp:!1,ppSrc:"",captions:!1,captionText:""}}},{key:"_onUiInit",value:function(e){this._component.logo=new l.default(this.__getPropsForLogo(e)),this._component.logoLive=new c.default(this.__getPropsForLogoLive(e)),this._component.pp=new l.default(this.__getPropsForPp(e)),this._component.captions=new _.default(this.__getPropsForCaptions(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-overlays-container"}),this._dom.refs.logosContainer=(0,r.createElm)("div",{className:"sznp-ui-logos-container"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.logosContainer).append(this._component.logo.uiGetElement(),this._component.logoLive.uiGetElement()),this._component.pp.uiGetElement(),this._component.captions.uiGetElement()),this.__setDisplayed(e.displayed)}},{key:"_onUiCanUpdate",value:function(e){return e.displayed||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._component.logo.uiUpdate(this.__getPropsForLogo(e)),this._component.logoLive.uiUpdate(this.__getPropsForLogoLive(e)),this._component.pp.uiUpdate(this.__getPropsForPp(e)),this._component.captions.uiUpdate(this.__getPropsForCaptions(e))}},{key:"__getPropsForLogo",value:function(e){return{className:"sznp-ui-overlay-logo",displayed:e.logo,src:e.logoSrc}}},{key:"__getPropsForLogoLive",value:function(e){return{displayed:e.logoLive,textLive:e.logoLiveText}}},{key:"__getPropsForPp",value:function(e){return{className:"sznp-ui-overlay-pp",displayed:e.pp,src:e.ppSrc}}},{key:"__getPropsForCaptions",value:function(e){return{displayed:e.captions,text:e.captionText}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}}]),i}(s.default);n.default=h},{"../../../../common/UiComponent":14,"../../../../common/uiDom":20,"./overlays/Captions":76,"./overlays/LogoLive":77,"./overlays/OverlayElement":78}],64:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{videoWrapper:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",elm:"object",controlsEnabled:"boolean"}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-tech-container"}),this._dom.refs.videoWrapper=(0,r.createElm)("div",{className:"sznp-ui-tech-video-wrapper"}),(0,r.elm)(this._dom.root).append(this._dom.refs.videoWrapper),e.elm&&(this.__setControlsEnabled(e.elm,e.controlsEnabled),(0,r.elm)(this._dom.refs.videoWrapper).append(e.elm)),this.__setDisplayed(e.displayed)}},{key:"_onUiCanUpdate",value:function(e){return this._props.elm!=e.elm||this._props.controlsEnabled!=e.controlsEnabled||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.elm!=e.elm?(this._props.elm&&this._dom.refs.videoWrapper.removeChild(this._props.elm),e.elm&&(0,r.elm)(this._dom.refs.videoWrapper).append(e.elm),this.__setControlsEnabled(e.elm,e.controlsEnabled)):this._props.controlsEnabled!=e.controlsEnabled&&this.__setControlsEnabled(e.elm,e.controlsEnabled)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setControlsEnabled",value:function(e,t){if(e){var i=null;"VIDEO"===e.tagName?i=e:"function"==typeof e.querySelector&&(i=e.querySelector("video")),i&&"controls"in i&&(i.controls=t)}}}]),i}(s.default);n.default=a},{"../../../../common/UiComponent":14,"../../../../common/uiDom":20}],65:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/Component"),s=e.interopRequireDefault(o),r=t("../../../../common/env"),a=e.interopRequireDefault(r),l=t("../../../../common/constants"),u=t("../../../../sznplayer/spl/SplResource"),c=e.interopRequireDefault(u),d=t("../../../../sznplayer/spl/createSplResource"),_=e.interopRequireDefault(d),h=function(t){function i(){e.classCallCheck(this,i);var t=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t._elements={},t._shown=[],t}return e.inherits(i,t),e.createClass(i,[{key:"canRunType",value:function(e){return 0===e.indexOf("image")||"text/html"===e||!a.default.isTouch()&&(e===l.typeSpl||"video/mp4s"===e)}},{key:"isShown",value:function(e){return this._shown.indexOf(e)!==-1}},{key:"get",value:function(){return Object.keys(this._elements)}},{key:"getShown",value:function(){var e=this;return this._shown.map(function(t){return Object.assign({},e._elements[t])})}},{key:"add",value:function(e){if(e.id&&e.type&&this.canRunType(e.type))if(this._elements[e.id]=e,this._elements[e.id].closeButtonDisplayed=!1,e.type===l.typeSpl&&e.src){var t=(0,_.default)();t.resolveAndGet(e.src,{}).then(function(t){e.type="video/mp4s",e.src=c.default.getOverlayUrl(t)})}else if(e.src){var i=new Image;i.src=e.src}}},{key:"show",value:function(e){this._elements[e]&&!this.isShown(e)&&this._elements[e].type!==l.typeSpl&&(this._shown.push(e),this.emit(i.EVENT_CHANGE,this.getShown()),this.emit(i.EVENT_VE_DISPLAYED,{id:e}))}},{key:"showClose",value:function(e){this._elements[e]&&!this._elements[e].closeButtonDisplayed&&(this._elements[e].closeButtonDisplayed=!0,this.emit(i.EVENT_CHANGE,this.getShown()))}},{key:"hide",value:function(e){this._elements[e]&&this._removeElementFromShown(e)&&(this.emit(i.EVENT_CHANGE,this.getShown()),this.emit(i.EVENT_VE_HIDDEN,{id:e}))}},{key:"abort",value:function(e){this.hide(e)}},{key:"remove",value:function(e){this._elements[e]&&(this.abort(e),this._elements[e]=null)}},{key:"removeAll",value:function(){if(this._shown.length){this.emit(i.EVENT_CHANGE,[]);for(var e=0,t=this._shown.length;e<t;e++){var n=this._shown[e];this._removeElementFromShown(n)&&this.emit(i.EVENT_VE_HIDDEN,{id:n})}this._shown=[]}this._elements={}}},{key:"_removeElementFromShown",value:function(e){var t=this._shown.indexOf(e);return t!==-1&&(this._shown.splice(t,1),!0)}},{key:"setDefaultPosition",value:function(e,t){this._elements[e]&&(this._elements[e].defaultPosition=t,this.emit(i.EVENT_CHANGE,this.getShown()))}}]),i}(s.default);h.EVENT_CHANGE="change",h.EVENT_VE_DISPLAYED="displayed",h.EVENT_VE_HIDDEN="hidden",n.default=h},{"../../../../common/Component":10,"../../../../common/constants":16,"../../../../common/env":17,"../../../../sznplayer/spl/SplResource":129,"../../../../sznplayer/spl/createSplResource":130}],66:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../../../../../widgets/PopupMenu"),l=e.interopRequireDefault(a),u=t("../../../../../widgets/ActionArea"),c=e.interopRequireDefault(u),d=t("../../../../../widgets/ActionCaption"),_=e.interopRequireDefault(d),h=t("../../../../../widgets/AdCaption"),f=e.interopRequireDefault(h),p=t("../../../../../widgets/AdCountdownCaption"),m=e.interopRequireDefault(p),v=t("../../../../../widgets/AdSkipButton"),y=e.interopRequireDefault(v),E=t("../../../../../widgets/ClickthroughLink"),g=e.interopRequireDefault(E),k=t("../../../../../widgets/Injections"),T=e.interopRequireDefault(k),C=t("../event/list"),S=e.interopRequireDefault(C),b=t("../controlPanels/DesktopCtrlPanel"),P=e.interopRequireDefault(b),A=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{activeLayer:null,adInfoContainer:null,adNearInfoContainer:null,clickthroughContainer:null,actionAreaContainer:null,injectionsContainer:null,ctrlPanelContainer:null,techContainer:null,document:document}},n._component={desktopCtrlPanel:null,adCaption:null,adCountdownCaption:null,adSkipButton:null,actionArea:null,actionCaption:null,qualityMenu:null,clickthroughLink:null,injections:null},n._bind=["__onCtrlPanelHoverOn","__onCtrlPanelHoverOff","__onAdSkipButtonClick","__onInjectionClick","__onInjectionClose","__onInjectionError","__onQualityItemSelect","__onQualityHoverOn","__onQualityHoverOff","__onMouseEnter","__onMouseMove","__onClickThroughLinkClick","__onActionAreaClick","__onDocumentClick"],n._lastMousePos={x:0,y:0},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{adLayout:"string",clickthroughTarget:"string",clickthroughUrl:"string",controlPanelShown:"boolean",controlPanelPreventHidding:"boolean",startTime:"number",currentTime:"number",displayed:"boolean",adPoints:"object",duration:"number",fullscreenEnabled:"boolean",fullscreenOn:"boolean",indicatorColor:"string",isEvent:"boolean",isLive:"boolean",layout:"string",loading:"boolean",seeking:"boolean",playing:"boolean",playingLive:"boolean",progressBarColor:"string",qualities:"object",qualityId:["object","number"],qualityMenuShown:"boolean",seekingEnabled:"boolean",settingQualityEnabled:"boolean",settingQualityVisible:"boolean",settingSubtitlesEnabled:"boolean",settingSubtitlesVisible:"boolean",settingFullscreenEnabled:"boolean",settingFullscreenVisible:"boolean",skippableAfter:"number",countdownBefore:"number",allowedToSkip:"boolean",streamingLive:"boolean",subtitlesShown:"boolean",textLoading:"string",textPlay:"string",textPause:"string",textMute:"string",textUnmute:"string",textVolume:"string",textSeekbarEnabled:"string",textSeekbarDisabled:"string",textSubtitlesEnabled:"string",textSubtitlesDisabled:"string",textQuality:"string",textQualityEnabled:"string",textQualityDisabled:"string",textFullscreenOn:"string",textFullscreenOff:"string",textAd:"string",textAdPoint:"string",textAdSkip:"string",textAdSkipAfter:"string",textAdCountdown:"string",textAdWeb:"string",textSponsor:"string",textPromo:"string",textLive:"string",textLiveFromStart:"string",textAction:"string",volume:"number",volumeMuted:"boolean",injections:"object",tech:"object",videoDimensions:"object",controlPanelIntersectionHeight:"number"}}},{key:"_onUiInit",value:function(e){this._component.desktopCtrlPanel=new P.default(this.__getPropsForControlPanel(e)),this._component.qualityMenu=new l.default(this.__getPropsForQualityMenu(e)),this._component.adCaption=new f.default(this.__getPropsForAdCaption(e)),this._component.adCountdownCaption=new m.default(this.__getPropsForAdCountdownCaption(e)),this._component.adSkipButton=new y.default(this.__getPropsForAdSkipButton(e)),this._component.actionArea=new c.default(this.__getPropsForActionArea(e)),this._component.actionCaption=new _.default(this.__getPropsForActionCaption(e)),this._component.clickthroughLink=new g.default(this.__getPropsForClickthroughLink(e)),this._component.injections=new T.default(this.__getPropsForInjections(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-desktop-layout"}),this._dom.refs.activeLayer=(0,r.createElm)("div",{className:"sznp-ui-active-layer"}),this._dom.refs.actionAreaContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-actionarea-container"}),this._dom.refs.clickthroughContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-clickthrough-link-container"}),this._dom.refs.injectionsContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-injections-container"}),this._dom.refs.adInfoContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-ad-info-container"}),this._dom.refs.adNearInfoContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-ad-near-info-container"}),this._dom.refs.ctrlPanelContainer=(0,r.createElm)("div",{className:"sznp-ui-ctrl-panel-container"}),this._dom.refs.techContainer=(0,r.createElm)("div",{className:"sznp-ui-controls-tech-container"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.activeLayer).append((0,r.elm)(this._dom.refs.injectionsContainer).append(this._component.injections.uiGetElement()),(0,r.elm)(this._dom.refs.actionAreaContainer).append(this._component.actionCaption.uiGetElement(),this._component.actionArea.uiGetElement()),(0,r.elm)(this._dom.refs.clickthroughContainer).append(this._component.clickthroughLink.uiGetElement()),this._dom.refs.techContainer,(0,r.elm)(this._dom.refs.adInfoContainer).append(this._component.adCaption.uiGetElement(),this._component.adSkipButton.uiGetElement()),(0,r.elm)(this._dom.refs.adNearInfoContainer).append(this._component.adCountdownCaption.uiGetElement())),(0,r.elm)(this._dom.refs.ctrlPanelContainer).append(this._component.desktopCtrlPanel.uiGetElement()),this._component.qualityMenu.uiGetElement()),this.__setDisplayed(e.displayed),this.__setDisplayedTechContainer(e.tech&&e.tech.elm),this.__setDisplayedClickthroughContainer("ad"==e.layout&&!!e.clickthroughUrl),e.tech&&e.tech.elm&&this._dom.refs.techContainer.appendChild(e.tech.elm),this.__registerMouseOverEvents(),this.__registerDocumentEvents()}},{key:"_onUiCanUpdate",value:function(e){return e.displayed||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this.__setDisplayedTechContainer(e.tech&&e.tech.elm),this._props.layout==e.layout&&this._props.clickthroughUrl==e.clickthroughUrl||this.__setDisplayedClickthroughContainer("ad"==e.layout&&!!e.clickthroughUrl),e.tech!=this._props.tech&&(this._props.tech&&this._props.tech.elm&&this._dom.refs.techContainer.hasChildNodes()&&this._dom.refs.techContainer.removeChild(this._props.tech.elm),e.tech&&e.tech.elm&&this._dom.refs.techContainer.appendChild(e.tech.elm)),this.__setDimensionsInjectionContainer(e.videoDimensions),this._component.adSkipButton.uiUpdate(this.__getPropsForAdSkipButton(e)),this._component.adCaption.uiUpdate(this.__getPropsForAdCaption(e)),this._component.adCountdownCaption.uiUpdate(this.__getPropsForAdCountdownCaption(e)),this._component.clickthroughLink.uiUpdate(this.__getPropsForClickthroughLink(e)),this._component.injections.uiUpdate(this.__getPropsForInjections(e)),this._component.actionArea.uiUpdate(this.__getPropsForActionArea(e)),this._component.actionCaption.uiUpdate(this.__getPropsForActionCaption(e)),this._component.qualityMenu.uiUpdate(this.__getPropsForQualityMenu(e)),this._component.desktopCtrlPanel.uiUpdate(this.__getPropsForControlPanel(e))}},{key:"_onUiDestroy",value:function(){this.__unregisterMouseOverEvents(),this.__unregisterDocumentEvents()}},{key:"__registerDocumentEvents",value:function(){this._dom.refs.document.addEventListener("click",this.__onDocumentClick,!0)}},{key:"__unregisterDocumentEvents",value:function(){this._dom.refs.document.removeEventListener("click",this.__onDocumentClick,!0)}},{key:"__registerMouseOverEvents",value:function(){this._dom.root.addEventListener("mouseenter",this.__onMouseEnter),this._dom.root.addEventListener("mousemove",this.__onMouseMove)}},{key:"__unregisterMouseOverEvents",value:function(){this._dom.root.removeEventListener("mouseenter",this.__onMouseEnter),this._dom.root.removeEventListener("mousemove",this.__onMouseMove)}},{key:"__getPropsForControlPanel",value:function(e){var t=e.controlPanelShown,i=e.currentTime,n=e.adPoints,o=e.duration,s=e.fullscreenEnabled,r=e.fullscreenOn,a=e.indicatorColor,l=e.isEvent,u=e.isLive,c=e.loading,d=e.playing,_=e.playingLive,h=e.progressBarColor,f=e.qualityMenuShown,p=e.settingQualityEnabled,m=e.settingQualityVisible,v=e.seekingEnabled,y=e.settingSubtitlesEnabled,E=e.settingSubtitlesVisible,g=e.settingFullscreenEnabled,k=e.settingFullscreenVisible,T=e.streamingLive,C=e.subtitlesShown,S=e.textLoading,b=e.textPlay,P=e.textPause,A=e.textMute,R=e.textUnmute,N=e.textVolume,D=e.textSeekbarEnabled,x=e.textSeekbarDisabled,w=e.textSubtitlesEnabled,L=e.textSubtitlesDisabled,O=e.textQualityEnabled,I=e.textQualityDisabled,M=e.textFullscreenOn,V=e.textFullscreenOff,U=e.textLive,B=e.textLiveFromStart,F=e.textAdPoint,q=e.volume,j=e.volumeMuted;return{currentTime:i,visible:t,adPoints:n,duration:o,fullscreenEnabled:s,fullscreenOn:r,isEvent:l,isLive:u,loading:c,indicatorColor:a,playing:d,playingLive:_,progressBarColor:h,qualityMenuShown:f,settingQualityEnabled:p,settingQualityVisible:m,seekingEnabled:v,settingSubtitlesEnabled:y,settingSubtitlesVisible:E,settingFullscreenEnabled:g,settingFullscreenVisible:k,streamingLive:T,subtitlesShown:C,textLoading:S,textPlay:b,textPause:P,textMute:A,textUnmute:R,textVolume:N,textSeekbarEnabled:D,textSeekbarDisabled:x,textSubtitlesEnabled:w,textSubtitlesDisabled:L,textQualityEnabled:O,textQualityDisabled:I,textFullscreenOn:M,textFullscreenOff:V,textLive:U,textLiveFromStart:B,textAdPoint:F,volume:q,volumeMuted:j,onHoverOn:this.__onCtrlPanelHoverOn,onHoverOff:this.__onCtrlPanelHoverOff}}},{key:"__getPropsForQualityMenu",value:function(e){var t=e.qualities.map(function(t){return{text:t.text,id:t.id,selected:e.qualityId===t.id}}).reverse(),i={};e.qualityMenuShown&&this._component.desktopCtrlPanel.uiBuilt()&&(i=l.default.getCoordProps(this._component.qualityMenu,this._component.desktopCtrlPanel.getQualityButton().uiGetElement(),this._dom.root));var n=Object.assign({},i,{indicatorColor:e.indicatorColor,items:t,opened:e.qualityMenuShown,title:e.textQuality,onItemSelect:this.__onQualityItemSelect,onHoverOn:this.__onQualityHoverOn,onHoverOff:this.__onQualityHoverOff});return n}},{key:"__getPropsForAdCaption",value:function(e){var t=this.__getTimeToSkip(e.skippableAfter,e.currentTime,e.duration),i="",n="sponsor"===e.adLayout?e.textSponsor:"promo"===e.adLayout?e.textPromo:e.textAd;t==-1?i=n:t>0&&(i=n+" | "+e.textAdSkipAfter+" "+t+"s");var o="ad"==e.layout&&(t==-1||t>0)&&!e.allowedToSkip;return{text:i,displayed:o}}},{key:"__getPropsForAdSkipButton",value:function(e){var t=this.__getTimeToSkip(e.skippableAfter,e.currentTime,e.duration),i="ad"==e.layout&&(e.allowedToSkip||0===t);return{displayed:i,text:e.textAdSkip,onClick:this.__onAdSkipButtonClick}}},{key:"__getPropsForAdCountdownCaption",value:function(e){var t=this.__getTimeToAd(e.adPoints,e.countdownBefore,e.currentTime),i="";t>0&&(i=e.textAdCountdown+" "+t+"s");var n="ad"!=e.layout&&""!==i;return{text:i,displayed:n}}},{key:"__getPropsForActionArea",value:function(e){return{displayed:!0,onClick:this.__onActionAreaClick}}},{key:"__getPropsForActionCaption",value:function(e){return{displayed:""!=e.textAction,text:e.textAction}}},{key:"__getPropsForClickthroughLink",value:function(e){return{displayed:"ad"==e.layout&&!!e.clickthroughUrl,fullSizeLook:!0,href:e.clickthroughUrl,target:e.clickthroughTarget,onClick:this.__onClickThroughLinkClick}}},{key:"__getPropsForInjections",value:function(e){return{injections:e.injections,playing:e.playing,seeking:e.seeking,loading:e.loading,startTime:e.startTime,currentTime:e.currentTime,duration:e.duration,streamingLive:e.streamingLive,videoDimensions:e.videoDimensions,controlPanelIntersectionHeight:e.controlPanelIntersectionHeight||0,onClick:this.__onInjectionClick,onClose:this.__onInjectionClose,onError:this.__onInjectionError}}},{key:"__getTimeToSkip",value:function(e,t,i){if(e>=i)return-1;if(e==-1)return-1;var n=e-t,o=Math.max(n,0),s=Math.ceil(o);return s}},{key:"__getTimeToAd",value:function(e,t,i){var n=0;return e.forEach(function(e){var o=e.time-i;o>0&&o<=t&&(!n||n>o)&&(n=o)}),Math.ceil(n)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setDisplayedTechContainer",value:function(e){(0,r.elm)(this._dom.refs.techContainer).setDisplayed(e)}},{key:"__setDisplayedClickthroughContainer",value:function(e){(0,r.elm)(this._dom.refs.clickthroughContainer).setDisplayed(e)}},{key:"__setDimensionsInjectionContainer",value:function(e){if(e){var t=(0,r.elm)(this._dom.refs.injectionsContainer);t.setStyle({top:e.y+"px",left:e.x+"px",width:e.width+"px",height:e.height+"px"})}}},{key:"__mousePosChanged",value:function(e,t){return this._lastMousePos.x!=e||this._lastMousePos.y!=t}},{key:"__saveMousePos",value:function(e,t){this._lastMousePos={x:e,y:t}}},{key:"__onMouseEnter",value:function(e){this._uiEmitEvent(S.default.SHOW_CONTROL_PANEL)}},{key:"__onMouseMove",value:function(e){this.__mousePosChanged(e.screenX,e.screenY)&&(this.__saveMousePos(e.screenX,e.screenY),this._uiEmitEvent(S.default.SHOW_CONTROL_PANEL))}},{key:"__onCtrlPanelHoverOn",value:function(){this.__emitCtrlPanelHovered(!0)}},{key:"__onCtrlPanelHoverOff",value:function(){this.__emitCtrlPanelHovered(!1)}},{key:"__onQualityHoverOn",value:function(){this.__emitCtrlPanelHovered(!0)}},{key:"__onQualityHoverOff",value:function(){this.__emitCtrlPanelHovered(!1)}},{key:"__onQualityItemSelect",value:function(e){this._uiEmitEvent(S.default.CHANGE_QUALITY_REQUEST,{id:e})}},{key:"__onAdSkipButtonClick",value:function(){this._uiEmitEvent(S.default.CLICK_ON_SKIP_VIDEO)}},{key:"__onClickThroughLinkClick",value:function(){this._uiEmitEvent(S.default.CLICK_ON_CLICKTHROUGH_LINK)}},{key:"__onInjectionClick",value:function(e){this._uiEmitEvent(S.default.CLICK_ON_INJECTION,{id:e})}},{key:"__onInjectionClose",value:function(e){this._uiEmitEvent(S.default.CLOSE_INJECTION,{id:e})}},{key:"__onInjectionError",value:function(e,t){this._uiEmitEvent(S.default.ERROR_INJECTION,{id:e,error:t})}},{key:"__onActionAreaClick",value:function(){""!=this._props.textAction?this._uiEmitEvent(S.default.CLICK_ON_ACTION_AREA):this._props.playing?this._uiEmitEvent(S.default.PAUSE_REQUEST):this._uiEmitEvent(S.default.PLAY_REQUEST)}},{key:"__onDocumentClick",value:function(e){if(this._props.qualityMenuShown){var t=e.target;if(this._component.qualityMenu.uiHasElement(t))return;var i=this._component.desktopCtrlPanel.getQualityButton();if(i.uiHasElement(t))return;this._component.actionArea.uiHasElement(t)&&e.stopPropagation(),this._uiEmitEvent(S.default.CLOSE_QUALITY_MENU_REQUEST)}}},{key:"__emitCtrlPanelHovered",value:function(e){this._uiEmitEvent(S.default.CTRL_PANEL_HOVERED,{hovered:e})}}]),i}(s.default);n.default=A},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../../../../../widgets/ActionArea":131,"../../../../../widgets/ActionCaption":133,"../../../../../widgets/AdCaption":134,"../../../../../widgets/AdCountdownCaption":135,"../../../../../widgets/AdSkipButton":137,"../../../../../widgets/ClickthroughLink":139,"../../../../../widgets/Injections":143,"../../../../../widgets/PopupMenu":148,"../controlPanels/DesktopCtrlPanel":68,"../event/list":74}],67:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../../../../../widgets/ActionButton"),l=e.interopRequireDefault(a),u=t("../../../../../widgets/AdCaption"),c=e.interopRequireDefault(u),d=t("../../../../../widgets/AdCountdownCaption"),_=e.interopRequireDefault(d),h=t("../../../../../widgets/AdSkipButton"),f=e.interopRequireDefault(h),p=t("../../../../../widgets/ClickthroughLink"),m=e.interopRequireDefault(p),v=t("../../../../../widgets/IconButton"),y=(e.interopRequireDefault(v),t("../../../../../widgets/ModalMenu")),E=e.interopRequireDefault(y),g=t("../event/list"),k=e.interopRequireDefault(g),T=t("../controlPanels/TouchCtrlPanel"),C=e.interopRequireDefault(T),S=t("../controlPanels/TouchButtonCtrlPanel"),b=e.interopRequireDefault(S),P=t("../../../../../widgets/Injections"),A=e.interopRequireDefault(P),R=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{activeLayer:null,adInfoContainer:null,adNearInfoContainer:null,clickthroughLinkContainer:null,injectionsContainer:null,actionAreaContainer:null,ctrlPanelContainer:null,buttonCtrlPanelContainer:null,techContainer:null}},n._component={adCaption:null,adCountdownCaption:null,adSkipButton:null,actionButton:null,clickthroughLink:null,qualityMenu:null,touchButtonCtrlPanel:null,touchCtrlPanel:null,injections:null},n._bind=["__onClickThroughLinkClick","__onActionClick","__onMouseEnter","__onMouseMove","__onTouchStart","__onTouchEnd","__onAdSkipButtonClick","__onQualityItemSelect","__onQualityMenuClose","__onButtonControlPanelHoverOn","__onButtonControlPanelHoverOff","__onControlPanelHoverOn","__onControlPanelHoverOff","__onInjectionClick","__onInjectionClose","__onInjectionError"],n._flags={touchUsed:!1,mouseUsed:!1},n._lastMousePos={x:0,y:0},n._mouseUsedOffTimeout=0,n._touchEndTimeout=0,n._mouseMoveTimeout=0,n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{adLayout:"string",clickthroughTarget:"string",clickthroughUrl:"string",controlPanelShown:"boolean",controlPanelPreventHidding:"boolean",startTime:"number",currentTime:"number",displayed:"boolean",adPoints:"object",duration:"number",fullscreenEnabled:"boolean",fullscreenOn:"boolean",indicatorColor:"string",isEvent:"boolean",isLive:"boolean",layout:"string",loading:"boolean",seeking:"boolean",playing:"boolean",playingLive:"boolean",progressBarColor:"string",qualities:"object",qualityId:["object","number"],qualityMenuShown:"boolean",seekingEnabled:"boolean",settingQualityEnabled:"boolean",settingQualityVisible:"boolean",settingSubtitlesEnabled:"boolean",settingSubtitlesVisible:"boolean",settingFullscreenEnabled:"boolean",settingFullscreenVisible:"boolean",skippableAfter:"number",countdownBefore:"number",allowedToSkip:"boolean",streamingLive:"boolean",subtitlesShown:"boolean",textLoading:"string",textPlay:"string",textPause:"string",textMute:"string",textUnmute:"string",textVolume:"string",textSeekbarEnabled:"string",textSeekbarDisabled:"string",textSubtitlesEnabled:"string",textSubtitlesDisabled:"string",textQuality:"string",textQualityEnabled:"string",textQualityDisabled:"string",textFullscreenOn:"string",textFullscreenOff:"string",textAd:"string",textAdPoint:"string",
textAdSkip:"string",textAdSkipAfter:"string",textAdCountdown:"string",textAdWeb:"string",textSponsor:"string",textPromo:"string",textLive:"string",textLiveFromStart:"string",textAction:"string",volume:"number",volumeMuted:"boolean",injections:"object",tech:"object",videoDimensions:"object",controlPanelIntersectionHeight:"number"}}},{key:"_onUiInit",value:function(e){this._component.touchButtonCtrlPanel=new b.default(this.__getPropsForButtonControlPanel(e)),this._component.touchCtrlPanel=new C.default(this.__getPropsForControlPanel(e)),this._component.qualityMenu=new E.default(this.__getPropsForQualityMenu(e)),this._component.adCaption=new c.default(this.__getPropsForAdCaption(e)),this._component.adCountdownCaption=new _.default(this.__getPropsForAdCountdownCaption(e)),this._component.adSkipButton=new f.default(this.__getPropsForAdSkipButton(e)),this._component.actionButton=new l.default(this.__getPropsForActionButton(e)),this._component.clickthroughLink=new m.default(this.__getPropsForClickthroughLink(e)),this._component.injections=new A.default(this.__getPropsForInjections(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-touch-layout"}),this._dom.refs.activeLayer=(0,r.createElm)("div",{className:"sznp-ui-active-layer"}),this._dom.refs.actionAreaContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-actionarea-container"}),this._dom.refs.adInfoContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-ad-info-container"}),this._dom.refs.adNearInfoContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-ad-near-info-container"}),this._dom.refs.clickthroughLinkContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-clickthrough-link-container"}),this._dom.refs.injectionsContainer=(0,r.createElm)("div",{className:"sznp-ui-widget-injections-container"}),this._dom.refs.ctrlPanelContainer=(0,r.createElm)("div",{className:"sznp-ui-ctrl-panel-container"}),this._dom.refs.buttonCtrlPanelContainer=(0,r.createElm)("div",{className:"sznp-ui-button-ctrl-panel-container"}),this._dom.refs.techContainer=(0,r.createElm)("div",{className:"sznp-ui-controls-tech-container"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.activeLayer).append((0,r.elm)(this._dom.refs.injectionsContainer).append(this._component.injections.uiGetElement()),this._dom.refs.techContainer,(0,r.elm)(this._dom.refs.actionAreaContainer).append(this._component.actionButton.uiGetElement()),(0,r.elm)(this._dom.refs.adInfoContainer).append(this._component.adCaption.uiGetElement(),this._component.adSkipButton.uiGetElement(),(0,r.elm)(this._dom.refs.clickthroughLinkContainer).append(this._component.clickthroughLink.uiGetElement())),(0,r.elm)(this._dom.refs.adNearInfoContainer).append(this._component.adCountdownCaption.uiGetElement())),(0,r.elm)(this._dom.refs.buttonCtrlPanelContainer).append(this._component.touchButtonCtrlPanel.uiGetElement()),(0,r.elm)(this._dom.refs.ctrlPanelContainer).append(this._component.touchCtrlPanel.uiGetElement()),this._component.qualityMenu.uiGetElement()),this.__setDisplayed(e.displayed),this.__setDisplayedTechContainer(e.tech&&e.tech.elm),e.tech&&e.tech.elm&&this._dom.refs.techContainer.appendChild(e.tech.elm),this.__registerMouseOverEvents()}},{key:"_onUiCanUpdate",value:function(e){return e.displayed||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this.__setDisplayedTechContainer(e.tech&&e.tech.elm),e.tech!=this._props.tech&&(this._props.tech&&this._props.tech.elm&&this._dom.refs.techContainer.hasChildNodes()&&this._dom.refs.techContainer.removeChild(this._props.tech.elm),e.tech&&e.tech.elm&&this._dom.refs.techContainer.appendChild(e.tech.elm)),this.__setDimensionsInjectionContainer(e.videoDimensions),this._component.touchButtonCtrlPanel.uiUpdate(this.__getPropsForButtonControlPanel(e)),this._component.touchCtrlPanel.uiUpdate(this.__getPropsForControlPanel(e)),this._component.qualityMenu.uiUpdate(this.__getPropsForQualityMenu(e)),this._component.adCaption.uiUpdate(this.__getPropsForAdCaption(e)),this._component.adCountdownCaption.uiUpdate(this.__getPropsForAdCountdownCaption(e)),this._component.adSkipButton.uiUpdate(this.__getPropsForAdSkipButton(e)),this._component.actionButton.uiUpdate(this.__getPropsForActionButton(e)),this._component.clickthroughLink.uiUpdate(this.__getPropsForClickthroughLink(e)),this._component.injections.uiUpdate(this.__getPropsForInjections(e))}},{key:"_onUiDestroy",value:function(){this.__clearMouseUsedOffTimeout(),this.__clearTouchEndTimeout(),this.__clearMouseMoveTimeout(),this.__unregisterMouseOverEvents()}},{key:"__registerMouseOverEvents",value:function(){this._dom.root.addEventListener("mouseenter",this.__onMouseEnter),this._dom.root.addEventListener("mousemove",this.__onMouseMove),this._dom.root.addEventListener("touchstart",this.__onTouchStart),this._dom.root.addEventListener("touchcancel",this.__onTouchEnd),this._dom.root.addEventListener("touchend",this.__onTouchEnd)}},{key:"__unregisterMouseOverEvents",value:function(){this._dom.root.removeEventListener("mousemove",this.__onMouseMove),this._dom.root.removeEventListener("mouseenter",this.__onMouseEnter),this._dom.root.removeEventListener("touchstart",this.__onTouchStart),this._dom.root.removeEventListener("touchcancel",this.__onTouchEnd),this._dom.root.removeEventListener("touchend",this.__onTouchEnd)}},{key:"__getPropsForButtonControlPanel",value:function(e){var t=e.controlPanelShown,i=e.indicatorColor,n=e.playing,o=e.settingQualityEnabled,s=e.settingQualityVisible,r=e.settingSubtitlesEnabled,a=e.settingSubtitlesVisible,l=e.subtitlesShown,u=e.textPlay,c=e.textPause,d=e.textSubtitlesEnabled,_=e.textSubtitlesDisabled,h=e.textQualityEnabled,f=e.textQualityDisabled;return{visible:t,indicatorColor:i,playing:n,settingQualityEnabled:o,settingQualityVisible:s,settingSubtitlesEnabled:r,settingSubtitlesVisible:a,subtitlesShown:l,textPlay:u,textPause:c,textSubtitlesEnabled:d,textSubtitlesDisabled:_,textQualityEnabled:h,textQualityDisabled:f,onHoverOn:this.__onButtonControlPanelHoverOn,onHoverOff:this.__onButtonControlPanelHoverOff}}},{key:"__getPropsForControlPanel",value:function(e){var t=e.controlPanelShown,i=e.currentTime,n=e.adPoints,o=e.duration,s=e.fullscreenEnabled,r=e.fullscreenOn,a=e.settingFullscreenEnabled,l=e.settingFullscreenVisible,u=e.isEvent,c=e.isLive,d=e.loading,_=e.playingLive,h=e.progressBarColor,f=e.seekingEnabled,p=e.streamingLive,m=e.textLoading,v=e.textSeekbarEnabled,y=e.textSeekbarDisabled,E=e.textFullscreenOn,g=e.textFullscreenOff,k=e.textLive,T=e.textLiveFromStart,C=e.textAdPoint;return{visible:t,currentTime:i,adPoints:n,duration:o,fullscreenEnabled:s,fullscreenOn:r,settingFullscreenEnabled:a,settingFullscreenVisible:l,isEvent:u,isLive:c,loading:d,playingLive:_,progressBarColor:h,seekingEnabled:f,streamingLive:p,textLoading:m,textSeekbarEnabled:v,textSeekbarDisabled:y,textFullscreenOn:E,textFullscreenOff:g,textLive:k,textLiveFromStart:T,textAdPoint:C,onHoverOn:this.__onControlPanelHoverOn,onHoverOff:this.__onControlPanelHoverOff}}},{key:"__getPropsForQualityMenu",value:function(e){var t=e.qualities.map(function(t){return{text:t.text,id:t.id,selected:e.qualityId===t.id}}).reverse();return{indicatorColor:e.indicatorColor,items:t,title:e.textQuality,opened:e.qualityMenuShown,onItemSelect:this.__onQualityItemSelect,onClose:this.__onQualityMenuClose}}},{key:"__getPropsForAdCaption",value:function(e){var t=this.__getTimeToSkip(e.skippableAfter,e.currentTime,e.duration),i="",n="sponsor"===e.adLayout?e.textSponsor:"promo"===e.adLayout?e.textPromo:e.textAd;t==-1?i=n:t>0&&(i=n+" | "+e.textAdSkipAfter+" "+t+"s");var o="ad"==e.layout&&(t==-1||t>0)&&!e.allowedToSkip;return{text:i,displayed:o}}},{key:"__getPropsForAdSkipButton",value:function(e){var t=this.__getTimeToSkip(e.skippableAfter,e.currentTime,e.duration),i="ad"==e.layout&&(e.allowedToSkip||0===t);return{displayed:i,text:e.textAdSkip,onClick:this.__onAdSkipButtonClick}}},{key:"__getPropsForAdCountdownCaption",value:function(e){var t=this.__getTimeToAd(e.adPoints,e.countdownBefore,e.currentTime),i="";t>0&&(i=e.textAdCountdown+" "+t+"s");var n="ad"!=e.layout&&""!==i;return{text:i,displayed:n}}},{key:"__getPropsForActionButton",value:function(e){return{displayed:""!=e.textAction,text:e.textAction,onClick:this.__onActionClick}}},{key:"__getPropsForClickthroughLink",value:function(e){return{displayed:"ad"==e.layout&&!!e.clickthroughUrl,href:e.clickthroughUrl,target:e.clickthroughTarget||"_blank",text:e.textAdWeb+" »",onClick:this.__onClickThroughLinkClick}}},{key:"__getPropsForInjections",value:function(e){return{injections:e.injections,playing:e.playing,seeking:e.seeking,loading:e.loading,startTime:e.startTime,currentTime:e.currentTime,duration:e.duration,streamingLive:e.streamingLive,videoDimensions:e.videoDimensions,controlPanelIntersectionHeight:e.controlPanelIntersectionHeight||0,onClick:this.__onInjectionClick,onClose:this.__onInjectionClose,onError:this.__onInjectionError}}},{key:"__getTimeToSkip",value:function(e,t,i){if(e>=i)return-1;if(e==-1)return-1;var n=e-t,o=Math.max(n,0),s=Math.ceil(o);return s}},{key:"__getTimeToAd",value:function(e,t,i){var n=0;return e.forEach(function(e){var o=e.time-i;o>0&&o<=t&&(!n||n>o)&&(n=o)}),Math.ceil(n)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setDisplayedTechContainer",value:function(e){(0,r.elm)(this._dom.refs.techContainer).setDisplayed(e)}},{key:"__setDimensionsInjectionContainer",value:function(e){if(e){var t=(0,r.elm)(this._dom.refs.injectionsContainer);t.setStyle({top:e.y+"px",left:e.x+"px",width:e.width+"px",height:e.height+"px"})}}},{key:"__mousePosChanged",value:function(e,t){return this._lastMousePos.x!=e||this._lastMousePos.y!=t}},{key:"__saveMousePos",value:function(e,t){this._lastMousePos={x:e,y:t}}},{key:"__saveTouchUsed",value:function(e){this._flags.touchUsed=e,e&&(this.__clearMouseMoveTimeout(),this.__clearTouchEndTimeout())}},{key:"__saveMouseUsed",value:function(e){this._flags.mouseUsed=e,e&&this.__startMouseUsedOffTimeout()}},{key:"__startMouseUsedOffTimeout",value:function(){var e=this;this.__clearMouseUsedOffTimeout(),this._mouseUsedOffTimeout=setTimeout(function(){return e.__saveMouseUsed(!1)})}},{key:"__clearMouseUsedOffTimeout",value:function(){this._mouseUsedOffTimeout&&(clearTimeout(this._mouseUsedOffTimeout),this._mouseUsedOffTimeout=0)}},{key:"__onMouseEnter",value:function(e){this._flags.touchUsed||(this.__saveMouseUsed(!0),this._uiEmitEvent(k.default.SHOW_CONTROL_PANEL))}},{key:"__onMouseMove",value:function(e){var t=this;this.__clearMouseMoveTimeout(),this._mouseMoveTimeout=setTimeout(function(){t._flags.touchUsed||(t.__saveMouseUsed(!0),t.__mousePosChanged(e.screenX,e.screenY)&&(t.__saveMousePos(e.screenX,e.screenY),t._uiEmitEvent(k.default.SHOW_CONTROL_PANEL)))})}},{key:"__clearMouseMoveTimeout",value:function(){this._mouseMoveTimeout&&(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=0)}},{key:"__onTouchStart",value:function(e){this._flags.mouseUsed||this.__saveTouchUsed(!0)}},{key:"__onTouchEnd",value:function(e){if(!this._flags.mouseUsed){this.__startTouchEndTimeout();var t=e.target;this._props.controlPanelShown&&t==this._dom.refs.activeLayer?this._uiEmitEvent(k.default.HIDE_CONTROL_PANEL):this._uiEmitEvent(k.default.SHOW_CONTROL_PANEL)}}},{key:"__startTouchEndTimeout",value:function(){var e=this;this.__clearTouchEndTimeout(),this._touchEndTimeout=setTimeout(function(){e.__saveTouchUsed(!1)},250)}},{key:"__clearTouchEndTimeout",value:function(){this._touchEndTimeout&&(clearTimeout(this._touchEndTimeout),this._touchEndTimeout=0)}},{key:"__onButtonControlPanelHoverOn",value:function(){this.__emitCtrlPanelHovered(!0)}},{key:"__onButtonControlPanelHoverOff",value:function(){this.__emitCtrlPanelHovered(!1)}},{key:"__onControlPanelHoverOn",value:function(){this.__emitCtrlPanelHovered(!0)}},{key:"__onControlPanelHoverOff",value:function(){this.__emitCtrlPanelHovered(!1)}},{key:"__onQualityItemSelect",value:function(e){this._uiEmitEvent(k.default.CHANGE_QUALITY_REQUEST,{id:e})}},{key:"__onQualityMenuClose",value:function(){this._uiEmitEvent(k.default.CLOSE_QUALITY_MENU_REQUEST)}},{key:"__onClickThroughLinkClick",value:function(){this._uiEmitEvent(k.default.CLICK_ON_CLICKTHROUGH_LINK)}},{key:"__onAdSkipButtonClick",value:function(){this._uiEmitEvent(k.default.CLICK_ON_SKIP_VIDEO)}},{key:"__onActionClick",value:function(){this._uiEmitEvent(k.default.CLICK_ON_ACTION_AREA)}},{key:"__emitCtrlPanelHovered",value:function(e){this._uiEmitEvent(k.default.CTRL_PANEL_HOVERED,{hovered:e})}},{key:"__onInjectionClick",value:function(e){this._uiEmitEvent(k.default.CLICK_ON_INJECTION,{id:e})}},{key:"__onInjectionClose",value:function(e){this._uiEmitEvent(k.default.CLOSE_INJECTION,{id:e})}},{key:"__onInjectionError",value:function(e,t){this._uiEmitEvent(k.default.ERROR_INJECTION,{id:e,error:t})}}]),i}(s.default);n.default=R},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../../../../../widgets/ActionButton":132,"../../../../../widgets/AdCaption":134,"../../../../../widgets/AdCountdownCaption":135,"../../../../../widgets/AdSkipButton":137,"../../../../../widgets/ClickthroughLink":139,"../../../../../widgets/IconButton":141,"../../../../../widgets/Injections":143,"../../../../../widgets/ModalMenu":145,"../controlPanels/TouchButtonCtrlPanel":70,"../controlPanels/TouchCtrlPanel":72,"../event/list":74}],68:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../event/list"),l=(e.interopRequireDefault(a),t("./DesktopCtrlPanelLayout")),u=e.interopRequireDefault(l),c=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{desktopCtrlPanelLayout:null}},n._component={desktopCtrlPanelLayout:null},n._bind=["__onMouseEnter","__onMouseLeave"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{visible:"boolean",currentTime:"number",adPoints:"object",duration:"number",fullscreenEnabled:"boolean",fullscreenOn:"boolean",indicatorColor:"string",isEvent:"boolean",isLive:"boolean",loading:"boolean",playing:"boolean",playingLive:"boolean",progressBarColor:"string",qualityMenuShown:"boolean",seekingEnabled:"boolean",settingQualityEnabled:"boolean",settingQualityVisible:"boolean",settingSubtitlesEnabled:"boolean",settingSubtitlesVisible:"boolean",settingFullscreenEnabled:"boolean",settingFullscreenVisible:"boolean",streamingLive:"boolean",subtitlesShown:"boolean",textLoading:"string",textPlay:"string",textPause:"string",textMute:"string",textUnmute:"string",textVolume:"string",textSeekbarEnabled:"string",textSeekbarDisabled:"string",textSubtitlesEnabled:"string",textSubtitlesDisabled:"string",textQualityEnabled:"string",textQualityDisabled:"string",textFullscreenOn:"string",textFullscreenOff:"string",textLive:"string",textLiveFromStart:"string",textAdPoint:"string",volume:"number",volumeMuted:"boolean",onHoverOn:["function","object"],onHoverOff:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{onHoverOn:null,onHoverOff:null}}},{key:"getQualityButton",value:function(){return this._component.desktopCtrlPanelLayout.getQualityButton()}},{key:"_onUiInit",value:function(e){this._component.desktopCtrlPanelLayout=new u.default(this.__getPropsForControlPanelLayout(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-desktop-ctrl-panel"}),(0,r.elm)(this._dom.root).append(this._component.desktopCtrlPanelLayout.uiGetElement()),this._dom.root.addEventListener("mouseenter",this.__onMouseEnter),this._dom.root.addEventListener("mouseleave",this.__onMouseLeave),this.__setVisible(e.visible)}},{key:"_onUiCanUpdate",value:function(e){return e.visible||this._props.visible!=e.visible}},{key:"_onUiUpdate",value:function(e){this._props.visible!=e.visible&&this.__setVisible(e.visible),e.visible&&this._component.desktopCtrlPanelLayout.uiUpdate(this.__getPropsForControlPanelLayout(e))}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("mouseenter",this.__onMouseEnter),this._dom.root.removeEventListener("mouseleave",this.__onMouseLeave)}},{key:"__getPropsForControlPanelLayout",value:function(e){var t=e.currentTime,i=e.adPoints,n=e.duration,o=e.fullscreenEnabled,s=e.fullscreenOn,r=e.indicatorColor,a=e.isEvent,l=e.isLive,u=e.loading,c=e.playing,d=e.playingLive,_=e.progressBarColor,h=e.qualityMenuShown,f=e.settingQualityEnabled,p=e.settingQualityVisible,m=e.seekingEnabled,v=e.settingSubtitlesEnabled,y=e.settingSubtitlesVisible,E=e.settingFullscreenEnabled,g=e.settingFullscreenVisible,k=e.streamingLive,T=e.subtitlesShown,C=e.textLoading,S=e.textPlay,b=e.textPause,P=e.textMute,A=e.textUnmute,R=e.textVolume,N=e.textSeekbarEnabled,D=e.textSeekbarDisabled,x=e.textSubtitlesEnabled,w=e.textSubtitlesDisabled,L=e.textQualityEnabled,O=e.textQualityDisabled,I=e.textFullscreenOn,M=e.textFullscreenOff,V=e.textLive,U=e.textLiveFromStart,B=e.textAdPoint,F=e.volume,q=e.volumeMuted;return{currentTime:t,adPoints:i,duration:n,fullscreenEnabled:o,fullscreenOn:s,indicatorColor:r,isEvent:a,isLive:l,loading:u,playing:c,playingLive:d,progressBarColor:_,qualityMenuShown:h,settingQualityEnabled:f,settingQualityVisible:p,seekingEnabled:m,settingSubtitlesEnabled:v,settingSubtitlesVisible:y,settingFullscreenEnabled:E,settingFullscreenVisible:g,streamingLive:k,subtitlesShown:T,textLoading:C,textPlay:S,textPause:b,textMute:P,textUnmute:A,textVolume:R,textSeekbarEnabled:N,textSeekbarDisabled:D,textSubtitlesEnabled:x,textSubtitlesDisabled:w,textQualityEnabled:L,textQualityDisabled:O,textFullscreenOn:I,textFullscreenOff:M,textLive:V,textLiveFromStart:U,textAdPoint:B,volume:F,volumeMuted:q}}},{key:"__setVisible",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-visible":e})}},{key:"__onMouseEnter",value:function(e){this._props.onHoverOn&&this._props.onHoverOn()}},{key:"__onMouseLeave",value:function(e){this._props.onHoverOff&&this._props.onHoverOff()}}]),i}(s.default);n.default=c},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../event/list":74,"./DesktopCtrlPanelLayout":69}],69:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../../../../../widgets/Volume"),l=e.interopRequireDefault(a),u=t("../../../../../widgets/SeekBar"),c=e.interopRequireDefault(u),d=t("../../../../../widgets/TimeInfo"),_=e.interopRequireDefault(d),h=t("../../../../../widgets/IconButton"),f=e.interopRequireDefault(h),p=t("../event/list"),m=e.interopRequireDefault(p),v=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{wrapper:null,playPauseBox:null,volumeBox:null,seekBarBox:null,durationBox:null,subtitlesBox:null,qualityBox:null,fullscreenBox:null}},n._component={playPauseButton:null,volume:null,seekBar:null,durationTimeInfo:null,subtitlesButton:null,qualityButton:null,fullscreenButton:null},n._bind=["__onFullscreenButtonClick","__onEndSeeking","__onSeekbarLiveClick","__onSeekbarLiveRewindClick","__onPlayPauseButtonClick","__onQualityButtonClick","__onSubtitlesButtonClick","__onSeeking","__onSeekTo","__onStartSeeking","__onSubtitlesButtonClick","__onMuteClick","__onVolumeChange"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{currentTime:"number",adPoints:"object",duration:"number",fullscreenEnabled:"boolean",fullscreenOn:"boolean",indicatorColor:"string",isEvent:"boolean",isLive:"boolean",loading:"boolean",playing:"boolean",playingLive:"boolean",progressBarColor:"string",qualityMenuShown:"boolean",seekingEnabled:"boolean",settingQualityEnabled:"boolean",settingQualityVisible:"boolean",settingSubtitlesEnabled:"boolean",settingSubtitlesVisible:"boolean",settingFullscreenEnabled:"boolean",settingFullscreenVisible:"boolean",streamingLive:"boolean",subtitlesShown:"boolean",textLoading:"string",textPlay:"string",textPause:"string",textMute:"string",textUnmute:"string",textVolume:"string",textSeekbarEnabled:"string",textSeekbarDisabled:"string",textSubtitlesEnabled:"string",textSubtitlesDisabled:"string",textQualityEnabled:"string",textQualityDisabled:"string",textFullscreenOn:"string",textFullscreenOff:"string",textLive:"string",textLiveFromStart:"string",textAdPoint:"string",volume:"number",volumeMuted:"boolean"}}},{key:"getQualityButton",value:function(){return this._component.qualityButton}},{key:"_onUiInit",value:function(e){this._component.playPauseButton=new f.default(this.__getPropsForPlayPauseButton(e)),this._component.volume=new l.default(this.__getPropsForVolume(e)),this._component.seekBar=new c.default(this.__getPropsForSeekBar(e)),this._component.durationTimeInfo=new _.default(this.__getPropsForDurationTimeInfo(e)),this._component.subtitlesButton=new f.default(this.__getPropsForSubtitlesButton(e)),this._component.qualityButton=new f.default(this.__getPropsForQualityButton(e)),this._component.fullscreenButton=new f.default(this.__getPropsForFullscreenButton(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-desktop-ctrl-panel-layout"}),this._dom.refs.wrapper=(0,r.createElm)("div",{className:"sznp-ui-ctrl-panel-layout-wrapper"}),this._dom.refs.playPauseBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-play-pause"}),this._dom.refs.volumeBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-volume"}),this._dom.refs.seekBarBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-seekbar"}),this._dom.refs.durationBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-duration"}),this._dom.refs.subtitlesBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-subtitles"}),this._dom.refs.qualityBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-quality"}),this._dom.refs.fullscreenBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-fullscreen"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.wrapper).append((0,r.elm)(this._dom.refs.playPauseBox).append(this._component.playPauseButton.uiGetElement()),(0,r.elm)(this._dom.refs.volumeBox).append(this._component.volume.uiGetElement()),(0,r.elm)(this._dom.refs.seekBarBox).append(this._component.seekBar.uiGetElement()),(0,r.elm)(this._dom.refs.durationBox).append(this._component.durationTimeInfo.uiGetElement()),(0,r.elm)(this._dom.refs.subtitlesBox).append(this._component.subtitlesButton.uiGetElement()),(0,r.elm)(this._dom.refs.qualityBox).append(this._component.qualityButton.uiGetElement()),(0,r.elm)(this._dom.refs.fullscreenBox).append(this._component.fullscreenButton.uiGetElement()))),this.__setQualityVisible(e.settingQualityVisible),this.__setSubtitlesVisible(e.settingSubtitlesVisible),this.__setFullscreenVisible(e.settingFullscreenVisible),this.__setDurationVisible(!e.isLive&&!e.isEvent)}},{key:"_onUiUpdate",value:function(e){this._component.playPauseButton.uiUpdate(this.__getPropsForPlayPauseButton(e)),this._component.volume.uiUpdate(this.__getPropsForVolume(e)),this._component.seekBar.uiUpdate(this.__getPropsForSeekBar(e)),this._props.isLive==e.isLive&&this._props.isEvent==e.isEvent||this.__setDurationVisible(!e.isLive&&!e.isEvent),this._component.durationTimeInfo.uiUpdate(this.__getPropsForDurationTimeInfo(e));var t=this._props.settingSubtitlesVisible!=e.settingSubtitlesVisible;t&&this.__setSubtitlesVisible(e.settingSubtitlesVisible),this._component.subtitlesButton.uiUpdate(this.__getPropsForSubtitlesButton(e));var i=this._props.settingQualityVisible!=e.settingQualityVisible;i&&this.__setQualityVisible(e.settingQualityVisible),this._component.qualityButton.uiUpdate(this.__getPropsForQualityButton(e));var n=this._props.settingFullscreenVisible!=e.settingFullscreenVisible;n&&this.__setFullscreenVisible(e.settingFullscreenVisible),this._component.fullscreenButton.uiUpdate(this.__getPropsForFullscreenButton(e))}},{key:"__getPropsForPlayPauseButton",value:function(e){return{displayed:!0,titleEnabled:e.playing?e.textPause:e.textPlay,iconProps:{play:{displayed:!e.playing},pause:{displayed:e.playing}},onClick:this.__onPlayPauseButtonClick}}},{key:"__getPropsForVolume",value:function(e){return{displayed:!0,volume:e.volume,muted:e.volumeMuted,titleMute:e.textMute,titleUnmute:e.textUnmute,titleVolume:e.textVolume,onMuteClick:this.__onMuteClick,onVolumeChange:this.__onVolumeChange}}},{key:"__getPropsForSeekBar",value:function(e){return{displayed:!0,currentTime:e.currentTime,adPoints:e.adPoints,duration:e.duration,eventMode:e.isEvent,liveMode:e.isLive,loading:e.loading,playingLive:e.playingLive,progressBarColor:e.progressBarColor,seekingEnabled:e.seekingEnabled,streamingLive:e.streamingLive,touchMode:!1,titleDisabled:e.textSeekbarDisabled,titleEnabled:e.textSeekbarEnabled,textLoading:e.textLoading,textLive:e.textLive,textLiveFromStart:e.textLiveFromStart,textAdPoint:e.textAdPoint,onEndSeeking:this.__onEndSeeking,onLiveClick:this.__onSeekbarLiveClick,onLiveRewindClick:this.__onSeekbarLiveRewindClick,onSeeking:this.__onSeeking,onSeekTo:this.__onSeekTo,onStartSeeking:this.__onStartSeeking}}},{key:"__getPropsForDurationTimeInfo",value:function(e){return{displayed:!e.isLive&&!e.isEvent,time:e.duration}}},{key:"__getPropsForSubtitlesButton",value:function(e){return{displayed:!0,enabled:e.settingSubtitlesEnabled,indicatorColor:e.indicatorColor,indicatorActivated:e.subtitlesShown,titleEnabled:e.textSubtitlesEnabled,titleDisabled:e.textSubtitlesDisabled,iconProps:{subtitles:{displayed:!0}},onClick:this.__onSubtitlesButtonClick}}},{key:"__getPropsForQualityButton",value:function(e){return{displayed:!0,enabled:e.settingQualityEnabled,titleEnabled:e.textQualityEnabled,titleDisabled:e.textQualityDisabled,iconProps:{quality:{displayed:!0}},onClick:this.__onQualityButtonClick}}},{key:"__getPropsForFullscreenButton",value:function(e){return{displayed:!0,enabled:e.settingFullscreenEnabled,titleEnabled:e.fullscreenOn?e.textFullscreenOff:e.textFullscreenOn,iconProps:{"fullscreen-on":{displayed:!e.fullscreenOn},"fullscreen-off":{displayed:e.fullscreenOn}},onClick:this.__onFullscreenButtonClick}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setSubtitlesVisible",value:function(e){(0,r.elm)(this._dom.refs.subtitlesBox).setDisplayed(e)}},{key:"__setQualityVisible",value:function(e){(0,r.elm)(this._dom.refs.qualityBox).setDisplayed(e)}},{key:"__setFullscreenVisible",value:function(e){(0,r.elm)(this._dom.refs.fullscreenBox).setDisplayed(e)}},{key:"__setDurationVisible",value:function(e){(0,r.elm)(this._dom.refs.durationBox).setDisplayed(e)}},{key:"__onPlayPauseButtonClick",value:function(){this._props.playing?this._uiEmitEvent(m.default.PAUSE_REQUEST):this._uiEmitEvent(m.default.PLAY_REQUEST)}},{key:"__onVolumeChange",value:function(e){this._uiEmitEvent(m.default.VOLUME_CHANGE_TO,{volume:e})}},{key:"__onMuteClick",value:function(){this._uiEmitEvent(m.default.VOLUME_MUTE_CLICK)}},{key:"__onStartSeeking",value:function(){this._uiEmitEvent(m.default.START_SEEKING)}},{key:"__onSeeking",value:function(e){this._uiEmitEvent(m.default.MOVE_CURRENT_TIME_TO,{time:e})}},{key:"__onSeekTo",value:function(e){this._uiEmitEvent(m.default.SEEK_TO,{time:e})}},{key:"__onEndSeeking",value:function(){this._uiEmitEvent(m.default.END_SEEKING)}},{key:"__onSeekbarLiveClick",value:function(){this._uiEmitEvent(m.default.CLICK_ON_LIVE)}},{key:"__onSeekbarLiveRewindClick",value:function(){this._uiEmitEvent(m.default.SEEK_TO,{time:0})}},{key:"__onSubtitlesButtonClick",value:function(){this._uiEmitEvent(m.default.TOGGLE_SUBTITLES_REQUEST)}},{key:"__onQualityButtonClick",value:function(){this._props.qualityMenuShown?this._uiEmitEvent(m.default.CLOSE_QUALITY_MENU_REQUEST):this._uiEmitEvent(m.default.OPEN_QUALITY_MENU_REQUEST)}},{key:"__onFullscreenButtonClick",value:function(){this._props.fullscreenOn?this._uiEmitEvent(m.default.FS_OFF_REQUEST):this._uiEmitEvent(m.default.FS_ON_REQUEST)}}]),i}(s.default);n.default=v},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../../../../../widgets/IconButton":141,"../../../../../widgets/SeekBar":152,"../../../../../widgets/TimeInfo":161,"../../../../../widgets/Volume":162,"../event/list":74}],70:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../../../../../widgets/IconButton"),l=(e.interopRequireDefault(a),t("../event/list")),u=(e.interopRequireDefault(l),t("./TouchButtonCtrlPanelLayout")),c=e.interopRequireDefault(u),d=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{}},n._component={touchButtonCtrlPanelLayout:null},n._flags={touchUsed:!1,mouseUsed:!1},n._bind=["__onTouchStart","__onTouchCancel","__onTouchEnd","__onMouseEnter","__onMouseLeave"],n._mouseUsedOffTimeout=0,n._touchEndTimeout=0,n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{indicatorColor:"string",visible:"boolean",playing:"boolean",settingQualityEnabled:"boolean",settingQualityVisible:"boolean",settingSubtitlesEnabled:"boolean",settingSubtitlesVisible:"boolean",subtitlesShown:"boolean",textPlay:"string",textPause:"string",textSubtitlesEnabled:"string",textSubtitlesDisabled:"string",textQualityEnabled:"string",textQualityDisabled:"string",onHoverOn:["function","object"],onHoverOff:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{onHoverOn:null,onHoverOff:null}}},{key:"_onUiInit",value:function(e){this._component.touchButtonCtrlPanelLayout=new c.default(this.__getPropsForControlPanelLayout(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-touch-button-ctrl-panel"}),(0,r.elm)(this._dom.root).append(this._component.touchButtonCtrlPanelLayout.uiGetElement()),this._dom.root.addEventListener("touchstart",this.__onTouchStart),this._dom.root.addEventListener("touchcancel",this.__onTouchCancel),this._dom.root.addEventListener("touchend",this.__onTouchEnd),this._dom.root.addEventListener("mouseenter",this.__onMouseEnter),this._dom.root.addEventListener("mouseleave",this.__onMouseLeave),this.__setVisible(e.visible)}},{key:"_onUiCanUpdate",value:function(e){return e.visible||this._props.visible!=e.visible}},{key:"_onUiUpdate",value:function(e){this._props.visible!=e.visible&&this.__setVisible(e.visible),e.visible&&this._component.touchButtonCtrlPanelLayout.uiUpdate(this.__getPropsForControlPanelLayout(e))}},{key:"_onUiDestroy",value:function(){this.__clearTouchEndTimeout(),this.__clearMouseUsedOffTimeout(),this._dom.root.removeEventListener("touchstart",this.__onTouchStart),this._dom.root.removeEventListener("touchcancel",this.__onTouchCancel),this._dom.root.removeEventListener("touchend",this.__onTouchEnd),this._dom.root.removeEventListener("mouseenter",this.__onMouseEnter),this._dom.root.removeEventListener("mouseleave",this.__onMouseLeave)}},{key:"__getPropsForControlPanelLayout",value:function(e){var t=e.indicatorColor,i=e.playing,n=e.settingQualityEnabled,o=e.settingQualityVisible,s=e.settingSubtitlesEnabled,r=e.settingSubtitlesVisible,a=e.subtitlesShown,l=e.textPlay,u=e.textPause,c=e.textSubtitlesEnabled,d=e.textSubtitlesDisabled,_=e.textQualityEnabled,h=e.textQualityDisabled;return{indicatorColor:t,playing:i,settingQualityEnabled:n,settingQualityVisible:o,settingSubtitlesEnabled:s,settingSubtitlesVisible:r,subtitlesShown:a,textPlay:l,textPause:u,textSubtitlesEnabled:c,textSubtitlesDisabled:d,
textQualityEnabled:_,textQualityDisabled:h}}},{key:"__setVisible",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-visible":e})}},{key:"__saveTouchUsed",value:function(e){this._flags.touchUsed=e,e&&this.__clearTouchEndTimeout()}},{key:"__saveMouseUsed",value:function(e){this._flags.mouseUsed=e,e&&this.__startMouseUsedOffTimeout()}},{key:"__onMouseEnter",value:function(e){this._flags.touchUsed||(this.__saveMouseUsed(!0),this.__onHoverOn())}},{key:"__onMouseLeave",value:function(e){this._flags.touchUsed||(this.__saveMouseUsed(!0),this.__onHoverOff())}},{key:"__startMouseUsedOffTimeout",value:function(){var e=this;this.__clearMouseUsedOffTimeout(),this._mouseUsedOffTimeout=setTimeout(function(){return e.__saveMouseUsed(!1)},25)}},{key:"__clearMouseUsedOffTimeout",value:function(){this._mouseUsedOffTimeout&&(clearTimeout(this._mouseUsedOffTimeout),this._mouseUsedOffTimeout=0)}},{key:"__onTouchStart",value:function(e){this._flags.mouseUsed||(this.__saveTouchUsed(!0),this.__onHoverOn())}},{key:"__onTouchCancel",value:function(e){this._flags.mouseUsed||(this.__saveTouchUsed(!1),this.__onHoverOff())}},{key:"__onTouchEnd",value:function(e){this._flags.mouseUsed||(this.__startTouchEndTimeout(),this.__onHoverOff())}},{key:"__startTouchEndTimeout",value:function(){var e=this;this.__clearTouchEndTimeout(),this._touchEndTimeout=setTimeout(function(){e.__saveTouchUsed(!1)},250)}},{key:"__clearTouchEndTimeout",value:function(){this._touchEndTimeout&&(clearTimeout(this._touchEndTimeout),this._touchEndTimeout=0)}},{key:"__onHoverOn",value:function(){this._props.onHoverOn&&this._props.onHoverOn()}},{key:"__onHoverOff",value:function(){this._props.onHoverOff&&this._props.onHoverOff()}}]),i}(s.default);n.default=d},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../../../../../widgets/IconButton":141,"../event/list":74,"./TouchButtonCtrlPanelLayout":71}],71:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../../../../../widgets/IconButton"),l=e.interopRequireDefault(a),u=t("../event/list"),c=e.interopRequireDefault(u),d=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{playPauseBox:null,subtitlesBox:null,qualityBox:null}},n._component={playPauseButton:null,subtitlesButton:null,qualityButton:null},n._bind=["__onPlayPauseButtonClick","__onQualityButtonClick","__onSubtitlesButtonClick"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{indicatorColor:"string",playing:"boolean",settingQualityEnabled:"boolean",settingQualityVisible:"boolean",settingSubtitlesEnabled:"boolean",settingSubtitlesVisible:"boolean",subtitlesShown:"boolean",textPlay:"string",textPause:"string",textSubtitlesEnabled:"string",textSubtitlesDisabled:"string",textQualityEnabled:"string",textQualityDisabled:"string"}}},{key:"_onUiInit",value:function(e){this._component.subtitlesButton=new l.default(this.__getPropsForSubtitlesButton(e)),this._component.playPauseButton=new l.default(this.__getPropsForPlayPauseButton(e)),this._component.qualityButton=new l.default(this.__getPropsForQualityButton(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-touch-button-ctrl-panel-layout"}),this._dom.refs.subtitlesBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-subtitles"}),this._dom.refs.playPauseBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-playpause"}),this._dom.refs.qualityBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-quality"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.subtitlesBox).append(this._component.subtitlesButton.uiGetElement()),(0,r.elm)(this._dom.refs.playPauseBox).append(this._component.playPauseButton.uiGetElement()),(0,r.elm)(this._dom.refs.qualityBox).append(this._component.qualityButton.uiGetElement()))}},{key:"_onUiUpdate",value:function(e){this._component.subtitlesButton.uiUpdate(this.__getPropsForSubtitlesButton(e)),this._component.playPauseButton.uiUpdate(this.__getPropsForPlayPauseButton(e)),this._component.qualityButton.uiUpdate(this.__getPropsForQualityButton(e))}},{key:"__getPropsForPlayPauseButton",value:function(e){return{cssClassWithExtraLook:["sznp-ui-rounded-dark-look","sznp-ui-padding-20-look","sznp-ui-icon-play-centered-look"],displayed:!0,titleEnabled:e.playing?e.textPause:e.textPlay,iconProps:{play:{displayed:!e.playing},pause:{displayed:e.playing}},onClick:this.__onPlayPauseButtonClick}}},{key:"__getPropsForSubtitlesButton",value:function(e){return{cssClassWithExtraLook:["sznp-ui-rounded-light-look","sznp-ui-padding-10-look"],displayed:!0,enabled:e.settingSubtitlesEnabled,indicatorColor:e.indicatorColor,indicatorActivated:e.subtitlesShown,titleEnabled:e.textSubtitlesEnabled,titleDisabled:e.textSubtitlesDisabled,iconProps:{subtitles:{displayed:!0}},onClick:this.__onSubtitlesButtonClick}}},{key:"__getPropsForQualityButton",value:function(e){return{cssClassWithExtraLook:["sznp-ui-rounded-light-look","sznp-ui-padding-10-look"],displayed:!0,enabled:e.settingQualityEnabled,titleEnabled:e.textQualityEnabled,titleDisabled:e.textQualityDisabled,iconProps:{quality:{displayed:!0}},onClick:this.__onQualityButtonClick}}},{key:"__onPlayPauseButtonClick",value:function(){this._props.playing?this._uiEmitEvent(c.default.PAUSE_REQUEST):this._uiEmitEvent(c.default.PLAY_REQUEST)}},{key:"__onSubtitlesButtonClick",value:function(){this._uiEmitEvent(c.default.TOGGLE_SUBTITLES_REQUEST)}},{key:"__onQualityButtonClick",value:function(){this._uiEmitEvent(c.default.OPEN_QUALITY_MENU_REQUEST)}},{key:"__onMouseEnter",value:function(e){this._uiEmitEvent(c.default.CTRL_PANEL_HOVERED,{hovered:!0})}},{key:"__onMouseLeave",value:function(e){this._uiEmitEvent(c.default.CTRL_PANEL_HOVERED,{hovered:!1})}}]),i}(s.default);n.default=d},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../../../../../widgets/IconButton":141,"../event/list":74}],72:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../event/list"),l=(e.interopRequireDefault(a),t("./TouchCtrlPanelLayout")),u=e.interopRequireDefault(l),c=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{touchCtrlPanelLayout:null}},n._component={touchCtrlPanelLayout:null},n._flags={touchUsed:!1,mouseUsed:!1},n._bind=["__onTouchStart","__onTouchCancel","__onTouchEnd","__onMouseEnter","__onMouseLeave"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{visible:"boolean",currentTime:"number",adPoints:"object",duration:"number",fullscreenEnabled:"boolean",fullscreenOn:"boolean",settingFullscreenEnabled:"boolean",settingFullscreenVisible:"boolean",isEvent:"boolean",isLive:"boolean",loading:"boolean",playingLive:"boolean",progressBarColor:"string",seekingEnabled:"boolean",streamingLive:"boolean",textLoading:"string",textSeekbarEnabled:"string",textSeekbarDisabled:"string",textFullscreenOn:"string",textFullscreenOff:"string",textLive:"string",textLiveFromStart:"string",textAdPoint:"string",onHoverOn:["function","object"],onHoverOff:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{onHoverOn:null,onHoverOff:null}}},{key:"_onUiInit",value:function(e){this._component.touchCtrlPanelLayout=new u.default(this.__getPropsForControlPanelLayout(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-touch-ctrl-panel"}),(0,r.elm)(this._dom.root).append(this._component.touchCtrlPanelLayout.uiGetElement()),this._dom.root.addEventListener("touchstart",this.__onTouchStart),this._dom.root.addEventListener("touchcancel",this.__onTouchCancel),this._dom.root.addEventListener("touchend",this.__onTouchEnd),this._dom.root.addEventListener("mouseenter",this.__onMouseEnter),this._dom.root.addEventListener("mouseleave",this.__onMouseLeave),this.__setVisible(e.visible)}},{key:"_onUiCanUpdate",value:function(e){return e.visible||this._props.visible!=e.visible}},{key:"_onUiUpdate",value:function(e){this._props.visible!=e.visible&&this.__setVisible(e.visible),e.visible&&this._component.touchCtrlPanelLayout.uiUpdate(this.__getPropsForControlPanelLayout(e))}},{key:"_onUiDestroy",value:function(){this.__clearTouchEndTimeout(),this.__clearMouseUsedOffTimeout(),this._dom.root.removeEventListener("touchstart",this.__onTouchStart),this._dom.root.removeEventListener("touchcancel",this.__onTouchCancel),this._dom.root.removeEventListener("touchend",this.__onTouchEnd),this._dom.root.removeEventListener("mouseenter",this.__onMouseEnter),this._dom.root.removeEventListener("mouseleave",this.__onMouseLeave)}},{key:"__getPropsForControlPanelLayout",value:function(e){var t=e.currentTime,i=e.adPoints,n=e.duration,o=e.fullscreenEnabled,s=e.fullscreenOn,r=e.settingFullscreenEnabled,a=e.settingFullscreenVisible,l=e.isEvent,u=e.isLive,c=e.loading,d=e.playingLive,_=e.progressBarColor,h=e.seekingEnabled,f=e.streamingLive,p=e.textLoading,m=e.textSeekbarEnabled,v=e.textSeekbarDisabled,y=e.textFullscreenOn,E=e.textFullscreenOff,g=e.textLive,k=e.textLiveFromStart,T=e.textAdPoint;return{currentTime:t,adPoints:i,duration:n,fullscreenEnabled:o,fullscreenOn:s,settingFullscreenEnabled:r,settingFullscreenVisible:a,isEvent:l,isLive:u,loading:c,playingLive:d,progressBarColor:_,seekingEnabled:h,streamingLive:f,textLoading:p,textSeekbarEnabled:m,textSeekbarDisabled:v,textFullscreenOn:y,textFullscreenOff:E,textLive:g,textLiveFromStart:k,textAdPoint:T}}},{key:"__setVisible",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-visible":e})}},{key:"__saveTouchUsed",value:function(e){this._flags.touchUsed=e,e&&this.__clearTouchEndTimeout()}},{key:"__saveMouseUsed",value:function(e){this._flags.mouseUsed=e,e&&this.__startMouseUsedOffTimeout()}},{key:"__onMouseEnter",value:function(e){this._flags.touchUsed||(this.__saveMouseUsed(!0),this.__onHoverOn())}},{key:"__onMouseLeave",value:function(e){this._flags.touchUsed||(this.__saveMouseUsed(!0),this.__onHoverOff())}},{key:"__startMouseUsedOffTimeout",value:function(){var e=this;this.__clearMouseUsedOffTimeout(),this._mouseUsedOffTimeout=setTimeout(function(){return e.__saveMouseUsed(!1)},25)}},{key:"__clearMouseUsedOffTimeout",value:function(){this._mouseUsedOffTimeout&&(clearTimeout(this._mouseUsedOffTimeout),this._mouseUsedOffTimeout=0)}},{key:"__onTouchStart",value:function(e){this._flags.mouseUsed||(this.__saveTouchUsed(!0),this.__onHoverOn())}},{key:"__onTouchCancel",value:function(e){this._flags.mouseUsed||(this.__saveTouchUsed(!1),this.__onHoverOff())}},{key:"__onTouchEnd",value:function(e){this._flags.mouseUsed||(this.__startTouchEndTimeout(),this.__onHoverOff())}},{key:"__startTouchEndTimeout",value:function(){var e=this;this.__clearTouchEndTimeout(),this._touchEndTimeout=setTimeout(function(){e.__saveTouchUsed(!1)},250)}},{key:"__clearTouchEndTimeout",value:function(){this._touchEndTimeout&&(clearTimeout(this._touchEndTimeout),this._touchEndTimeout=0)}},{key:"__onHoverOn",value:function(){this._props.onHoverOn&&this._props.onHoverOn()}},{key:"__onHoverOff",value:function(){this._props.onHoverOff&&this._props.onHoverOff()}}]),i}(s.default);n.default=c},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../event/list":74,"./TouchCtrlPanelLayout":73}],73:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../../../../../widgets/SeekBar"),l=e.interopRequireDefault(a),u=t("../../../../../widgets/TimeInfo"),c=e.interopRequireDefault(u),d=t("../../../../../widgets/IconButton"),_=e.interopRequireDefault(d),h=t("../event/list"),f=e.interopRequireDefault(h),p=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{wrapper:null,seekBarBox:null,durationBox:null,fullscreenBox:null}},n._component={seekBar:null,durationTimeInfo:null,fullscreenButton:null},n._bind=["__onFullscreenButtonClick","__onEndSeeking","__onSeeking","__onSeekTo","__onStartSeeking","__onSeekbarLiveClick","__onSeekbarLiveRewindClick"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{currentTime:"number",adPoints:"object",duration:"number",fullscreenEnabled:"boolean",fullscreenOn:"boolean",settingFullscreenEnabled:"boolean",settingFullscreenVisible:"boolean",isEvent:"boolean",isLive:"boolean",loading:"boolean",playingLive:"boolean",progressBarColor:"string",seekingEnabled:"boolean",streamingLive:"boolean",textLoading:"string",textSeekbarEnabled:"string",textSeekbarDisabled:"string",textFullscreenOn:"string",textFullscreenOff:"string",textLive:"string",textLiveFromStart:"string",textAdPoint:"string"}}},{key:"_onUiInit",value:function(e){this._component.seekBar=new l.default(this.__getPropsForSeekBar(e)),this._component.durationTimeInfo=new c.default(this.__getPropsForTimeInfo(e)),this._component.fullscreenButton=new _.default(this.__getPropsForFullscreenButton(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-touch-ctrl-panel-layout"}),this._dom.refs.wrapper=(0,r.createElm)("div",{className:"sznp-ui-ctrl-panel-layout-wrapper"}),this._dom.refs.seekBarBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-seekbar"}),this._dom.refs.durationBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-duration"}),this._dom.refs.fullscreenBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ui-fullscreen"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.wrapper).append((0,r.elm)(this._dom.refs.seekBarBox).append(this._component.seekBar.uiGetElement()),(0,r.elm)(this._dom.refs.durationBox).append(this._component.durationTimeInfo.uiGetElement()),(0,r.elm)(this._dom.refs.fullscreenBox).append(this._component.fullscreenButton.uiGetElement()))),this.__setFullscreenVisible(e.settingFullscreenVisible),this.__setDurationVisible(!e.isLive&&!e.isEvent)}},{key:"_onUiUpdate",value:function(e){this._component.seekBar.uiUpdate(this.__getPropsForSeekBar(e)),this._props.isLive==e.isLive&&this._props.isEvent==e.isEvent||this.__setDurationVisible(!e.isLive&&!e.isEvent),e.isLive||this._component.durationTimeInfo.uiUpdate(this.__getPropsForTimeInfo(e));var t=this._props.settingFullscreenVisible!=e.settingFullscreenVisible;t&&this.__setFullscreenVisible(e.settingFullscreenVisible),this._component.fullscreenButton.uiUpdate(this.__getPropsForFullscreenButton(e))}},{key:"__getPropsForSeekBar",value:function(e){return{displayed:!0,currentTime:e.currentTime,adPoints:e.adPoints,duration:e.duration,eventMode:e.isEvent,liveMode:e.isLive,loading:e.loading,playingLive:e.playingLive,progressBarColor:e.progressBarColor,seekingEnabled:e.seekingEnabled,streamingLive:e.streamingLive,touchMode:!0,titleDisabled:e.textSeekbarDisabled,titleEnabled:e.textSeekbarEnabled,textLoading:e.textLoading,textLive:e.textLive,textLiveFromStart:e.textLiveFromStart,textAdPoint:e.textAdPoint,onEndSeeking:this.__onEndSeeking,onLiveClick:this.__onSeekbarLiveClick,onLiveRewindClick:this.__onSeekbarLiveRewindClick,onSeeking:this.__onSeeking,onSeekTo:this.__onSeekTo,onStartSeeking:this.__onStartSeeking}}},{key:"__getPropsForTimeInfo",value:function(e){return{displayed:!0,time:e.duration}}},{key:"__getPropsForFullscreenButton",value:function(e){return{displayed:!0,enabled:e.settingFullscreenEnabled,titleEnabled:e.fullscreenOn?e.textFullscreenOff:e.textFullscreenOn,iconProps:{"fullscreen-on":{displayed:!e.fullscreenOn},"fullscreen-off":{displayed:e.fullscreenOn}},onClick:this.__onFullscreenButtonClick}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setFullscreenVisible",value:function(e){(0,r.elm)(this._dom.refs.fullscreenBox).setDisplayed(e)}},{key:"__setDurationVisible",value:function(e){(0,r.elm)(this._dom.refs.durationBox).setDisplayed(e)}},{key:"__onPlayPauseButtonClick",value:function(){this._props.playing?this._uiEmitEvent(f.default.PAUSE_REQUEST):this._uiEmitEvent(f.default.PLAY_REQUEST)}},{key:"__onStartSeeking",value:function(){this._uiEmitEvent(f.default.START_SEEKING),this._uiEmitEvent(f.default.CTRL_PANEL_HOVERED,{hovered:!0})}},{key:"__onSeeking",value:function(e){this._uiEmitEvent(f.default.MOVE_CURRENT_TIME_TO,{time:e})}},{key:"__onSeekTo",value:function(e){this._uiEmitEvent(f.default.SEEK_TO,{time:e})}},{key:"__onEndSeeking",value:function(){this._uiEmitEvent(f.default.END_SEEKING),this._uiEmitEvent(f.default.CTRL_PANEL_HOVERED,{hovered:!1})}},{key:"__onSeekbarLiveClick",value:function(){this._uiEmitEvent(f.default.CLICK_ON_LIVE)}},{key:"__onSeekbarLiveRewindClick",value:function(){this._uiEmitEvent(f.default.SEEK_TO,{time:0})}},{key:"__onFullscreenButtonClick",value:function(){this._props.fullscreenOn?this._uiEmitEvent(f.default.FS_OFF_REQUEST):this._uiEmitEvent(f.default.FS_ON_REQUEST)}}]),i}(s.default);n.default=p},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../../../../../widgets/IconButton":141,"../../../../../widgets/SeekBar":152,"../../../../../widgets/TimeInfo":161,"../event/list":74}],74:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={CLICK_ON_LIVE:"click-on-live",CLICK_ON_CLICKTHROUGH_LINK:"click-on-clickthrough-link",CLICK_ON_SKIP_VIDEO:"click-on-skip-video",CLICK_ON_INJECTION:"click-on-injection",CLICK_ON_ACTION_AREA:"click-on-action-area",CLOSE_INJECTION:"close-injection",ERROR_INJECTION:"error-injection",CLOSE_QUALITY_MENU_REQUEST:"close-quality-menu-request",CTRL_PANEL_HOVERED:"ctrl-panel-hovered",HIDE_CTRL_PANEL:"hide-ctrl-panel",SHOW_CONTROL_PANEL:"show-ctrl-panel",END_SEEKING:"end-seeking",FS_ON_REQUEST:"fs-on-request",FS_OFF_REQUEST:"fs-off-request",CHANGE_QUALITY_REQUEST:"change-quality-request",MOVE_CURRENT_TIME_TO:"move-current-time-to",OPEN_QUALITY_MENU_REQUEST:"open-quality-menu-request",PLAY_REQUEST:"play-request",PAUSE_REQUEST:"pause-request",START_SEEKING:"start-seeking",SEEK_TO:"seek-to",TOGGLE_SUBTITLES_REQUEST:"toggle-subtitles-request",VOLUME_CHANGE_TO:"volume-change-to",VOLUME_MUTE_CLICK:"volume-mute-click"}},{}],75:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("events"),s=e.interopRequireDefault(o),r=t("../../../../common/env"),a=e.interopRequireDefault(r),l=t("../../../../mediaplayer/tech/Tech"),u=e.interopRequireDefault(l),c=t("../../../../common/uiDom"),d=t("./FullscreenApi"),_=e.interopRequireDefault(d),h=t("./VisualElementProcessor"),f=e.interopRequireDefault(h),p=t("./Ui"),m=e.interopRequireDefault(p),v=t("./state/Tech"),y=e.interopRequireDefault(v),E=t("./state/Overlays"),g=e.interopRequireDefault(E),k=t("./state/Controls"),T=e.interopRequireDefault(k),C=t("./event/list"),S=e.interopRequireDefault(C),b=1500,P=75,A=50;n.default={initUi:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standard";this._uiTechElm=e,this._cmode=t,this._uiDom={root:(0,c.createElm)("div",{className:"sznp-ui-html-wrapper",tabindex:"0"})},this._ui=null,this._uiState={tech:new y.default,overlays:new g.default,controls:new T.default},this._uiLayout="default",this._defaultUiLayoutOptions={videoSkippableAfter:-1,videoCountdownBefore:0,allowedToSkip:!1,adUrl:"",adUrlTarget:"",adLayout:"default",colors:{progressBar:"",indicator:""},seekingEnabled:!0,settingQualityVisible:!1,settingQualityEnabled:!1,settingSubtitlesVisible:!1,settingSubtitlesEnabled:!1,settingFullscreenVisible:!1,settingFullscreenEnabled:!1,showLoading:!1},this._uiLayoutOptions=Object.assign({},this._defaultUiLayoutOptions),this._uiEventEmitter=new s.default,this._uiFs=null,this._veProcessor=new f.default,this._adPoints=[],this._adPointsShown=!0,this._resizeTimeout=null,this._uiEventsMap=new Map([[S.default.SHOW_CONTROL_PANEL,this.__onUiShowCtrlPanel],[S.default.CTRL_PANEL_HOVERED,this.__onUiCtrlPanelHovered],[S.default.HIDE_CONTROL_PANEL,this.__onUiHideCtrlPanel],[S.default.PLAY_REQUEST,this.__onUiPlayRequest],[S.default.PAUSE_REQUEST,this.__onUiPauseRequest],[S.default.OPEN_QUALITY_MENU_REQUEST,this.__onUiOpenQualityMenuRequest],[S.default.CLOSE_QUALITY_MENU_REQUEST,this.__onUiCloseQualityMenuRequest],[S.default.CHANGE_QUALITY_REQUEST,this.__onUiChangeQualityRequest],[S.default.TOGGLE_SUBTITLES_REQUEST,this.__onUiToggleSubtitlesRequest],[S.default.FS_ON_REQUEST,this.enterFullscreen],[S.default.FS_OFF_REQUEST,this.exitFullscreen],[S.default.CLICK_ON_SKIP_VIDEO,this.__onUiSkipVideo],[S.default.CLICK_ON_CLICKTHROUGH_LINK,this.__onUiClickThruAreaClick],[S.default.CLICK_ON_INJECTION,this.__onUiInjectionClick],[S.default.CLICK_ON_ACTION_AREA,this.__onUiClickActionArea],[S.default.CLOSE_INJECTION,this.__onUiInjectionClose],[S.default.ERROR_INJECTION,this.__onUiInjectionError],[S.default.START_SEEKING,this.__onUiStartSeeking],[S.default.END_SEEKING,this.__onUiEndSeeking],[S.default.SEEK_TO,this.__onUiSeekTo],[S.default.MOVE_CURRENT_TIME_TO,this.__onUiMoveCurrentTimeTo],[S.default.VOLUME_CHANGE_TO,this.__onUiVolumeChangeTo],[S.default.VOLUME_MUTE_CLICK,this.__onUiVolumeMuteClick],[S.default.CLICK_ON_LIVE,this.__onUiClickOnLive]]),this._uiTechEventsMap=new Map([[u.default.EVENT_LOADED_META,this.__handleTechLoadedMeta],[u.default.EVENT_CAN_PLAY,this.__handleTechCanPlay],[u.default.EVENT_DURATION_CHANGE,this.__handleTechDurationChange],[u.default.EVENT_PLAY,this.__handleTechPlay],[u.default.EVENT_PAUSED,this.__handleTechPaused],[u.default.EVENT_SEEKED,this.__handleTechSeeked],[u.default.EVENT_VOLUME_CHANGE,this.__handleTechVolumeChange],[u.default.EVENT_ENDED,this.__handleTechEnded],[u.default.EVENT_BUFFER_EMPTY,this.__handleTechBufferEmpty],[u.default.EVENT_QUALITY_SET,this.__handleTechQualitySet],[u.default.EVENT_SOURCE_SET,this.__handleTechSourceSet],[u.default.EVENT_TEXT_SOURCE_SET,this.__handleTechTextSourceSet],[u.default.EVENT_TEXT_TRACK_SET,this.__handleTechTextTrackSet],[u.default.EVENT_CUE_CHANGE,this.__handleTechTextTrackCue],[u.default.EVENT_LIVE_PLAYING_CHANGE,this.__handleLivePlayingChange],[u.default.EVENT_LIVE_STREAMING_CHANGE,this.__handleLiveStreamingChange],[u.default.EVENT_SKIPPABLE_STATE_CHANGE,this.__handleSkippableStateChange]]),this._uiFsEventsMap=new Map([[_.default.EVENT_CHANGE,this.__handleFullscreenChange]]),this._uiVEProcessorEventsMap=new Map([[f.default.EVENT_CHANGE,this.__handleVisualElementChange],[f.default.EVENT_VE_DISPLAYED,this.__handleVisualElementDisplayed],[f.default.EVENT_VE_HIDDEN,this.__handleVisualElementHidden]]),this._uiRaf={gettingVideoProgress:0},this._uiTimeout={controlsHide:0},this.bindAll(this._uiEventsMap),this.bindAll(this._uiTechEventsMap),this.bindAll(this._uiFsEventsMap),this.bindAll(this._uiVEProcessorEventsMap),this.__handleResize=this.__handleResize.bind(this),this.__handleResizeTimeout=this.__handleResizeTimeout.bind(this),this.__buildUi(),this.__initUiState()},canConfigureFullscreen:function(){return!0},configureFullscreen:function(t){var i=t.element;if(!i||"object"!==("undefined"==typeof i?"undefined":e.typeof(i)))throw new Error('Invalid argument "element".');if(this._uiFs)throw new Error("Fullscreen has already been configured.");this._uiFs=new _.default(this._env,i),this.addListeners(this._uiFs,this._uiFsEventsMap)},setDefaultLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="default";this.__setUiLayout(t,e)},setAdvertLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="ad";this.__setUiLayout(t,e)},hide:function(){this._uiDom.root.style.display="none"},show:function(){this._uiDom.root.style.display=""},setLogo:function(e){this.__updateUiState("overlays",{logoSrc:e})},showLogo:function(){this.__updateUiState("overlays",{logo:!0})},hideLogo:function(){this.__updateUiState("overlays",{logo:!1})},setActionArea:function(e){this.__updateUiState("controls",{textAction:e})},setPp:function(e){this.__updateUiState("overlays",{ppSrc:e})},showPp:function(){this.__updateUiState("overlays",{pp:!0})},hidePp:function(){this.__updateUiState("overlays",{pp:!1})},setControlsHidden:function(e){e?(this.__updateUiControls({controlPanelShown:!1}),this.__updateUiState("controls",{controlPanelFulltimeHidden:!0})):(this.__updateUiState("controls",{controlPanelFulltimeHidden:!1}),this.__canControlsHide()||this.__updateUiControls({controlPanelShown:!0}))},canRunVisualElementType:function(e){return this._veProcessor.canRunType(e)},isVisualElementShown:function(e){return this._veProcessor.isShown(e)},getVisualElements:function(){return this._veProcessor.get()},addVisualElement:function(e){this._veProcessor.add(e)},showVisualElement:function(e){this._veProcessor.show(e)},showVisualElementClose:function(e){this._veProcessor.showClose(e)},hideVisualElement:function(e){this._veProcessor.hide(e)},abortVisualElement:function(e){this._veProcessor.abort(e)},removeVisualElement:function(e){this._veProcessor.remove(e)},removeVisualElements:function(){this._veProcessor.removeAll()},setVisualElementDefaultPosition:function(e,t){this._veProcessor.setDefaultPosition(e,t)},addAdPoint:function(e){this._adPoints.push(e),this._adPointsShown&&this.__updateAdPoints(this._adPoints)},removeAdPoint:function(e){this._adPoints=this._adPoints.filter(function(t){return t.time!==e.time}),this._adPointsShown&&this.__updateAdPoints(this._adPoints)},resetAdPoints:function(){this._adPoints=[],this._adPointsShown=!0,this.__updateAdPoints(this._adPoints)},showAdPoints:function(){this._adPointsShown=!0,this.__updateAdPoints(this._adPoints)},hideAdPoints:function(){this._adPointsShown=!1,this.__updateAdPoints([])},getElement:function(){return this._uiDom.root},isFullscreen:function(){return!!this._uiFs&&this._uiFs.isFullscreen()},enterFullscreen:function(){this._uiFs&&(this._uiFs.enterFullscreen(),this.__updateUiControls({controlPanelHovered:!1}))},exitFullscreen:function(){this._uiFs&&(this._uiFs.exitFullscreen(),this.__updateUiControls({controlPanelHovered:!1}))},reset:function(){this.__clearControlsHideTimeout(),this.__stopCheckingVideoProgress(),this.__clearResizeTimeout();for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this[this.MP_ORIGIN].reset.apply(this,t),this._uiLayout="default",this._uiLayoutOptions=Object.assign({},this._defaultUiLayoutOptions),this.__resetUiState(),this.__initUiState()},destroy:function(){this.__destroyUi();for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];this[this.MP_ORIGIN].destroy.apply(this,t)},__resetUiState:function(){this._uiState.tech.reset(),this._uiState.overlays.reset(),this._uiState.controls.reset()},__updateUiState:function(e,t){this._uiState[e].update(t),this.__updateUi()},__buildUi:function(){this._ui=new m.default({tech:this._uiState.tech.get(),overlays:this._uiState.overlays.get(),controls:this._uiState.controls.get()}),this.addListeners(this,this._uiTechEventsMap),this.addListeners(this._uiEventEmitter,this._uiEventsMap),this.addListeners(this._veProcessor,this._uiVEProcessorEventsMap),window.addEventListener("resize",this.__handleResize),this._ui.uiInit(),this._ui.uiSetEventEmitter(this._uiEventEmitter),this._ui.uiBuild(),(0,c.elm)(this._uiDom.root).append(this._ui.uiGetElement())},__updateUi:function(){this._ui.uiUpdate({tech:this._uiState.tech.get(),overlays:this._uiState.overlays.get(),controls:this._uiState.controls.get()})},__destroyUi:function(){this.__clearControlsHideTimeout(),this.__stopCheckingVideoProgress(),this.__clearResizeTimeout(),this.removeListeners(this,this._uiTechEventsMap),this.removeListeners(this._uiEventEmitter,this._uiEventsMap),this._uiFs&&this.removeListeners(this._uiFs,this._uiFsEventsMap),this.removeListeners(this._veProcessor,this._uiVEProcessorEventsMap),window.removeEventListener("resize",this.__handleResize),this._ui.uiDestroy(),(0,c.elm)(this._uiDom.root).clear()},__onUiShowCtrlPanel:function(){this.__updateUiControls({controlPanelShown:!0,cursorVisible:!0})},__onUiCtrlPanelHovered:function(e){this.__updateUiControls({controlPanelHovered:e.hovered})},__onUiHideCtrlPanel:function(){this.__canControlsHide()&&this.__updateUiControls({controlPanelShown:!1,cursorVisible:!this.isFullscreen()})},__onUiPlayRequest:function(){this.play()},__onUiPauseRequest:function(){this.pause()},__onUiOpenQualityMenuRequest:function(){this.__updateUiQualityMenu({qualityMenuShown:!0})},__onUiCloseQualityMenuRequest:function(){this.__updateUiQualityMenu({qualityMenuShown:!1})},__onUiChangeQualityRequest:function(e){this.__updateUiQualityMenu({qualityMenuShown:!1}),this.setQuality(e.id)},__onUiToggleSubtitlesRequest:function(){var e=!this._uiState.controls.get().subtitlesShown;e?this.setTextTrack(0):this.setTextTrack(null)},__onUiSkipVideo:function(){this.__stopCheckingVideoProgress(),this.emit(u.default.EVENT_SKIP_VIDEO_REQUEST)},__onUiStartSeeking:function(){this.__updateUiState("controls",{seeking:!0}),this.__stopCheckingVideoProgress()},__onUiEndSeeking:function(){this.__updateUiState("controls",{seeking:!1}),this.__startCheckingVideoProgress()},__onUiSeekTo:function(e){var t=e.time;a.default.isMac()&&a.default.isSafari()&&this.isEvent()&&t<.5&&(t=.5),this.seek(t,!1)},__onUiMoveCurrentTimeTo:function(e){var t=e.time;this.__updateUiCurrentTime({currentTime:t})},__onUiVolumeChangeTo:function(e){var t=e.volume,i=this.isMuted();this.setVolume(t),t||i?t&&i&&this.setMute(!1):this.setMute(!0)},__onUiVolumeMuteClick:function(){var e=this.getVolume(),t=this.isMuted();e||t?(this.setMute(!t),t&&!e&&this.setVolume(1)):this.setVolume(1)},__onUiClickThruAreaClick:function(){this.emit(u.default.EVENT_VIDEO_CLICKTHROUGH)},__onUiInjectionClick:function(e){this.emit(u.default.EVENT_VE_CLICKTHROUGH,e)},__onUiInjectionClose:function(e){this.emit(u.default.EVENT_VE_CLOSE,e)},__onUiInjectionError:function(e){this.emit(u.default.EVENT_VE_ERROR,e)},__onUiClickActionArea:function(e){this.emit(u.default.EVENT_ACTION_CLICKTHROUGH,e)},__onUiClickOnLive:function(){!this.isLivePlaying()&&this.isLiveStreaming()&&this.seekToLive()},__handleTechLoadedMeta:function(){this.__updateUiCurrentTime(),this.__updateUiDuration(),this.__updateUiVideoDimensions()},__handleTechCanPlay:function(){this.__updateUiLoading({loading:!1})},__handleTechDurationChange:function(){this.__updateUiDuration()},__handleTechPlay:function(){this.__updateUiPlayPauseButton(),this.__startCheckingVideoProgress()},__handleTechPaused:function(){this.__stopCheckingVideoProgress(),this.__updateUiPlayPauseButton(),this.__updateUiLoading({loading:!1}),this.isEnded()||this.__updateUiControls({controlPanelShown:!0})},__handleTechSeeked:function(){this.__updateUiCurrentTime()},__handleTechVolumeChange:function(){this.__updateUiVolume()},__handleTechBufferEmpty:function(){this.__updateUiLoading({loading:!0})},__handleTechEnded:function(){this.__stopCheckingVideoProgress(),this.__updateUiPlayPauseButton(),this.__updateUiLoading({loading:!1})},__handleTechQualitySet:function(){this.__updateUiQualityButton(),this.__updateUiQualityMenu()},__handleTechSourceSet:function(){this.__updateUiQualityButton(),this.__updateUiQualityMenu(),this.__updateUiLiveInfo(),this.__updateUiSeekingAvailability()},__handleTechTextSourceSet:function(){this.__updateUiSubtitlesButton()},__handleTechTextTrackSet:function(e){var t=null!==e.textTrackIdx;this.__updateUiState("overlays",{captions:t}),this.__updateUiSubtitlesIndication({subtitlesShown:t})},__handleTechTextTrackCue:function(e){this.__updateUiState("overlays",{captionText:e.cue?e.cue.text:""})},__handleLivePlayingChange:function(){this.__updateUiLiveInfo(),this.__updateUiDuration(),this.__updateUiSeekingAvailability();
},__handleLiveStreamingChange:function(){this.__updateUiLiveInfo(),this.__updateUiDuration(),this.__updateUiSeekingAvailability()},__handleSkippableStateChange:function(e){this.__updateUiState("controls",{allowedToSkip:e.isSkippable})},__handleFullscreenChange:function(e){this.__updateUiFullscreenButton(),this.setViewMode(e.isFullscreen?"fullscreen":"normal"),this.emit(u.default.EVENT_FULLSCREEN_CHANGE,e)},__handleVisualElementChange:function(e){this.__updateInjections(e)},__handleVisualElementDisplayed:function(e){this.emit(u.default.EVENT_VE_DISPLAYED,e)},__handleVisualElementHidden:function(e){this.emit(u.default.EVENT_VE_HIDDEN,e)},__handleResize:function(){this._resizeTimeout||(this._resizeTimeout=requestAnimationFrame(this.__handleResizeTimeout))},__handleResizeTimeout:function(){this.__updateUiVideoDimensions(),this._resizeTimeout=null},__clearResizeTimeout:function(){this._resizeTimeout&&(cancelAnimationFrame(this._resizeTimeout),this._resizeTimeout=null)},__togglePlay:function(){this.isPaused()?this.play():this.pause()},__initUiState:function(){this.__updateUiFullscreenButton(),this.__updateUiTech(),this.__updateUiFromEnv(),this.__updateUiVolume(),this.__updateUiVideoDimensions()},__setUiLayout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._uiLayout=e,this._uiLayoutOptions=Object.assign({},this._defaultUiLayoutOptions,t),this.__updateUiLayout(),this.__updateUiSeekingAvailability(),this.__updateUiSubtitlesButton(),this.__updateUiQualityButton(),this.__updateUiFullscreenButton(),this.__updateUiLoading({loading:this._uiLayoutOptions.showLoading}),this.__updateUiClickthrough(),this.__updateUiSkippableAfter(),this.__updateUiCountdownBefore(),this.__updateUiAdLayout(),this.__updateUiColors(),this.__setFocusOnPlayPauseArea()},__updateUiTech:function(){this.__updateUiState("tech",{displayed:"standard"===this._cmode,elm:"standard"===this._cmode?this._uiTechElm:null}),this.__updateUiState("controls",{tech:"transparent"===this._cmode?{elm:this._uiTechElm}:{}})},__updateUiFromEnv:function(){var e=this.isCustomUiCapable(),t=a.default.isTouch(),i=!e,n=e,o=e;this.__updateUiState("tech",{controlsEnabled:i}),this.__updateUiState("controls",{displayed:n,useTouch:t}),this.__updateUiState("overlays",{displayed:o})},__updateUiLayout:function(){this.__updateUiState("controls",{layout:this._uiLayout})},__updateUiClickthrough:function(){this.__updateUiState("controls",{clickthroughUrl:this._uiLayoutOptions.adUrl,clickthroughTarget:this._uiLayoutOptions.adUrlTarget})},__updateUiSkippableAfter:function(){this.__updateUiState("controls",{skippableAfter:this._uiLayoutOptions.videoSkippableAfter})},__updateUiCountdownBefore:function(){this.__updateUiState("controls",{countdownBefore:this._uiLayoutOptions.videoCountdownBefore})},__updateUiAdLayout:function(){this.__updateUiState("controls",{adLayout:this._uiLayoutOptions.adLayout})},__updateUiColors:function(){var e=this._uiLayoutOptions.colors;this.__updateUiState("controls",{progressBarColor:e.progressBar,indicatorColor:e.indicator})},__updateUiPlayPauseButton:function(){this.__updateUiState("controls",{playing:this.isPlaying()})},__updateUiVolume:function(){var e=this.getVolume(),t=!e||this.isMuted();this.__updateUiState("controls",{volume:e,volumeMuted:t})},__updateUiLiveInfo:function(){var e=(this._uiState.controls.get(),this.isLive()),t=this.isEvent(),i=this.isLivePlaying(),n=this.isLiveStreaming();this.__updateUiState("controls",{isLive:e,isEvent:t,playingLive:i,streamingLive:n}),this.__updateUiState("overlays",{logoLive:i&&n})},__updateUiSeekingAvailability:function(){this.__updateUiState("controls",{seekingEnabled:this._uiLayoutOptions.seekingEnabled&&!this.isLive()})},__updateUiDuration:function(){this.__updateUiState("controls",{duration:this.getDuration()})},__updateUiCurrentTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getCurrentTime();"currentTime"in e&&(t=e.currentTime),this.__updateUiState("controls",{currentTime:t,startTime:this.getStartTime()||0})},__updateUiLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("loading"in e){var t=e.loading;this.__updateUiState("controls",{loading:t}),t&&this.__updateUiControls({controlPanelShown:!0})}},__updateUiSubtitlesButton:function(){var e=this._uiLayoutOptions.settingSubtitlesVisible,t=!!(e&&this._uiLayoutOptions.settingSubtitlesEnabled&&this.getTextSource());this.__updateUiState("controls",{settingSubtitlesVisible:e,settingSubtitlesEnabled:t})},__updateUiSubtitlesIndication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._uiState.controls.get().subtitlesShown;"subtitlesShown"in e&&(t=e.subtitlesShown),this.__updateUiState("controls",{subtitlesShown:t})},__updateUiQualityButton:function(){var e=this._uiLayoutOptions.settingQualityVisible,t=this.getResolvedSource(),i=!!(e&&this._uiLayoutOptions.settingQualityEnabled&&t&&t.getAvailableQualitySettings().length>1);this.__updateUiState("controls",{settingQualityVisible:e,settingQualityEnabled:i})},__updateUiQualityMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.getResolvedSource();if(t){var i=t.getAvailableQualitySettings(),n=i.map(function(e){return{name:e.name,id:e.idx,text:""!==e.name?e.name:"Auto"}}),o=this.getQuality();this.__updateUiState("controls",{qualityId:o,qualities:n})}else this.__updateUiState("controls",{qualityId:-1,qualities:[]});"qualityMenuShown"in e&&this.__updateUiState("controls",{qualityMenuShown:e.qualityMenuShown})},__updateUiFullscreenButton:function(){var e=this.isFullscreen(),t=this._uiLayoutOptions.settingFullscreenVisible,i=this._uiLayoutOptions.settingFullscreenEnabled;this.__updateUiState("controls",{fullscreenOn:e,settingFullscreenVisible:t,settingFullscreenEnabled:i})},__getVideoControlPanelIntersection:function(){var e=this.getVideoDimensions();return e?(a.default.isTouch()?A:P)-e.y:0},__isControlPanelShown:function(){var e=this._uiState.controls.get();return e.controlPanelShown},__updateUiVideoDimensions:function(){var e=this.getVideoDimensions();e&&this.__updateUiState("controls",{videoDimensions:e}),this.__updateUiControlPanelIntersectionHeight(),this.__updateInjections(this._veProcessor.getShown())},__updateUiControlPanelIntersectionHeight:function(){var e=this.__isControlPanelShown()?this.__getVideoControlPanelIntersection():0;this.__updateUiState("controls",{controlPanelIntersectionHeight:e})},__updateUiControls:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("controlPanelHovered"in e&&this.__updateUiState("controls",{controlPanelHovered:e.controlPanelHovered}),"controlPanelShown"in e){var t=this._uiState.controls.get(),i=t.controlPanelHovered,n=t.controlPanelFulltimeHidden;if(!i&&!n){var o=e.controlPanelShown;this.__clearControlsHideTimeout(),o?(this.__updateUiState("controls",{controlPanelShown:!0}),this.__updateRootElement({controlPanel:!0}),this.__startControlsHideTimeout(b)):(this.__updateUiState("controls",{qualityMenuShown:!1,controlPanelShown:!1}),this.__updateRootElement({controlPanel:!1}),this.__setFocusOnPlayPauseArea())}this.__updateUiControlPanelIntersectionHeight(),this.__updateInjections(this._veProcessor.getShown())}if("cursorVisible"in e){var s=!e.cursorVisible;this.__updateRootElement({cursor:!s})}},__updateInjections:function(e){this.__updateUiState("controls",{injections:e})},__updateAdPoints:function(e){this.__updateUiState("controls",{adPoints:e})},__startCheckingVideoProgress:function(){var e=this;this._uiRaf.gettingVideoProgress||(this._uiRaf.gettingVideoProgress=requestAnimationFrame(function(){return e.__checkVideoProgress()}))},__checkVideoProgress:function(){var e=this;this.__updateUiCurrentTime(),this._uiRaf.gettingVideoProgress=requestAnimationFrame(function(){return e.__checkVideoProgress()})},__stopCheckingVideoProgress:function(){cancelAnimationFrame(this._uiRaf.gettingVideoProgress),this._uiRaf.gettingVideoProgress=0},__clearControlsHideTimeout:function(){this._uiTimeout.controlsHide&&(clearTimeout(this._uiTimeout.controlsHide),this._uiTimeout.controlsHide=0)},__startControlsHideTimeout:function(e){var t=this;this._uiTimeout.controlsHide=setTimeout(function(){t._uiTimeout.controlsHide=0,t.__tryControlsHide()||t.__startControlsHideTimeout(e)},e)},__tryControlsHide:function(){return!!this.__canControlsHide()&&(this.__updateUiControls({controlPanelShown:!1,cursorVisible:!this.isFullscreen()}),!0)},__canControlsHide:function(){var e=this._uiState.controls.get();return(!e.useTouch||!e.qualityMenuShown)&&!e.controlPanelHovered&&!e.loading&&e.playing},__setFocusOnPlayPauseArea:function(){var e=document.activeElement;if(this._uiDom.root==e||this._uiDom.root.contains(e)){var t=this._uiDom.root.querySelector("*[data-js-actionarea]");if(t){var i=this._uiDom.root.getBoundingClientRect();i.top>=0&&i.top<window.innerHeight&&t.focus()}}},__updateRootElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"controlPanel"in e&&(0,c.elm)(this._uiDom.root).cssClasses({"sznp-ui-ctrl-panel-active":e.controlPanel}),"cursor"in e&&(0,c.elm)(this._uiDom.root).cssClasses({"sznp-ui-cursor-hidden":!e.cursor})}}},{"../../../../common/env":17,"../../../../common/uiDom":20,"../../../../mediaplayer/tech/Tech":42,"./FullscreenApi":60,"./Ui":61,"./VisualElementProcessor":65,"./event/list":74,"./state/Controls":79,"./state/Overlays":80,"./state/Tech":81,events:1}],76:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{container:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",text:"string"}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,text:""}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-captions"}),this._dom.refs.container=(0,r.createElm)("div",{className:"sznp-ui-captions-container"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.container)),this.__setDisplayed(e.displayed)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!==e.displayed&&(this.__setDisplayed(e.displayed),this.__setText("")),this._props.text!==e.text&&this.__setText(e.text)}},{key:"__setText",value:function(e){if((0,r.elm)(this._dom.refs.container).clear(),e){var t=(0,r.createElm)("span",{className:"sznp-ui-caption-text",innerHTML:e});this._dom.refs.container.appendChild(t)}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}}]),i}(s.default);n.default=a},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20}],77:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=t("../../../../../widgets/Icon"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{iconContainer:null,liveText:null}},n._component={icon:null},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{textLive:"string",displayed:"boolean"}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,textLive:""}}},{key:"_onUiInit",value:function(e){this._component.icon=new l.default(this.__getPropsForIcon(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("span",{className:"sznp-ui-overlay-logo-live"}),this._dom.refs.iconContainer=(0,r.createElm)("span",{className:"sznp-ui-widget-icon-container"}),this._dom.refs.liveText=(0,r.createElm)("span",{className:"sznp-ui-live-text"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.iconContainer).append(this._component.icon.uiGetElement()),this._dom.refs.liveText),this.__setDisplayed(e.displayed),this.__setTextLive(e.textLive)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.textLive!=e.texLive&&this.__setTextLive(e.textLive),this._component.icon.uiUpdate(this.__getPropsForIcon(e))}},{key:"__getPropsForIcon",value:function(e){return{circle:{displayed:!0,color:"#ff0000"}}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setTextLive",value:function(e){this._dom.refs.liveText.innerHTML=e}}]),i}(s.default);n.default=u},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20,"../../../../../widgets/Icon":140}],78:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{img:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{className:"string",displayed:"boolean",src:"string"}}},{key:"uiGetDefaultProps",value:function(){return{className:"sznp-ui-overlay-element",displayed:!1,src:""}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("span",{className:"sznp-ui-overlay-element "+e.className}),this._dom.refs.img=(0,r.createElm)("img",{src:e.src}),(0,r.elm)(this._dom.root).append(this._dom.refs.img),this.__setDisplayed(e.displayed&&e.src)}},{key:"_onUiUpdate",value:function(e){this._props.src!==e.src&&this._dom.refs.img.setAttribute("src",e.src),this._props.displayed===e.displayed&&this._props.src===e.src||this.__setDisplayed(e.displayed&&e.src)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}}]),i}(s.default);n.default=a},{"../../../../../common/UiComponent":14,"../../../../../common/uiDom":20}],79:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/updateObject"),s=(e.interopRequireDefault(o),t("../../../../../common/UiState")),r=e.interopRequireDefault(s),a={adLayout:"default",clickthroughTarget:"_blank",clickthroughUrl:"",controlPanelShown:!1,controlPanelHovered:!1,controlPanelFulltimeHidden:!1,startTime:-1,currentTime:0,displayed:!0,adPoints:[],duration:0,fullscreenEnabled:!0,fullscreenOn:!1,indicatorColor:"",isEvent:!1,isLive:!1,layout:"default",loading:!1,seeking:!1,playing:!1,playingLive:!1,progressBarColor:"",qualityId:-1,qualities:[],qualityMenuShown:!1,settingSubtitlesEnabled:!1,settingSubtitlesVisible:!1,settingQualityEnabled:!1,settingQualityVisible:!1,settingFullscreenEnabled:!1,settingFullscreenVisible:!1,subtitlesShown:!1,seekingEnabled:!0,skippableAfter:-1,countdownBefore:0,allowedToSkip:!1,streamingLive:!1,textLoading:"Načítám …",textPlay:"Přehrát video",textPause:"Pozastavit přehrávání",textMute:"Vypnout zvuk",textUnmute:"Zapnout zvuk",textVolume:"Nastavit hlasitost",textSeekbarEnabled:"Posuňte se ve videu",textSeekbarDisabled:"V tomto videu se nelze posouvat",textSubtitlesEnabled:"Vypněte/zapněte titulky",textSubtitlesDisabled:"U tohoto videa nejsou titulky dostupné",textQuality:"Kvalita",textQualityEnabled:"Nastavte kvalitu videa",textQualityDisabled:"U tohoto videa nelze nastavit kvalitu",textFullscreenOn:"Zapněte přehrávání přes celou obrazovku",textFullscreenOff:"Vypněte přehrávání přes celou obrazovku",textAd:"Reklama",textAdPoint:"REKLAMA",textAdSkip:"Přeskočit reklamu",textAdSkipAfter:"Přeskočit za",textAdCountdown:"Reklama začne za",textAdWeb:"Web inzerenta",textSponsor:"Sponzor pořadu",textPromo:"Upoutávka",textLive:"Živě",textLiveFromStart:"Začátek přenosu",textAction:"",useTouch:!1,volume:0,volumeMuted:!1,injections:[],tech:null,videoDimensions:null,controlPanelIntersectionHeight:0},l=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,a))}return e.inherits(i,t),i}(r.default);n.default=l},{"../../../../../common/UiState":15,"../../../../../common/updateObject":22}],80:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/updateObject"),s=(e.interopRequireDefault(o),t("../../../../../common/UiState")),r=e.interopRequireDefault(s),a={displayed:!0,logoSrc:"",logo:!1,logoLive:!1,logoLiveText:"Živě",ppSrc:"",pp:!1,captions:!1,captionText:""},l=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,a))}return e.inherits(i,t),i}(r.default);n.default=l},{"../../../../../common/UiState":15,"../../../../../common/updateObject":22}],81:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../../common/updateObject"),s=(e.interopRequireDefault(o),t("../../../../../common/UiState")),r=e.interopRequireDefault(s),a={displayed:!0,controlsEnabled:!1,elm:null},l=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,a))}return e.inherits(i,t),i}(r.default);n.default=l},{"../../../../../common/UiState":15,"../../../../../common/updateObject":22}],82:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={track:function(e,t){for(var i=Object.assign({CACHEBUSTING:String(Math.random()).slice(-8)},t),n=e.length-1;n>=0;n--){var o=this.resolveUrlTemplate(e[n],i),s=new Image;s.src=o}},resolveUrlTemplate:function(e,t){var i=e,n=!0,o=!1,s=void 0;try{for(var r,a=Object.keys(t)[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var l=r.value,u="["+l+"]";try{var c=encodeURIComponent(t[l]);i=i.replace(u,c)}catch(e){}}}catch(e){o=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return i}}},{}],83:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,[{key:"newContent",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:""}},{key:"break",value:function(){}},{key:"restore",value:function(){}},{key:"finish",value:function(){}},{key:"setDuration",value:function(e){}},{key:"track",value:function(e,t){}}]),t}();n.default=o},{}],84:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Tracker"),s=e.interopRequireDefault(o),r=t("../../common/errors"),a=e.interopRequireDefault(r),l=t("../../common/utils"),u=e.interopRequireDefault(l),c=new a.default.ErrorFactory(a.default.createSourceName(i)),d="IDLE",_="AD",h="CONTENT",f=function(){function t(i){e.classCallCheck(this,t),this._player=i,this._sessions={AD:!1,CONTENT:!1},this._trackers={IDLE:[],AD:[],CONTENT:[]},this._opened={IDLE:[],AD:[],CONTENT:[]},this._flags={contentAlreadyBroke:!1};var n=this._player.constructor,o={READY:this._handleEvent,ERROR:this._handleEvent,QUALITY_SET:this._handleEvent,FULLSCREEN_CHANGE:this._handleEvent,VOLUME_CHANGE:this._handleEvent,TEXT_TRACK_SET:this._handleEvent,CONTENT_READY:this._handleEvent,BUFFER_EMPTY:this._handleEvent,PLAYING:this._handleEvent,PAUSED:this._handleEvent,STOPPED:this._handleEvent,TIMEUPDATE:this._handleEvent,PLAYBACK_PROGRESS:this._handleEvent,SEEKSTART:this._handleEvent,SEEKING:this._handleEvent,SEEKED:this._handleEvent,ENDED:this._handleEvent,SKIP:this._handleEvent,VIDEO_CLICKTHROUGH:this._handleEvent,VE_DISPLAYED:this._handleEvent,VE_HIDDEN:this._handleEvent,VE_CLICKTHROUGH:this._handleEvent,VE_CLOSE:this._handleEvent,USER_ACCEPT_INVITATION:this._handleEvent,USER_MINIMIZE:this._handleEvent,USER_CLOSE:this._handleEvent,IMPRESSION:this._handleEvent},s={SET:this._handleEvent,SOURCE_SET:this._handleEvent,LOADED_METADATA:this._handleEvent,DURATION_CHANGE:this._handleEvent,CAN_PLAY:this._handleEvent},r=!0,a=!1,l=void 0;try{for(var u,c=Object.keys(s)[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var d=u.value,f="CONTENT_"+d,p="AD_"+d;o[f]=o[p]=s[d]}}catch(e){a=!0,l=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw l}}this._player.on(n.EVENT_CONTENT_BEGIN,this._openSession.bind(this,h)),this._player.on(n.EVENT_CONTENT_RESTORE,this._restoreSession.bind(this,h)),this._player.on(n.EVENT_AD_BEGIN,this._openSession.bind(this,_)),this._player.on(n.EVENT_CONTENT_END,this._closeSession.bind(this,h)),this._player.on(n.EVENT_AD_END,this._closeSession.bind(this,_)),this._player.on(n.EVENT_DESTROYING,this._closeAll.bind(this,_)),this._player.on(n.EVENT_UNLOAD,this._closeAll.bind(this,_));var m=!0,v=!1,y=void 0;try{for(var E,g=Object.keys(o)[Symbol.iterator]();!(m=(E=g.next()).done);m=!0){var k=E.value,T=n["EVENT_"+k];this._player.on(T,o[k].bind(this,k))}}catch(e){v=!0,y=e}finally{try{!m&&g.return&&g.return()}finally{if(v)throw y}}}return e.createClass(t,[{key:"addTracker",value:function(e,t){if(!u.default.hasInterface(t,s.default))throw c.createError(a.default.SETTING,"Second argument must be instance of Tracker.");var i=this._trackers[e];i&&i.push(t)}},{key:"removeTracker",value:function(e,t){var i=this._trackers[e],n=this._opened[e].indexOf(t);if(i){var o=i.indexOf(t);o>-1&&i.splice(o,1)}n>-1&&this._opened[e].splice(n,1)}},{key:"_openSession",value:function(e,t){this._sessions[e]&&this._closeSession(e);var i=this._trackers[e];e===_&&this._sessions[h]&&!this._flags.contentAlreadyBroke&&(this._trackers[h].forEach(function(e){e.break()}),this._flags.contentAlreadyBroke=!0),i.forEach(function(e){e.newContent(t.material,t.role)}),this._sessions[e]=!0}},{key:"_restoreSession",value:function(e,t){var i=this._trackers[e];i.forEach(function(e){e.restore()}),this._sessions[e]=!0}},{key:"_closeSession",value:function(e){var t=this;if(this._sessions[e]){var i=this._trackers[e];i.forEach(function(i){i.finish();var n=t._opened[e].indexOf(i);n>-1&&t._opened[e].splice(n,1)}),this._sessions[e]=!1,e===h&&(this._flags.contentAlreadyBroke=!1)}}},{key:"_closeAll",value:function(){for(var e=this,t=[_,h,d],i="";i=t.shift();){var n=this._trackers[i];n.forEach(function(t){var n=e._opened[i].indexOf(t);n>-1&&t.finish()}),this._sessions[i]=!1}this._opened={IDLE:[],AD:[],CONTENT:[]}}},{key:"_handleEvent",value:function(e,t){var i=this._getMode(),n=this._trackers[i];n.length&&(e.indexOf("DURATION_CHANGE")>-1?n.forEach(function(e){e.setDuration(t.duration)}):e.indexOf("CONTENT_READY")>-1?t.content.source&&!function(){var e=t.content.source.getDuration();e&&n.forEach(function(t){t.setDuration(e)})}():n.forEach(function(i){i.track(e,t)}))}},{key:"_getMode",value:function(){return this._sessions[_]?_:this._sessions[h]?h:d}}]),t}();n.default=f}).call(this,"/src\\js\\richmediaplayer\\tracking\\TrackerController.js")},{"../../common/errors":18,"../../common/utils":23,"./Tracker":83}],85:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/Component"),s=e.interopRequireDefault(o),r=t("../../common/errors"),a=e.interopRequireDefault(r),l=new a.default.ErrorFactory(a.default.createSourceName(i)),u=function(t){function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._player=null,n._dialogScreen=null,n._container=document.createElement("div"),n._displayingDialog=!1,n._eventsMap=new Map,t&&n._container.classList.add(t),n}return e.inherits(i,t),e.createClass(i,[{key:"getElement",value:function(){return this._container}},{key:"isDialogActive",value:function(){return this._displayingDialog}},{key:"setPlayer",value:function(e){this._player=e,this._container.appendChild(e.getElement())}},{key:"setDialogScreen",value:function(e){var t=e.constructor;this._eventsMap=new Map([[t.EVENT_REPLAY_REQUEST,this._handleReplayRequest]]),this.bindAll(this._eventsMap),this.addListeners(e,this._eventsMap),this._dialogScreen=e,this._container.appendChild(e.getElement())}},{key:"showDialog",value:function(t){if(!this._dialogScreen)throw l.createError(a.default.SETTING,"DialogScreen must be specified.");if(!t)throw l.createError(a.default.SETTING,"Argument options must be specified.");if("object"!==("undefined"==typeof t?"undefined":e.typeof(t)))throw l.createError(a.default.SETTING,"Argument options must be an object.");if(!this._dialogScreen.isLayoutSupported(t.kind))throw l.createError(a.default.SETTING,'Dialog kind "'+t.kind+"\" isn't supported.");this._player&&this._player.hide(),this._dialogScreen.show(t.kind,t),this._displayingDialog=!0}},{key:"hideDialog",value:function(){this._dialogScreen&&(this._dialogScreen.hideAll(),this._player&&this._player.show(),this._displayingDialog=!1)}},{key:"_handleReplayRequest",value:function(){this.emit(i.EVENT_REPLAY_REQUEST)}}]),i}(s.default);u.EVENT_REPLAY_REQUEST="replayrequest",n.default=u}).call(this,"/src\\js\\richmediaplayer\\ui\\UiAgent.js")},{"../../common/Component":10,"../../common/errors":18}],86:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("events"),s=e.interopRequireDefault(o),r=t("../../../common/Component"),a=e.interopRequireDefault(r),l=t("../../../common/uiDom"),u=t("../../../common/errors"),c=e.interopRequireDefault(u),d=t("./event/list"),_=e.interopRequireDefault(d),h=t("./layout/Alert"),f=e.interopRequireDefault(h),p=t("./state/Alert"),m=e.interopRequireDefault(p),v=t("./layout/Ad"),y=e.interopRequireDefault(v),E=t("./state/Ad"),g=e.interopRequireDefault(E),k=t("./layout/Stop"),T=e.interopRequireDefault(k),C=t("./state/Stop"),S=e.interopRequireDefault(C),b=new c.default.ErrorFactory(c.default.createSourceName(i)),P=function(t){function i(){e.classCallCheck(this,i);var t=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t._dom={root:(0,l.createElm)("div",{className:"sznp-dialog-wrapper"})},t._uiState={},t._ui={},t._uiEventEmitter=new s.default,t._uiEventsMap=new Map([[_.default.REPLAY_REQUEST,t.__onUiReplayRequest]]),t.bindAll(t._uiEventsMap),t.__setDisplayed(!1),t}return e.inherits(i,t),e.createClass(i,[{key:"getElement",value:function(){return this._dom.root}},{key:"isLayoutSupported",value:function(e){return e===i.layout.AD||e===i.layout.ALERT||e===i.layout.STOP}},{key:"show",value:function(e,t){if(!this.isLayoutSupported(e))throw b.createError(c.default.SETTING,"There is'nt layout \""+e+'".');this.hideAll(),this._ui[e]||(this.__createLayout(e),this.__buildUi(e)),t.displayed=!0,this.__setDisplayed(!0),this.__updateUiState(e,this.__getPropsForLayout(e,t))}},{key:"hide",value:function(e){this.__updateUiState(e,{displayed:!1})}},{key:"hideAll",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,o=Object.keys(this._ui)[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;this.hide(s)}}catch(e){t=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw i}}}},{key:"destroy",value:function(){this.removeListeners(this._uiEventEmitter,this._uiEventsMap),this._ui.alert&&this._ui.alert.uiDestroy(),this._ui.ad&&this._ui.ad.uiDestroy(),this._ui.stop&&this._ui.stop.uiDestroy(),(0,l.elm)(this._dom.root).clear()}},{key:"__setDisplayed",value:function(e){(0,l.elm)(this._dom.root).setDisplayed(e)}},{key:"__createLayout",value:function(e){e===i.layout.ALERT?(this._uiState.alert=new m.default,this._ui.alert=new f.default(this._uiState.alert.get())):e===i.layout.AD?(this._uiState.ad=new g.default,this._ui.ad=new y.default(this._uiState.ad.get())):e===i.layout.STOP&&(this._uiState.stop=new S.default,this._ui.stop=new T.default(this._uiState.stop.get()))}},{key:"__buildUi",value:function(e){this.addListeners(this._uiEventEmitter,this._uiEventsMap),this._ui[e].uiInit(),this._ui[e].uiSetEventEmitter(this._uiEventEmitter),this._ui[e].uiBuild(),(0,l.elm)(this._dom.root).append(this._ui[e].uiGetElement())}},{key:"__updateUiState",value:function(e,t){this._uiState[e].update(t),this._ui[e].uiUpdate(this._uiState[e].get())}},{key:"__getPropsForLayout",value:function(e,t){if(e===i.layout.ALERT){var n=t.displayed,o=t.title,s=t.content;return{displayed:n,title:o,content:s}}if(e===i.layout.AD){var r=t.displayed,a=t.caption,l=t.content;return{displayed:r,caption:a,content:l}}if(e===i.layout.STOP){var u=t.displayed,c=t.poster;return{displayed:u,poster:c||""}}}},{key:"__onUiReplayRequest",value:function(){this.emit(i.EVENT_REPLAY_REQUEST)}}]),i}(a.default);n.default=P,P.layout={AD:"ad",ALERT:"alert",STOP:"stop"},P.EVENT_REPLAY_REQUEST="replayrequest"}).call(this,"/src\\js\\richmediaplayer\\ui\\dialogscreen\\DialogScreen.js")},{"../../../common/Component":10,"../../../common/errors":18,"../../../common/uiDom":20,"./event/list":87,"./layout/Ad":88,"./layout/Alert":89,"./layout/Stop":90,"./state/Ad":91,"./state/Alert":92,"./state/Stop":93,events:1}],87:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={REPLAY_REQUEST:"replay-request"}},{}],88:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../common/uiDom"),a=t("../../../../widgets/IconButton"),l=e.interopRequireDefault(a),u=t("../../../../widgets/AdIconCaption"),c=e.interopRequireDefault(u),d=t("../../../../widgets/TextButton"),_=e.interopRequireDefault(d),h=t("../event/list"),f=e.interopRequireDefault(h),p=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{adWrapper:null,captionBox:null,content:null,replayWrapper:null,replayIconBox:null,replayTextBox:null}},n._component={caption:null,replayIconButton:null,replayTextButton:null},n._bind=["__onRelayButtonClick"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",type:"string",caption:"string",content:"string",textReplay:"string"}}},{key:"_onUiInit",value:function(e){this._component.caption=new c.default(this.__getPropsForAdIconCaption(e)),this._component.replayIconButton=new l.default(this.__getPropsForReplayIconButton(e)),this._component.replayTextButton=new _.default(this.__getPropsForReplayTextButton(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ad-screen sznp-ad-"+e.type}),this._dom.refs.adWrapper=(0,r.createElm)("div",{className:"sznp-ad-screen-ad-wrapper"}),this._dom.refs.captionBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ad-screen-caption"}),this._dom.refs.content=(0,r.createElm)("div",{className:"sznp-ad-screen-content"}),this._dom.refs.replayWrapper=(0,r.createElm)("div",{className:"sznp-ad-replay-wrapper"}),this._dom.refs.replayIconBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ad-replay-icon"}),this._dom.refs.replayTextBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-ad-replay-text"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.adWrapper).append((0,r.elm)(this._dom.refs.captionBox).append(this._component.caption.uiGetElement()),this._dom.refs.content),(0,r.elm)(this._dom.refs.replayWrapper).append((0,r.elm)(this._dom.refs.replayIconBox).append(this._component.replayIconButton.uiGetElement()),(0,r.elm)(this._dom.refs.replayTextBox).append(this._component.replayTextButton.uiGetElement()))),this.__setContent(e.content),this.__setDisplayed(e.displayed)}},{key:"_onUiUpdate",value:function(e){this.__setDisplayed(e.displayed),this._component.caption.uiUpdate(this.__getPropsForAdIconCaption(e)),this._component.replayIconButton.uiUpdate(this.__getPropsForReplayIconButton(e)),this._component.replayTextButton.uiUpdate(this.__getPropsForReplayTextButton(e)),this.__setContent(e.content)}},{key:"_onUiDestroy",value:function(){}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e);
}},{key:"__setContent",value:function(e){this._dom.refs.content.innerHTML=e}},{key:"__getPropsForAdIconCaption",value:function(e){return{indicator:!0,text:e.caption}}},{key:"__getPropsForReplayIconButton",value:function(e){return{displayed:!0,titleEnabled:e.textReplay,iconProps:{reload:{displayed:!0}},onClick:this.__onRelayButtonClick}}},{key:"__getPropsForReplayTextButton",value:function(e){return{text:e.textReplay,onClick:this.__onRelayButtonClick,extraClass:["sznp-ui-replay-button-look"]}}},{key:"__onRelayButtonClick",value:function(){this._uiEmitEvent(f.default.REPLAY_REQUEST)}}]),i}(s.default);n.default=p},{"../../../../common/UiComponent":14,"../../../../common/uiDom":20,"../../../../widgets/AdIconCaption":136,"../../../../widgets/IconButton":141,"../../../../widgets/TextButton":160,"../event/list":87}],89:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../common/uiDom"),a=t("../../../../widgets/Article"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{articleBox:null}},n._component={article:null},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",title:"string",content:"string"}}},{key:"_onUiInit",value:function(e){this._component.article=new l.default(this.__getPropsForArticle(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-dialog"}),this._dom.refs.articleBox=(0,r.createElm)("div",{className:"sznp-widget-box sznp-dialog-article-container"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.articleBox).append(this._component.article.uiGetElement())),this.__setDisplayed(e.displayed)}},{key:"_onUiUpdate",value:function(e){this.__setDisplayed(e.displayed),this._component.article.uiUpdate(this.__getPropsForArticle(e))}},{key:"_onUiDestroy",value:function(){}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__getPropsForArticle",value:function(e){var t=e.title,i=e.content;return{title:t,content:i}}}]),i}(s.default);n.default=u},{"../../../../common/UiComponent":14,"../../../../common/uiDom":20,"../../../../widgets/Article":138}],90:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../../../../common/uiDom"),a=t("../../../../widgets/IconButton"),l=e.interopRequireDefault(a),u=t("../../../../widgets/ActionArea"),c=e.interopRequireDefault(u),d=t("../event/list"),_=e.interopRequireDefault(d),h=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{posterWrapper:null,poster:null,replayWrapper:null,replayIconBox:null,replayTextBox:null}},n._component={actionArea:null,replayIconButton:null},n._bind=["__onActionAreaClick","__onRelayButtonClick"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",poster:"string",textReplay:"string"}}},{key:"_onUiInit",value:function(e){this._component.actionArea=new c.default(this.__getPropsForActionArea(e)),this._component.replayIconButton=new l.default(this.__getPropsForReplayIconButton(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-stop-screen"}),this._dom.refs.posterWrapper=(0,r.createElm)("div",{className:"sznp-stop-screen-poster-wrapper sznp-arph"}),this._dom.refs.poster=(0,r.createElm)("img",{className:"sznp-stop-screen-poster sznp-bg-img"}),this._dom.refs.replayWrapper=(0,r.createElm)("div",{className:"sznp-stop-replay-wrapper"}),this._dom.refs.replayIconBox=(0,r.createElm)("div",{className:"sznp-ui-widget-box sznp-stop-replay-icon"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.posterWrapper).append(this._dom.refs.poster),this._component.actionArea.uiGetElement(),(0,r.elm)(this._dom.refs.replayWrapper).append((0,r.elm)(this._dom.refs.replayIconBox).append(this._component.replayIconButton.uiGetElement()))),this.__setPoster(e.poster),this.__setDisplayed(e.displayed)}},{key:"_onUiUpdate",value:function(e){this.__setDisplayed(e.displayed),this._component.actionArea.uiUpdate(this.__getPropsForActionArea(e)),this._component.replayIconButton.uiUpdate(this.__getPropsForReplayIconButton(e)),this.__setPoster(e.poster)}},{key:"_onUiDestroy",value:function(){}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setPoster",value:function(e){e?((0,r.elm)(this._dom.refs.poster).setDisplayed(!0),this._dom.refs.poster.src=e):(0,r.elm)(this._dom.refs.poster).setDisplayed(!1)}},{key:"__getPropsForActionArea",value:function(e){return{displayed:!0,onClick:this.__onActionAreaClick}}},{key:"__getPropsForReplayIconButton",value:function(e){return{displayed:!0,titleEnabled:e.textReplay,iconProps:{reload:{displayed:!0}},onClick:this.__onRelayButtonClick}}},{key:"__onActionAreaClick",value:function(){this._uiEmitEvent(_.default.REPLAY_REQUEST)}},{key:"__onRelayButtonClick",value:function(){this._uiEmitEvent(_.default.REPLAY_REQUEST)}}]),i}(s.default);n.default=h},{"../../../../common/UiComponent":14,"../../../../common/uiDom":20,"../../../../widgets/ActionArea":131,"../../../../widgets/IconButton":141,"../event/list":87}],91:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiState"),s=e.interopRequireDefault(o),r={displayed:!1,type:"commercial-message",caption:"",content:"",textReplay:"Přehrát znovu"},a=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r))}return e.inherits(i,t),i}(s.default);n.default=a},{"../../../../common/UiState":15}],92:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiState"),s=e.interopRequireDefault(o),r={displayed:!1,title:"",content:""},a=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r))}return e.inherits(i,t),i}(s.default);n.default=a},{"../../../../common/UiState":15}],93:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../../common/UiState"),s=e.interopRequireDefault(o),r={displayed:!1,poster:"",textReplay:"Přehrát znovu"},a=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,r))}return e.inherits(i,t),i}(s.default);n.default=a},{"../../../../common/UiState":15}],94:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,[{key:"setRange",value:function(e){}},{key:"moveTo",value:function(e){}},{key:"getCurrent",value:function(){}},{key:"getOverlayConfig",value:function(){}},{key:"getVariablePrerollConfig",value:function(){}},{key:"getPrerollConfig",value:function(){}},{key:"getSponsorConfig",value:function(){}},{key:"getPpConfig",value:function(){}},{key:"getMidrollConfig",value:function(e,t){}},{key:"getPostrollConfig",value:function(){}},{key:"getCMConfig",value:function(){}},{key:"getFollowing",value:function(){}},{key:"dropMidrollConfig",value:function(e){}}]),t}();n.default=o},{}],95:[function(t,i,n){"use strict";function o(){return new d.default(new u.default(a.default,{maxAttemps:2},u.default.PROFILE_PLAYLIST))}function s(e){return h||(h=o()),h.get(e).then(function(e){return d.default.createSource(e)})}Object.defineProperty(n,"__esModule",{value:!0});var r=t("../common/utils"),a=e.interopRequireDefault(r),l=t("../common/LoaderFactory"),u=e.interopRequireDefault(l),c=t("./spl/SplResource"),d=e.interopRequireDefault(c),_=Symbol("originSetSource"),h=null;n.default={addSplSupport:function(e){var t=null;e[_]=e.setSource,e.setSource=function(i,n){var o=decodeURI(i);t="string"==typeof i&&/\?.*\|spl/.test(o)?s(o):Promise.resolve(i),t.then(function(t){e[_](t,n)})}}}},{"../common/LoaderFactory":12,"../common/utils":23,"./spl/SplResource":129}],96:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("events"),s=e.interopRequireDefault(o),r=t("../common/utils"),a=e.interopRequireDefault(r),l="#000",u="image/svg+xml",c="charset=utf8",d='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 36 36"><path fill="#fff" d="M29.37 18l-20.074 15.333v-30.667z"></path></svg>',_="data:"+u+(";"+c)+(","+encodeURIComponent(d)),h=function(t){function i(){e.classCallCheck(this,i);var t=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));t._texts={},t._shown=!0,t._elms={},t._elms.wrapper=document.createElement("section"),t._elms.bgImg=document.createElement("img"),t._elms.play=document.createElement("div"),t._elms.playButton=document.createElement("button"),t._elms.playImg=document.createElement("img"),t._elms.title=document.createElement("div"),t._elms.title1=document.createElement("h1"),t._elms.title2=document.createElement("h2"),t._elms.duration=document.createElement("div"),t._elms.wrapper.classList.add("sznp-splash-screen"),t._elms.bgImg.classList.add("sznp-bg-img"),t._elms.bgImg.classList.add("sznp-arph"),t._elms.play.classList.add("sznp-play"),t._elms.playButton.classList.add("sznp-button"),t._elms.playButton.classList.add("sznp-play-button"),t._elms.playImg.classList.add("sznp-play-img"),t._elms.title.classList.add("sznp-title"),t._elms.title1.classList.add("sznp-title-main"),t._elms.title2.classList.add("sznp-title-sub"),t._elms.duration.classList.add("sznp-duration"),t._elms.playButton.type="button",t._elms.playImg.src=_,t._elms.wrapper.appendChild(t._elms.bgImg),t._elms.wrapper.appendChild(t._elms.play),t._elms.play.appendChild(t._elms.playButton),t._elms.playButton.appendChild(t._elms.playImg),t._elms.wrapper.appendChild(t._elms.title),t._elms.title.appendChild(t._elms.title1),t._elms.title.appendChild(t._elms.title2),t._elms.wrapper.appendChild(t._elms.duration);var n=["_clickOnPlay"];return n.forEach(function(e){t[e]=t[e].bind(t)},t),t.setLocalizedTexts(),t._updateVisibility(),t.setBackground(),t.setTitle(),t.setDuration(),t._activateControls(),t}return e.inherits(i,t),e.createClass(i,[{key:"getElement",value:function(){return this._elms.wrapper}},{key:"isShown",value:function(){return this._shown}},{key:"setLocalizedTexts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._texts={play:e.play||"Přehrát",playTitle:e.playTitle||"Spustit přehrávání"},this._elms.playImg.alt=this._texts.play,this._texts.playTitle?(this._elms.playButton.title=this._texts.playTitle,this._elms.play.title=this._texts.playTitle):(this._elms.playButton.removeAttribute("title"),this._elms.play.removeAttribute("title"))}},{key:"setBackground",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={img:e.img||"",color:e.color||l};this._elms.wrapper.style.backgroundColor=t.color,t.img?(this._elms.bgImg.src=t.img,this._elms.bgImg.style.display=""):(this._elms.bgImg.style.display="none",this._elms.bgImg.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}},{key:"setTitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e||t?(this._elms.title1.innerHTML=e,this._elms.title2.innerHTML=t,this._elms.title.style.display=""):(this._elms.title.style.display="none",this._elms.title1.innerHTML="",this._elms.title2.innerHTML="")}},{key:"setDuration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;e?(this._elms.duration.innerHTML=a.default.formatTime(e),this._elms.duration.style.display=""):(this._elms.duration.style.display="none",this._elms.duration.innerHTML="")}},{key:"setContent",value:function(e){e.poster&&this.setBackground({img:e.poster}),(e.title||e.subtitle)&&(this.setTitle(e.title,e.subtitle),e.duration&&this.setDuration(e.duration))}},{key:"show",value:function(){this._shown=!0,this._updateVisibility()}},{key:"hide",value:function(){this._shown=!1,this._updateVisibility()}},{key:"_updateVisibility",value:function(){this._elms.wrapper.classList.add(this._shown?"sznp-visible":"sznp-hidden"),this._elms.wrapper.classList.remove(this._shown?"sznp-hidden":"sznp-visible")}},{key:"_activateControls",value:function(){this._elms.wrapper.addEventListener("click",this._clickOnPlay)}},{key:"_clickOnPlay",value:function(e){this.emit(i.EVENT_PLAY_REQUEST)}}]),i}(s.default);h.EVENT_PLAY_REQUEST="play-request",n.default=h},{"../common/utils":23,events:1}],97:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./Playlist"),s=e.interopRequireDefault(o),r=t("./ad/AdsConfigValidator"),a=e.interopRequireDefault(r),l=function(t){function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.classCallCheck(this,i);var o=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o._playlist=t,o._position=0,o._range=1,o._adsConfig=null,n&&o.setAds(n),o}return e.inherits(i,t),e.createClass(i,[{key:"setAds",value:function(e){var t=a.default.checkAdsConfig(e);if(!t.valid)throw new Error("[StandardPlaylist] "+t.message);this._adsConfig=e}},{key:"setRange",value:function(e){this._range=e}},{key:"moveTo",value:function(e){this._position=this._playlist.findIndex(function(t){return t.id===e})}},{key:"getCurrent",value:function(){return Promise.resolve(this._playlist[this._position])}},{key:"getOverlayConfig",value:function(){return this._adsConfig?this._adsConfig.overlay:null}},{key:"getSponsorConfig",value:function(){return this._adsConfig?this._adsConfig.sponsor:null}},{key:"getVariablePrerollConfig",value:function(){return this._adsConfig?this._adsConfig.variablePreroll:null}},{key:"getPrerollConfig",value:function(){return this._adsConfig?this._adsConfig.preroll:null}},{key:"getMidrollConfig",value:function(){return this._adsConfig?this._adsConfig.midroll:null}},{key:"getPostrollConfig",value:function(){return this._adsConfig?this._adsConfig.postroll:null}},{key:"getCMConfig",value:function(){return this._adsConfig?this._adsConfig.cm:null}},{key:"getFollowing",value:function(){var e=this._position+1;return Promise.resolve(this._playlist.slice(e,e+(this._range-1)))}}]),i}(s.default);n.default=l},{"./Playlist":94,"./ad/AdsConfigValidator":106}],98:[function(t,i,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e.classCallCheck(this,t),this._prefix=i,this._storage=function(){try{var e=window.localStorage;return e?(e.setItem("_SZNPLAYER_CONDITION_TEST",1),e.removeItem("_SZNPLAYER_CONDITION_TEST"),e):null}catch(e){return null}}()}return e.createClass(t,[{key:"get",value:function(e){if(!this._storage)return null;var t=""+this._prefix+e,i=this._storage.getItem(t),n=null;if(!i)return null;try{n=JSON.parse(i)}catch(e){}return n?n.expiration&&Date.now()>n.expiration?(this._storage.removeItem(t),null):n.data:null}},{key:"set",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._storage){var n=""+this._prefix+e,o=Date.now(),s=i?o+i:null,r={data:t,creation:o,expiration:s},a="";try{a=JSON.stringify(r)}catch(e){}a&&this._storage.setItem(n,a)}}},{key:"remove",value:function(e){if(this._storage){var t=""+this._prefix+e;this._storage.removeItem(t)}}}]),t}();n.default=i}).call(this,"/src\\js\\sznplayer\\StorageService.js")},{}],99:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/constants"),s=t("../common/errors"),r=e.interopRequireDefault(s),a=t("../common/utils"),l=e.interopRequireDefault(a),u=t("../common/env"),c=e.interopRequireDefault(u),d=t("../common/Request"),_=e.interopRequireDefault(d),h=t("../common/Component"),f=e.interopRequireDefault(h),p=t("../common/CancelableChain"),m=e.interopRequireDefault(p),v=t("../mediaplayer/tech/Tech"),y=e.interopRequireDefault(v),E=t("../richmediaplayer/RichMediaPlayer"),g=e.interopRequireDefault(E),k=t("../richmediaplayer/tracking/TrackerController"),T=e.interopRequireDefault(k),C=t("./Playlist"),S=e.interopRequireDefault(C),b=t("./spl/SplResource"),P=e.interopRequireDefault(b),A=t("./spl/createSplResource"),R=e.interopRequireDefault(A),N=t("./ad/AdsManager"),D=e.interopRequireDefault(N),x=t("./analytics/SznTracker"),w=e.interopRequireDefault(x),L=t("./overlay/OverlaysManager"),O=e.interopRequireDefault(L),I=t("./analytics/GemiusStreamTracker"),M=e.interopRequireDefault(I),V=t("./analytics/GemiusPrismTracker"),U=e.interopRequireDefault(V),B=t("./analytics/GemiusPrismContentTracker"),F=e.interopRequireDefault(B),q=t("./analytics/GemiusPrismAdTracker"),j=e.interopRequireDefault(q),H=t("./SplashScreen"),G=e.interopRequireDefault(H),Q=t("./Transition"),z=e.interopRequireDefault(Q),Y=t("./StorageService"),K=e.interopRequireDefault(Y),W="https://v7ewwnwy4h.execute-api.eu-west-1.amazonaws.com/prod/log-error",X=new r.default.ErrorFactory(r.default.createSourceName(i)),J=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));n._richPlayer=t,n._playbackChain=new m.default,n._settings={range:2},n._playlist=null,n._splResource=null,n._trackerCtrl=new T.default(n._richPlayer),n._adsManager=new D.default(n._richPlayer,n._trackerCtrl),n._overlaysManager=new O.default(n._richPlayer),n._splash=new G.default;var o=n._richPlayer.getTransitionWaitingTime();n._transition=new z.default(l.default,n._richPlayer,Object.assign({modestMode:c.default.isTouch()},"undefined"!=typeof o?{waitingTime:o}:{}));var s=n._richPlayer.getLocalStoragePrefix();return n._storage=new K.default("sznplayer_"+("undefined"!=typeof s?s+"_":"")),n._wrapper=document.createElement("div"),n._adBlockElement=document.createElement("div"),n._dot=null,n._originalContent=null,n._content=null,n._isContentSet=!1,n._isLoadingDialogShown=!1,n._wasPlayed=!1,n._eventsMap=new Map([[g.default.EVENT_READY,n._dispatchTechReady],[g.default.EVENT_CONTENT_READY,n._handleContentReady],[g.default.EVENT_CONTENT_SET,n._handleContentSet],[g.default.EVENT_PLAYING,n._handlePlaying],[g.default.EVENT_PAUSED,n._dispatchPaused],[g.default.EVENT_STOPPED,n._dispatchStopped],[g.default.EVENT_ENDED,n._dispatchEnded],[g.default.EVENT_SEEKED,n._dispatchSeeked],[g.default.EVENT_TIMEUPDATE,n._dispatchTimeupdate],[g.default.EVENT_FULLSCREEN_CHANGE,n._dispatchFSChange],[g.default.EVENT_VOLUME_CHANGE,n._handleVolumeChange],[g.default.EVENT_QUALITY_SET,n._handleQualitySet],[g.default.EVENT_TEXT_TRACK_SET,n._handleTextTrackSet],[g.default.EVENT_NEAR_END,n._handleNearEnd],[g.default.EVENT_CONTENT_LOADED_SEGMENT,n._handleSegmentLoaded],[g.default.EVENT_AD_LOADED_SEGMENT,n._handleSegmentLoaded],[g.default.EVENT_PROGRAMME_BEGIN,n._handleProgrammeBegin],[g.default.EVENT_PROGRAMME_END,n._handleProgrammeEnd],[g.default.EVENT_AD_LOADED_METADATA,n._handleAdReady],[g.default.EVENT_ACTION_CLICKTHROUGH,n._dispatchActionClick],[g.default.EVENT_ERROR,n._handleError]]),n._eventsMapSplash=new Map([[G.default.EVENT_PLAY_REQUEST,n.play]]),n._eventsMapTransition=new Map([[z.default.EVENT_CONTENT_SWITCH,n._dispatchPlayContent]]),n._eventsMapAds=new Map([[D.default.EVENT_ERROR,n._handleError]]),n._wrapper.classList.add("sznp-wrapper"),n._wrapper.appendChild(n._transition.getElement()),n._wrapper.appendChild(n._splash.getElement()),n._adBlockElement.classList.add("ad-content"),n._wrapper.appendChild(n._adBlockElement),n.bindAll(n._eventsMap),n.bindAll(n._eventsMapSplash),n.bindAll(n._eventsMapTransition),n.bindAll(n._eventsMapAds),n.addListeners(n._richPlayer,n._eventsMap),n.addListeners(n._splash,n._eventsMapSplash),n.addListeners(n._transition,n._eventsMapTransition),n.addListeners(n._adsManager,n._eventsMapAds),n._trackerCtrl.addTracker(g.default.MODE_CONTENT,n._overlaysManager),n}return e.inherits(i,t),e.createClass(i,[{key:"getNameAndVersion",value:function(){return"szn_"+o.version}},{key:"getTechName",value:function(){return this._richPlayer.getTechName()}},{key:"getPlayerId",value:function(){return this._richPlayer.getPlayerId()}},{key:"getElement",value:function(){return this._wrapper}},{key:"getCurrentContent",value:function(){return this._originalContent}},{key:"getResolvedContent",value:function(){return this._richPlayer.getResolvedContent()}},{key:"getTextTrack",value:function(){return this._richPlayer.getTextTrack()}},{key:"getVideoWidth",value:function(){return this._richPlayer.getVideoWidth()}},{key:"getVideoHeight",value:function(){return this._richPlayer.getVideoHeight()}},{key:"getVolume",value:function(){return this._richPlayer.getVolume()}},{key:"getCurrentTime",value:function(){return this._richPlayer.getCurrentTime()}},{key:"getDuration",value:function(){return this._richPlayer.getDuration()}},{key:"isReady",value:function(){return this._richPlayer.isReady()}},{key:"isAutoplayAllowed",value:function(){return c.default.isAutoplayAllowed()}},{key:"isMuted",value:function(){return this._richPlayer.isMuted()}},{key:"isPlaying",value:function(){return this._richPlayer.isPlaying()}},{key:"isPaused",value:function(){return this._richPlayer.isPaused()}},{key:"isFullscreen",value:function(){return this._richPlayer.isFullscreen()}},{key:"isAdMode",value:function(){return this._richPlayer.isAdMode()}},{key:"hasTextTrack",value:function(e){return this._richPlayer.hasTextTrack(e)}},{key:"setLogo",value:function(e){if("string"!=typeof e)throw X.createError(r.default.SETTING,"Argument must be a string.");this._richPlayer.setLogo(e)}},{key:"setActionArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e)throw X.createError(r.default.SETTING,"Action area caption must be a string.");this._richPlayer.setActionArea(e)}},{key:"setColorProfile",value:function(t){if(!t)throw X.createError(r.default.SETTING,"Argument must be specified.");if("object"!==("undefined"==typeof t?"undefined":e.typeof(t)))throw X.createError(r.default.SETTING,"Argument must be an object.");this._richPlayer.setColorProfile(t)}},{key:"settingQualityVisible",value:function(e){if("boolean"!=typeof e)throw new Error("[SznRichMediaPlayer] Argument must be boolean.");this._richPlayer.settingQualityVisible(e)}},{key:"settingSubtitlesVisible",value:function(e){if("boolean"!=typeof e)throw new Error("[SznRichMediaPlayer] Argument must be boolean.");this._richPlayer.settingSubtitlesVisible(e)}},{key:"settingFullscreenVisible",value:function(e){if("boolean"!=typeof e)throw new Error("[SznRichMediaPlayer] Argument must be boolean.");this._richPlayer.settingFullscreenVisible(e)}},{key:"setDot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getNameAndVersion(),n=Object.assign({partLength:10},t.content),o=Object.assign({partLength:5},t.ad),s=new w.default(e,this._richPlayer,{playerVersion:i,partLength:n.partLength}),r=new w.default(e,this._richPlayer,{playerVersion:i,actionPrefix:"mregg-",partLength:o.partLength});this._trackerCtrl.addTracker(g.default.MODE_CONTENT,s),this._trackerCtrl.addTracker(g.default.MODE_AD,r),this._dot=e}},{key:"setGemiusStream",value:function(e,t){var i=new M.default(e,this._richPlayer,t);this._trackerCtrl.addTracker(g.default.MODE_CONTENT,i)}},{key:"setGemiusPrism",value:function(e,t){var i=new U.default(e,this._richPlayer,t),n=new F.default(this._richPlayer,i),o=new j.default(this._richPlayer,i);this._trackerCtrl.addTracker(g.default.MODE_IDLE,i),this._trackerCtrl.addTracker(g.default.MODE_CONTENT,n),this._trackerCtrl.addTracker(g.default.MODE_AD,o)}},{key:"setIm",value:function(e){this._adsManager.init(e)}},{key:"setPlaylist",value:function(e){var t=this;if(!l.default.hasInterface(e,S.default))throw X.createError(r.default.SETTING,"Argument must be an instance of Playlist.");this.reset(),this._playbackChain.then(function(){return t._playlist=e,t._playlist.setRange(t._settings.range),t._prepareCurrentItem()}).then(function(){if(t._wasPlayed)return t._launchContent()},function(e){var i=t.getErrorIfIsReason(e);i&&t._handleError(i)})}},{key:"setQuality",value:function(e){var t=this;this._playbackChain.then(function(){t._richPlayer.setQuality(e)})}},{key:"setVolume",value:function(e){if("number"!=typeof e||isNaN(e))throw X.createError(r.default.SETTING,"Argument must be a number.");if(e<0||e>1)throw X.createError(r.default.SETTING,"Argument must be between 0 and 1.");this._richPlayer.setVolume(e)}},{key:"setMute",value:function(e){if("boolean"!=typeof e)throw X.createError(r.default.SETTING,"Argument must be a boolean.");this._richPlayer.setMute(e)}},{key:"setTextTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._richPlayer.setTextTrack(e)}},{key:"setControlsHidden",value:function(e){this._richPlayer.setControlsHidden(e)}},{key:"setOverlays",value:function(e){this._richPlayer.setOverlays(e)}},{key:"addTracker",value:function(e,t){if(!i.mode[e])throw r.default.createError(r.default.SETTING,'Invalid mode "'+e+'".');this._trackerCtrl.addTracker(e,t)}},{key:"removeTracker",value:function(e,t){if(!i.mode[e])throw r.default.createError(r.default.SETTING,'Invalid mode "'+e+'".');this._trackerCtrl.removeTracker(e,t)}},{key:"play",value:function(){var e=this;this._richPlayer.isReady()?(this._splash.isShown()&&this._splash.hide(),this._playbackChain.then(function(){e._richPlayer.play()})):(this._initRichMediaPlayer(),this._playbackChain.then(function(){return e._getRichMediaPlayerReadyPromise().then(function(){return e._launchContent()})}).then(function(){e._wasPlayed=!0,e._richPlayer.play()}))}},{key:"pause",value:function(){var e=this;this._playbackChain.then(function(){e._richPlayer.pause()})}},{key:"stop",value:function(){var e=this;this._playbackChain.then(function(){e._richPlayer.stop()})}},{key:"seek",value:function(e){var t=this;this._playbackChain.then(function(){t._richPlayer.seek(e)})}},{key:"enterFullscreen",value:function(){this._richPlayer.enterFullscreen()}},{key:"exitFullscreen",value:function(){this._richPlayer.exitFullscreen()}},{key:"reset",value:function(){var e=this,t=this._playbackChain,i=null,n=new Promise(function(e,t){i=e});return this._transition.deactivate(),this._adsManager.reset(),this._playbackChain=new m.default,this._playbackChain.then(function(){return t.cancel()}).then(function(){return e._richPlayer.reset()}).then(function(){e._originalContent=e._content=null,e._playlist=null,e._isLoadingDialogShown=!1,e._isContentSet=!1,i()}),n}},{key:"destroy",value:function(){var e=this;this._playbackChain.then(function(){e.emit(y.default.EVENT_DESTROYING),e._richPlayer.destroy(),e._playlist=null})}},{key:"_initRichMediaPlayer",value:function(){var e=this._storage.get("muted")||this._richPlayer.getInitMute(),t=this._storage.get("volume");this._splash.hide(),this._richPlayer.setSourcePreload(!0),this._richPlayer.init(),this._richPlayer.play(!0),"number"==typeof t&&!isNaN(t)&&t>=0&&t<=1&&this._richPlayer.setVolume(t),null!==e&&this._richPlayer.setMute(!!e)}},{key:"_getRichMediaPlayerReadyPromise",value:function(){var t=this;if(this._richPlayer.isReady())return Promise.resolve();var i=function(){var e=null,i=new Promise(function(t,i){e=t}),n=t._richPlayer.constructor.EVENT_READY;return t._richPlayer.once(n,function(){e()}),{v:i}}();return"object"===("undefined"==typeof i?"undefined":e.typeof(i))?i.v:void 0}},{key:"_moveToNext",value:function(){var e=this,t=null,i=null,n=new Promise(function(e,n){t=e,i=n});return this._playlist.getFollowing().then(function(i){var n=i&&i[0]&&i[0].id;n&&e._playlist.moveTo(n),t(!!n)}),n}},{key:"_prepareCurrentItem",value:function(){var e=this;return this._playlist.getCurrent().then(function(t){return e._setContent(t)})}},{key:"_setContent",value:function(e){if(!e.id)throw X.createError(r.default.SETTING,"Content ID must be specified.");if("string"!=typeof e.id)throw X.createError(r.default.SETTING,"Content ID must be a string.");if(!e.source)throw X.createError(r.default.SETTING,"Content source must be specified.");var t=e.streamingType||(e.source.options&&e.source.options.type?e.source.options.type.toLowerCase():"vod"),n="disableAdaptive"in e?e.disableAdaptive:!!e.source.options&&!!e.source.options.disableAdaptive,o=void 0;"undefined"!=typeof e.forcedQualityIdx&&(o=e.forcedQualityIdx);var s=void 0;"function"==typeof e.forcedQualityFunc&&(s=e.forcedQualityFunc);var a=e.startTime,l=this._storage.get("qualityIdx"),u=this._storage.get("bandwidth"),c=Object.assign({},e,{source:y.default.copySource(e.source),textSource:y.default.copySource(e.textSource),streamingType:t,disableAdaptive:n,startTime:a,forcedQualityIdx:o,forcedQualityFunc:s,storedQualityIdx:l,bandwidth:u});this._originalContent=e,this._content=c,this._splash.setContent(c),this.emit(i.EVENT_CONTENT_SET,{content:e})}},{key:"_launchContent",value:function(){return this._resolveAndSetContent(this._content)}},{key:"_resolveAndSetContent",value:function(t){var i=this,n=l.default.clone(this._playlist.getOverlayConfig()),s=this._adsManager.provideOverlays(n),r=l.default.clone(this._playlist.getSponsorConfig()),a=this._adsManager.provideSponsors(r),u=l.default.clone(this._playlist.getVariablePrerollConfig()),c=this._adsManager.provideVariablePrerolls(u),d=l.default.clone(this._playlist.getPrerollConfig()),_=this._adsManager.providePrerolls(d),h=l.default.clone(this._playlist.getPpConfig()),f=t.source,p=f.type&&f.type===o.typeSpl?this._resolveSpl(t):Promise.resolve(t);if(h){var m=Object.assign({},h);Array.isArray(m.offset)||(m.offset=[m.offset]),this._adsManager.servePp(m)}return Promise.all([p,_,c,a,s]).then(function(t){var n=e.slicedToArray(t,5),o=n[0],s=n[1],r=n[2],a=n[3],l=n[4];return i._serveContent(o,s,r,a,l)}).catch(function(e){var t=i.getErrorIfIsReason(e);t&&i._handleError(t)})}},{key:"_resolveSpl",value:function(e){var t=this;this._splResource||(this._splResource=(0,R.default)()),this._isLoadingDialogShown=!1;var i=e.source.src,n=e.source.options||{},o=n.scheme||l.default.getUrlScheme(i),s=n.type?n.type.toUpperCase():"",r="number"==typeof n.cutFrom&&n.cutFrom,a="number"==typeof n.cutTo&&n.cutTo,u=function(){t._showLoadingDialog()};return this._splResource.resolveAndGet(i,{cutFrom:r,cutTo:a,scheme:o,type:s,reloadCallback:u}).then(function(t){var i=P.default.createSource(t);return e.source=i,e})}},{key:"_showLoadingDialog",value:function(){this._isLoadingDialogShown||(this._isLoadingDialogShown=!0,this._richPlayer.showDialog({kind:"alert",title:"",content:"Přenos bude za okamžik zahájen."}))}},{key:"_serveContent",value:function(e){return this._richPlayer.setContent(e)}},{key:"_obtainMidroll",value:function(){var e=l.default.clone(this._playlist.getMidrollConfig());this._adsManager.provideMidrolls(e)}},{key:"_obtainPostroll",value:function(){var e=l.default.clone(this._playlist.getPostrollConfig());this._adsManager.providePostrolls(e)}},{key:"_obtainCM",value:function(){var e=l.default.clone(this._playlist.getCMConfig());this._adsManager.provideCM(e)}},{key:"_getNextItem",value:function(){return this._playlist.getFollowing().then(function(e){return e&&e[0]})}},{key:"_handleVolumeChange",value:function(e){var t=e.muted,n=e.level;this._isContentSet&&(this._storage.set("muted",t),this._storage.set("volume",n)),this.emit(i.EVENT_VOLUME_CHANGE,e)}},{key:"_handleQualitySet",value:function(e){if(!e.autoset){var t=e.qualityIdx;this._storage.set("qualityIdx",t),this.emit(i.EVENT_QUALITY_SET,e)}}},{key:"_handleTextTrackSet",value:function(e){var t=e.textTrackIdx;this._storage.set("textTrackIdx",t),this.emit(i.EVENT_TEXT_TRACK_SET,e)}},{
key:"_handlePlaying",value:function(e){this._transition.deactivate(),this._richPlayer.hideDialog(),this._dispatchPlaying(e),e.first&&!this._richPlayer.isAdMode()&&this._obtainMidroll()}},{key:"_handleNearEnd",value:function(){var e=this;this._obtainPostroll(),this._obtainCM(),this._getNextItem().then(function(t){t&&e._transition.setContent(t)})}},{key:"_handleProgrammeBegin",value:function(){this.emit(i.EVENT_PROGRAMME_BEGIN)}},{key:"_handleProgrammeEnd",value:function(){var e=this;this.emit(i.EVENT_PROGRAMME_END),this._richPlayer.isDisplayingAdScreen()||this._getNextItem().then(function(t){t&&(e._richPlayer.exitFullscreen(),e._transition.activate())})}},{key:"_handleSegmentLoaded",value:function(e){var t=e.bandwidth;t&&this._storage.set("bandwidth",t)}},{key:"_handleContentReady",value:function(e){this._handleItemReady(),this.emit(i.EVENT_CONTENT_READY,e)}},{key:"_handleContentSet",value:function(e){this._isContentSet=!0}},{key:"_handleAdReady",value:function(e){this._handleItemReady()}},{key:"_handleItemReady",value:function(){var e=this._storage.get("textTrackIdx");this._richPlayer.hasTextTrack(e)&&this._richPlayer.setTextTrack(e)}},{key:"_handleError",value:function(e){var t=this,n=!this._richPlayer.isAdMode();if("undefined"==typeof e.category&&(e.category=r.default.UNSPECIFIED),e.category!==r.default.AD_IM_REQUEST||!this._isAdBlockDetected()){this._logError(e);try{this.emit(i.EVENT_ERROR,e)}catch(e){}}this._isFatalError(e,n)&&this.reset().then(function(){t._richPlayer.exitFullscreen(),t._richPlayer.showDialog({kind:"alert",title:"",content:e.category===r.default.SOURCE_TECH?"Video není možné ve vašem zařízení přehrát.":"Video se nepodařilo přehrát."})})}},{key:"_isAdBlockDetected",value:function(){return!this._adBlockElement.offsetWidth}},{key:"_isFatalError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t&&e.category!==r.default.SETTING&&e.category!==r.default.TEXTSOURCE&&e.category.indexOf(r.default.AD)===-1}},{key:"_logError",value:function(e){var t=this;if(this._dot){var i={action:"player-error",playerversion:this.getNameAndVersion(),playertech:this._richPlayer.getTechName(),category:e.category,mode:this._richPlayer.isAdMode()?"ad":"content"};this._content&&(i.videoid=this._content.id),this._dot.hit("event",{d:i})}try{var n=function(){return t._dot&&t._dot._cfg&&t._dot._cfg.service?t._dot._cfg.service:window.location.hostname},o=function(){var e=t._richPlayer.getContent();return e?e.id:""},s=function(){var e=t._richPlayer.getCurrentAd();return e?e.id:""},r=function(){var e=t._richPlayer.getCurrentTime(),i=t._richPlayer.getBuffered(e);return i?"start:"+i.start+",end:"+i.end+",length:"+i.length:""},a=new _.default(l.default,{method:"POST"}),u={playerversion:this.getNameAndVersion(),playertech:this._richPlayer.getTechName(),category:e.category,source:e.source,mode:this._richPlayer.isAdMode()?"ad":"content",message:e.message,materialid:this._richPlayer.isAdMode()?s():o(),imresponses:e.responses||[],playbacktime:this._richPlayer.getCurrentTime(),buffered:r(),currentsrc:this._richPlayer.getCurrentSrc(),currenttime:this._richPlayer.getCurrentTime(),useragent:window.navigator.userAgent,stack:e.stack||""},c={log:u,service:n(),component:"player"};a.setHeaders({"Content-Type":"application/json"}),a.send(W,JSON.stringify(c))}catch(e){}}},{key:"_dispatchTechReady",value:function(){this.emit(i.EVENT_TECH_READY)}},{key:"_dispatchPlaying",value:function(e){this.emit(i.EVENT_PLAYING,e)}},{key:"_dispatchPaused",value:function(e){this.emit(i.EVENT_PAUSED,e)}},{key:"_dispatchStopped",value:function(e){this.emit(i.EVENT_STOPPED,e)}},{key:"_dispatchEnded",value:function(e){this.emit(i.EVENT_ENDED,e)}},{key:"_dispatchSeeked",value:function(e){this.emit(i.EVENT_SEEKED,e)}},{key:"_dispatchTimeupdate",value:function(e){this.emit(i.EVENT_TIMEUPDATE,e)}},{key:"_dispatchFSChange",value:function(e){this.emit(i.EVENT_FULLSCREEN_CHANGE,e)}},{key:"_dispatchPlayContent",value:function(e){this.emit(i.EVENT_CONTENT_SWITCH,e)}},{key:"_dispatchActionClick",value:function(e){this.emit(i.EVENT_ACTION_CLICKTHROUGH,e)}}]),i}(f.default);J.mode={AD:g.default.MODE_AD,CONTENT:g.default.MODE_CONTENT},J.EVENT_TECH_READY="techready",J.EVENT_PROGRAMME_BEGIN="programme-begin",J.EVENT_PROGRAMME_END="programme-end",J.EVENT_CONTENT_SET="content-set",J.EVENT_CONTENT_READY="content-ready",J.EVENT_PLAYING="playing",J.EVENT_PAUSED="paused",J.EVENT_STOPPED="stopped",J.EVENT_ENDED="ended",J.EVENT_SEEKED="seeked",J.EVENT_TIMEUPDATE="timeupdate",J.EVENT_VOLUME_CHANGE="volumechange",J.EVENT_FULLSCREEN_CHANGE="fullscreenchange",J.EVENT_TEXT_TRACK_SET="texttrackset",J.EVENT_CONTENT_SWITCH="contentswitch",J.EVENT_ACTION_CLICKTHROUGH="actionclickthrough",J.EVENT_ERROR="error",J.EVENT_DESTROYING="destroying",n.default=J}).call(this,"/src\\js\\sznplayer\\SznRichMediaPlayer.js")},{"../common/CancelableChain":9,"../common/Component":10,"../common/Request":13,"../common/constants":16,"../common/env":17,"../common/errors":18,"../common/utils":23,"../mediaplayer/tech/Tech":42,"../richmediaplayer/RichMediaPlayer":54,"../richmediaplayer/tracking/TrackerController":84,"./Playlist":94,"./SplashScreen":96,"./StorageService":98,"./Transition":100,"./ad/AdsManager":107,"./analytics/GemiusPrismAdTracker":121,"./analytics/GemiusPrismContentTracker":122,"./analytics/GemiusPrismTracker":123,"./analytics/GemiusStreamTracker":124,"./analytics/SznTracker":125,"./overlay/OverlaysManager":127,"./spl/SplResource":129,"./spl/createSplResource":130}],100:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("events"),s=e.interopRequireDefault(o),r=t("../common/Component"),a=e.interopRequireDefault(r),l=t("../common/uiDom"),u=t("../widgets/Teaser"),c=e.interopRequireDefault(u),d=function(t){function i(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.classCallCheck(this,i);var r=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return r._utils=t,r._player=n,r._settings={waitingTime:"waitingTime"in o?o.waitingTime:1e4,modestMode:!("modestMode"in o)||o.modestMode,animationTime:800},r._uiEventEmitter=new s.default,r._teaser=new c.default,r._state={id:"",poster:"",title:"",subtitle:"",label:"Následuje",close:"Zrušit",closeDisplayed:!1,onTeaserClick:function(){r._handleTeaserClick()},onCloseClick:function(){r._handleCancelClick()},time:0,timerColor:"#cc1c01",onTimer:r._dispatchNextRequest.bind(r)},r._dom={root:(0,l.createElm)("div",{className:"sznp-transition "+(r._settings.modestMode?"sznp-transition-modest":"sznp-transition-grand")}),refs:{player:(0,l.createElm)("div",{className:"sznp-transition-player"}),teaser:(0,l.createElm)("div",{className:"sznp-transition-teaser"})}},r._content=null,r._teaser.uiInit(),r._teaser.uiSetEventEmitter(r._uiEventEmitter),r._teaser.uiBuild(),(0,l.elm)(r._dom.root).append((0,l.elm)(r._dom.refs.player).append(r._player.getElement()),(0,l.elm)(r._dom.refs.teaser).append(r._teaser.uiGetElement())),r.deactivate(),r}return e.inherits(i,t),e.createClass(i,[{key:"getElement",value:function(){return this._dom.root}},{key:"setContent",value:function(e){this._content=e,this._state.id=e.id||"",this._state.title=e.title||"",this._state.subtitle=e.subtitle||"",this._state.poster=e.poster||"",this._teaser.uiUpdate(this._state)}},{key:"activate",value:function(){var e=this;this._cancelTimer(),this._dom.root.classList.add("sznp-transition-active"),setTimeout(function(){e._dom.root.classList.remove("sznp-transition-animation")},this._settings.animationTime),this._startTimer();var t=this._dom.refs.teaser.clientWidth,i=this._getStrLenByWidth(t);this._state.title=this._utils.cutText(this._state.title,i),this._state.closeDisplayed=!0,this._teaser.uiUpdate(this._state)}},{key:"deactivate",value:function(){var e=this;this._cancelTimer(),this._dom.root.classList.remove("sznp-transition-active"),setTimeout(function(){e._dom.root.classList.add("sznp-transition-animation")},this._settings.animationTime)}},{key:"_getStrLenByWidth",value:function(e){return e<305?20:e<400?55:200}},{key:"_startTimer",value:function(){this._state.time=this._settings.waitingTime,this._teaser.uiUpdate(this._state)}},{key:"_cancelTimer",value:function(){this._state.time=0,this._teaser.uiUpdate(this._state)}},{key:"_dispatchNextRequest",value:function(){this.emit(i.EVENT_CONTENT_SWITCH,{content:this._content})}},{key:"_handleCancelClick",value:function(){this._cancelTimer(),this._state.closeDisplayed=!1,this._teaser.uiUpdate(this._state)}},{key:"_handleTeaserClick",value:function(){this._cancelTimer(),this._dispatchNextRequest()}}]),i}(a.default);d.EVENT_CONTENT_SWITCH="playcontent",n.default=d},{"../common/Component":10,"../common/uiDom":20,"../widgets/Teaser":159,events:1}],101:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,[{key:"hasLinear",value:function(){throw new Error('[Ad] Method "hasLinear" is not implemented.')}},{key:"hasNonLinear",value:function(){throw new Error('[Ad] Method "hasNonLinear" is not implemented.')}},{key:"getId",value:function(){throw new Error('[Ad] Method "getId" is not implemented.')}},{key:"getType",value:function(){throw new Error('[Ad] Method "getType" is not implemented.')}},{key:"getLinear",value:function(){throw new Error('[Ad] Method "getLinear" is not implemented.')}},{key:"getNonLinear",value:function(){throw new Error('[Ad] Method "getNonLinear" is not implemented.')}},{key:"getImpressions",value:function(){throw new Error('[Ad] Method "getImpressions" is not implemented.')}},{key:"getTrackingEvents",value:function(){throw new Error('[Ad] Method "getTrackingEvents" is not implemented.')}},{key:"getVideoClicks",value:function(){throw new Error('[Ad] Method "getVideoClicks" is not implemented.')}},{key:"getIcons",value:function(){throw new Error('[Ad] Method "getIcons" is not implemented.')}},{key:"getErrors",value:function(){throw new Error('[Ad] Method "getErrors" is not implemented.')}},{key:"getSpecIndex",value:function(){throw new Error('[Ad] Method "getSpecIndex" is not implemented.')}},{key:"setSpecIndex",value:function(e){throw new Error('[Ad] Method "setSpecIndex" is not implemented.')}},{key:"addExternalImpressions",value:function(e){throw new Error('[Ad] Method "addExternalImpressions" is not implemented.')}},{key:"addExternalSkipOffset",value:function(e){throw new Error('[Ad] Method "addExternalSkipOffset" is not implemented.')}}]),t}();n.default=o},{}],102:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=t("../../richmediaplayer/tracking/TrackUtils"),a=e.interopRequireDefault(r),l=t("./im/ImResource"),u=e.interopRequireDefault(l),c=t("./vast/XmlUtils"),d=e.interopRequireDefault(c),_=t("../../common/utils"),h=(e.interopRequireDefault(_),function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._ads=[],n._currentAd=null,n._duration=NaN,n._player=t,n._sentEvents={},n._lastTime=null,n._isMuted=null,n}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e){this._currentAd=this._getAd(e.id),e.duration&&this.setDuration(e.duration),this._isMuted=this._player.isMuted()}},{key:"finish",value:function(){var e=this._ads.indexOf(this._currentAd);e>-1&&this._ads.splice(e,1),this._currentAd=null,this._duration=NaN,this._sentEvents={},this._lastTime=null,this._isMuted=null,this._player.removeVisualElements()}},{key:"setDuration",value:function(e){this._duration=e}},{key:"track",value:function(e,t){var i=this;if(this._currentAd){var n=this._currentAd.getTrackingEvents(u.default.character.LINEAR)||{};if("IMPRESSION"===e&&(this._sentEvents.impression||(this._sentEvents.impression=!0,a.default.track(this._currentAd.getImpressions()))),"PLAYING"===e&&(t.first?(n.creativeView&&a.default.track(n.creativeView),this._sentEvents.impression||(this._sentEvents.impression=!0,a.default.track(this._currentAd.getImpressions()))):n.resume&&a.default.track(n.resume)),"PAUSED"===e&&n.pause&&a.default.track(n.pause),"TIMEUPDATE"===e&&(this._lastTime=t.time),"PLAYBACK_PROGRESS"===e&&(n.progress&&null!==t.time&&n.progress.forEach(function(e){var n=!1;n="%"===e.offset.charAt(e.offset.length-1)?t.percent>=parseInt(e.offset,10):t.time>=e.offset,n&&(i._sentEvents[e.offset]=!0,a.default.track(e.url))}),n.start&&!this._sentEvents.start&&(this._sentEvents.start=!0,a.default.track(n.start)),n.firstQuartile&&!this._sentEvents.firstQuartile&&t.percent>=25&&(this._sentEvents.firstQuartile=!0,a.default.track(n.firstQuartile)),n.midpoint&&!this._sentEvents.midpoint&&t.percent>=50&&(this._sentEvents.midpoint=!0,a.default.track(n.midpoint)),n.thirdQuartile&&!this._sentEvents.thirdQuartile&&t.percent>=75&&(this._sentEvents.thirdQuartile=!0,a.default.track(n.thirdQuartile)),n.complete&&!this._sentEvents.complete&&t.percent>=100&&(this._sentEvents.complete=!0,a.default.track(n.complete))),"SEEKING"===e&&this._lastTime&&t.time<this._lastTime&&n.rewind&&(this._lastTime=t.time,a.default.track(n.rewind)),"SKIP"===e&&n.skip){var o=t.time/this._duration,s=isFinite(o)?Math.round(100*o):25;a.default.track(n.skip,{PERCENT:s})}if("VOLUME_CHANGE"===e&&(n.mute&&t.muted&&!this._isMuted&&(this._isMuted=!0,a.default.track(n.mute)),n.unmute&&!t.muted&&this._isMuted&&(this._isMuted=!1,a.default.track(n.unmute))),"FULLSCREEN_CHANGE"===e&&(t.isFullscreen?n.playerExpand?a.default.track(n.playerExpand):n.fullscreen&&a.default.track(n.fullscreen):n.playerCollapse?a.default.track(n.playerCollapse):n.exitFullscreen&&a.default.track(n.exitFullscreen)),"VIDEO_CLICKTHROUGH"===e){var r=this._currentAd.getVideoClicks();r&&r.clickTrackings&&r.clickTrackings.length&&a.default.track(r.clickTrackings,{ASSETURI:this._player.getCurrentSrc(),CONTENTPLAYHEAD:d.default.getFormattedTime(this._player.getCurrentTime())})}if("VE_DISPLAYED"===e){var l=this._getIcon(t.id);l&&l.viewTrackings&&l.viewTrackings.length&&a.default.track(l.viewTrackings)}if("VE_CLICKTHROUGH"===e){var c=this._getIcon(t.id);c&&c.clickTrackings&&c.clickTrackings.length&&a.default.track(c.clickTrackings)}if("USER_ACCEPT_INVITATION"===e&&n.acceptInvitationLinear&&a.default.track(n.acceptInvitationLinear),"USER_MINIMIZE"===e&&n.collapse&&a.default.track(n.collapse),"USER_CLOSE"===e&&n.closeLinear&&a.default.track(n.closeLinear),"ERROR"===e){var _=this._currentAd.getErrors();t.hitData&&_&&a.default.track(_,t.hitData)}}}},{key:"register",value:function(e){this._ads.push(e)}},{key:"_getAd",value:function(e){for(var t=0,i=this._ads.length;t<i;t++)if(this._ads[t].getId()===e)return this._ads[t];return null}},{key:"_getIcon",value:function(e){var t=this._currentAd.getIcons();if(!t)return null;for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i];return null}}]),i}(s.default));n.default=h},{"../../common/utils":23,"../../richmediaplayer/tracking/TrackUtils":82,"../../richmediaplayer/tracking/Tracker":83,"./im/ImResource":115,"./vast/XmlUtils":120}],103:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=t("../../richmediaplayer/tracking/TrackUtils"),a=e.interopRequireDefault(r),l=function(t){function i(){e.classCallCheck(this,i);var t=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return t._currentContentId="",t._misses={},t}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e){this._currentContentId=e.id}},{key:"finish",value:function(){this._clearMisses(),this._currentContentId=""}},{key:"track",value:function(e,t){"PLAYING"!==e&&"TIMEUPDATE"!==e||!this._misses[this._currentContentId]||(a.default.track(this._misses[this._currentContentId]),this._clearMisses())}},{key:"register",value:function(e,t){this._misses[e]=this._misses[e]||[],this._misses[e].push(t)}},{key:"_clearMisses",value:function(){this._misses[this._currentContentId]&&(this._misses[this._currentContentId]=void 0)}}]),i}(s.default);n.default=l},{"../../richmediaplayer/tracking/TrackUtils":82,"../../richmediaplayer/tracking/Tracker":83}],104:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=t("../../richmediaplayer/tracking/TrackUtils"),a=e.interopRequireDefault(r),l=t("./im/ImResource"),u=e.interopRequireDefault(l),c=t("../../common/utils"),d=(e.interopRequireDefault(c),function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._currentContentId="",n._ads={},n._player=t,n}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e){this._currentContentId=e.id}},{key:"finish",value:function(){this._ads[this._currentContentId]&&(this._ads[this._currentContentId]=void 0),this._currentContentId=""}},{key:"track",value:function(e,t){if(this._ads[this._currentContentId])for(var i=0;i<this._ads[this._currentContentId].length;i++){var n=this._ads[this._currentContentId][i],o=n.ad.getTrackingEvents(u.default.character.NONLINEAR)||{};if("VE_DISPLAYED"===e&&(n.sentEvents.impress||(n.sentEvents.impress=!0,a.default.track(n.ad.getImpressions())),o.creativeView&&!n.sentEvents.creativeView&&(n.sentEvents.creativeView=!0,a.default.track(o.creativeView))),"VE_CLICKTHROUGH"===e){var s=this._getCreative(n.nonLinear,t.id);s&&s.clickTrackings&&s.clickTrackings.length&&a.default.track(s.clickTrackings)}if("VE_CLOSE"===e){var r=this._getCreative(n.nonLinear,t.id);r&&o.close&&a.default.track(o.close)}}}},{key:"register",value:function(e,t,i){this._ads[e]=this._ads[e]||[],this._ads[e].push({ad:t,nonLinear:i,sentEvents:{}})}},{key:"_getCreative",value:function(e,t){for(var i=0;i<e.creatives.length;i++)if(e.creatives[i].id===t)return e.creatives[i];return null}}]),i}(s.default));n.default=d},{"../../common/utils":23,"../../richmediaplayer/tracking/TrackUtils":82,"../../richmediaplayer/tracking/Tracker":83,"./im/ImResource":115}],105:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/Component"),s=e.interopRequireDefault(o),r=function(t){function i(){return e.classCallCheck(this,i),e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return e.inherits(i,t),e.createClass(i,[{key:"getAd",value:function(){throw new Error('[AdStore] Method "getAd" is not implemented.')}},{key:"getReplacementAd",value:function(){throw new Error('[AdStore] Method "getReplacementAd" is not implemented.')}},{key:"getExternalImpressions",value:function(){throw new Error('[AdStore] Method "getExternalImpressions" is not implemented.')}},{key:"getExternalMiss",value:function(){throw new Error('[AdStore] Method "getExternalMiss" is not implemented.')}},{key:"getExternalSkipOffset",value:function(){throw new Error('[AdStore] Method "getExternalSkipOffset" is not implemented.')}},{key:"getSpecIndex",value:function(){throw new Error('[AdStore] Method "getSpecIndex" is not implemented.')}},{key:"setSpecIndex",value:function(e){throw new Error('[AdStore] Method "setSpecIndex" is not implemented.')}},{key:"setExternalImpressions",value:function(e){throw new Error('[AdStore] Method "setExternalImpressions" is not implemented.')}},{key:"setExternalMiss",value:function(e){throw new Error('[AdStore] Method "setExternalMiss" is not implemented.')}},{key:"setExternalSkipOffset",value:function(e){throw new Error('[AdStore] Method "setExternalSkipOffset" is not implemented.')}}]),i}(s.default);r.EVENT_ERROR="error",n.default=r},{"../../common/Component":10}],106:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={checkAdsConfig:function(t){if(!t)return o._invalid("AdsConfig must be specified.");if("object"!==("undefined"==typeof t?"undefined":e.typeof(t)))return o._invalid("AdsConfig must be an object.");if(t.sponsor){var i=o.checkSponsorConfig(t.sponsorConfig);if(!i.valid)return i}if(t.variablePreroll){var n=o.checkVariablePrerollConfig(t.variablePreroll);if(!n.valid)return n}if(t.preroll){var s=o.checkPrerollConfig(t.preroll);if(!s.valid)return s}if(t.midroll){var r=o.checkMidrollConfig(t.midroll);if(!r.valid)return r}if(t.postroll){var a=o.checkPostrollConfig(t.postroll);if(!a.valid)return a}if(t.cm){var l=o.checkCMConfig(t.cm);if(!l.valid)return l}return o._valid()},checkSponsorConfig:function(t){return"object"!==("undefined"==typeof t?"undefined":e.typeof(t))?o._invalid("SponsorConfig must be an object."):"object"!==e.typeof(t.spec)?o._invalid("SponsorConfig.spec must be an object."):o._valid()},checkVariablePrerollConfig:function(e){return o.checkPrerollConfig(e)},checkPrerollConfig:function(t){return"object"!==("undefined"==typeof t?"undefined":e.typeof(t))?o._invalid("PrerollConfig must be an object."):"object"!==e.typeof(t.spec)?o._invalid("PrerollConfig.spec must be an object."):o.isSkipOffsetValid(t.skipOffset)?o._valid():o._invalid("PrerollConfig.skipOffset must be a number or an array of numbers.")},checkMidrollConfig:function(t){if("object"!==("undefined"==typeof t?"undefined":e.typeof(t)))return o._invalid("MidrollConfig must be an object.");if("object"!==e.typeof(t.spec))return o._invalid("MidrollConfig.spec must be an object.");if(!o.isSkipOffsetValid(t.skipOffset))return o._invalid("MidrollConfig.skipOffset must be a number or an array of numbers.");var i=null;if(i=Array.isArray(t.point)?t.point:[t.point],Array.isArray(t.spec)&&t.spec.length&&i.length>t.spec.length)return o._invalid("MidrollConfig.point array cannot have more elements than spec array.");for(var n=i.length-1;n>=0;n--){var s=o.checkAdPoint(i[n]);if(!s.valid)return s}return o._valid()},checkPostrollConfig:function(t){return"object"!==("undefined"==typeof t?"undefined":e.typeof(t))?o._invalid("PostrollConfig must be an object."):"object"!==e.typeof(t.spec)?o._invalid("PostrollConfig.spec must be an object."):o.isSkipOffsetValid(t.skipOffset)?o._valid():o._invalid("PostrollConfig.skipOffset must be a number or an array of numbers.")},checkCMConfig:function(t){return"object"!==("undefined"==typeof t?"undefined":e.typeof(t))?o._invalid("CMConfig must be an object."):"object"!==e.typeof(t.spec)?o._invalid("CMConfig.spec must be an object."):o._valid()},checkAdPoint:function(t){return t?"object"!==("undefined"==typeof t?"undefined":e.typeof(t))?o._invalid("AdPoint must be an object."):"number"==typeof t.time||"string"==typeof t.time&&/^\d+(\.\d+)?%$/.test(t.time)?o._valid():o._invalid('AdPoint.time must be a number or a string matching the "\\d+%" pattern, '+t.time+" was provided"):o._invalid("AdPoint must be specified.")},isSkipOffsetValid:function(e){return Array.isArray(e)?e.every(function(e){return"number"==typeof e}):"number"==typeof e},_valid:function(){return{valid:!0}},_invalid:function(e){return{message:e,valid:!1}}};n.default=o},{}],107:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/errors"),s=e.interopRequireDefault(o),r=t("../../common/Component"),a=e.interopRequireDefault(r),l=t("./AdsConfigValidator"),u=e.interopRequireDefault(l),c=t("./im/ImResource"),d=e.interopRequireDefault(c),_=t("./AdStore"),h=e.interopRequireDefault(_),f=t("./IconsManager"),p=e.interopRequireDefault(f),m=t("./NonLinearAdsManager"),v=e.interopRequireDefault(m),y=t("./AdLinearTracker"),E=e.interopRequireDefault(y),g=t("./AdNonLinearTracker"),k=e.interopRequireDefault(g),T=t("./AdMissTracker"),C=e.interopRequireDefault(T),S=t("../../richmediaplayer/tracking/TrackUtils"),b=e.interopRequireDefault(S),P=t("../../richmediaplayer/RichMediaPlayer"),A=e.interopRequireDefault(P),R=new s.default.ErrorFactory(s.default.createSourceName(i)),N=function(t){function i(t,n){e.classCallCheck(this,i);var o=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o._richPlayer=t,o._trackerCtrl=n,o._iconsManager=null,o._linearAdTracker=null,o._nonLinearAdTracker=null,o._nonLinearAdsManager=null,o._missTracker=null,o._imResource=null,o._overlays=null,o._sponsors=null,o._variablePrerolls=null,o._prerolls=null,o._adPoints=[],o._midrolls=null,o._postrolls=null,o._overStartOffset=-1,o._overCloseOffset=-1,o._vpreSkipOffset=-1,o._preSkipOffset=-1,o._midSkipOffset=-1,o._postSkipOffset=-1,o._cm=null,o._cmImpresses=null,o._cmMiss="",o._pp=null,o._ppShown=!1,o._eventsMap=new Map([[A.default.EVENT_CONTENT_SET,o._handleContentSet],[A.default.EVENT_CONTENT_BEGIN,o._handleContentBegin],[A.default.EVENT_ADPOINT,o._handleAdPoint],[A.default.EVENT_ENDED,o._handleEnded],[A.default.EVENT_ENDADSCREEN_POINT,o._handleAdScreen],[A.default.EVENT_TIMEUPDATE,o._handleTimeupdate]]),o}return e.inherits(i,t),e.createClass(i,[{key:"init",value:function(e){this._imResource=new d.default(e),this._iconsManager=new p.default(this._richPlayer),this._linearAdTracker=new E.default(this._richPlayer),this._nonLinearAdTracker=new k.default(this._richPlayer),this._nonLinearAdsManager=new v.default(this._richPlayer),this._missTracker=new C.default,this._trackerCtrl.addTracker(A.default.MODE_AD,this._iconsManager),this._trackerCtrl.addTracker(A.default.MODE_AD,this._linearAdTracker),this._trackerCtrl.addTracker(A.default.MODE_CONTENT,this._nonLinearAdTracker),this._trackerCtrl.addTracker(A.default.MODE_CONTENT,this._nonLinearAdsManager),this._trackerCtrl.addTracker(A.default.MODE_CONTENT,this._missTracker),this.bindAll(this._eventsMap),this.addListeners(this._richPlayer,this._eventsMap)}},{key:"_concatAds",value:function(t){var i=[];return t.forEach(function(t){if(t){var n=Array.isArray(t)?t:[t];i.push.apply(i,e.toConsumableArray(n))}}),i.length?i:null}},{key:"servePp",value:function(e){this._pp=e}},{key:"provideOverlays",value:function(e){var t=this;if(!this._imResource||!e||!u.default.checkSponsorConfig(e).valid||Array.isArray(e.spec)&&!e.spec.length)return Promise.resolve();this._overStartOffset=e.startOffset,this._overCloseOffset=e.closeOffset;var i=Array.isArray(e.spec)?e.spec:[e.spec],n=this._imResource.loadAds(i),o=null;return o=n.then(function(e){var i=e.map(function(e){return t._getRelevantAdData(e)});return Promise.all(i)},function(e){t._handleAdError(e)}).then(function(e){e&&(t._overlays=t._concatAds(e))})}},{key:"provideSponsors",value:function(e){var t=this;if(!this._imResource||!e||!u.default.checkSponsorConfig(e).valid||Array.isArray(e.spec)&&!e.spec.length)return Promise.resolve();var i=Array.isArray(e.spec)?e.spec:[e.spec],n=this._imResource.loadAds(i),o=null;return o=n.then(function(e){var i=e.map(function(e){return t._getRelevantAdData(e)});return Promise.all(i)},function(e){t._handleAdError(e)}).then(function(e){e&&(t._sponsors=t._concatAds(e))})}},{key:"provideVariablePrerolls",value:function(e){var t=this;if(!this._imResource||!e||!u.default.checkVariablePrerollConfig(e).valid||Array.isArray(e.spec)&&!e.spec.length)return Promise.resolve();this._vpreSkipOffset=e.skipOffset;var i=Array.isArray(e.spec)?e.spec:[e.spec],n=this._imResource.loadAds(i),o=null;return o=n.then(function(e){var i=e.map(function(e){return t._getRelevantAdData(e)});return Promise.all(i)},function(e){t._handleAdError(e)}).then(function(e){e&&(t._variablePrerolls=t._concatAds(e))})}},{key:"providePrerolls",value:function(e){var t=this;if(!this._imResource||!e||!u.default.checkPrerollConfig(e).valid||Array.isArray(e.spec)&&!e.spec.length)return Promise.resolve();this._preSkipOffset=e.skipOffset;var i=Array.isArray(e.spec)?e.spec:[e.spec];i.forEach(function(e){t._adjustSpec(e,"preroll")});var n=this._imResource.loadAds(i),o=null;return o=n.then(function(e){var i=e.map(function(e){return t._getRelevantAdData(e)});return Promise.all(i)},function(e){t._handleAdError(e)}).then(function(e){e&&(t._prerolls=t._concatAds(e))})}},{key:"provideMidrolls",value:function(e){var t=this;if(!this._imResource||!e||!u.default.checkMidrollConfig(e).valid||Array.isArray(e.spec)&&!e.spec.length)return Promise.resolve();this._midSkipOffset=e.skipOffset;var i=Array.isArray(e.point)?e.point:[e.point],n=this._richPlayer.getDuration(),o=!0,s=!1,r=void 0;try{for(var a,l=i[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var c=a.value;if(/^\d+(\.\d+)?%$/.test(c.time)){if(!n)throw new Error("Either the provideMidrolls has been called before the media source has been resolved, or the media's duration cannot be determined and relative time points therefore cannot be used.");c.time=parseFloat(c.time)/100*n}}}catch(e){s=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw r}}var d=Array.isArray(e.spec)?e.spec:[e.spec];d.forEach(function(e,t){i[t]||(i[t]=i[t-1])}),this._adPoints=i,d.forEach(function(e){t._adjustSpec(e,"midroll")});var _=this._imResource.loadAds(d),h=null;return h=_.then(function(e){var i=e.map(function(e){return t._getRelevantAdData(e)});return Promise.all(i)},function(e){t._handleAdError(e)}).then(function(e){if(e){t._midrolls=t._concatAds(e)||[];for(var i=[],n=0;n<t._midrolls.length;n++){var o=t._midrolls[n],s=o.error?o.specIndex:o.getSpecIndex(),r=o.error?null:o.getLinear();i.push(Object.assign({isSuccessful:!!r},t._adPoints[s]))}t._richPlayer.addMidrollPoint(i)}})}},{key:"providePostrolls",value:function(e){var t=this;if(!this._imResource||!e||!u.default.checkPostrollConfig(e).valid||Array.isArray(e.spec)&&!e.spec.length)return Promise.resolve();this._postSkipOffset=e.skipOffset;var i=Array.isArray(e.spec)?e.spec:[e.spec];i.forEach(function(e){t._adjustSpec(e,"postroll")});var n=this._imResource.loadAds(i),o=null;return o=n.then(function(e){var i=e.map(function(e){return t._getRelevantAdData(e)});return Promise.all(i)},function(e){t._handleAdError(e)}).then(function(e){e&&(t._postrolls=t._concatAds(e))})}},{key:"provideCM",value:function(e){var t=this;if(!this._imResource||!e)return Promise.resolve();var i=Array.isArray(e.spec)?e.spec:[e.spec],n=i.map(function(e){return d.default.character.NONLINEAR}),o=this._imResource.loadAds(i,n),s=null;return s=o.then(function(e){var i=e.map(function(e){return t._getRelevantAdData(e)});return Promise.all(i)},function(e){t._handleAdError(e)}).then(function(e){e&&(t._cm=e[0])})}},{key:"_adjustSpec",value:function(e,t){var i=this._richPlayer.isFeatureSupported("vast"),n=this._richPlayer.isFeatureSupported("vpaid");return e.collocation=""+(e.collocation?e.collocation+" ":"")+(""+t)+(""+(n?" vpaid":"")),e.flag=""+(e.flag?e.flag+" ":"")+(""+(i?"vast":"")),e}},{key:"_getRelevantAdData",value:function(e){var t=this,i=function(e){var i=e.error,n=e.urlTemplates,o=e.data;n&&n.length&&b.default.track(n,o),t._handleAdError(i)};return e.addListener(h.default.EVENT_ERROR,i),e.getAd().then(function(i){if(i)return Array.isArray(i)?t._getAdPodData(i,e):(t._addExternalParams(i,e),i);var n=e.getExternalMiss();return n?{error:n,specIndex:e.getSpecIndex()}:null}).catch(function(e){t._handleAdError(e)})}},{key:"_getAdPodData",value:function(e,t){var i=this,n=e.map(function(e){return e?(i._addExternalParams(e,t),Promise.resolve(e)):t.getReplacementAd().then(function(e){return e&&i._addExternalParams(e,t),e}).catch(function(e){Promise.reject(e)})});return Promise.all(n)}},{key:"_addExternalParams",value:function(e,t){var i=t.getSpecIndex();null!==i&&e.setSpecIndex(i);var n=t.getExternalImpressions();n&&(e.addExternalImpressions(n),t.setExternalImpressions(null));var o=t.getExternalSkipOffset();o&&e.addExternalSkipOffset(o)}},{key:"reset",value:function(){this._overlays=null,this._sponsors=null,this._variablePrerolls=null,this._prerolls=null,this._midrolls=null,this._postrolls=null,this._overStartOffset=-1,this._overCloseOffset=-1,this._vpreSkipOffset=-1,this._preSkipOffset=-1,this._midSkipOffset=-1,this._postSkipOffset=-1,this._cm=null,this._cmImpresses=null,this._cmMiss="",this._pp=null,this._ppShown=!1}},{key:"_handleContentSet",value:function(e){var t=e.content;
if(this._variablePrerolls){for(var i=0,n=this._variablePrerolls.length;i<n;i++){var o=this._variablePrerolls[i],r=Array.isArray(this._vpreSkipOffset)?this._vpreSkipOffset[i]:this._vpreSkipOffset;if(o.error)this._missTracker.register(t.id,o.error);else{var a={},l=o.getType();l===A.default.adRole.SPONSOR?a.layout="sponsor":l===A.default.adRole.PROMO?a.layout="promo":a.skipOffset=r;var u=o.getLinear(a),c=o.getIcons();if(u)this._linearAdTracker.register(o),c&&this._iconsManager.register(u.id,c),l===A.default.adRole.SPONSOR?this._richPlayer.setSponsor(u):l===A.default.adRole.PROMO?this._richPlayer.setPromo(u):this._richPlayer.setPreroll(u);else{var d=R.createError(s.default.AD,"No linear-ad found.");d.hitData={ERRORCODE:403},this._handleAdError(d)}}}this._variablePrerolls=null}if(this._prerolls){for(var _=0,h=this._prerolls.length;_<h;_++){var f=this._prerolls[_],p=Array.isArray(this._preSkipOffset)?this._preSkipOffset[_]:this._preSkipOffset;if(f.error)this._missTracker.register(t.id,f.error);else{var m=f.getLinear({skipOffset:p}),v=f.getIcons();if(m)this._linearAdTracker.register(f),v&&this._iconsManager.register(m.id,v),this._richPlayer.setPreroll(m);else{var y=R.createError(s.default.AD,"No linear-ad found.");y.hitData={ERRORCODE:403},this._handleAdError(y)}}}this._prerolls=null}if(this._sponsors){for(var E=0,g=this._sponsors.length;E<g;E++){var k=this._sponsors[E];if(k.error)this._missTracker.register(t.id,k.error);else{var T=k.getLinear({layout:"sponsor"}),C=k.getIcons();if(T)this._linearAdTracker.register(k),C&&this._iconsManager.register(T.id,C),this._richPlayer.setSponsor(T);else{var S=R.createError(s.default.AD,"No linear-ad found.");S.hitData={ERRORCODE:403},this._handleAdError(S)}}}this._sponsors=null}if(this._overlays){for(var b=0,P=this._overlays.length;b<P;b++){var N=this._overlays[b],D=(Array.isArray(this._overStartOffset)?this._overStartOffset[b]:this._overStartOffset)||10,x=Array.isArray(this._overCloseOffset)?this._overCloseOffset[b]:this._overCloseOffset;if("undefined"==typeof x&&(x=10),N.error)this._missTracker.register(t.id,N.error);else{var w=N.getNonLinear({startOffset:D,closeOffset:x});if(w)this._nonLinearAdTracker.register(t.id,N,w),this._nonLinearAdsManager.register(t.id,w);else{var L=R.createError(s.default.AD,"No non-linear-ad found.");L.hitData={ERRORCODE:503},this._handleAdError(L)}}}this._overlays=null}}},{key:"_handleContentBegin",value:function(){this._pp&&this._richPlayer.setPp(this._pp.src)}},{key:"_handleAdPoint",value:function(e){if(this._midrolls)for(var t=0,i=this._midrolls.length;t<i;t++){var n=this._midrolls[t],o=n.error?n.specIndex:n.getSpecIndex();if(this._adPoints[o].time===e.time)if(n.error){var r=this._richPlayer.getContent();this._missTracker.register(r.id,n.error)}else{var a=Array.isArray(this._midSkipOffset)?this._midSkipOffset[t]:this._midSkipOffset,l=n.getLinear({skipOffset:a}),u=n.getIcons();if(l)this._linearAdTracker.register(n),u&&this._iconsManager.register(l.id,u),this._richPlayer.setMidroll(l);else{var c=R.createError(s.default.AD,"No linear-ad found.");c.hitData={ERRORCODE:403},this._handleAdError(c)}}}}},{key:"_handleEnded",value:function(){if(this._postrolls){for(var e=0,t=this._postrolls.length;e<t;e++){var i=this._postrolls[e],n=Array.isArray(this._postSkipOffset)?this._postSkipOffset[e]:this._postSkipOffset;if(i.error)b.default.track([i.error]);else{var o=i.getLinear({skipOffset:n}),r=i.getIcons();if(o)this._linearAdTracker.register(i),r&&this._iconsManager.register(o.id,r),this._richPlayer.setPostroll(o);else{var a=R.createError(s.default.AD,"No linear-ad found.");a.hitData={ERRORCODE:403},this._handleAdError(a)}}}this._postrolls=null}this._cm&&(this._cm.error?this._cmMiss=this._cm.error:(this._cmImpresses=this._cm.getImpressions(),this._richPlayer.setEndAdScreen({id:this._cm.getId(),content:this._cm.getNonLinear(),caption:"Komerční sdělení"})),this._cm=null)}},{key:"_handleAdScreen",value:function(){this._cmImpresses&&this._cmImpresses.length&&b.default.track(this._cmImpresses),this._cmMiss&&b.default.track([this._cmMiss]),this._cmImpresses=null,this._cmMiss=null}},{key:"_handleTimeupdate",value:function(e){if(this._pp&&!this._richPlayer.isAdMode()){for(var t=e.time,i=this._pp.duration,n=!0,o=0,s=this._pp.offset.length;o<s;o++){var r=this._pp.offset[o];if(r<=t&&r+i>=t){this._richPlayer.showPp(),this._ppShown=!0,n=!1;break}}n&&this._ppShown&&(this._richPlayer.hidePp(),this._ppShown=!1)}}},{key:"_handleAdError",value:function(e){this.emit(i.EVENT_ERROR,e)}}]),i}(a.default);N.EVENT_ERROR="error",n.default=N}).call(this,"/src\\js\\sznplayer\\ad\\AdsManager.js")},{"../../common/Component":10,"../../common/errors":18,"../../richmediaplayer/RichMediaPlayer":54,"../../richmediaplayer/tracking/TrackUtils":82,"./AdLinearTracker":102,"./AdMissTracker":103,"./AdNonLinearTracker":104,"./AdStore":105,"./AdsConfigValidator":106,"./IconsManager":108,"./NonLinearAdsManager":109,"./im/ImResource":115}],108:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=t("../../common/utils"),a=e.interopRequireDefault(r),l=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._player=t,n._icons={},n._currentAdId="",n._currentIcons=null,n}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e){this._currentAdId=e.id,this._currentIcons=this._getIcons(e.id)}},{key:"finish",value:function(){this._icons[this._currentAdId]=null,this._currentAdId="",this._currentIcons=null,this._player.removeVisualElements()}},{key:"track",value:function(e,t){var i=this;this._currentIcons&&("PLAYING"===e&&t.first?!function(){var e={};i._currentIcons.forEach(function(t){if(!e[t.program]){var n=i._buildVisualElement(t);n&&(i._player.addVisualElement(n),e[t.program]=!0)}})}():"TIMEUPDATE"===e&&!function(){var e=i._player.getVisualElements(),t=i._player.getCurrentTime();e.forEach(function(e){var n=i._getIcon(e);if(n){var o=n.offset<=t&&(!n.duration||n.offset+n.duration>=t);o?i._player.showVisualElement(n.id):i._player.hideVisualElement(n.id)}})}())}},{key:"register",value:function(e,t){this._icons[e]=t}},{key:"_getIcons",value:function(e){return this._icons[e]?this._icons[e]:null}},{key:"_getIcon",value:function(e){if(!this._currentIcons)return null;for(var t=0;t<this._currentIcons.length;t++)if(this._currentIcons[t].id===e)return this._currentIcons[t];return null}},{key:"_buildVisualElement",value:function(e){for(var t=0;t<e.staticResources.length;t++){var i=e.staticResources[t];if(this._player.canRunVisualElementType(i.type)){var n={};return"right"===e.xPosition?n.x={origin:"right",center:!1,value:"0px"}:n.x={origin:"left",center:!1,value:a.default.formatPx("left"===e.xPosition?0:parseInt(e.xPosition,10)||0)},"bottom"===e.yPosition?n.y={origin:"bottom",center:!1,value:"0px"}:n.y={origin:"top",center:!1,value:a.default.formatPx("top"===e.yPosition?0:parseInt(e.yPosition,10)||0)},{id:e.id,src:i.url,type:i.type,width:a.default.formatPx(e.width),height:a.default.formatPx(e.height),position:n,clickthrough:e.clickThrough||null}}}return null}}]),i}(s.default);n.default=l},{"../../common/utils":23,"../../richmediaplayer/tracking/Tracker":83}],109:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._player=t,n._currentContentId="",n._ads={},n}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e){this._currentContentId=e.id}},{key:"finish",value:function(){this._ads[this._currentContentId]&&(this._ads[this._currentContentId]=void 0),this._currentContentId=""}},{key:"track",value:function(e,t){var i=this;if(this._ads[this._currentContentId])if("PLAYING"===e&&t.first)for(var n=0;n<this._ads[this._currentContentId].length;n++){var o=this._ads[this._currentContentId][n],s=this._buildVisualElement(o);if(s){this._player.addVisualElement(s);break}}else"TIMEUPDATE"===e?!function(){var e=i._player.getVisualElements(),t=i._player.getCurrentTime();e.forEach(function(e){var n=i._getCreative(e);if(n){var o=n.startOffset<=t&&(!n.minSuggestedDuration||n.startOffset+n.minSuggestedDuration>=t);o?i._player.showVisualElement(n.id):i._player.hideVisualElement(n.id),n.closeOffset!==-1&&n.closeOffset<=t&&i._player.showVisualElementClose(n.id)}})}():"VE_CLOSE"===e?this._player.removeVisualElement(t.id):"TEXT_TRACK_SET"===e&&!function(){var e=null!==i._player.getTextTrack()?"top":"bottom",t=i._player.getVisualElements();t.forEach(function(t){var n=i._getCreative(t);n&&i._player.setVisualElementDefaultPosition(n.id,e)})}()}},{key:"register",value:function(e,t){this._ads[e]=this._ads[e]||[],this._ads[e].push(t)}},{key:"_getCreative",value:function(e){if(!this._ads[this._currentContentId])return null;for(var t=0;t<this._ads[this._currentContentId].length;t++)for(var i=this._ads[this._currentContentId][t],n=i.creatives,o=0;o<n.length;o++)if(n[o].id===e)return Object.assign({},n[o],{startOffset:i.startOffset,closeOffset:i.closeOffset});return null}},{key:"_buildVisualElement",value:function(e){for(var t=0;t<e.creatives.length;t++)for(var i=e.creatives[t],n=0;n<i.staticResources.length;n++){var o=i.staticResources[n];if(this._player.canRunVisualElementType(o.type))return{id:i.id,src:o.url,type:o.type,defaultPosition:null!==this._player.getTextTrack()?"top":"bottom",clickthrough:i.clickThrough||null}}return null}}]),i}(s.default);n.default=r},{"../../richmediaplayer/tracking/Tracker":83}],110:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../common/utils"),s=e.interopRequireDefault(o),r=t("../Ad"),a=e.interopRequireDefault(r),l=t("../../../mediaplayer/streaming/QualityList"),u=e.interopRequireDefault(l),c=t("../../spl/SplResource"),d=e.interopRequireDefault(c),_={"144p":2e5,"240p":4e5,"360p":8e5,"480p":12e5,"576p":16e5,"720p":24e5,"1080p":44e5},h=function(t){function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.classCallCheck(this,i);var o=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o._spot=t[0],o._spl=n,o._id=o._spot.id||s.default.generateId(),o._impressions=o._getImpressions(),o._trackingEvents=o._getTrackingEvents(),o._videoClicks=o._getVideoClicks(),o._specIndex=null,o}return e.inherits(i,t),e.createClass(i,[{key:"hasLinear",value:function(){return!0}},{key:"hasNonLinear",value:function(){return!1}},{key:"getId",value:function(){return this._id}},{key:"getType",value:function(){return this._spot.content.type?this._spot.content.type:null}},{key:"getLinear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,i=NaN;if(this._spl){var n=d.default.getMp4Duration(this._spl);t=d.default.createSource(this._spl),i=n?n/1e3:NaN}else{var o=Array.isArray(this._spot.content.data)?this._spot.content.data:[],s=o.filter(function(e){return"url"in e&&"mp4"===e.url.toLowerCase()}),r=s.map(function(e){return{name:e.quality,source:[{src:e.url,type:"video/"+e.format,bitrate:"undefined"!=typeof _[e.quality]?_[e.quality]:null}]}}),a=o.find(function(e){return!!e.duration});if(!r.length)return null;t=new u.default(r),i=a?a.duration/1e3:NaN}return Object.assign(e,{id:this.getId(),source:t,clickthrough:this._spot.content.click,duration:i},this._spot.content.skippable_after?{skipOffset:this._spot.content.skippable_after}:{},"sponsor"===e.layout||"promo"===e.layout?{skipOffset:-1}:{})}},{key:"getNonLinear",value:function(){return null}},{key:"getImpressions",value:function(){return this._impressions}},{key:"getTrackingEvents",value:function(e){return"linear"===e?this._trackingEvents:null}},{key:"getVideoClicks",value:function(){return this._videoClicks}},{key:"getIcons",value:function(){return null}},{key:"getErrors",value:function(){return null}},{key:"getSpecIndex",value:function(){return this._specIndex}},{key:"setSpecIndex",value:function(e){this._specIndex=e}},{key:"addExternalImpressions",value:function(e){this._impressions=e.concat(this._impressions)}},{key:"addExternalSkipOffset",value:function(e){throw new Error('[ImAdLinear] Method "addExternalSkipOffset" is not supposed to be used here.')}},{key:"_getImpressions",value:function(){var e=[this._spot.content.impress];return this._spot.content.externHit&&e.push(this._spot.content.externHit),e}},{key:"_getTrackingEvents",value:function(){var e=[];if(this._spot.content.action&&e.push(this._spot.content.action),this._spot.content.externHitSkip&&e.push(this._spot.content.externHitSkip),this._spot.content.richmedia){var t=this._spot.content.richmedia+"&type=skip&value=[PERCENT]";e.push(t)}var i=[];if(this._spot.content.externHitEnd&&i.push(this._spot.content.externHitEnd),e.length||i.length){var n={};return e.length&&(n.skip=e),i.length&&(n.complete=i),n}return null}},{key:"_getVideoClicks",value:function(){return this._spot.content.click?{clickThrough:this._spot.content.click}:null}}]),i}(a.default);n.default=h},{"../../../common/utils":23,"../../../mediaplayer/streaming/QualityList":36,"../../spl/SplResource":129,"../Ad":101}],111:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Ad"),s=e.interopRequireDefault(o),r=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._spots=t,n._id=t.map(function(e,t){return e.id||t}).join("_"),n._impressions=t.map(function(e){return e.content.impress}),n._specIndex=null,n}return e.inherits(i,t),e.createClass(i,null,[{key:"_createHtmlSpot",value:function(e){return'<a class="sznp-ad-commercial-message-item"'+(' href="'+e.content.clickthru+'" target="_blank">')+'<span class="sznp-ad-commercial-message-item-img">'+('<img src="'+e.content.image_str+'">')+'</span><span class="sznp-ad-commercial-message-item-text">'+e.content.text_str+"</span></a>"}}]),e.createClass(i,[{key:"hasLinear",value:function(){return!1}},{key:"hasNonLinear",value:function(){return!0}},{key:"getId",value:function(){return this._id}},{key:"getType",value:function(){return null}},{key:"getLinear",value:function(){return null}},{key:"getNonLinear",value:function(){return this._spots.map(i._createHtmlSpot).join("")}},{key:"getImpressions",value:function(){return this._impressions}},{key:"getTrackingEvents",value:function(){return null}},{key:"getVideoClicks",value:function(){return null}},{key:"getIcons",value:function(){return null}},{key:"getErrors",value:function(){return null}},{key:"getSpecIndex",value:function(){return this._specIndex}},{key:"setSpecIndex",value:function(e){this._specIndex=e}},{key:"addExternalImpressions",value:function(e){this._impressions=e.concat(this._impressions)}},{key:"addExternalSkipOffset",value:function(e){throw new Error('[ImAdNonLinear] Method "addExternalSkipOffset" is not supposed to be used here.')}}]),i}(s.default);n.default=r},{"../Ad":101}],112:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../common/errors"),s=e.interopRequireDefault(o),r=t("../AdStore"),a=e.interopRequireDefault(r),l=t("./ImAdNonLinear"),u=e.interopRequireDefault(l),c=t("./ImAdLinear"),d=e.interopRequireDefault(c),_=t("../../spl/createSplResource"),h=e.interopRequireDefault(_),f=function(t){function i(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.classCallCheck(this,i);var s=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return s._miss=t,s._spots=n,s._character=o,s._splResource=null,s._specIndex=null,s}return e.inherits(i,t),e.createClass(i,[{key:"getAd",value:function(){var e=this,t=null;if(this._miss)t=Promise.resolve(null);else if("nonlinear"===this._character)t=Promise.resolve(new u.default(this._spots));else{if("linear"!==this._character)throw errorFactory.createError(s.default.SETTING,'Invalid ad character "'+this._character+'".');var i=this._getSplUrl(this._spots);i?(this._splResource=this._splResource||(0,h.default)(),t=this._splResource.resolveAndGet(i).then(function(t){return new d.default(e._spots,t)})):t=Promise.resolve(new d.default(this._spots))}return t}},{key:"getReplacementAd",value:function(){return Promise.resolve(null)}},{key:"getExternalImpressions",value:function(){return null}},{key:"getExternalMiss",value:function(){return this._miss}},{key:"getExternalSkipOffset",value:function(){return null}},{key:"getSpecIndex",value:function(){return this._specIndex}},{key:"setSpecIndex",value:function(e){this._specIndex=e}},{key:"setExternalImpressions",value:function(e){throw new Error('[ImAdStore] Method "setExternalImpressions" is not supposed to be used here.')}},{key:"setExternalMiss",value:function(e){throw new Error('[ImAdStore] Method "setExternalMiss" is not supposed to be used here.')}},{key:"setExternalSkipOffset",value:function(e){throw new Error('[ImAdStore] Method "setExternalSkipOffset" is not supposed to be used here.')}},{key:"_getSplUrl",value:function(e){for(var t=e[0],i=Array.isArray(t.content.data)?t.content.data:[],n=0,o=i.length;n<o;n++)if("spl"===i[n].format)return i[n].url;return""}}]),i}(a.default);n.default=f},{"../../../common/errors":18,"../../spl/createSplResource":130,"../AdStore":105,"./ImAdLinear":110,"./ImAdNonLinear":111}],113:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../common/errors"),s=e.interopRequireDefault(o),r=new s.default.ErrorFactory(s.default.createSourceName(i)),a=function(){function t(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.classCallCheck(this,t),this._im=i,this._settings={timeout:n.timeout||4e3},this._state=t._NEW,this._timeout=0,this._ads=[],this._adCount=0,this._promise=null,this._resolve=null,this._reject=null}return e.createClass(t,[{key:"send",value:function(e){var i=this;if(this._state!==t._NEW)throw r.createError(s.default.AD,"Request already sent.");for(var n=[],o=0,a=e.length;o<a;o++){var l=Object.assign({},e[o]);l.callback=this._processImResponse.bind(this,o,a),n.push(l)}return this._promise=new Promise(function(e,t){i._resolve=e,i._reject=t}),this._state=t._SENT,this._im.getAds(n),this._startTimeout(),this._promise}},{key:"abort",value:function(){this._state===t._SENT&&(this._state=Request._ABORTED,this._abortTimeout(),this._reject(r.createError(s.default.AD,"Im request aborted.")))}},{key:"_processImResponse",value:function(e,t,i,n){this._ads[e]=i,this._adCount++,this._adCount===t&&(this._abortTimeout(),this._done())}},{key:"_processTimeout",value:function(){this._state===t._SENT&&(this._state=t._TIMEOUT,this._reject(r.createError(s.default.AD_IM_REQUEST,"Im request timeouted.")))}},{key:"_done",value:function(){this._state=t._DONE,this._resolve(this._ads)}},{key:"_startTimeout",value:function(){var e=this;this._timeout=setTimeout(function(){return e._processTimeout()},this._settings.timeout)}},{key:"_abortTimeout",value:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0)}}]),t}();a._NEW=0,a._SENT=1,a._DONE=2,a._ABORTED=3,a._TIMEOUT=4,a._FAILED=5,n.default=a}).call(this,"/src\\js\\sznplayer\\ad\\im\\ImRequest.js")},{"../../../common/errors":18}],114:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../common/utils"),s=e.interopRequireDefault(o),r=t("../../../common/LoaderFactory"),a=e.interopRequireDefault(r),l=t("../../../common/errors"),u=e.interopRequireDefault(l),c=new u.default.ErrorFactory(u.default.createSourceName(i)),d=function(){function t(i){e.classCallCheck(this,t),console.warn("Testování VASTu"),this._im=im,this._state=t._NEW,this._ads=[],this._adCount=0,this._promise=null,this._resolve=null,this._reject=null,this._loaderFactory=new a.default(s.default,{maxAttemps:1,timeout:5e3},a.default.PROFILE_VAST),this._imResponseType=i.imResponse||this._getRandomImResponseType(),this._vastResponseTypes=null,this._vastResponseType=i.vastResponse||null,this._skipOffset=i.skipOffset||null}return e.createClass(t,[{key:"send",value:function(e){var i=this;if(this._state!==t._NEW)throw c.createError(u.default.AD,"Request already sent.");for(var n=[],o=0,s=e.length;o<s;o++){var r=Object.assign({},e[o]);r.callback=this._processImResponse.bind(this,o,s),n.push(r)}return this._promise=new Promise(function(e,t){i._resolve=e,i._reject=t}),this._state=t._SENT,this._loaderFactory.create().load(t.MAIN_URL).then(function(e){try{i._vastResponseTypes=JSON.parse(e.data),i._getAds(n)}catch(e){i._reject(e)}},function(e,t,n){var o=c.createError(u.default.AD,"Request to "+t+" was rejected."+(" Reason: "+e+", status: "+n+"."));i._reject(o)}),this._promise}},{key:"_getRandomImResponseType",value:function(){var e=[t.IM_VAST,t.IM_VAST_IN_CONTENT,t.IM_VAST_IN_CONTENT_DATA];return e[Math.floor(Math.random()*e.length)]}},{key:"_getRandomVastResponseType",value:function(){var e=Object.keys(this._vastResponseTypes);return e[Math.floor(Math.random()*e.length)]}},{key:"_processImResponse",value:function(e,t,i){this._ads[e]=i,this._adCount++,this._adCount===t&&this._done()}},{key:"_removeXmlTag",value:function(e){return e.replace(/<\?xml\s[^(\?>)]*\?>\s*/g,"")}},{key:"_getAds",value:function(e){var i=this;this._vastResponseType||(this._vastResponseType=this._getRandomVastResponseType()),console.warn("IM response is type: "+this._imResponseType),console.warn("VAST response is type: "+this._vastResponseType),e.forEach(function(e){var n=i._vastResponseTypes[i._vastResponseType];i._loaderFactory.create().load(n).then(function(n){var o=null;o=i._imResponseType===t.IM_VAST_IN_CONTENT?{impress:!0,miss:"",spots:[{content:"<!-- spir.czMonS[4_1070412___2218614] -->"+i._removeXmlTag(n.data)+"<!-- spir.czMonE -->",height:0,iframe:!1,width:0}]}:i._imResponseType===t.IM_VAST_IN_CONTENT_DATA?{impress:!0,miss:"",spots:[{content:'<!-- spir.czMonS[4_1070412___2218614] -->{\r\n    "data": '+JSON.stringify(i._removeXmlTag(n.data))+',\r\n    "impress": "",\r\n    "miss": "",\r\n    "skippable_after": '+i._skipOffset+"\r\n}<!-- spir.czMonE -->",height:0,iframe:!1,width:0}]}:i._imResponseType===t.IM_NO_VAST?JSON.parse(n.data):n.data,console.log(o),e.callback(o)},function(e,t,n){var o=c.createError(u.default.AD,"Request to "+t+" was rejected."+(" Reason: "+e+", status: "+n+"."));i._reject(o)})})}},{key:"_done",value:function(){this._state=t._DONE,this._resolve(this._ads)}}]),t}();d._NEW=0,d._SENT=1,d._DONE=2,d._FAILED=3,d.MAIN_URL="http://player.dev/vast/index.json",d.IM_VAST="vast",d.IM_VAST_IN_CONTENT="vastInContent",d.IM_VAST_IN_CONTENT_DATA="vastInContentData",d.IM_NO_VAST="noVast",n.default=d}).call(this,"/src\\js\\sznplayer\\ad\\im\\ImRequestTest.js")},{"../../../common/LoaderFactory":12,"../../../common/errors":18,"../../../common/utils":23}],115:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../common/errors"),s=e.interopRequireDefault(o),r=t("./ImRequest"),a=e.interopRequireDefault(r),l=t("./ImRequestTest"),u=e.interopRequireDefault(l),c=t("./ImUtils"),d=e.interopRequireDefault(c),_=t("./ImAdStore"),h=e.interopRequireDefault(_),f=t("../vast/VastAdManager"),p=e.interopRequireDefault(f),m=new s.default.ErrorFactory(s.default.createSourceName(i)),v=function(){function t(i){e.classCallCheck(this,t);var n=!!i,o=n&&"object"==("undefined"==typeof i?"undefined":e.typeof(i)),r=o&&"function"==typeof i.getAds;if(!r)throw m.createError(s.default.SETTING,"IM object you passed through options is not valid.");this._im=i}return e.createClass(t,[{key:"loadAds",value:function(e){for(var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=[],r=0,l=e.length;r<l;r++)o.push(n[r]?n[r]:t.character.LINEAR);var c=this._im.conf.vastDebug?new u.default(this._im.conf.vastDebug):new a.default(this._im),d=c.send(e),_=null;return _=d.then(function(e){try{return i._processImResponses(e,o)}catch(t){return t.category=t.category||s.default.AD_IM,t.responses=e,Promise.reject(t)}})}},{key:"_processImResponses",value:function(e,i){for(var n=[],o=0,r=e.length;o<r;o++){var a=e[o];if(d.default.isVast(a)){var l=this._createAdStoreFromVast(a);l.setSpecIndex(o),n.push(l)}else if(a.impress){if(a.spots.length)if(i[o]===t.character.LINEAR){var u=this._processSpot(a.spots[0],d.default.getUrlFromImg(a.miss));u.setSpecIndex(o),n.push(u)}else{for(var c=[],_=0,f=a.spots.length;_<f;_++){var p=a.spots[_],v=d.default.removeSpir(p.content),y=d.default.resolveBasicHtmlEntities(d.default.pickOutJsonString(v)),E=null;try{E=JSON.parse(y)}catch(e){throw m.createError(s.default.AD_IM,"Advert JSON format is not valid.")}p.content=E,p.id=d.default.getSpotIdFromUrl(E.impress),c.push(p)}var g=null;g=new h.default("",c,t.character.NONLINEAR),g.setSpecIndex(o),n.push(g)}}else{if(!a.miss)throw m.createError(s.default.AD_IM,"IM object is not valid.");var k=new h.default(d.default.getUrlFromImg(a.miss));k.setSpecIndex(o),n.push(k)}}return n}},{key:"_processSpot",value:function(e,i){var n=d.default.removeSpir(e.content);if(d.default.isVast(n))return this._createAdStoreFromVast(n,i);var o=d.default.resolveBasicHtmlEntities(d.default.pickOutJsonString(n));if(!o)throw m.createError(s.default.AD_IM,"Advert spot must be JSON (or VAST).");var r=null;try{r=JSON.parse(o)}catch(e){throw m.createError(s.default.AD_IM,"Advert JSON format is not valid.")}return d.default.isVast(r.data)?this._createAdStoreFromVast(r.data,i,r):(e.content=r,e.id=d.default.getSpotIdFromUrl(r.impress),new h.default("",[e],t.character.LINEAR))}},{key:"_createAdStoreFromVast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new p.default;n.setVastString(e),t&&n.setExternalMiss(t);var o=[];return i.impress&&o.push(i.impress),i.externHit&&o.push(i.externHit),o.length&&n.setExternalImpressions(o),i.skippable_after&&n.setExternalSkipOffset(i.skippable_after),n}}]),t}();v.character={LINEAR:"linear",NONLINEAR:"nonlinear"},n.default=v}).call(this,"/src\\js\\sznplayer\\ad\\im\\ImResource.js")},{"../../../common/errors":18,"../vast/VastAdManager":118,"./ImAdStore":112,"./ImRequest":113,"./ImRequestTest":114,"./ImUtils":116}],116:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=/^[^\{]*<vast/i;i.default={isVast:function(e){return n.test(e)},getSrcValueFromTag:function(e,t){var i=new RegExp("<"+t+"\\s*src\\s*=\\s*(['\"])(.*?)\\1[^>]*\\/?>"),n=e.match(i);return n&&n[2]?n[2]:""},getUrlFromImg:function(e){return this.resolveBasicHtmlEntities(this.getSrcValueFromTag(e,"img"))},getSpotIdFromUrl:function(e){if(!e)return"";var t=e.match(/\?.*spotid=([0-9]+)/i);return t&&t[1]?t[1]:""},pickOutJsonString:function(e){if(!e||"string"!=typeof e)return"";var t=e.match(/\{[\s\S]*\}/);return t&&t[0]?t[0]:""},removeSpir:function(e){return e.replace(/<!--\sspir\.[^(-->)]*-->/g,"")},resolveBasicHtmlEntities:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")}}},{}],117:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../Ad"),s=e.interopRequireDefault(o),r=t("../../../mediaplayer/streaming/QualityList"),a=e.interopRequireDefault(r),l=t("../../../common/errors"),u=e.interopRequireDefault(l),c=t("../../../common/utils"),d=e.interopRequireDefault(c),_=(new u.default.ErrorFactory(u.default.createSourceName(i)),function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._duration=null,n._skipOffset=null,n._externalSkipOffset=null,n._specIndex=null,n._mediaFiles=null,n._nonLinears=null,n._trackingEvents=null,n._videoClicks=null,n._icons=null,n._universalAdId="",n._adParameters="",t.creatives.forEach(function(e){"linear"===e.type&&(e.duration&&(n._duration=e.duration),e.skipOffset&&(n._skipOffset=e.skipOffset),e.mediaFiles&&e.mediaFiles.length&&(n._mediaFiles=e.mediaFiles),e.trackingEvents&&(n._trackingEvents||(n._trackingEvents={}),n._trackingEvents[e.type]=e.trackingEvents),e.videoClicks&&(n._videoClicks=e.videoClicks),e.icons&&(n._icons=e.icons),e.universalAdId&&(n._universalAdId=e.universalAdId),e.adParameters&&(n._adParameters=e.adParameters)),"nonlinear"===e.type&&(e.nonLinears&&e.nonLinears.length&&(n._nonLinears=e.nonLinears),e.trackingEvents&&(n._trackingEvents||(n._trackingEvents={}),n._trackingEvents[e.type]=e.trackingEvents))}),n._id=n._universalAdId||t.adId||d.default.generateId("va"),n._linear=n._mediaFiles?n._createLinearAd(t):null,n._nonLinear=n._nonLinears?n._createNonLinearAd(t):null,n._impressions=t.impressions,n._extensions=t.extensions,n._errors=t.errors,n}return e.inherits(i,t),e.createClass(i,[{key:"hasLinear",value:function(){return!!this._linear}},{key:"hasNonLinear",value:function(){return!!this._nonLinear}},{key:"getId",value:function(){return this._id}},{key:"getType",value:function(){return this._extensions&&this._extensions.type?this._extensions.type:null}},{key:"getLinear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._linear?Object.assign(e,this._linear,this._externalSkipOffset?{skipOffset:this._externalSkipOffset}:{},"sponsor"===e.layout||"promo"===e.layout?{skipOffset:-1}:{}):null}},{key:"getNonLinear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._nonLinear?Object.assign(e,this._nonLinear):null}},{key:"getImpressions",value:function(){return this._impressions}},{key:"getErrors",value:function(){return this._errors}},{key:"getTrackingEvents",value:function(e){return this._trackingEvents&&this._trackingEvents[e]?this._trackingEvents[e]:null}},{key:"getVideoClicks",value:function(){return this._videoClicks}},{key:"getIcons",value:function(){return this._icons}},{key:"getSpecIndex",value:function(){return this._specIndex}},{key:"setSpecIndex",value:function(e){this._specIndex=e}},{key:"addExternalImpressions",value:function(e){this._impressions=e.concat(this._impressions)}},{key:"addExternalSkipOffset",value:function(e){this._externalSkipOffset=e}},{key:"_createLinearAd",value:function(e){var t=this._createSource(),i=this._getVpaidSource(this._mediaFiles);return t||i?{id:this.getId(),source:t,sourceVpaid:i,skipOffset:this._skipOffset?this._skipOffset:-1,clickthrough:this._videoClicks?this._videoClicks.clickThrough:null,duration:this._duration,title:e.adTitle||""}:null}},{key:"_getVpaidSource",value:function(e){for(var t=0,i=e.length;t<i;t++)if(e[t].apiFramework&&"VPAID"===e[t].apiFramework.toUpperCase()&&e[t].type&&"application/javascript"===e[t].type.toLowerCase())return{src:e[t].url,type:e[t].type,apiFramework:"VPAID",options:{adParameters:this._adParameters,vastDuration:this._duration,vastAd:this}};return null}},{key:"_createNonLinearAd",value:function(e){return{id:this.getId(),creatives:this._nonLinears}}},{key:"_createSource",value:function(){var e=this._mediaFiles.filter(function(e){return!e.apiFramework}),t=e.map(function(e){return{name:"",source:[{src:e.url,type:e.type,bitrate:e.bitrate,codecs:e.codec,resolution:{width:e.width,height:e.height}}]}});return t.length?new a.default(t):null}}]),i}(s.default));n.default=_}).call(this,"/src\\js\\sznplayer\\ad\\vast\\VastAd.js")},{"../../../common/errors":18,"../../../common/utils":23,"../../../mediaplayer/streaming/QualityList":36,"../Ad":101}],118:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../AdStore"),s=e.interopRequireDefault(o),r=t("../../../common/utils"),a=e.interopRequireDefault(r),l=t("./XmlUtils"),u=(e.interopRequireDefault(l),t("./VastParser")),c=e.interopRequireDefault(u),d=t("./VastAd"),_=e.interopRequireDefault(d),h=t("../../../common/LoaderFactory"),f=e.interopRequireDefault(h),p=t("../../../common/errors"),m=e.interopRequireDefault(p),v=900,y=new m.default.ErrorFactory(m.default.createSourceName(i)),E=function(t){
function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._xml=null,n._externalHits=null,n._externalSkipOffset=null,n._specIndex=null,n._vastResponse=null,n._replacementAd=null,n._settings={maxNestLevel:t.maxNestLevel||i.MAX_NEST_LEVEL,timeout:t.timeout||i.TIMEOUT},n._loaderFactory=new f.default(a.default,{maxAttemps:1,timeout:n._settings.timeout},f.default.PROFILE_VAST),n}return e.inherits(i,t),e.createClass(i,[{key:"destroy",value:function(){var e=Object.keys(this),t=!0,i=!1,n=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;this[r]=null}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"setVastString",value:function(e){this._externalHits=null,this._externalSkipOffset=null,this._xml=e}},{key:"setVastUrl",value:function(e){var t=this;return this._externalHits=null,this._externalSkipOffset=null,this._xml=null,new Promise(function(i,n){t._load(e).then(function(e){t._xml=e.data,i(t._xml)},function(e,t,i){var o="Request to "+t+" was rejected."+(" Reason: "+e+", status: "+i+".");n(y.createError(m.default.AD,o))})})}},{key:"setSpecIndex",value:function(e){this._specIndex=e}},{key:"setExternalImpressions",value:function(e){this._externalHits||(this._externalHits={}),this._externalHits.impressions=e}},{key:"setExternalMiss",value:function(e){this._externalHits||(this._externalHits={}),this._externalHits.miss=e}},{key:"setExternalSkipOffset",value:function(e){this._externalSkipOffset=e}},{key:"getSpecIndex",value:function(){return this._specIndex}},{key:"getExternalImpressions",value:function(){return this._externalHits?this._externalHits.impressions:null}},{key:"getExternalMiss",value:function(){return this._externalHits?this._externalHits.miss:null}},{key:"getExternalSkipOffset",value:function(){return this._externalSkipOffset}},{key:"getAd",value:function(){return this._resolveNextAd().then(function(t){if(!t)return null;if(!t.ads)return t.ad.isWrapper?null:new _.default(t.ad);var i=function(){var e=[];return t.ads.forEach(function(t){t.isWrapper&&t.isIrreplaceable||e.push(t.isWrapper?null:new _.default(t))}),{v:e}}();return"object"===("undefined"==typeof i?"undefined":e.typeof(i))?i.v:void 0})}},{key:"_resolveNextAd",value:function(){if(!this._xml){var e=y.createError(m.default.AD,"No VAST content set.");return Promise.reject(e)}if(this._replacementAd=null,this._vastResponse&&!this._vastResponse.nextResponse&&(!this._vastResponse.parentResponse||!this._vastResponse.parentResponse.nextResponse))return Promise.resolve(null);if(this._vastResponse)this._vastResponse=this._vastResponse.nextResponse?this._vastResponse.nextResponse:this._vastResponse.parentResponse.nextResponse;else{var t=null;try{t=c.default.parseVast(this._xml)}catch(e){return Promise.reject(e)}if(this._vastResponse=this._createResponseObject(t),!this._vastResponse)return Promise.resolve(null)}return this._resolveAd()}},{key:"getReplacementAd",value:function(){return this._resolveNextReplacementAd().then(function(e){return e?new _.default(e):null})}},{key:"_resolveNextReplacementAd",value:function(){if(!this._vastResponse.replacementAds){var e=y.createError(m.default.AD,"No replacement ad for non-Ad Pod ad possible.");return Promise.reject(e)}if(!this._vastResponse.replacementAds.length)return Promise.resolve(null);if(this._replacementAd){var t=this._vastResponse.replacementAds.indexOf(this._replacementAd);if(!(this._vastResponse.replacementAds.length>t+1))return Promise.resolve(null);this._replacementAd=this._vastResponse.replacementAds[t+1]}else this._replacementAd=this._vastResponse.replacementAds[0];return this._resolveReplacementAd()}},{key:"_createResponseObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.adPod.length)return{version:e.version,ads:e.adPod,replacementAds:e.ads,nextResponse:null,parentResponse:t};for(var i=null,n=e.ads.length-1;n>=0;n--)i={version:e.version,ad:e.ads[n],nextResponse:i,parentResponse:t};return i}},{key:"_resolveAd",value:function(){var e=this;return new Promise(function(t,i){var n=e._vastResponse.ads?e._vastResponse.ads:[e._vastResponse.ad];e._resolveWrappedAds(n).then(function(n){n?t(e._vastResponse):e._resolveNextAd().then(function(){t(e._vastResponse)}).catch(function(e){i(e)})}).catch(function(e){i(e)})})}},{key:"_resolveReplacementAd",value:function(){var e=this;return new Promise(function(t,i){e._resolveWrappedAds([e._replacementAd]).then(function(n){n?t(e._replacementAd):e._resolveNextReplacementAd().then(function(){t(e._replacementAd)}).catch(function(e){i(e)})}).catch(function(e){i(e)})})}},{key:"_resolveWrappedAds",value:function(e){var t=this;return new Promise(function(i,n){var o=[];e.forEach(function(e){e.loadNextUrl&&o.push(t._loadAndParse(e))}),o.length?Promise.all(o).then(function(e){var t=e.some(function(e){return!!e});i(t)}).catch(function(e){n(e)}):i(!0)})}},{key:"_load",value:function(e){return this._loaderFactory.create().load(e)}},{key:"_loadAndParse",value:function(e){var t=this;return new Promise(function(i,n){if(!e.followAdditionalWrappers)return void i(!1);if(e.wrapperUrls.length>=t._settings.maxNestLevel||e.wrapperUrls.indexOf(e.loadNextUrl)>=0){var o=y.createError(m.default.AD,"Too many wrapper responses.");return t._trackError(o,302,e.errors),void i(!1)}t._load(e.loadNextUrl).then(function(o){var s=null;try{s=c.default.parseVast(o.data)}catch(n){return t._trackError(n,n.code,e.errors),void i(!1)}if(!s.ads.length&&!s.adPod.length){e.fallbackOnNoAd===!1&&(e.isIrreplaceable=!0);var r=y.createError(m.default.AD,"No VAST response after one or more wrappers.");return t._trackError(r,303,s.errors),void i(!1)}e.allowMultipleAds||(s.adPod=[],s.ads.length&&(s.ads=[s.ads[0]]));var a=t._mergeWrappedAds(e,s);t._resolveWrappedAds(a).then(function(e){i(e)}).catch(function(e){n(e)})},function(n,o,s){var r=y.createError(m.default.AD,"Request to "+o+" was rejected."+(" Reason: "+n+", status: "+s+"."));t._trackError(r,301,e.errors),i(!1)})})}},{key:"_mergeWrappedAds",value:function(t,i){var n=this;if(t.isAdBuffet){var o=function(){var e=n._vastResponse.replacementAds.indexOf(t);n._vastResponse.replacementAds.splice(e,1);var o=i.ads.length?i.ads:i.adPod;return n._replacementAd=null,o.forEach(function(i){c.default.mergeWrappedAd(i,t),n._replacementAd||(n._replacementAd=i),n._vastResponse.replacementAds.splice(e++,0,i)}),{v:[n._replacementAd]}}();if("object"===("undefined"==typeof o?"undefined":e.typeof(o)))return o.v}else{if(!t.sequence)return i.adPod.forEach(function(e){c.default.mergeWrappedAd(e,t)}),i.ads.forEach(function(e){c.default.mergeWrappedAd(e,t)}),this._vastResponse=this._createResponseObject(i,this._vastResponse),this._vastResponse.ads?this._vastResponse.ads:[this._vastResponse.ad];var s=function(){var e=n._vastResponse.ads.indexOf(t);return n._vastResponse.ads.splice(e,1),i.adPod.forEach(function(i){c.default.mergeWrappedAd(i,t),n._vastResponse.ads.splice(e++,0,i)}),i.ads.forEach(function(o){c.default.mergeWrappedAd(o,t),i.adPod.length?n._vastResponse.replacementAds.push(o):n._vastResponse.ads.splice(e++,0,o)}),{v:n._vastResponse.ads}}();if("object"===("undefined"==typeof s?"undefined":e.typeof(s)))return s.v}}},{key:"_trackError",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"undefined"==typeof e.category&&(e.category=m.default.AD),this.emit(s.default.EVENT_ERROR,{error:e,urlTemplates:i,data:{ERRORCODE:t||v}})}}]),i}(s.default);E.MAX_NEST_LEVEL=5,E.TIMEOUT=1e4,n.default=E}).call(this,"/src\\js\\sznplayer\\ad\\vast\\VastAdManager.js")},{"../../../common/LoaderFactory":12,"../../../common/errors":18,"../../../common/utils":23,"../AdStore":105,"./VastAd":117,"./VastParser":119,"./XmlUtils":120}],119:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./XmlUtils"),s=e.interopRequireDefault(o),r=t("../../../common/utils"),a=e.interopRequireDefault(r),l=t("../../../common/errors"),u=e.interopRequireDefault(l),c=new u.default.ErrorFactory(u.default.createSourceName(i)),d=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,null,[{key:"parseVast",value:function(e){var i=s.default.stringToXml(e),n={adPod:[],ads:[],errors:[]},o=null;try{var r=s.default.stringToXml("<"),a=r.getElementsByTagName("parsererror");o=a.length?a[0].namespaceURI:null}catch(e){}if(!i.documentElement||"VAST"!==i.documentElement.nodeName||o&&i.getElementsByTagNameNS(o,"parsererror").length){var l=c.createError(u.default.AD,"Specified string is not a valid VAST document.");throw l.code=100,l}var d=i.documentElement;n.version=d.getAttribute("version");var _=s.default.getChildrenByName(d,"Error");_.forEach(function(e){n.errors.push(s.default.getText(e))});var h=s.default.getChildrenByName(d,"Ad");return h.forEach(function(e){var i=t._parseAd(e);if(!i){var o=c.createError(u.default.AD,"Invalid ad data found in specified VAST document.");throw o.code=101,o}i.sequence?n.adPod.push(i):n.ads.push(i)}),n.adPod.length&&n.ads.forEach(function(e){e.isAdBuffet=!0}),n.adPod.sort(function(e,t){return e.sequence-e.sequence}),n}},{key:"mergeWrappedAd",value:function(e,t){t.sequence&&(e.sequence=t.sequence),t.isAdBuffet&&(e.isAdBuffet=t.isAdBuffet),e.errors=t.errors.concat(e.errors),e.impressions=t.impressions.concat(e.impressions),e.wrapperUrls=t.wrapperUrls,e.wrapperUrls.push(t.loadNextUrl);var i=null,n=null,o=null;t.creatives.forEach(function(e){"linear"!==e.type&&"nonlinear"!==e.type||e.trackingEvents&&(i||(i={}),i[e.type]=e.trackingEvents),"linear"===e.type&&(e.videoClicks&&(n=e.videoClicks),e.icons&&(o=e.icons))}),i&&e.creatives.forEach(function(e){if(i[e.type]){e.trackingEvents||(e.trackingEvents={});var t=Object.keys(i[e.type]);t.forEach(function(t){e.trackingEvents[t]||(e.trackingEvents[t]=[]),e.trackingEvents[t]=e.trackingEvents[t].concat(i[e.type][t])})}}),n&&e.creatives.forEach(function(e){"linear"===e.type&&(!e.videoClicks&&(n.clickThrough||n.clickTrackings.length||n.customClicks.length)&&(e.videoClicks={clickTrackings:[],customClicks:[]}),n.clickThrough&&!e.videoClicks.clickThrough&&(e.videoClicks.clickThrough=n.clickThrough),n.clickTrackings.length&&(e.videoClicks.clickTrackings=e.videoClicks.clickTrackings.concat(n.clickTrackings)),n.customClicks.length&&(e.videoClicks.customClicks=e.videoClicks.customClicks.concat(n.customClicks)))}),o&&o.length&&e.creatives.forEach(function(e){"linear"===e.type&&(e.icons||(e.icons=[]),e.icons=e.icons.concat(o))}),e.creatives.length||(e.creatives=t.creatives)}},{key:"_parseAd",value:function(e){var i={id:e.getAttribute("id")||null,sequence:e.getAttribute("sequence")||null,conditionalAd:s.default.getBoolean(e.getAttribute("conditionalAd")||null)},n=s.default.getChildByName(e,"InLine");if(n)return Object.assign(t._parseInLine(n),i);var o=s.default.getChildByName(e,"Wrapper");return o?Object.assign(t._parseWrapper(o),i):null}},{key:"_parseInLine",value:function(e){var i={impressions:[],creatives:[],categories:[],errors:[],wrapperUrls:[],isWrapper:!1};if("InLine"===e.nodeName&&!s.default.getChildrenByName(e,"Impression").length){var n=c.createError(u.default.AD,"No impressions found in ad.");throw n.code=101,n}if("InLine"===e.nodeName&&1!==s.default.getChildrenByName(e,"Creatives").length){var o=c.createError(u.default.AD,"No creatives found in ad.");throw o.code=101,o}for(var r=e.childNodes,a=0;a<r.length;a++){var l=r[a];switch(l.nodeName){case"AdSystem":i.adSystem={name:s.default.getText(l),version:l.getAttribute("version")||null};break;case"AdTitle":i.adTitle=s.default.getText(l);break;case"Impression":i.impressions.push(s.default.xmlStringDecode(s.default.getText(l)));break;case"Category":i.categories.push({name:s.default.getText(l),authority:l.getAttribute("authority")||null});break;case"Description":i.description=s.default.getText(l);break;case"Advertiser":i.advertiser=s.default.getText(l);break;case"Pricing":i.pricing={name:s.default.getText(l),model:l.getAttribute("model")||null,currency:l.getAttribute("currency")||null};break;case"Survey":i.survey=s.default.getText(l);break;case"Error":i.errors.push(s.default.xmlStringDecode(s.default.getText(l)));break;case"Creatives":var d=s.default.getChildrenByName(l,"Creative");d.forEach(function(n){var o=s.default.getChildByName(n,"UniversalAdId"),r={id:n.getAttribute("id")||null,adId:n.getAttribute("adId")||null,sequence:n.getAttribute("sequence")||null,apiFramework:n.getAttribute("apiFramework")||null,universalAdId:o?s.default.getText(o):null},a=s.default.getChildByName(n,"Linear");if(a){var l=t._parseLinearCreative(a);if("InLine"===e.nodeName&&!l.mediaFiles.length){var d=c.createError(u.default.AD,"No media files found in creative.");throw d.code=101,d}if("Wrapper"===e.nodeName&&l.mediaFiles.length){var _=c.createError(u.default.AD,"Media files found in wrapper.");throw _.code=101,_}i.creatives.push(Object.assign(l,r))}var h=s.default.getChildByName(n,"NonLinearAds");if(h){var f=t._parseNonLinearCreative(h);i.creatives.push(Object.assign(f,r))}});break;case"Extensions":var _=s.default.getChildByName(l,"Type");if(_)i.extensions||(i.extensions={}),i.extensions.type=s.default.getText(_);else{var h=s.default.getChildrenByName(l,"Extension");h.forEach(function(e){var t=s.default.getChildByName(e,"Type");t&&(i.extensions||(i.extensions={}),i.extensions.type=s.default.getText(t))})}}}return i}},{key:"_parseWrapper",value:function(e){var i=s.default.getChildByName(e,"VASTAdTagURI"),n=t._parseInLine(e);if(!i){var o=c.createError(u.default.AD,"No URI found in wrapper.");throw o.code=101,o}n.loadNextUrl=s.default.xmlStringDecode(s.default.getText(i)),n.isWrapper=!0;var r=e.getAttribute("followAdditionalWrappers");n.followAdditionalWrappers=!r||s.default.getBoolean(r);var a=e.getAttribute("allowMultipleAds");n.allowMultipleAds=!!a&&s.default.getBoolean(a);var l=e.getAttribute("fallbackOnNoAd");return n.fallbackOnNoAd=l?s.default.getBoolean(l):null,n}},{key:"_parseLinearCreative",value:function(e){for(var i={type:"linear",skipOffset:null,mediaFiles:[]},n=e.childNodes,o=0;o<n.length;o++){var r=n[o];switch(r.nodeName){case"Duration":i.duration=s.default.getTime(s.default.getText(r));var a=e.getAttribute("skipoffset");a&&("%"===a.charAt(a.length-1)?i.skipOffset=i.duration*(parseInt(a,10)/100):i.skipOffset=s.default.getTime(a));break;case"MediaFiles":i.mediaFiles=t._parseMediaFiles(r);break;case"AdParameters":i.adParameters=t._parseAdParameters(r);break;case"TrackingEvents":i.trackingEvents=t._parseTrackingEvents(r);break;case"VideoClicks":i.videoClicks=t._parseVideoClicks(r);break;case"Icons":i.icons=t._parseIcons(r)}}return i}},{key:"_parseNonLinearCreative",value:function(e){var i={type:"nonlinear",nonLinears:[]},n=s.default.getChildrenByName(e,"NonLinear");n.forEach(function(e){var n={id:a.default.generateId("ni"),width:parseInt(e.getAttribute("width"),10)||0,height:parseInt(e.getAttribute("height"),10)||0,expandedWidth:parseInt(e.getAttribute("expandedWidth"),10)||0,expandedHeight:parseInt(e.getAttribute("expandedHeight"),10)||0,scalable:s.default.getBoolean(e.getAttribute("scalable")),maintainAspectRatio:s.default.getBoolean(e.getAttribute("maintainAspectRatio")),minSuggestedDuration:s.default.getTime(e.getAttribute("minSuggestedDuration"))||0,apiFramework:e.getAttribute("apiFramework"),clickTrackings:[],staticResources:[],iframeResources:[],htmlResources:[]},o=s.default.getChildByName(e,"AdParameters");o&&(n.adParameters=t._parseAdParameters(o));var r=s.default.getChildByName(e,"NonLinearClickThrough");r&&(n.clickThrough=s.default.xmlStringDecode(s.default.getText(r)));var l=s.default.getChildrenByName(e,"NonLinearClickTracking");l.forEach(function(e){n.clickTrackings.push(s.default.xmlStringDecode(s.default.getText(e)))});var u=s.default.getChildrenByName(e,"StaticResource");u.forEach(function(e){n.staticResources.push({type:e.getAttribute("creativeType"),url:s.default.xmlStringDecode(s.default.getText(e))})});var c=s.default.getChildrenByName(e,"IFrameResource");c.forEach(function(e){n.iframeResources.push(s.default.xmlStringDecode(s.default.getText(e)))});var d=s.default.getChildrenByName(e,"HTMLResource");d.forEach(function(e){n.htmlResources.push(s.default.xmlStringDecode(s.default.getText(e)))}),i.nonLinears.push(n)});var o=s.default.getChildByName(e,"TrackingEvents");return o&&(i.trackingEvents=t._parseTrackingEvents(o)),i}},{key:"_parseAdParameters",value:function(e){if(e.getAttribute("xmlEncoded")){for(var t="",i=s.default.stringToXml(s.default.xmlStringDecode(s.default.getText(node))),n=i.documentElement.childNodes,o=0;o<n.length;o++)t+=(""===t?"":"&")+n[o].nodeName+"="+s.default.getText(n[o]);return t}return s.default.getText(e)}},{key:"_parseMediaFiles",value:function(e){var t=[],i=s.default.getChildrenByName(e,"MediaFile");i.forEach(function(e){var i={id:e.getAttribute("id"),url:s.default.xmlStringDecode(s.default.getText(e)),delivery:e.getAttribute("delivery"),codec:e.getAttribute("codec"),type:e.getAttribute("type"),apiFramework:e.getAttribute("apiFramework"),bitrate:parseInt(e.getAttribute("bitrate"),10)||0,minBitrate:parseInt(e.getAttribute("minBitrate"),10)||0,maxBitrate:parseInt(e.getAttribute("maxBitrate"),10)||0,width:parseInt(e.getAttribute("width"),10)||0,height:parseInt(e.getAttribute("height"),10)||0,scalable:s.default.getBoolean(e.getAttribute("scalable")),maintainAspectRatio:s.default.getBoolean(e.getAttribute("maintainAspectRatio"))};t.push(i)});var n=s.default.getChildrenByName(e,"InteractiveCreativeFile");return n.forEach(function(e){var i={id:a.default.generateId("ii"),url:s.default.xmlStringDecode(s.default.getText(e)),type:e.getAttribute("type"),apiFramework:e.getAttribute("apiFramework")};t.push(i)}),t}},{key:"_parseIcons",value:function(e){var t=[],i=s.default.getChildrenByName(e,"Icon");return i.forEach(function(e){var i={id:a.default.generateId("vi"),program:e.getAttribute("program")||"",width:parseInt(e.getAttribute("width"),10)||0,height:parseInt(e.getAttribute("height"),10)||0,xPosition:e.getAttribute("xPosition"),yPosition:e.getAttribute("yPosition"),offset:s.default.getTime(e.getAttribute("offset"))||0,duration:s.default.getTime(e.getAttribute("duration"))||0,apiFramework:e.getAttribute("apiFramework"),pxratio:e.getAttribute("pxratio"),viewTrackings:[],clickTrackings:[],staticResources:[],iframeResources:[],htmlResources:[]},n=s.default.getChildrenByName(e,"IconViewTracking");n.forEach(function(e){i.viewTrackings.push(s.default.xmlStringDecode(s.default.getText(e)))});var o=s.default.getChildByName(e,"IconClicks");if(o){var r=s.default.getChildByName(o,"IconClickThrough");r&&(i.clickThrough=s.default.xmlStringDecode(s.default.getText(r)));var l=s.default.getChildrenByName(o,"IconClickTracking");l.forEach(function(e){i.clickTrackings.push(s.default.xmlStringDecode(s.default.getText(e)))})}var u=s.default.getChildrenByName(e,"StaticResource");u.forEach(function(e){i.staticResources.push({type:e.getAttribute("creativeType"),url:s.default.xmlStringDecode(s.default.getText(e))})});var c=s.default.getChildrenByName(e,"IFrameResource");c.forEach(function(e){i.iframeResources.push(s.default.xmlStringDecode(s.default.getText(e)))});var d=s.default.getChildrenByName(e,"HTMLResource");d.forEach(function(e){i.htmlResources.push(s.default.xmlStringDecode(s.default.getText(e)))}),t.push(i)}),t}},{key:"_parseTrackingEvents",value:function(e){var t={},i=s.default.getChildrenByName(e,"Tracking");return i.forEach(function(e){var i=e.getAttribute("event"),n=s.default.xmlStringDecode(s.default.getText(e));if(i&&""!==n){var o=n;"progress"!==i&&"timeSpentViewing"!==i||(offset=e.getAttribute("offset"),o={url:n,offset:"%"===offset.charAt(offset.length-1)?offset:s.default.getTime(offset)}),t[i]||(t[i]=[]),t[i].push(o)}}),t}},{key:"_parseVideoClicks",value:function(e){var t={clickTrackings:[],customClicks:[]},i=s.default.getChildByName(e,"ClickThrough");i&&(t.clickThrough=s.default.xmlStringDecode(s.default.getText(i)));var n=s.default.getChildrenByName(e,"ClickTracking");n.forEach(function(e){t.clickTrackings.push(s.default.xmlStringDecode(s.default.getText(e)))});var o=s.default.getChildrenByName(e,"CustomClick");return o.forEach(function(e){t.customClicks.push({id:e.getAttribute("id"),url:s.default.xmlStringDecode(s.default.getText(e))})}),t}}]),t}();n.default=d}).call(this,"/src\\js\\sznplayer\\ad\\vast\\VastParser.js")},{"../../../common/errors":18,"../../../common/utils":23,"./XmlUtils":120}],120:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../common/errors"),s=e.interopRequireDefault(o),r=new s.default.ErrorFactory(s.default.createSourceName(i));n.default={stringToXml:function(e){if(!window.DOMParser)throw r.createError(s.default.AD,"Unable to parse XML string.");var t=new DOMParser,i=null;try{i=t.parseFromString(e,"application/xml")}catch(e){throw r.createError(s.default.AD,"Unable to parse XML string.")}return i},xmlStringDecode:function(e){return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},getTime:function(e){if(!e)return null;var t=e.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})(\.\d{1,})?/);return t?3600*parseInt(t[1],10)+60*parseInt(t[2],10)+parseInt(t[3],10)+(t[4]?parseFloat(t[4]):0):null},getFormattedTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60%60),n=Math.floor(e%60),o=Math.floor(1e3*e)%1e3,s=function(e,t){for(var i=String(e);i.length<t;)i="0"+i;return i};return s(t,2)+":"+s(i,2)+":"+s(n,2)+"."+s(o,3)},getBoolean:function(e){if("string"==typeof e&&""!==e){var t=e.toLowerCase();if("true"===t)return!0;if("false"===t)return!1}return!!e},getChildrenByName:function(e,t){for(var i=[],n=e.childNodes,o=0;o<n.length;o++){var s=n[o];s.nodeName===t&&i.push(s)}return i},getChildByName:function(e,t){for(var i=e.childNodes,n=0;n<i.length;n++){var o=i[n];if(o.nodeName===t)return o}return null},getText:function(e){return(e&&(e.textContent||e.text)||"").trim()}}}).call(this,"/src\\js\\sznplayer\\ad\\vast\\XmlUtils.js")},{"../../../common/errors":18}],121:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=t("../../mediaplayer/streaming/QualityList"),a=e.interopRequireDefault(r),l=function(t){function i(t,n){e.classCallCheck(this,i);var o=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o._player=t,o._mainTracker=n,o._ad=null,o._role="",o._breakSize=0,o._position=0,o._hasToBeAutoPlay=!1,o._finishedByEnded=!1,o._skipped=!1,o}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e,t){this._hasToBeAutoPlay=!0,this._finishedByEnded=!1,this._skipped=!1,this._breakSize=0,this._position++,this._ad=e,this._role=t,this._mainTracker.newAd(e,t)}},{key:"track",value:function(e,t){if("PLAYING"===e)this._breakSize||(this._breakSize=this._getBreakSize(this._role)),this._mainTracker.adEvent(this._ad.id,"play",{autoPlay:this._hasToBeAutoPlay,adPosition:this._position,breakSize:this._breakSize}),this._hasToBeAutoPlay=!1;else if("STOPPED"===e)this._mainTracker.adEvent(this._ad.id,"stop");else if("PAUSED"===e)this._mainTracker.adEvent(this._ad.id,"pause");else if("BUFFER_EMPTY"===e)this._mainTracker.adEvent(this._ad.id,"buffer");else if("SEEKSTART"===e)this._mainTracker.adEvent(this._ad.id,"seek");else if("SKIP"===e)this._mainTracker.adEvent(this._ad.id,"skip"),this._skipped=!0;else if("ENDED"===e)this._finishedByEnded=!0;else if("VOLUME_CHANGE"===e)this._mainTracker.adEvent(this._ad.id,"chngVol",{volume:t.muted?-1:Math.round(100*t.level)});else if("QUALITY_SET"===e){var i=t.qualityIdx,n=-1;t.autoset?n=!1:null!==i&&this._ad.source instanceof a.default&&(n=this._getQuality(this._ad.source,i)),n&&this._mainTracker.adEvent(this._ad.id,"chngQual",{quality:n})}}},{key:"finish",value:function(){this._position===this._breakSize&&(this._position=0),this._skipped||this._mainTracker.adClose(this._ad.id,this._finishedByEnded)}},{key:"_getBreakSize",value:function(e){return"sponsor"===e||"promo"===e||"preroll"===e?this._player.getAdsCount("sponsor")+this._player.getAdsCount("promo")+this._player.getAdsCount("preroll"):this._player.getAdsCount(e)}},{key:"_getQuality",value:function(e,t){if(!(e instanceof a.default))return"";var i=this._ad.source.getSourceResolution(t);return i?i.width+"x"+i.height:this._ad.source.getName(t)}}]),i}(s.default);n.default=l}).call(this,"/src\\js\\sznplayer\\analytics\\GemiusPrismAdTracker.js")},{"../../mediaplayer/streaming/QualityList":36,"../../richmediaplayer/tracking/Tracker":83}],122:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=function(t){function i(t,n){e.classCallCheck(this,i);var o=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return o._player=t,o._mainTracker=n,o._partId=1,o._currentTime=0,o._wasInterrupted=!1,o._needToHitPlayAfterBuffer=!1,o._hasToBeAutoPlay=!1,o}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e){this._partId=1,this._currentTime=0,this._wasInterrupted=!1,this._hasToBeAutoPlay=!0,this._needToHitPlayAfterBuffer=!1}},{key:"setDuration",value:function(e){}},{key:"track",value:function(e,t){if("PLAYING"===e)this._mainTracker.programEvent(t.time,"play",{autoPlay:this._hasToBeAutoPlay,partID:this._partId}),this._wasInterrupted=!1,this._hasToBeAutoPlay=!1,this._needToHitPlayAfterBuffer=!1;else if("STOPPED"===e)this._mainTracker.programEvent(this._currentTime,"stop");else if("PAUSED"===e)this._mainTracker.programEvent(this._currentTime,"pause");else if("BUFFER_EMPTY"===e)this._mainTracker.programEvent(this._currentTime,"buffer"),this._needToHitPlayAfterBuffer=!0;else if("CONTENT_CAN_PLAY"===e)this._needToHitPlayAfterBuffer&&this._player.isPlaying()&&(this._mainTracker.programEvent(this._currentTime,"play",{autoPlay:!0,partID:this._partId}),this._needToHitPlayAfterBuffer=!1);else if("SEEKSTART"===e)this._mainTracker.programEvent(this._currentTime,"seek"),this._wasInterrupted=!0;else if("ENDED"===e)this._mainTracker.programClose(this._currentTime,!0);else if("VOLUME_CHANGE"===e)this._mainTracker.programEvent(this._currentTime,"chngVol",{volume:t.muted?-1:Math.round(100*t.level)});else if("QUALITY_SET"===e){var i=t.qualityIdx,n=-1;if(t.autoset)n=!1;else if(null!==i){var o=this._player.getResolvedContent();if(o&&o.source){var s=o.source.getSourceResolution(i);n=s?s.width+"x"+s.height:o.source.getName(i)}}n&&this._mainTracker.programEvent(this._currentTime,"chngQual",{quality:n})}else"TIMEUPDATE"===e&&(this._currentTime=t.time,this._wasInterrupted&&this._player.isPlaying()&&(this._mainTracker.programEvent(t.time,"play",{autoPlay:!0,partID:this._partId}),this._wasInterrupted=!1))}},{key:"break",value:function(){this._mainTracker.programEvent(this._currentTime,"break")}},{key:"restore",value:function(){this._partId++,this._hasToBeAutoPlay=!0,this._wasInterrupted=!1,this._needToHitPlayAfterBuffer=!1}},{key:"finish",value:function(){this._mainTracker.programClose(this._currentTime,!1)}}]),i}(s.default);n.default=r}).call(this,"/src\\js\\sznplayer\\analytics\\GemiusPrismContentTracker.js")},{"../../richmediaplayer/tracking/Tracker":83}],123:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=t("../../common/errors"),a=e.interopRequireDefault(r),l=-1,u=new a.default.ErrorFactory(a.default.createSourceName(i)),c=function(t){function i(t,n,o){if(e.classCallCheck(this,i),!t||"function"!=typeof t)throw u.createError(a.default.SETTING,"Argument gemiusConstructor must be specified and valid.");if(!o||"object"!==("undefined"==typeof o?"undefined":e.typeof(o)))throw u.createError(a.default.SETTING,"Argument settings must be specified (and be an object).");if(!o.accountId||"string"!=typeof o.accountId)throw u.createError(a.default.SETTING,"Option settings.accountId must be a non-empty string.");var s=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return s._gemiusCtor=t,s._player=n,s._settings=o,s._gemius=null,s._content=null,s._duration=NaN,s._offset=NaN,s._close=!1,s}return e.inherits(i,t),e.createClass(i,[{key:"track",value:function(e,t){"READY"===e?this._gemius||(this._gemius=this._createGemius()):"CONTENT_SET"===e&&(this._gemius||(this._gemius=this._createGemius()),this._duration=NaN,this._offset=0,this._close=!1,this._player.isLive()?this._duration=l:t.content.duration&&(this._duration=t.content.duration),this._content=t.content,this._newProgram(this._content,this._duration))}},{key:"programEvent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._close||(this._offset=e,this._programEvent(this._content,e,t,i))}},{key:"programClose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._close){var i=t?"complete":"close",n=t?this._duration:e;this._offset=e,this._programEvent(this._content,n,i),this._close=!0}}},{key:"newAd",value:function(e,t){this._newAd(e,t,e.duration)}},{key:"adEvent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._adEvent(this._content.id,e,this._offset,t,i)}},{key:"adClose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t?"complete":"close";this._adEvent(this._content.id,e,this._offset,i)}},{key:"_createGemius",value:function(){var e=this._player.getElement(),t=this._player.isMuted(),i=this._player.getVolume(),n=new this._gemiusCtor(this._settings.playerId||this._player.getPlayerId(),this._settings.accountId,{currentDomain:this._settings.currentDomain||window.document.location.hostname,volume:t?-1:Math.round(100*i),resolution:e.clientWidth+"x"+e.clientHeight});return n}},{key:"_newProgram",value:function(e,t){var i=e.analyticsData||{},n={programDuration:Math.round(t),programType:"Video",programName:i.materialName||e.title};i.sectionName&&(n.series=i.sectionName),i.publicationDate&&i.publicationDate instanceof Date&&(n.premiereDate=i.publicationDate.toISOString().slice(0,10).replace(/-/g,"")),this._gemius.newProgram(e.id,n)}},{key:"_programEvent",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._gemius.programEvent(e.id,Math.round(t),i,n)}},{key:"_newAd",value:function(e,t,i){var n={adDuration:Math.round(i),adType:"sponsor"===t?"sponsor":"promo"===t?"promo":"spot"};e.title&&(n.adName=e.title),this._gemius.newAd(e.id,n)}},{key:"_adEvent",value:function(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._gemius.adEvent(e,t,Math.round(i),n,o)}}]),i}(s.default);n.default=c}).call(this,"/src\\js\\sznplayer\\analytics\\GemiusPrismTracker.js")},{"../../common/errors":18,"../../richmediaplayer/tracking/Tracker":83}],124:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=t("../../common/errors"),a=e.interopRequireDefault(r),l=new a.default.ErrorFactory(a.default.createSourceName(i)),u=function(t){function i(t,n,o){if(e.classCallCheck(this,i),!t||"object"!==("undefined"==typeof t?"undefined":e.typeof(t))||"function"!=typeof t.newStream)throw l.createError(a.default.SETTING,"Argument gemiusStream must be specified.");if(!o||"object"!==("undefined"==typeof o?"undefined":e.typeof(o)))throw l.createError(a.default.SETTING,"Argument settings must be specified (and be an object).");if(!o.identifier||"string"!=typeof o.identifier)throw l.createError(a.default.SETTING,"Option settings.identifier must be an string).");var s=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return s._gs=t,s._player=n,s._variables={identifier:o.identifier,
hitcollector:o.hitcollector||"https://scz.hit.gemius.pl",playerId:o.playerId||n.getPlayerId()},s._queue=[],s._content=null,s._duration=NaN,s._completed=!1,s._wasBuffering=!1,s}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e){this._queue_add("_newContent",[e]),this.setDuration(e.duration)}},{key:"finish",value:function(){if(this._duration&&!this._completed){var e=this._getRightTime(this._player.getCurrentTime());this._gs.closeStream(this._variables.playerId,this._content.id,e)}this._duration=NaN,this._completed=!1,this._wasBuffering=!1,this._queue_clean()}},{key:"setDuration",value:function(e){this._player.isLive()?this._duration=-1:this._duration=Math.round(e),this._duration&&this._queue_process()}},{key:"track",value:function(e,t){if(!this._duration)return void this._queue_add("track",[e,t]);var i=this._getRightTime(t&&t.time||this._player.getCurrentTime());"PLAYING"===e?(this._event(i,"playing"),this._wasBuffering=!1):"PAUSED"===e?this._event(i,"paused"):"STOPPED"===e?this._event(i,"stopped"):"SEEKSTART"===e?this._event(i,"seekingStarted"):"SEEKED"!==e||this._player.isPaused()?"ENDED"===e?(this._event(i,"complete"),this._completed=!0):"BUFFER_EMPTY"===e?(this._event(i,"buffering"),this._wasBuffering=!0):"TIMEUPDATE"===e&&this._wasBuffering&&!this._player.isPaused()&&(this._event(i,"playing"),this._wasBuffering=!1):this._event(i,"playing")}},{key:"_newContent",value:function(e){this._content=e,this._gs.newStream(this._variables.playerId,this._content.id,this._duration,this._getCustomPackage(this._content),[],this._variables.identifier,this._variables.hitcollector,this._getTreeId(this._content))}},{key:"_event",value:function(e,t){this._gs.event(this._variables.playerId,this._content.id,e,t)}},{key:"_getCustomPackage",value:function(e){var t=e.analyticsData||{},i=t.materialName||e.title||"",n=this._duration===-1?"LIVE":"VOD";return[{name:"CNAME",value:i},{name:"TYPE",value:n}]}},{key:"_getTreeId",value:function(e){return[]}},{key:"_getRightTime",value:function(e){var t=Math.round(e);return this._duration===-1?t:Math.min(t,this._duration)}},{key:"_queue_add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._queue.push({method:e,params:t})}},{key:"_queue_process",value:function(){for(var e=null;e=this._queue.shift();)Array.isArray(e.params)?this[e.method].apply(this,e.params):this[e.method].apply(this)}},{key:"_queue_clean",value:function(){this._queue=[]}}]),i}(s.default);n.default=u}).call(this,"/src\\js\\sznplayer\\analytics\\GemiusStreamTracker.js")},{"../../common/errors":18,"../../richmediaplayer/tracking/Tracker":83}],125:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=function(t){function i(t,n,o){if(e.classCallCheck(this,i),!t||"object"!==("undefined"==typeof t?"undefined":e.typeof(t))||"function"!=typeof t.hit)throw new Error("[analytics/SznTracker] DOT must be specified.");if(!o||"object"!==("undefined"==typeof o?"undefined":e.typeof(o)))throw new Error('[analytics/SznTracker] Argument "settings" must be specified.');var s=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return s._dot=t,s._player=n,s._settings={partLength:o.partLength,playerVersion:o.playerVersion||"",actionPrefix:o.actionPrefix||""},s._content=null,s._data=null,s._role="",s._duration=NaN,s._prevContentId="",s._lastFragmentTime=0,s}return e.inherits(i,t),e.createClass(i,[{key:"newContent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this._resetContentData(),this._content=e,this._data=e.analyticsData||{},this._role=t,e.duration&&this.setDuration(e.duration)}},{key:"finish",value:function(){this._prevContentId=this._content?this._content.id:"",this._content=null,this._data=null,this._role=""}},{key:"setDuration",value:function(e){this._duration=Math.round(e)}},{key:"track",value:function(e,t){if("PLAYING"===e){var i=this._player.getVideoHeight(),n=i?i+"p":"",o=this._getPlayData(t.time,n,t.first);this._processHit(o,e,t)}else if("TIMEUPDATE"===e){var s=this._getPartData(t.time);s&&this._processHit(s,e,t)}else if("SEEKING"===e)this._lastFragmentTime=0;else if("ENDED"===e){var r=this._duration,a=this._getRestPartData(r);a&&this._processHit(a,e,t);var l=this._getCommonData("finished",r);this._processHit(l,e,t)}}},{key:"_getCommonData",value:function(e,t){var i={action:""+this._settings.actionPrefix+e,time:Math.round(t),videoid:this._content.id,duration:this._duration,live:this._player.isLive(),replay:this._player.isReplay(),playerversion:this._settings.playerVersion,playertech:this._player.getTechName(),service:"service"in this._data?this._data.service:""};return this._data.contextId&&(i.contextid=this._data.contextId),this._data.embed&&(i.embed=this._data.embed),i}},{key:"_getPlayData",value:function(e,t,i){var n=this._getCommonData("play",e);return n.quality=t,n.videoname="materialName"in this._data?this._data.materialName:"",n.sectionname="sectionName"in this._data?this._data.sectionName:"","materialType"in this._data?n.videotype=this._data.materialType:this._role&&(n.videotype=this._role),"context"in this._data&&(n.context=this._data.context),!n.videoname&&this._content.mediaName&&(n.videoname=this._content.mediaName),i&&("cause"in this._data?n.cause=this._data.cause:n.cause=this._prevContentId?"playlist":"start",this._prevContentId&&(n.prevvideoid=this._prevContentId)),n}},{key:"_getPartData",value:function(e){var t=Math.floor(e),i=null;return this._player.isFragmentComplete(this._settings.partLength)&&this._lastFragmentTime!==t&&(this._lastFragmentTime=t,i=this._getCommonData("part",t),i.part=this._settings.partLength),i}},{key:"_getRestPartData",value:function(e){var t=this._player.getCompleteRestFragmentLength(this._settings.partLength),i=null;return t&&(i=this._getCommonData("part",e),i.part=t),i}},{key:"_processHit",value:function(e,t,i){var n=e.action;this._content.dotData&&this._content.dotData["*"]&&(e=Object.assign(e,this._content.dotData["*"])),this._content.dotData&&this._content.dotData[n]&&(e=Object.assign(e,this._content.dotData[n])),this._dot.hit("event",{d:e})}},{key:"_resetContentData",value:function(){this._content=null,this._data=null,this._duration=NaN,this._lastFragmentTime=0}}]),i}(s.default);n.default=r},{"../../richmediaplayer/tracking/Tracker":83}],126:[function(t,i,n){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=(0,r.default)(e),n=new l.default(i);return t&&(t.dot&&n.setDot(t.dot,t.dotSettings),t.im&&n.setIm(im),t.playlist&&n.setPlaylist(t.playlist)),n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var s=t("../richmediaplayer/createRichMediaPlayer"),r=e.interopRequireDefault(s),a=t("./SznRichMediaPlayer"),l=e.interopRequireDefault(a)},{"../richmediaplayer/createRichMediaPlayer":57,"./SznRichMediaPlayer":99}],127:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../richmediaplayer/tracking/Tracker"),s=e.interopRequireDefault(o),r=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return n._player=t,n}return e.inherits(i,t),e.createClass(i,[{key:"track",value:function(e,t){var i=this;"TIMEUPDATE"===e&&!function(){var e=i._player.getOverlays(),t=i._player.getCurrentTime(),n=i._player.getStartTime()||0,o=i._player.isLiveStreaming()?null:i._player.getDuration();e.forEach(function(e){var s=null;"atTime"===e.start.type?s=e.start.time:"afterStart"===e.start.type?s=n+e.start.time:"beforeEnd"===e.start.type&&o&&(s=o-e.start.time);var r=null!==s&&s<=t&&s+e.duration>=t;r?i._player.showVisualElement(e.id):i._player.hideVisualElement(e.id)})}()}}]),i}(s.default);n.default=r},{"../../richmediaplayer/tracking/Tracker":83}],128:[function(t,i,n){"use strict";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,r.default)(t),o=new l.default([e]);return i.logo&&n.setLogo(i.logo),i.dot&&n.setDot(i.dot,i.dotSettings),i.gemiusStream&&n.setGemiusStream(i.gemiusStream,i.gemiusStreamSettings),i.gemiusPlayer&&n.setGemiusPrism(i.gemiusPlayer,i.gemiusPrismSettings),i.im&&n.setIm(im),i.ads&&o.setAds(i.ads),n.setPlaylist(o),n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var s=t("./createSznRichMediaPlayer"),r=e.interopRequireDefault(s),a=t("./StandardPlaylist"),l=e.interopRequireDefault(a)},{"./StandardPlaylist":97,"./createSznRichMediaPlayer":126}],129:[function(t,i,n){(function(i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../common/errors"),s=e.interopRequireDefault(o),r=t("../../mediaplayer/streaming/QualityList"),a=e.interopRequireDefault(r),l=new s.default.ErrorFactory(s.default.createSourceName(i)),u="application/vnd.apple.mpegurl",c="video/mp4",d=415,_=5e3,h=function(){function t(i){e.classCallCheck(this,t),this._loaderFactory=i,this._options={},this._splUrl="",this._loadedUrl="",this._reloadCount=0,this._resolve=null,this._reject=null,this._loadDone=this._loadDone.bind(this),this._loadFailed=this._loadFailed.bind(this)}return e.createClass(t,null,[{key:"resolveUrl",value:function(e,i){var n="number"==typeof i.cutFrom?"cut,"+i.cutFrom+(""+("number"==typeof i.cutTo?","+i.cutTo:""))+"|":"",o=t.SUPPORTED_VERSION;return""+e+(""+n)+"spl2,"+o+(""+(i.type?","+i.type:""))}},{key:"isValidSpl",value:function(e){var t=e.data&&e.data.mp4,i=e.pls&&e.pls.hls,n=e.pls&&e.pls.dash,o=e.data&&e.data.overlay&&e.data.overlay.overlay;return t||i||n||o}},{key:"getRedirectSpl",value:function(e){return e.Location?e.Location:e.location?e.location:null}},{key:"getBaseUrl",value:function(e){var t="",i=e,n=e.indexOf("//");n>-1&&(t=e.substr(0,n+2),i=e.substr(n+2));var o=null,s=i.lastIndexOf("/");return o=s>-1?t+i.substr(0,s+1):t+i+"/"}},{key:"parseSpl",value:function(e){var i=JSON.parse(e);if(0===Object.keys(i).length)return null;var n=t.getRedirectSpl(i);if(null!==n)return n;if(!t.isValidSpl(i))throw l.createError(s.default.SOURCE_SPL,"Spl is not valid.");return i}},{key:"absolutizeSpl",value:function(e,i){var n=t.getBaseUrl(i),o=Object.assign({},e);if(o.pls&&o.pls.hls&&(o.pls.hls.url=t.absolutizeUrl(o.pls.hls.url,n)),o.pls&&o.pls.dash&&(o.pls.dash.url=t.absolutizeUrl(o.pls.dash.url,n)),o.data&&o.data.mp4){var s=Object.keys(o.data.mp4);s.forEach(function(e){var i=o.data.mp4[e];i.url=t.absolutizeUrl(i.url,n)})}return o.data&&o.data.overlay&&o.data.overlay.overlay&&(o.data.overlay.overlay.url=t.absolutizeUrl(o.data.overlay.overlay.url,n)),o}},{key:"absolutizeUrl",value:function(e,t){return e.indexOf("//")>-1?e:t+e}},{key:"createSource",value:function(e){var t=e.pls&&e.pls.hls,i=e.data&&e.data.mp4,n=[];if(t&&n.push({name:"?",source:[{src:t.url,type:u}]}),i){var o=!0,s=!1,r=void 0;try{for(var l,d=Object.keys(i)[Symbol.iterator]();!(o=(l=d.next()).done);o=!0){var _=l.value;n.push({name:_,source:[{src:i[_].url,type:c,bitrate:i[_].bandwidth||null,codecs:i[_].codec||null}]})}}catch(e){s=!0,r=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw r}}}return new a.default(n)}},{key:"getOverlayUrl",value:function(e){return e.data&&e.data.overlay&&e.data.overlay.overlay?e.data.overlay.overlay.url:""}},{key:"getMp4Duration",value:function(e){var t=e.data&&e.data.mp4;if(t){var i=!0,n=!1,o=void 0;try{for(var s,r=Object.keys(t)[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var a=s.value;if(t[a].duration)return t[a].duration}}catch(e){n=!0,o=e}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}}return NaN}}]),e.createClass(t,[{key:"get",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Promise(function(e,i){t._resolve=e,t._reject=i});return this._splUrl=e,this._options=i,this._reloadCount=0,this._load(),n}},{key:"_load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?this._loadedUrl=e:this._loadedUrl=this._splUrl,this._loaderFactory.create().load(this._loadedUrl).then(this._loadDone,this._loadFailed)}},{key:"_reload",value:function(){var e=this;this._options.reloadCallback&&this._options.reloadCallback(),setTimeout(function(){e._reloadCount=0,e._load()},_)}},{key:"_loadDone",value:function(e){var i=null;try{i=t.parseSpl(e.data)}catch(e){return void this._reject(e)}if("string"==typeof i)if(this._reloadCount<t.MAX_REDIRECTS)this._reloadCount++,this._load(i);else{var n=l.createError(s.default.SOURCE_SPL,"Too many Spl redirects.");this._reject(n)}else null===i?this._reload():this._resolve(t.absolutizeSpl(i,this._loadedUrl))}},{key:"_loadFailed",value:function(e){var i=e.type,n=e.url,o=e.status,r=void 0===o?0:o;if(r===d)this._reload();else if(this._reloadCount<t.MAX_RETRIES)this._reloadCount++,this._load();else{var a=l.createError(s.default.SOURCE_SPL,"Request to "+n+" was rejected."+(" Reason: "+i+", status: "+r+"."));this._reject(a)}}},{key:"resolveAndGet",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.reloadCallback||null,o={scheme:i.scheme||"",type:i.type||"",cutFrom:"number"==typeof i.cutFrom&&i.cutFrom,cutTo:"number"==typeof i.cutTo&&i.cutTo},s=t.resolveUrl(e,o);return this.get(s,{reloadCallback:n})}}]),t}();h.SUPPORTED_VERSION=3,h.MAX_REDIRECTS=5,h.MAX_RETRIES=1,n.default=h}).call(this,"/src\\js\\sznplayer\\spl\\SplResource.js")},{"../../common/errors":18,"../../mediaplayer/streaming/QualityList":36}],130:[function(t,i,n){"use strict";function o(){var e=new l.default(r.default,{},l.default.PROFILE_PLAYLIST);return new c.default(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var s=t("../../common/utils"),r=e.interopRequireDefault(s),a=t("../../common/LoaderFactory"),l=e.interopRequireDefault(a),u=t("./SplResource"),c=e.interopRequireDefault(u)},{"../../common/LoaderFactory":12,"../../common/utils":23,"./SplResource":129}],131:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",onClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,onClick:null}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("button",{className:"sznp-ui-widget-actionarea","data-js-actionarea":"1",type:"button"}),this.__setDisplayed(e.displayed),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed)}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("click",this.__clickOn)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick()}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],132:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{title:null}},n._component={},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",text:"string",onClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,text:"",onClick:null}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("button",{className:"sznp-ui-widget-action-button",type:"button"}),this._dom.refs.title=(0,r.createElm)("span",{className:"sznp-ui-button-title"}),(0,r.elm)(this._dom.root).append(this._dom.refs.title),this.__setDisplayed(e.displayed),this.__setText(e.text),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.text!=e.text&&this.__setText(e.text)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setText",value:function(e){this._dom.refs.title.innerHTML=e}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick()}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],133:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{text:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{text:"string",displayed:"boolean"}}},{key:"uiGetDefaultProps",value:function(){return{text:"",displayed:!1}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-action-caption"}),this._dom.refs.text=(0,r.createElm)("span",{className:"sznp-ui-action-caption-text"}),(0,r.elm)(this._dom.root).append(this._dom.refs.text),this.__setDisplayed(e.displayed),this.__setText(e.text)}},{key:"_onUiUpdate",value:function(e){this._props.text!=e.text&&this.__setText(e.text),this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed)}},{key:"__setText",value:function(e){this._dom.refs.text.innerHTML=e}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],134:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{text:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{text:"string",displayed:"boolean"}}},{key:"uiGetDefaultProps",value:function(){return{text:"",displayed:!1}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-ad-caption"}),this._dom.refs.text=(0,r.createElm)("span",{className:"sznp-ui-ad-caption-text"}),(0,r.elm)(this._dom.root).append(this._dom.refs.text),this.__setDisplayed(e.displayed),this.__setText(e.text)}},{key:"_onUiUpdate",value:function(e){this._props.text!=e.text&&this.__setText(e.text),this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed)}},{key:"__setText",value:function(e){this._dom.refs.text.innerHTML=e}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],135:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{text:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{text:"string",displayed:"boolean"}}},{key:"uiGetDefaultProps",value:function(){return{text:"",displayed:!1}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-ad-countdown-caption"}),this._dom.refs.text=(0,r.createElm)("span",{className:"sznp-ui-ad-countdown-caption-text"}),(0,r.elm)(this._dom.root).append(this._dom.refs.text),this.__setDisplayed(e.displayed),this.__setText(e.text)}},{key:"_onUiUpdate",value:function(e){this._props.text!=e.text&&this.__setText(e.text),this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed)}},{key:"__setText",value:function(e){this._dom.refs.text.innerHTML=e}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],136:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("../common/uiIcon"),l=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{iconContainer:null,icon:null,text:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{indicator:"boolean",text:"string"}}},{key:"uiGetDefaultProps",value:function(){return{indicator:!0,text:""}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("span",{className:"sznp-ui-widget-ad-icon-caption"}),this._dom.refs.icon=(0,a.getIcon)("play","#dadada"),this._dom.refs.iconContainer=(0,r.createElm)("span",{className:"sznp-ui-icon-container"}),this._dom.refs.text=(0,r.createElm)("span",{className:"sznp-ui-ad-caption-text"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.iconContainer).append(this._dom.refs.icon),this._dom.refs.text),this.__setText(e.text)}},{key:"_onUiUpdate",value:function(e){this._props.text!=e.text&&this.__setText(e.text)}},{key:"__setText",value:function(e){this._dom.refs.text.innerHTML=e}}]),i}(s.default);n.default=l},{"../common/UiComponent":14,"../common/uiDom":20,"../common/uiIcon":21}],137:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./Icon"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{title:null,iconContainer:null}},n._component={icon:null},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",text:"string",onClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,text:"",onClick:null}}},{key:"_onUiInit",value:function(e){this._component.icon=new l.default(this.__getPropsForIcon())}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("button",{className:"sznp-ui-widget-ad-skip-button",type:"button"}),this._dom.refs.title=(0,r.createElm)("span",{className:"sznp-ui-button-title"}),this._dom.refs.iconContainer=(0,r.createElm)("span",{className:"sznp-ui-widget-icon-container"}),(0,r.elm)(this._dom.root).append(this._dom.refs.title,(0,r.elm)(this._dom.refs.iconContainer).append(this._component.icon.uiGetElement())),this.__setDisplayed(e.displayed),this.__setText(e.text),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.text!=e.text&&this.__setText(e.text)}},{key:"__getPropsForIcon",value:function(){return{"arrow-right":{displayed:!0}}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setText",value:function(e){this._dom.refs.title.innerHTML=e}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick()}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"./Icon":140}],138:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{title:null,content:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{title:"string",content:"string"}}},{key:"uiGetDefaultProps",value:function(){return{title:"",content:""}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("article",{className:"sznp-article"}),this._dom.refs.title=(0,r.createElm)("h1",{className:"sznp-title"}),this._dom.refs.content=(0,r.createElm)("div",{className:"sznp-content"}),(0,r.elm)(this._dom.root).append(this._dom.refs.title,this._dom.refs.content),this.__setTitle(e.title),this.__setContent(e.content)}},{key:"_onUiUpdate",value:function(e){this._props.title!=e.title&&this.__setTitle(e.title),this._props.content!=e.content&&this.__setContent(e.content)}},{key:"__setTitle",value:function(e){this._dom.refs.title.innerHTML=e,this.__setDisplayed("title",!!e)}},{key:"__setContent",value:function(e){this._dom.refs.content.innerHTML=e,this.__setDisplayed("content",!!e)}},{key:"__setDisplayed",value:function(e,t){(0,r.elm)(this._dom.refs[e]).setDisplayed(t)}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],139:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",fullSizeLook:"boolean",href:"string",onClick:["function","object"],target:"string",text:"string"}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,fullSizeLook:!1,href:"",onClick:null,target:"",text:""}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("a",{className:"sznp-ui-widget-clickthrough-link",target:e.clickthroughTarget}),this.__setDisplayed(e.displayed),this.__setText(e.text),this.__setHref(e.href),this.__setTarget(e.target),this.__setFullSizeLook(e.fullSizeLook),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.fullSizeLook!=e.fullSizeLook&&this.__setFullSizeLook(e.fullSizeLook),this._props.href!=e.href&&this.__setHref(e.href),this._props.target!=e.target&&this.__setTarget(e.target),this._props.text!=e.text&&this.__setText(e.text)}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("click",this.__clickOn)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setFullSizeLook",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-full-size-look":e})}},{key:"__setText",value:function(e){this._dom.root.innerHTML=e}},{key:"__setHref",value:function(e){this._dom.root.href=e}},{key:"__setTarget",value:function(e){this._dom.root.target=e}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick()}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],140:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("../common/uiIcon"),l=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{icons:{}}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{"arrow-right":"object",circle:"object",cross:"object",close:"object","fullscreen-off":"object","fullscreen-on":"object",mute:"object",pause:"object",play:"object","play-timer":"object",quality:"object",reload:"object",subtitles:"object",volume:"object"}}},{key:"uiGetDefaultProps",value:function(){return{"arrow-right":null,circle:null,cross:null,close:null,"fullscreen-off":null,"fullscreen-on":null,mute:null,pause:null,play:null,"play-timer":null,quality:null,reload:null,subtitles:null,volume:null}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("span",{className:"sznp-ui-widget-icon"}),this.__processIcons(e)}},{key:"_onUiUpdate",value:function(e){this.__iconsChanged(e)&&this.__processIcons(e)}},{key:"__iconsChanged",value:function(e){var t=this._props;return JSON.stringify(e)!=JSON.stringify(t)}},{key:"__processIcons",value:function(e){var t=!0,i=!1,n=void 0;try{for(var o,s=Object.keys(e)[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var r=o.value;e[r]?this._dom.refs.icons[r]?this.__updateIcon(r,e[r]):this.__appendIcon(r,e[r]):this.__removeIcon(r)}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}}},{key:"__appendIcon",value:function(e,t){var i=t.displayed,n=(t.color,(0,a.getIcon)(e,t.color));(0,r.elm)(this._dom.root).append(n),(0,r.elm)(n).setDisplayed(i),this._dom.refs.icons[e]=n}},{key:"__updateIcon",value:function(e,t){var i=t.displayed,n=t.color,o=this._dom.refs.icons[e];(0,r.elm)(o).setDisplayed(i),(0,a.updateIcon)(o,n)}},{key:"__removeIcon",value:function(e){var t=this._dom.refs.icons[e];t&&((0,r.elm)(this._dom.root).remove(t),delete this._dom.refs.icons[e])}}]),i}(s.default);n.default=l},{"../common/UiComponent":14,"../common/uiDom":20,"../common/uiIcon":21}],141:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./Icon"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{indicator:null}},n._component={icon:null},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{cssClassWithExtraLook:"object",displayed:"boolean",enabled:"boolean",indicatorColor:"string",indicatorActivated:"boolean",iconProps:"object",titleEnabled:"string",titleDisabled:"string",onClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{cssClassWithExtraLook:[],displayed:!0,enabled:!0,indicatorColor:"",indicatorActivated:!1,titleEnabled:"",titleDisabled:"",iconProps:null,onClick:null}}},{key:"_onUiInit",value:function(e){this._component.icon=new l.default(this.__getPropsForIcon(e.iconProps))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("button",{className:"sznp-ui-widget-icon-button",type:"button"}),this._dom.refs.indicator=(0,r.createElm)("span",{className:"sznp-ui-indicator"}),(0,r.elm)(this._dom.root).append(this._component.icon.uiGetElement(),this._dom.refs.indicator),this.__setDisplayed(e.displayed),this.__setEnabled(e.enabled),this.__setCssClassWithExtraLook(e.cssClassWithExtraLook),this.__setIndicator(e.indicatorActivated,e.indicatorColor),this.__setTitle(e.enabled?e.titleEnabled:e.titleDisabled),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.indicatorActivated==e.indicatorActivated&&this._props.indicatorColor==e.indicatorColor||this.__setIndicator(e.indicatorActivated,e.indicatorColor),this._props.enabled==e.enabled&&this._props.titleEnabled==e.titleEnabled&&this._props.titleDisabled==e.titleDisabled||(this.__setEnabled(e.enabled),this.__setTitle(e.enabled?e.titleEnabled:e.titleDisabled)),this._props.cssClassWithExtraLook!=e.cssClassWithExtraLook&&this.__setCssClassWithExtraLook(e.cssClassWithExtraLook),this._props.iconProps!=e.iconProps&&this._component.icon.uiUpdate(this.__getPropsForIcon(e.iconProps))}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("click",this.__clickOn);
}},{key:"__getPropsForIcon",value:function(e){return Object.assign({},e)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setCssClassWithExtraLook",value:function(e){var t={"sznp-ui-padding-10-look":!1,"sznp-ui-padding-20-look":!1,"sznp-ui-rounded-dark-look":!1,"sznp-ui-rounded-light-look":!1,"sznp-ui-icon-play-centered-look":!1};e.forEach(function(e){if(e){if(!(e in t))throw new Error('Unknown CSS class with look "'+e+'".');t[e]=!0}}),(0,r.elm)(this._dom.root).cssClasses(t)}},{key:"__setEnabled",value:function(e){this._dom.root.disabled=!e}},{key:"__setIndicator",value:function(e,t){(0,r.elm)(this._dom.refs.indicator).cssClasses({"sznp-ui-activated":e}).setStyle({backgroundColor:t})}},{key:"__setTitle",value:function(e){this._dom.root.title=e}},{key:"__clickOn",value:function(){this._props.onClick&&this._props.enabled&&this._props.onClick()}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"./Icon":140}],142:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("../widgets/IconButton"),l=e.interopRequireDefault(a),u="sznp-ui-widget-injections-container",c=.5,d=40,_=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{span:null,a:null,img:null,iframe:null,video:null,canvas:null,videoCanvas:null}},n._component={closeButton:null},n._bind=["__clickOn","__onCloseButtonClick","__onLoadedMetadata"],n._position=null,n._dimensions=null,n._canvasRefreshTimeout=null,n._canvasCtx=null,n._videoCanvasCtx=null,n._lastDrawTime=null,n._isCanvasError=!1,n}return e.inherits(i,t),e.createClass(i,[{key:"getId",value:function(){return this._props.id}},{key:"uiGetDeclaredProps",value:function(){return{id:"string",start:"object",src:"string",content:"string",type:"string",clickthrough:"string",clickthroughTarget:"string",closeButtonTitle:"string",closeButtonDisplayed:"boolean",position:"object",defaultPosition:"string",width:"string",height:"string",bgcolor:"string",animation:"object",videoDimensions:"object",controlPanelIntersectionHeight:"number",contentPlaying:"boolean",contentSeeking:"boolean",contentLoading:"boolean",contentStart:"number",contentTime:"number",contentDuration:"number",contentStreamingLive:"boolean",onClick:["function","object"],onClose:["function","object"],onError:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{clickthroughTarget:"_blank",closeButtonTitle:"",closeButtonDisplayed:!1,controlPanelIntersectionHeight:0,onClick:null,onClose:null,onError:null}}},{key:"_onUiInit",value:function(e){this._component.closeButton=new l.default(this.__getPropsForCloseButton(e))}},{key:"_onUiBuild",value:function(e){var t=null;this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-injection"+(e.position?"":" sznp-ui-widget-injection-centered"),style:this._getStyleRules(e)}),e.clickthrough&&(this._dom.refs.a=(0,r.createElm)("a",{className:"sznp-ui-widget-injection-link",href:e.clickthrough,target:e.clickthroughTarget}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.a))),t=this._dom.refs.a?this._dom.refs.a:this._dom.root,e.src&&"video/mp4s"===e.type?(this._dom.refs.video=(0,r.createElm)("video",{className:"sznp-ui-widget-injection-video",src:e.src,crossOrigin:"anonymous"}),this._dom.refs.video.addEventListener("loadedmetadata",this.__onLoadedMetadata),this._dom.refs.canvas=(0,r.createElm)("canvas",{className:"sznp-ui-widget-injection-canvas"}),this._canvasCtx=this._dom.refs.canvas.getContext("2d"),this._dom.refs.videoCanvas=(0,r.createElm)("canvas",{className:"sznp-ui-widget-injection-video-canvas"}),this._videoCanvasCtx=this._dom.refs.videoCanvas.getContext("2d"),(0,r.elm)(t).append((0,r.elm)(this._dom.refs.canvas)),this.__refreshCanvas()):e.src&&0===e.type.indexOf("image")?(this._dom.refs.img=(0,r.createElm)("img",{className:"sznp-ui-widget-injection-img",src:e.src}),(0,r.elm)(t).append((0,r.elm)(this._dom.refs.img)),e.position||(0,r.elm)(this._dom.root).append(this._component.closeButton.uiGetElement())):(e.src||e.content)&&"text/html"===e.type&&(this._dom.refs.iframe=this._createIframe(e),(0,r.elm)(t).append((0,r.elm)(this._dom.refs.iframe))),this._dom.refs.a&&this._dom.refs.a.addEventListener("click",this.__clickOn)}},{key:"_onUiCanUpdate",value:function(e){return this.__uiCanUpdate(e)||this.__uiCanSynchronize(e)}},{key:"__uiCanUpdate",value:function(e){return JSON.stringify(e.videoDimensions)!=JSON.stringify(this._props.videoDimensions)||e.controlPanelIntersectionHeight!=this._props.controlPanelIntersectionHeight||e.closeButtonDisplayed!=this._props.closeButtonDisplayed||e.defaultPosition!=this._props.defaultPosition||this._dom.root&&"hidden"===(0,r.elm)(this._dom.root).node().style.visibility}},{key:"__uiCanSynchronize",value:function(e){return!!this._dom.refs.video&&(e.contentTime!=this._props.contentTime||e.contentStart!=this._props.contentStart&&"afterStart"==e.start.type||e.contentDuration!=this._props.contentDuration&&"beforeEnd"==e.start.type||e.contentStreamingLive!=this._props.contentStreamingLive&&"beforeEnd"==e.start.type||e.contentPlaying!=this._props.contentPlaying||e.contentSeeking!=this._props.contentSeeking||e.contentLoading!=this._props.contentLoading)}},{key:"_onUiUpdate",value:function(e){this.__uiCanUpdate(e)&&(this._component.closeButton.uiUpdate(this.__getPropsForCloseButton(e)),(0,r.elm)(this._dom.root).setStyle(this._getStyleRules(e)),this.__avoidControlPanelIntersection(e),(0,r.elm)(this._dom.root).setStyle(this._getAnimationStyleRules(e))),this.__uiCanSynchronize(e)&&this.__uiSynchronize(e)}},{key:"_onUiDestroy",value:function(){this._dom.refs.video&&(this._dom.refs.video.removeEventListener("loadedmetadata",this.__onLoadedMetadata),this._canvasRefreshTimeout&&(cancelAnimationFrame(this._canvasRefreshTimeout),this._canvasRefreshTimeout=null),this._dom.refs.video.pause())}},{key:"__uiSynchronize",value:function(t){var i=null;if("atTime"===t.start.type?i=t.start.time:"afterStart"===t.start.type&&t.contentStart>=0?i=t.contentStart+t.start.time:"beforeEnd"===t.start.type&&t.contentDuration&&!t.contentStreamingLive&&(i=t.contentDuration-t.start.time),null!==i){var n=this.__getInjectionCurrentTime(t),o=t.contentTime-i;if(o>=0&&Math.abs(n-o)>c&&(this._dom.refs.video.currentTime=o),!t.contentPlaying||t.contentSeeking||t.contentLoading)this._dom.refs.video.paused||this._dom.refs.video.pause();else if(this._dom.refs.video.paused){var s=this._dom.refs.video.play();null!==s&&"object"===("undefined"==typeof s?"undefined":e.typeof(s))&&s.catch(function(){})}}}},{key:"__refreshCanvas",value:function(e){var t=this;this.__drawCanvas(e),this._isCanvasError||(this._canvasRefreshTimeout=requestAnimationFrame(function(e){return t.__refreshCanvas(e)}))}},{key:"__drawCanvas",value:function(e){if(this._dimensions&&!(null!==this._lastDrawTime&&e-this._lastDrawTime<=d)){this._lastDrawTime=e;try{this._videoCanvasCtx.drawImage(this._dom.refs.video,0,0,2*this._dimensions.width,this._dimensions.height);for(var t=this._videoCanvasCtx.getImageData(0,0,this._dimensions.width,this._dimensions.height),i=this._videoCanvasCtx.getImageData(this._dimensions.width,0,this._dimensions.width,this._dimensions.height),n=t.data.length/4,o=0;o<n;o++)t.data[4*o+3]=i.data[4*o];this._canvasCtx.putImageData(t,0,0),this._isCanvasError=!1}catch(e){this._isCanvasError=!0,this.__onError(e)}}}},{key:"__getInjectionCurrentTime",value:function(e){return this._dom.refs.video?this._dom.refs.video.currentTime:null}},{key:"_getParentContainer",value:function(e){for(var t=e;(t=t.parentNode)&&!t.classList.contains(u););return t}},{key:"_createIframe",value:function(e){var t=this,i=(0,r.createElm)("iframe",{className:"sznp-ui-widget-injection-iframe",src:e.src?e.src:"about:blank",sandbox:"allow-same-origin allow-scripts",scrolling:"no",style:{width:e.width,height:e.height},allowTransparency:!0});return i.onload=function(){var t=i.contentWindow.document.createElement("style");if(t.type="text/css",t.innerHTML="body { margin: 0px; padding: 0px; }",i.contentWindow.document.head.appendChild(t),!e.src){var n=i.contentWindow.document.createElement("div");n.innerHTML=e.content,i.contentWindow.document.body.appendChild(n)}},i.onerror=function(){var e="Visual element of type text/html threw an error.";t.__onError(e)},i}},{key:"__getPropsForCloseButton",value:function(e){return{displayed:!0,titleEnabled:e.closeButtonTitle,iconProps:{close:{displayed:e.closeButtonDisplayed}},onClick:this.__onCloseButtonClick}}},{key:"_getStyleRules",value:function(e){var t=e.position,i=e.defaultPosition,n=e.width,o=e.height,s=e.bgcolor,r={position:"absolute",visibility:"hidden"};if(s&&(r["background-color"]=""+s),!t)return r.left="0px",r.right="0px","top"===i?(r.top="0px",r.bottom="auto"):(r.top="auto",r.bottom="0px"),r;if("x"in t&&(r[t.x.origin]=""+t.x.value,t.x.center&&(r.transform="left"===t.x.origin?"translateX(-50%)":"translateX(50%)")),"y"in t&&(r[t.y.origin]=""+t.y.value,t.y.center)){var a="top"===t.y.origin?"translateY(-50%)":"translateY(50%)";"transform"in r?r.transform+=" "+a:r.transform=a}return n&&(r.width=""+n),o&&(r.height=""+o),r}},{key:"_getAnimationStyleRules",value:function(e){var t=e.position,i=e.animation,n={visibility:"visible"};return i&&"slide"===i.type&&(n["animation-name"]="sznp-slide-"+i.params.direction+"-"+("left"===i.params.direction||"right"===i.params.direction?t.x.origin:t.y.origin),n["animation-duration"]=i.params.duration+"ms"),n}},{key:"__avoidControlPanelIntersection",value:function(e){var t=(0,r.elm)(this._dom.root);if(null===this._position||JSON.stringify(e.videoDimensions)!=JSON.stringify(this._props.videoDimensions)||e.defaultPosition!=this._props.defaultPosition){var i=t.node(),n=this._getParentContainer(i);if(n){var o=i.getBoundingClientRect(),s=n.getBoundingClientRect();this._position={top:o.top-s.top,bottom:s.bottom-o.bottom}}}if(this._position&&e.controlPanelIntersectionHeight&&this._position.bottom<e.controlPanelIntersectionHeight){var a=e.position?e.position.y.origin:e.defaultPosition;"top"===a?t.setStyle({top:this._position.top-e.controlPanelIntersectionHeight+"px",transform:"none"}):t.setStyle({bottom:e.controlPanelIntersectionHeight+"px",transform:"none"})}}},{key:"__onLoadedMetadata",value:function(e){this._dom.refs.video.videoWidth&&this._dom.refs.video.videoHeight&&(this._dimensions={width:this._dom.refs.video.videoWidth/2,height:this._dom.refs.video.videoHeight},this._dom.refs.videoCanvas.setAttribute("width",2*this._dimensions.width),this._dom.refs.videoCanvas.setAttribute("height",this._dimensions.height),this._dom.refs.canvas.setAttribute("width",this._dimensions.width),this._dom.refs.canvas.setAttribute("height",this._dimensions.height))}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick(this._props.id)}},{key:"__onCloseButtonClick",value:function(){this._props.onClose&&this._props.onClose(this._props.id)}},{key:"__onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._props.onError&&this._props.onError(this._props.id,e)}}]),i}(s.default);n.default=_},{"../common/UiComponent":14,"../common/uiDom":20,"../widgets/IconButton":141}],143:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./Injection"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null},n._component={injections:[]},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{injections:"object",playing:"boolean",seeking:"boolean",loading:"boolean",streamingLive:"boolean",startTime:"number",currentTime:"number",duration:"number",videoDimensions:"object",controlPanelIntersectionHeight:"number",onClick:["function","object"],onClose:["function","object"],onError:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{injections:[],playing:!1,seeking:!1,loading:!1,startTime:-1,currentTime:0,duration:0,controlPanelIntersectionHeight:0,onClick:null,onClose:null,onError:null}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-injections"})}},{key:"_onUiCanUpdate",value:function(e){return JSON.stringify(e.injections)!=JSON.stringify(this._props.injections)||JSON.stringify(e.videoDimensions)!=JSON.stringify(this._props.videoDimensions)||e.controlPanelIntersectionHeight!=this._props.controlPanelIntersectionHeight||e.startTime!=this._props.startTime||e.currentTime!=this._props.currentTime||e.duration!=this._props.duration||e.playing!=this._props.playing||e.seeking!=this._props.seeking||e.loading!=this._props.loading}},{key:"_onUiUpdate",value:function(e){for(var t=this,i=this._component.injections.length,n=function(i){var n=t._component.injections[i],o=n.getId();e.injections.find(function(e){return e.id===o})||t.__removeInjection(n,i)},o=i-1;o>=0;o--)n(o);e.injections.forEach(function(i){var n=t._component.injections.find(function(e){return e.getId()===i.id});n?n.uiUpdate(t.__getPropsForInjection(e,i)):t.__addInjection(i,e)})}},{key:"__getPropsForInjection",value:function(e,t){return Object.assign({contentPlaying:e.playing,contentSeeking:e.seeking,contentLoading:e.loading,contentStart:e.startTime,contentTime:e.currentTime,contentDuration:e.duration,contentStreamingLive:e.streamingLive,videoDimensions:e.videoDimensions,controlPanelIntersectionHeight:e.controlPanelIntersectionHeight,onClick:e.onClick,onClose:e.onClose,onError:e.onError},t)}},{key:"__createComponent",value:function(e){var t=new l.default(e);return t.uiInit(),t.uiSetEventEmitter(this.__eventEmitter),t.uiBuild(),t}},{key:"__addInjection",value:function(e,t){var i=this.__createComponent(this.__getPropsForInjection(t,e));this._component.injections.push(i),(0,r.elm)(this._dom.root).append(i.uiGetElement()),i.uiForceUpdate()}},{key:"__removeInjection",value:function(e,t){(0,r.elm)(this._dom.root).remove(e.uiGetElement()),this._component.injections.splice(t,1),e.uiDestroy()}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"./Injection":142}],144:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./Icon"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{iconContainer:null,text:null,arrow:null}},n._component={icon:null},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{arrowDisplayed:"boolean",displayed:"boolean",liveText:"string",playingLive:"boolean",transparentLook:"boolean",onClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{arrowDisplayed:!0,displayed:!1,liveText:"",playingLive:!1,transparentLook:!1,onClick:null}}},{key:"_onUiInit",value:function(e){this._component.icon=new l.default(this.__getPropsForIcon(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("button",{className:"sznp-ui-widget-live-bubble",type:"button"}),this._dom.refs.iconContainer=(0,r.createElm)("span",{className:"sznp-ui-widget-icon-container"}),this._dom.refs.text=(0,r.createElm)("span",{className:"sznp-ui-bubble-text"}),this._dom.refs.arrow=(0,r.createElm)("span",{className:"sznp-ui-bubble-arrow",innerHTML:'\n\t\t\t\t<svg\n\t\t\t\t\tversion="1.1"\n\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\t\t\t\twidth="36"\n\t\t\t\t\theight="36"\n\t\t\t\t\tviewBox="0 0 36 36"\n\t\t\t\t>\n\t\t\t\t\t<path d="M33.333 2.667h-30.667l30.667 30.667z"></path>\n\t\t\t\t</svg>\n\t\t\t'}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.iconContainer).append(this._component.icon.uiGetElement()),this._dom.refs.text,this._dom.refs.arrow),this.__setDisplayed(e.displayed),this.__setTrasparentLook(e.transparentLook),this.__setArrowDisplayed(e.arrowDisplayed),this.__setText(e.liveText),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiCanUpdate",value:function(e){return e.displayed||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.arrowDisplayed!=e.arrowDisplayed&&this.__setArrowDisplayed(e.displayed),this._props.liveText!=e.liveText&&this.__setText(e.liveText),this._props.transparentLook!=e.transparentLook&&this.__setTrasparentLook(e.transparentLook),this._component.icon.uiUpdate(this.__getPropsForIcon(e))}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("click",this.__clickOn)}},{key:"__getPropsForIcon",value:function(e){return{circle:{displayed:!0,color:e.playingLive?"#ff0000":"#ccc"}}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setArrowDisplayed",value:function(e){(0,r.elm)(this._dom.refs.arrow).setDisplayed(e)}},{key:"__setText",value:function(e){this._dom.refs.text.innerHTML=e}},{key:"__setTrasparentLook",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-transparent":e})}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick()}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"./Icon":140}],145:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("../widgets/IconButton"),l=e.interopRequireDefault(a),u=t("./ModalMenuItem"),c=e.interopRequireDefault(u),d=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{menuItems:null,header:null,headerText:null,close:null}},n._component={menuItems:null,closeButton:null},n._bind=["__onMenuItemClick","__onCloseButtonClick"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{opened:"boolean",title:"string",indicatorColor:"string",closeButtonTitle:"string",items:"object",onItemSelect:["function","object"],onClose:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{opened:!1,indicatorColor:"",title:"",closeButtonTitle:"",items:[],onItemSelect:null,onClose:null}}},{key:"_onUiInit",value:function(e){this._component.menuItems=this.__createMenuItems(e.items,e.indicatorColor),this._component.closeButton=new l.default(this.__getPropsForCloseButton(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-modal-menu"}),this._dom.refs.header=(0,r.createElm)("div",{className:"sznp-ui-modal-menu-header"}),this._dom.refs.headerWrapper=(0,r.createElm)("div",{className:"sznp-ui-header-wrapper"}),this._dom.refs.headerText=(0,r.createElm)("div",{className:"sznp-ui-header-text"}),this._dom.refs.close=(0,r.createElm)("div",{className:"sznp-ui-modal-menu-close"}),this._dom.refs.menuItems=(0,r.createElm)("div",{className:"sznp-ui-modal-menu-items"}),this.__buildCurrentMenuItems(),this.__setTitle(e.title),this.__setOpened(e.opened),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.header).append((0,r.elm)(this._dom.refs.headerWrapper).append(this._dom.refs.headerText,(0,r.elm)(this._dom.refs.close).append(this._component.closeButton.uiGetElement()))),this._dom.refs.menuItems)}},{key:"_onUiUpdate",value:function(e){this._props.opened!=e.opened&&this.__setOpened(e.opened),this._props.title!=e.title&&this.__setTitle(e.title),JSON.stringify(this._props.items)!=JSON.stringify(e.items)&&(this._props.items.length===e.items.length?this.__updateCurrentMenuItems(e.items,e.indicatorColor):(this.__destroyCurrentMenuItems(),this._component.menuItems=this.__createMenuItems(e.items,e.indicatorColor),this.__buildCurrentMenuItems())),this._component.closeButton.uiUpdate(this.__getPropsForCloseButton(e))}},{key:"__getPropsForCloseButton",value:function(e){return{displayed:!0,titleEnabled:e.closeButtonTitle,iconProps:{cross:{displayed:!0}},onClick:this.__onCloseButtonClick}}},{key:"__setOpened",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-opened":e,"sznp-ui-closed":!e})}},{key:"__setTitle",value:function(e){this._dom.refs.headerText.innerHTML=e}},{key:"__createMenuItems",value:function(e,t){var i=this;return e.map(function(e,n){return new c.default({text:e.text,selected:e.selected,id:e.id,indicatorColor:t,onClick:function(e){return i.__onMenuItemClick(e)}})})}},{key:"__buildCurrentMenuItems",value:function(){(0,r.elm)(this._dom.refs.menuItems).append(this._component.menuItems.map(function(e){return e.uiInited()||e.uiInit(),e.uiBuilt()||e.uiBuild(),e.uiGetElement()}))}},{key:"__updateCurrentMenuItems",value:function(e,t){var i=this;e.forEach(function(e,n){return i._component.menuItems[n].uiUpdate({text:e.text,selected:e.selected,id:e.id,indicatorColor:t})})}},{key:"__destroyCurrentMenuItems",value:function(){this._component.menuItems.forEach(function(e){return e.uiDestroy()}),(0,r.elm)(this._dom.refs.menuItems).clear()}},{key:"__onMenuItemClick",value:function(e){this._props.onItemSelect&&this._props.onItemSelect(e)}},{key:"__onCloseButtonClick",value:function(){this._props.onClose&&this._props.onClose()}}]),i}(s.default);n.default=d},{"../common/UiComponent":14,"../common/uiDom":20,"../widgets/IconButton":141,"./ModalMenuItem":146}],146:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.onClick=null,n._dom={root:null,refs:{itemText:null,indicator:null}},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{text:"string",selected:"boolean",id:["number","string","object"],indicatorColor:"string",onClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{text:"",selected:!1,id:null,indicatorColor:"",onClick:null}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("span",{className:"sznp-ui-modal-menu-item"}),this._dom.refs.itemText=(0,r.createElm)("span",{className:"sznp-ui-item-text"}),this._dom.refs.indicator=(0,r.createElm)("span",{className:"sznp-ui-indicator"}),(0,r.elm)(this._dom.root).append(this._dom.refs.itemText,this._dom.refs.indicator),this.__setText(e.text),this.__setIndicatorColor(e.indicatorColor,e.selected),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiUpdate",value:function(e){this._props.text!=e.text&&this.__setText(e.text),this._props.indicatorColor==e.indicatorColor&&this._props.selected==e.selected||this.__setIndicatorColor(e.indicatorColor,e.selected)}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("click",this.__clickOn)}},{key:"__setText",value:function(e){this._dom.refs.itemText.innerHTML=e}},{key:"__setIndicatorColor",value:function(e,t){(0,r.elm)(this._dom.refs.indicator).setStyle({backgroundColor:t?e:""}),(0,r.elm)(this._dom.refs.itemText).cssClasses({"sznp-ui-bold-text":t})}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick(this._props.id)}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],147:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./Icon"),l=(e.interopRequireDefault(a),t("./IconButton")),u=e.interopRequireDefault(l),c=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null},n._component={iconButton:null},n._bind=["__updateTimer","__clickOn"],n._startTime=null,n._requestId=0,n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",text:"string",time:"number",timerColor:"string",onClick:["function","object"],onTimer:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,text:"",time:null,timerColor:"#cc1c01",onClick:null,onTimer:null}}},{key:"_onUiInit",value:function(e){this._component.iconButton=new u.default(this.__getPropsForIconButton(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-play-timer"}),(0,r.elm)(this._dom.root).append(this._component.iconButton.uiGetElement()),this.__setDisplayed(e.displayed)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),e.time?(this._props.time=e.time,this._startTime=(new Date).getTime(),this.__setCountdownColor(),this._requestId&&(window.cancelAnimationFrame(this._requestId),this._requestId=0),this.__updateTimer()):(this._requestId&&(window.cancelAnimationFrame(this._requestId),this._requestId=0),this.__setCountdownAngle(0))}},{key:"_onUiDestroy",value:function(){this._requestId&&(window.cancelAnimationFrame(this._requestId),this._requestId=0)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setCountdownColor",value:function(){this.__getCountdownElement().style.fill=this._props.timerColor}},{key:"__setCountdownAngle",value:function(e){var t=e*Math.PI/180,i="M 0 0 v -36 A 36 36 1 "+(e>180?1:0)+" 1 "+36*Math.sin(t)+" "+Math.cos(t)*-36+" z";this.__getCountdownElement().setAttribute("d",i)}},{key:"__getCountdownElement",value:function(){return this._dom.root.querySelector(".sznp-icon-play-timer-countdown")}},{key:"__getPropsForIconButton",value:function(e){return{displayed:!0,titleEnabled:e.text,iconProps:{"play-timer":{displayed:!0}},onClick:this.__clickOn}}},{key:"__updateTimer",value:function(){var e=(new Date).getTime(),t=(e-(this._startTime||0))/this._props.time,i=t<=1,n=i?360*t:0;this.__setCountdownAngle(n),i?this._requestId=window.requestAnimationFrame(this.__updateTimer):(null!==this._startTime&&this._props.onTimer&&this._props.onTimer(),this._startTime=null)}},{key:"__clickOn",value:function(){this._startTime=null,this._props.onClick&&this._props.onClick()}}]),i}(s.default);n.default=c},{"../common/UiComponent":14,"../common/uiDom":20,"./Icon":140,"./IconButton":141}],148:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./PopupMenuContent"),l=e.interopRequireDefault(a),u={bottom:"",right:""},c=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{arrow:null}},n._component={popupMenuContent:null},n._bind=["__onMenuItemClick","__onMouseEnter","__onMouseLeave"],n}return e.inherits(i,t),e.createClass(i,null,[{key:"getCoordProps",value:function(e,t,i){var n=i.getBoundingClientRect(),o=n.bottom,s=n.right,r=(i.offsetWidth,i.offsetHeight,t.getBoundingClientRect()),a=t.offsetWidth,l=t.offsetHeight,u=e.uiGetElement(),c=u.offsetWidth,d=o-r.bottom+l,_=s-r.right+a/2,h=_-c/2,f=e.uiGetElement().offsetWidth/2;if(h<0){var p=Math.abs(0-h);h=0,f+=p}return{bottom:d+"",right:h+"",arrowPosLeft:f+""}}}]),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{arrowPosLeft:["number","string"],bottom:["number","string"],indicatorColor:"string",items:"object",opened:"boolean",right:["number","string"],title:"string",onItemSelect:["function","object"],onHoverOn:["function","object"],onHoverOff:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{arrowPosLeft:0,bottom:u.bottom,indicatorColor:"",items:[],opened:!1,right:u.right,title:"",onItemSelect:null,onHoverOn:null,onHoverOff:null}}},{key:"_onUiInit",value:function(e){this._component.popupMenuContent=new l.default({onMenuItemClick:this.__onMenuItemClick})}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-popup-menu"}),this._dom.refs.arrow=(0,r.createElm)("span",{className:"sznp-ui-popup-menu-arrow"}),(0,r.elm)(this._dom.root).append(this._component.popupMenuContent.uiGetElement(),this._dom.refs.arrow),this._dom.root.addEventListener("mouseenter",this.__onMouseEnter),this._dom.root.addEventListener("mouseleave",this.__onMouseLeave),this.__setOpened(e.opened),this.__setTitle(e.title),this.__updatePosBottom(e.bottom),this.__updatePosRight(e.right),this.__updateArrowPosLeft(e.arrowPosLeft),this.__updatePopupContentIndicatorColor(e.indicatorColor),this.__updatePopupContentItems(e.items)}},{key:"_onUiUpdate",value:function(e){this._props.opened!=e.opened&&this.__setOpened(e.opened),this._props.title!=e.title&&this.__setTitle(e.title),this._props.indicatorColor!=e.indicatorColor&&this.__updatePopupContentIndicatorColor(e.indicatorColor),this._props.items!=e.items&&this.__updatePopupContentItems(e.items),this._props.bottom!=e.bottom&&this.__updatePosBottom(e.bottom),this._props.right!=e.right&&this.__updatePosRight(e.right),this._props.arrowPosLeft!=e.arrowPosLeft&&this.__updateArrowPosLeft(e.arrowPosLeft)}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("mouseenter",this.__onMouseEnter),this._dom.root.removeEventListener("mouseleave",this.__onMouseLeave)}},{key:"__setOpened",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-opened":e,"sznp-ui-closed":!e})}},{key:"__setTitle",value:function(e){this._dom.root.title=e}},{key:"__updatePosBottom",value:function(e){""===e?this._dom.root.style.bottom="":this._dom.root.style.bottom=e+"px"}},{key:"__updatePosRight",value:function(e){""===e?this._dom.root.style.right="":this._dom.root.style.right=e+"px"}},{key:"__updateArrowPosLeft",value:function(e){this._dom.refs.arrow.style.left=e+"px"}},{key:"__updatePopupContentIndicatorColor",value:function(e){this._component.popupMenuContent.uiUpdate({indicatorColor:e})}},{key:"__updatePopupContentItems",value:function(e){this._component.popupMenuContent.uiUpdate({items:e})}},{key:"__updatePopupContentArrowPos",value:function(e){this._component.popupMenuContent.uiUpdate({arrowPosLeft:e})}},{key:"__onMenuItemClick",value:function(e){this._props.onItemSelect&&this._props.onItemSelect(e)}},{key:"__onMouseEnter",value:function(e){this._props.onHoverOn&&this._props.onHoverOn()}},{key:"__onMouseLeave",value:function(e){this._props.onHoverOff&&this._props.onHoverOff()}}]),i}(s.default);n.default=c},{"../common/UiComponent":14,"../common/uiDom":20,"./PopupMenuContent":149}],149:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./PopupMenuItem"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{}},n._component={menuItems:null},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{arrowPosLeft:"number",indicatorColor:"string",items:"object",onMenuItemClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{arrowPosLeft:0,indicatorColor:"",items:[],onMenuItemClick:null}}},{key:"_onUiInit",value:function(e){this._component.menuItems=this.__createMenuItems(e.items,e.indicatorColor)}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-popup-menu-content"}),this.__buildCurrentMenuItems()}},{key:"_onUiUpdate",value:function(e){JSON.stringify(this._props.items)!=JSON.stringify(e.items)&&(this._props.items.length===e.items.length?this.__updateCurrentMenuItems(e.items,e.indicatorColor):(this.__destroyCurrentMenuItems(),
this._component.menuItems=this.__createMenuItems(e.items,e.indicatorColor),this.__buildCurrentMenuItems()))}},{key:"__createMenuItems",value:function(e,t){var i=this;return e.map(function(e){return new l.default({text:e.text,selected:e.selected,id:e.id,indicatorColor:t,onClick:function(e){return i.__onMenuItemClick(e)}})})}},{key:"__buildCurrentMenuItems",value:function(){(0,r.elm)(this._dom.root).append(this._component.menuItems.map(function(e){return e.uiInited()||e.uiInit(),e.uiBuilt()||e.uiBuild(),e.uiGetElement()}))}},{key:"__updateCurrentMenuItems",value:function(e,t){var i=this;e.forEach(function(e,n){return i._component.menuItems[n].uiUpdate({text:e.text,selected:e.selected,id:e.id,indicatorColor:t})})}},{key:"__destroyCurrentMenuItems",value:function(){this._component.menuItems.forEach(function(e){return e.uiDestroy()}),(0,r.elm)(this._dom.root).clear()}},{key:"__onMenuItemClick",value:function(e){this._props.onMenuItemClick&&this._props.onMenuItemClick(e)}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"./PopupMenuItem":150}],150:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n.onClick=null,n._dom={root:null,refs:{indicator:null,itemText:null}},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{indicatorColor:"string",text:"string",selected:"boolean",id:["string","number","object"],onClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{indicatorColor:"",id:null,text:"",selected:!1,onClick:null}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("span",{className:"sznp-ui-popup-menu-item"}),this._dom.refs.itemText=(0,r.createElm)("span",{className:"sznp-ui-item-text"}),this._dom.refs.indicator=(0,r.createElm)("span",{className:"sznp-ui-indicator"}),(0,r.elm)(this._dom.root).append(this._dom.refs.itemText,this._dom.refs.indicator),this.__setText(e.text),this.__setIndicatorColor(e.indicatorColor,e.selected),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiUpdate",value:function(e){this._props.text!=e.text&&this.__setText(e.text),this._props.indicatorColor==e.indicatorColor&&this._props.selected==e.selected||this.__setIndicatorColor(e.indicatorColor,e.selected)}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("click",this.__clickOn)}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick(this._props.id)}},{key:"__setText",value:function(e){this._dom.refs.itemText.innerHTML=e}},{key:"__setIndicatorColor",value:function(e,t){(0,r.elm)(this._dom.refs.indicator).setStyle({backgroundColor:t?e:""}),(0,r.elm)(this._dom.refs.itemText).cssClasses({"sznp-ui-bold-text":t})}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],151:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./Icon"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{iconContainer:null,textOnHover:null,arrow:null}},n._component={icon:null},n._bind=["__clickOn","__mouseEnter","__mouseLeave"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{arrowDisplayed:"boolean",displayed:"boolean",textOnHover:"string",transparentLook:"boolean",onClick:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{arrowDisplayed:!0,displayed:!1,textOnHover:"",transparentLook:!1,onClick:null}}},{key:"_onUiInit",value:function(e){this._component.icon=new l.default(this.__getPropsForIcon(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("button",{className:"sznp-ui-widget-rewind-bubble",type:"button"}),this._dom.refs.iconContainer=(0,r.createElm)("span",{className:"sznp-ui-widget-icon-container"}),this._dom.refs.textOnHover=(0,r.createElm)("span",{className:"sznp-ui-bubble-text-on-hover"}),this._dom.refs.arrow=(0,r.createElm)("span",{className:"sznp-ui-bubble-arrow",innerHTML:'\n\t\t\t\t<svg\n\t\t\t\t\tversion="1.1"\n\t\t\t\t\txmlns="http://www.w3.org/2000/svg"\n\t\t\t\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\t\t\t\twidth="36" height="36"\n\t\t\t\t\tviewBox="0 0 36 36"\n\t\t\t\t>\n\t\t\t\t\t<path d="M2.667 2.667h30.667l-30.667 30.667z"></path>\n\t\t\t\t</svg>\n\t\t\t'}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.iconContainer).append(this._component.icon.uiGetElement()),this._dom.refs.textOnHover,this._dom.refs.arrow),this.__setDisplayed(e.displayed),this.__setArrowDisplayed(e.arrowDisplayed),this.__setTrasparentLook(e.transparentLook),this.__setTextOnHover(e.textOnHover),this.__setTextOnHoverDisplayed(!1),this._dom.root.addEventListener("click",this.__clickOn),this._dom.root.addEventListener("mouseenter",this.__mouseEnter),this._dom.root.addEventListener("mouseleave",this.__mouseLeave)}},{key:"_onUiCanUpdate",value:function(e){return e.displayed||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.arrowDisplayed!=e.arrowDisplayed&&this.__setArrowDisplayed(e.arrowDisplayed),this._props.textOnHover!=e.textOnHover&&this.__setTextOnHover(e.textOnHover),this._props.transparentLook!=e.transparentLook&&this.__setTrasparentLook(e.transparentLook),this._component.icon.uiUpdate(this.__getPropsForIcon(e))}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("click",this.__clickOn),this._dom.root.removeEventListener("mouseenter",this.__mouseEnter),this._dom.root.removeEventListener("mouseleave",this.__mouseLeave)}},{key:"__getPropsForIcon",value:function(e){return{reload:{displayed:!0,color:"#000000"}}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setTrasparentLook",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-transparent":e})}},{key:"__setArrowDisplayed",value:function(e){(0,r.elm)(this._dom.refs.arrow).setDisplayed(e)}},{key:"__setTextOnHover",value:function(e){this._dom.refs.textOnHover.innerHTML=e}},{key:"__setTextOnHoverDisplayed",value:function(e){(0,r.elm)(this._dom.refs.textOnHover).setDisplayed(e)}},{key:"__clickOn",value:function(e){this._props.onClick&&this._props.onClick()}},{key:"__mouseEnter",value:function(e){this._props.textOnHover&&this.__setTextOnHoverDisplayed(!0)}},{key:"__mouseLeave",value:function(e){this._props.textOnHover&&this.__setTextOnHoverDisplayed(!1)}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"./Icon":140}],152:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./SeekBarBox"),l=e.interopRequireDefault(a),u=t("./TimeInfo"),c=e.interopRequireDefault(u),d=t("./LiveBubble"),_=e.interopRequireDefault(d),h=t("./RewindBubble"),f=e.interopRequireDefault(h),p=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{container:null,timeInfoContainer:null,liveBubbleContainer:null,rewindBubbleContainer:null,document:document}},n._component={seekBarBox:null,timeInfo:null,liveBubble:null,rewindBubble:null},n._flags={auxTimeShown:!1,auxPointerActivated:!1,auxPointerShown:!1,seeking:!1},n._values={auxProgress:0,auxTime:0},n._bind=["__onStartSeeking","__onEndSeeking","__onSeekTo","__onSeeking","__onLiveClick","__onLiveRewindClick","__onAuxPointerActivateRequest","__onAuxPointerDeactivateRequest","__onAuxPointerMoveRequest"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",eventMode:"boolean",liveMode:"boolean",loading:"boolean",onEndSeeking:["function","object"],onLiveClick:["function","object"],onLiveRewindClick:["function","object"],onSeekTo:["function","object"],onSeeking:["function","object"],onStartSeeking:["function","object"],playingLive:"boolean",progressBarColor:"string",seekingEnabled:"boolean",streamingLive:"boolean",touchMode:"boolean",currentTime:"number",adPoints:"object",duration:"number",titleEnabled:"string",titleDisabled:"string",textLoading:"string",textLive:"string",textLiveFromStart:"string",textAdPoint:"string"}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!0,eventMode:!1,liveMode:!1,loading:!1,onEndSeeking:null,onLiveClick:null,onLiveRewindClick:null,onSeeking:null,onSeekTo:null,onStartSeeking:null,progressBarColor:"",seekingEnabled:!0,streamingLive:!1,touchMode:!1,currentTime:0,adPoints:[],duration:0,titleEnabled:"",titleDisabled:"",textLoading:"",textLive:"",textLiveFromStart:"",textAdPoint:""}}},{key:"_onUiInit",value:function(e){this.__setAuxPointerShown(e.touchMode&&e.seekingEnabled),this._component.seekBarBox=new l.default(this.__getPropsForSeekBarBox(e)),this._component.timeInfo=new c.default(this.__getPropsForTimeInfo(e)),this._component.liveBubble=new _.default(this.__getPropsForLiveBubble(e)),this._component.rewindBubble=new f.default(this.__getPropsForRewindBubble(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-seek-bar"}),this._dom.refs.container=(0,r.createElm)("div",{className:"sznp-ui-seek-bar-container"}),this._dom.refs.timeInfoContainer=(0,r.createElm)("div",{className:"sznp-ui-time-info-container"}),this._dom.refs.liveBubbleContainer=(0,r.createElm)("div",{className:"sznp-ui-live-bubble-container"}),this._dom.refs.rewindBubbleContainer=(0,r.createElm)("div",{className:"sznp-ui-rewind-bubble-container"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.container).append(this._component.seekBarBox.uiGetElement(),(0,r.elm)(this._dom.refs.timeInfoContainer).append(this._component.timeInfo.uiGetElement()),(0,r.elm)(this._dom.refs.rewindBubbleContainer).append(this._component.rewindBubble.uiGetElement()),(0,r.elm)(this._dom.refs.liveBubbleContainer).append(this._component.liveBubble.uiGetElement()))),this.__setTimeInfoContainerPos(e.currentTime,e.duration)}},{key:"_onUiUpdate",value:function(e){this._props.touchMode==e.touchMode&&this._props.seekingEnabled==e.seekingEnabled||this.__setAuxPointerShown(e.touchMode&&e.seekingEnabled),this._flags.auxTimeShown?this.__setTimeInfoContainerPos(this._values.auxTime,e.duration):this.__setTimeInfoContainerPos(e.currentTime,e.duration),this._component.seekBarBox.uiUpdate(this.__getPropsForSeekBarBox(e)),this._component.timeInfo.uiUpdate(this.__getPropsForTimeInfo(e)),this._component.liveBubble.uiUpdate(this.__getPropsForLiveBubble(e)),this._component.rewindBubble.uiUpdate(this.__getPropsForRewindBubble(e))}},{key:"__getPropsForSeekBarBox",value:function(e){var t=0;return t=!e.liveMode&&!e.playingLive||this._flags.seeking?e.currentTime/e.duration:1,isFinite(t)||(t=0),{auxPointerShown:this._flags.auxPointerShown,auxPointerProgress:this._flags.auxPointerActivated?this._values.auxProgress:t,adPoints:e.adPoints,duration:e.duration,loading:e.loading,progress:t,progressBarColor:e.progressBarColor,seekingEnabled:e.seekingEnabled,titleEnabled:e.titleEnabled,titleDisabled:e.titleDisabled,textLoading:e.textLoading,touchMode:e.touchMode,onAuxPointerActivateRequest:this.__onAuxPointerActivateRequest,onAuxPointerDeactivateRequest:this.__onAuxPointerDeactivateRequest,onAuxPointerMoveRequest:this.__onAuxPointerMoveRequest,onEndSeeking:this.__onEndSeeking,onSeekTo:this.__onSeekTo,onSeeking:this.__onSeeking,onStartSeeking:this.__onStartSeeking}}},{key:"__getPropsForTimeInfo",value:function(e){var t=this,i=!0,n=[],o=e.currentTime,s="";return e.touchMode?n=this._flags.seeking?["sznp-ui-small-font-look","sznp-ui-light-look"]:["sznp-ui-small-font-look"]:(n=this._flags.auxTimeShown?[]:["sznp-ui-dark-look"],this._flags.seeking&&(n=["sznp-ui-light-look"])),(e.liveMode||e.eventMode)&&(i=!1),(this._flags.auxTimeShown||this._flags.seeking)&&!function(){i=!0,o=t._values.auxTime;var r=t._component.seekBarBox.uiGetElement().offsetWidth;r&&e.duration&&e.adPoints.some(function(t){var i=r/e.duration,n=6,s=n/i/2;return Math.abs(t.time-o)<s})&&(s=e.textAdPoint,n.indexOf("sznp-ui-dark-look")<0&&(n=["sznp-ui-dark-look"]))}(),{cssClassWithExtraLook:n,time:o,desc:s,displayed:i}}},{key:"__getPropsForRewindBubble",value:function(e){var t=(e.liveMode||e.eventMode)&&!e.touchMode&&(this._flags.auxTimeShown||this._flags.seeking);return{arrowDisplayed:!e.touchMode,displayed:e.eventMode,textOnHover:e.textLiveFromStart,transparentLook:t,onClick:this.__onLiveRewindClick}}},{key:"__getPropsForLiveBubble",value:function(e){var t=(e.liveMode||e.eventMode)&&!e.touchMode&&(this._flags.auxTimeShown||this._flags.seeking);return{arrowDisplayed:!e.touchMode,displayed:e.eventMode&&e.streamingLive,liveText:e.textLive,playingLive:e.playingLive,transparentLook:t,onClick:this.__onLiveClick}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setTimeInfoContainerPos",value:function(e,t){var i=e/t*100,n=this._component.timeInfo.uiGetElement(),o=n.offsetWidth,s=o/2;isFinite(i)?(0,r.elm)(this._dom.refs.timeInfoContainer).setStyle({marginLeft:"-"+s+"px",left:i+"%"}):(0,r.elm)(this._dom.refs.timeInfoContainer).setStyle({marginLeft:"-"+s+"px",left:"0px"})}},{key:"__setAuxPointerActivated",value:function(e){this._flags.auxPointerActivated=e}},{key:"__setAuxPointerShown",value:function(e){this._flags.auxPointerShown=e}},{key:"__setAuxTimeShown",value:function(e){this._flags.auxTimeShown=e}},{key:"__setSeeking",value:function(e){this._flags.seeking=e}},{key:"__onAuxPointerActivateRequest",value:function(){this.__setAuxPointerActivated(!0);var e=!0,t=!0;this._props.seekingEnabled||(e=!1),this.__setAuxPointerShown(e),this.__setAuxTimeShown(t),this.uiForceUpdate()}},{key:"__onAuxPointerDeactivateRequest",value:function(){this.__setAuxPointerActivated(!1);var e=!1,t=!1;this._props.touchMode&&this._props.seekingEnabled&&(e=!0),this.__setAuxPointerShown(e),this.__setAuxTimeShown(t),this.uiForceUpdate()}},{key:"__onAuxPointerMoveRequest",value:function(e){this._values.auxProgress=e,this._values.auxTime=e*this._props.duration,this.uiForceUpdate()}},{key:"__onStartSeeking",value:function(){this.__setSeeking(!0),this.uiForceUpdate(),this._props.onStartSeeking&&this._props.onStartSeeking()}},{key:"__onSeekTo",value:function(e){this._props.onSeekTo&&this._props.onSeekTo(e*this._props.duration)}},{key:"__onSeeking",value:function(e){this._props.onSeeking&&this._props.onSeeking(e*this._props.duration)}},{key:"__onEndSeeking",value:function(){this.__setSeeking(!1),this.uiForceUpdate(),this._props.onEndSeeking&&this._props.onEndSeeking()}},{key:"__onLiveClick",value:function(){this._props.onLiveClick&&this._props.onLiveClick()}},{key:"__onLiveRewindClick",value:function(){this._props.onLiveRewindClick&&this._props.onLiveRewindClick()}}]),i}(s.default);n.default=p},{"../common/UiComponent":14,"../common/uiDom":20,"./LiveBubble":144,"./RewindBubble":151,"./SeekBarBox":153,"./TimeInfo":161}],153:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("../common/utils"),l=(e.interopRequireDefault(a),t("./SeekBarBoxAuxiliaryPointer")),u=e.interopRequireDefault(l),c=t("./SeekBarBoxProgressBar"),d=e.interopRequireDefault(c),_=t("./SeekBarBoxLoadingBar"),h=e.interopRequireDefault(_),f=t("./SeekBarBoxAdPoints"),p=e.interopRequireDefault(f),m=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{wrapper:null,auxPointerContainer:null,fullBar:null,loadingBar:null,seekingBar:null,document:document}},n._component={seekBarAuxiliaryPointer:null,seekBarProgressBar:null,seekBarLoadingBar:null,seekBarAdPoints:null},n._flags={touchUsed:!1,mouseUsed:!1,holdingMouseDown:!1,mouseIntersected:!1,seeking:!1},n._bind=["__onLiveClick","__onLiveRewindClick","__onMouseDown","__onMouseEnter","__onMouseLeave","__onMouseMove","__onMouseUp","__onTouchEnd","__onTouchMove","__onTouchStart"],n._mouseUsedOffTimeout=0,n._touchEndTimeout=0,n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{auxPointerShown:"boolean",auxPointerProgress:"number",adPoints:"object",duration:"number",loading:"boolean",progress:"number",progressBarColor:"string",seekingEnabled:"boolean",titleEnabled:"string",titleDisabled:"string",textLoading:"string",touchMode:"boolean",onAuxPointerActivateRequest:["function","object"],onAuxPointerDeactivateRequest:["function","object"],onAuxPointerMoveRequest:["function","object"],onEndSeeking:["function","object"],onSeekTo:["function","object"],onSeeking:["function","object"],onStartSeeking:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{auxPointerShown:!1,auxPointerProgress:0,adPoints:[],duration:0,loading:!1,progress:0,progressBarColor:"",seekingEnabled:!0,titleEnabled:"",titleDisabled:"",textLoading:"",touchMode:!1,onAuxPointerActivateRequest:null,onAuxPointerDeactivateRequest:null,onAuxPointerMoveRequest:null,onEndSeeking:null,onSeeking:null,onSeekTo:null,onStartSeeking:null}}},{key:"_onUiInit",value:function(e){this._component.seekBarAuxiliaryPointer=new u.default(this.__getPropsForAuxPointer(e)),this._component.seekBarProgressBar=new d.default(this.__getPropsForSeekBarBoxProgressBar(e)),this._component.seekBarLoadingBar=new h.default(this.__getPropsForLoadingBar(e)),this._component.seekBarAdPoints=new p.default(this.__getPropsForAdPoints(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-seek-bar-box"}),this._dom.refs.wrapper=(0,r.createElm)("div",{className:"sznp-ui-seek-bar-box-wrapper"}),this._dom.refs.auxPointerContainer=(0,r.createElm)("div",{className:"sznp-ui-aux-pointer-container"}),this._dom.refs.fullBar=(0,r.createElm)("div",{className:"sznp-ui-full-bar"}),this._dom.refs.seekingBar=(0,r.createElm)("div",{className:"sznp-ui-seeking-bar"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.wrapper).append(this._dom.refs.fullBar,this._component.seekBarLoadingBar.uiGetElement(),this._component.seekBarProgressBar.uiGetElement(),this._dom.refs.seekingBar,(0,r.elm)(this._dom.refs.auxPointerContainer).append(this._component.seekBarAuxiliaryPointer.uiGetElement()),this._component.seekBarAdPoints.uiGetElement())),this.__setSeekingEnabled(e.seekingEnabled),this.__setThinLook(e.touchMode),this.__setTitle(e.seekingEnabled?e.titleEnabled:e.titleDisabled),this.__updateAuxPointerPos(e.auxPointerProgress),this.__addSeekbarEvents()}},{key:"_onUiUpdate",value:function(e){this._props.seekingEnabled==e.seekingEnabled&&this._props.titleEnabled==e.titleEnabled&&this._props.titleDisabled==e.titleDisabled||(this.__setSeekingEnabled(e.seekingEnabled),this.__setTitle(e.seekingEnabled?e.titleEnabled:e.titleDisabled)),this._props.touchMode!=e.touchMode&&this.__setThinLook(e.touchMode),this._component.seekBarAuxiliaryPointer.uiUpdate(this.__getPropsForAuxPointer(e)),this._component.seekBarProgressBar.uiUpdate(this.__getPropsForSeekBarBoxProgressBar(e)),this._component.seekBarLoadingBar.uiUpdate(this.__getPropsForLoadingBar(e)),this.__updateAuxPointerPos(e.auxPointerProgress),this._component.seekBarAdPoints.uiUpdate(this.__getPropsForAdPoints(e))}},{key:"_onUiDestroy",value:function(){this.__removeSeekbarEvents(),this.__removeMouseLeaveEvents(),this.__removeMovingEvents(),this.__removeSeekingEndEvents(),this.__clearTouchEndTimeout()}},{key:"__getPropsForAuxPointer",value:function(e){return{displayed:e.auxPointerShown,roundedLook:e.touchMode}}},{key:"__getPropsForSeekBarBoxProgressBar",value:function(e){var t=e.progress,i=e.progressBarColor,n=e.loading;return{progress:t,color:i,transparent:n}}},{key:"__getPropsForLoadingBar",value:function(e){return{displayed:e.loading,fallbackText:e.textLoading}}},{key:"__getPropsForAdPoints",value:function(e){return{adPoints:e.adPoints,duration:e.duration}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setTitle",value:function(e){this._dom.root.title=e}},{key:"__setSeekingEnabled",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-seeking-disabled":!e})}},{key:"__setThinLook",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-thin-look":e})}},{key:"__canSeek",value:function(){return this._props.seekingEnabled}},{key:"__addSeekbarEvents",value:function(){var e=this._dom.root;e.addEventListener("touchstart",this.__onTouchStart),e.addEventListener("mouseenter",this.__onMouseEnter),e.addEventListener("mousedown",this.__onMouseDown)}},{key:"__removeSeekbarEvents",value:function(){var e=this._dom.root;e.removeEventListener("touchstart",this.__onTouchStart),e.removeEventListener("mouseenter",this.__onMouseEnter),e.removeEventListener("mousedown",this.__onMouseDown)}},{key:"__addMouseLeaveEvents",value:function(){var e=this._dom.root;e.addEventListener("mouseleave",this.__onMouseLeave)}},{key:"__removeMouseLeaveEvents",value:function(){var e=this._dom.root;e.removeEventListener("mouseleave",this.__onMouseLeave)}},{key:"__addMovingEvents",value:function(){var e=this._dom.refs.document;e.addEventListener("mousemove",this.__onMouseMove),e.addEventListener("touchmove",this.__onTouchMove,{passive:!1})}},{key:"__removeMovingEvents",value:function(){var e=this._dom.refs.document;e.removeEventListener("mousemove",this.__onMouseMove),e.removeEventListener("touchmove",this.__onTouchMove,{passive:!1})}},{key:"__addSeekingEndEvents",value:function(){var e=this._dom.refs.document;e.addEventListener("touchend",this.__onTouchEnd),e.addEventListener("mouseup",this.__onMouseUp)}},{key:"__removeSeekingEndEvents",value:function(){var e=this._dom.refs.document;e.removeEventListener("touchend",this.__onTouchEnd),e.removeEventListener("mouseup",this.__onMouseUp)}},{key:"__setTouchUsed",value:function(e){this._flags.touchUsed=e}},{key:"__setMouseUsed",value:function(e){this._flags.mouseUsed=e,e&&this.__startMouseUsedOffTimeout()}},{key:"__setMouseIntersected",value:function(e){this._flags.mouseIntersected=e}},{key:"__setHoldingMouseButton",value:function(e){this._flags.holdingMouseDown=e}},{key:"__setSeeking",value:function(e){this._flags.seeking=e}},{key:"__updateAuxPointerPos",value:function(e){var t=100*e,i=this._component.seekBarAuxiliaryPointer.uiGetElement(),n=Math.round(i.offsetWidth/2);(0,r.elm)(this._dom.refs.auxPointerContainer).setStyle({left:t+"%",marginLeft:"-"+n+"px"})}},{key:"__onAuxPointerProgressByMouse",value:function(e){var t=this._dom.root.getBoundingClientRect(),i=(t.width,window.pageXOffset+e),n=this.__getPartFromClientRect(i,t);this.__onAuxPointerMoveRequest(n)}},{key:"__startTouchEndTimeout",value:function(e){var t=this,i=e.changedTouches;this._touchEndTimeout=setTimeout(function(){if(t.__removeMovingEvents(),t.__removeSeekingEndEvents(),t.__setTouchUsed(!1),t.__setSeeking(!1),1==i.length){var e=i[0];t.__onAuxPointerProgressByMouse(e.clientX),t.__onMoveCurrentTimeToByPos(e.clientX),t.__onSeekToByPos(e.clientX)}t.__onEndSeeking()})}},{key:"__clearTouchEndTimeout",value:function(){this._touchEndTimeout&&(clearTimeout(this._touchEndTimeout),this._touchEndTimeout=0)}},{key:"__startMouseUsedOffTimeout",value:function(){var e=this;this.__clearMouseUsedOffTimeout(),this._mouseUsedOffTimeout=setTimeout(function(){return e.__setMouseUsed(!1)})}},{key:"__clearMouseUsedOffTimeout",value:function(){this._mouseUsedOffTimeout&&(clearTimeout(this._mouseUsedOffTimeout),this._mouseUsedOffTimeout=0)}},{key:"__onTouchStart",value:function(e){if(this.__canSeek()&&!this._flags.mouseUsed){var t=e.changedTouches;if(1==t.length){var i=t[0],n=i.target;(this._dom.root==n||this._dom.root.contains(n))&&(this.__addMovingEvents(),this.__addSeekingEndEvents(),this.__setTouchUsed(!0),this.__setSeeking(!0),this.__onAuxPointerProgressByMouse(i.clientX),this.__onStartSeeking(),this.__onMoveCurrentTimeToByPos(i.clientX))}}}},{key:"__onTouchMove",value:function(e){if(!this._flags.mouseUsed){var t=e.changedTouches;if(1==t.length){var i=t[0],n=i.target;(this._dom.root==n||this._dom.root.contains(n))&&(e.preventDefault(),this.__onAuxPointerProgressByMouse(i.clientX),this.__onMoveCurrentTimeToByPos(i.clientX))}}}},{key:"__onTouchEnd",value:function(e){this._flags.mouseUsed||(this.__clearTouchEndTimeout(),this.__startTouchEndTimeout(e))}},{key:"__onMouseEnter",value:function(){this.__canSeek()&&(this._flags.touchUsed||(this.__addMouseLeaveEvents(),this.__addMovingEvents(),this.__setMouseUsed(!0),this.__setMouseIntersected(!0),this.__onAuxPointerActivateRequest()))}},{key:"__onMouseLeave",value:function(){this.__canSeek()&&(this._flags.touchUsed||(this.__removeMouseLeaveEvents(),this.__setMouseUsed(!0),this.__setMouseIntersected(!1),this._flags.holdingMouseDown||(this.__removeMovingEvents(),this.__onAuxPointerDeactivateRequest())))}},{key:"__onMouseDown",value:function(e){this.__canSeek()&&(this._flags.touchUsed||(e.preventDefault(),this.__addSeekingEndEvents(),this.__setMouseUsed(!0),this.__setSeeking(!0),this.__setHoldingMouseButton(!0),this.__onAuxPointerProgressByMouse(e.clientX),this.__onStartSeeking(),this.__onMoveCurrentTimeToByPos(e.clientX)))}},{key:"__onMouseMove",value:function(e){this._flags.touchUsed||(this.__setMouseUsed(!0),this.__onAuxPointerProgressByMouse(e.clientX),this._flags.holdingMouseDown&&this.__onMoveCurrentTimeToByPos(e.clientX))}},{key:"__onMouseUp",value:function(e){this._flags.touchUsed||(this.__removeSeekingEndEvents(),this.__setMouseUsed(!0),this.__setHoldingMouseButton(!1),this.__setSeeking(!1),this.__onAuxPointerProgressByMouse(e.clientX),this._flags.mouseIntersected||(this.__removeMovingEvents(),this.__onAuxPointerDeactivateRequest()),this.__onSeekToByPos(e.clientX),this.__onEndSeeking())}},{key:"__clearTouchEndTimeout",value:function(){this._touchEndTimeout&&(clearTimeout(this._touchEndTimeout),this._touchEndTimeout=0)}},{key:"__onAuxPointerActivateRequest",value:function(){this._props.onAuxPointerActivateRequest&&this._props.onAuxPointerActivateRequest()}},{key:"__onAuxPointerMoveRequest",value:function(e){this._props.onAuxPointerMoveRequest&&this._props.onAuxPointerMoveRequest(e)}},{key:"__onAuxPointerDeactivateRequest",value:function(){this._props.onAuxPointerDeactivateRequest&&this._props.onAuxPointerDeactivateRequest()}},{key:"__onStartSeeking",value:function(){this._props.onStartSeeking&&this._props.onStartSeeking()}},{key:"__onSeekToByPos",value:function(e){if(this._props.onSeekTo){var t=window.pageXOffset+e,i=this._dom.root.getBoundingClientRect(),n=this.__getPartFromClientRect(t,i);this._props.onSeekTo(n)}}},{key:"__onMoveCurrentTimeToByPos",value:function(e){if(this._props.onSeeking){var t=window.pageXOffset+e,i=this._dom.root.getBoundingClientRect(),n=this.__getPartFromClientRect(t,i);this._props.onSeeking(n)}}},{key:"__onEndSeeking",value:function(){this._props.onEndSeeking&&this._props.onEndSeeking()}},{key:"__onLiveClick",value:function(){this._props.onLiveClick&&this._props.onLiveClick()}},{key:"__onLiveRewindClick",value:function(){this._props.onLiveRewindClick&&this._props.onLiveRewindClick()}},{key:"__getPartFromClientRect",value:function(e,t){var i=t.width,n=t.left,o=(t.right,Math.min(Math.max(e-n,0),i));return o/i}}]),i}(s.default);n.default=m},{"../common/UiComponent":14,"../common/uiDom":20,"../common/utils":23,"./SeekBarBoxAdPoints":155,"./SeekBarBoxAuxiliaryPointer":156,"./SeekBarBoxLoadingBar":157,"./SeekBarBoxProgressBar":158}],154:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{pointWrapper:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{time:"number",duration:"number"}}},{key:"uiGetDefaultProps",value:function(){return{time:null,duration:0}}},{key:"_onUiBuild",value:function(e){var t=e.time/e.duration;isFinite(t)&&(this._dom.root=(0,r.createElm)("span",{className:"sznp-ui-ad-point"}),this._dom.refs.pointWrapper=(0,r.createElm)("span",{className:"sznp-ui-ad-point-wrapper"}),(0,r.elm)(this._dom.root).append(this._dom.refs.pointWrapper),this.__setAdPointPosition(t))}},{key:"__setAdPointPosition",value:function(e){var t=100*e;(0,r.elm)(this._dom.root).setStyle({left:t+"%"})}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],155:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./SeekBarBoxAdPoint"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null},n._component={adPoints:[]},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{adPoints:"object",duration:"number"}}},{key:"uiGetDefaultProps",value:function(){return{adPoints:[],duration:0}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-ad-points"})}},{key:"_onUiCanUpdate",value:function(e){return e.adPoints!==this._props.adPoints||e.duration!==this._props.duration}},{key:"_onUiUpdate",value:function(e){var t=this;this._onUiCanUpdate(e)&&((0,r.elm)(this._dom.root).clear(),this._component.adPoints=e.adPoints.map(function(i){return t.__createComponent(i,e.duration)}),this._component.adPoints.forEach(function(e){(0,r.elm)(t._dom.root).append(e.uiGetElement())}))}},{key:"__createComponent",value:function(e,t){var i=new l.default(Object.assign({duration:t},e));return i.uiInit(),i.uiSetEventEmitter(this.__eventEmitter),i.uiBuild(),i}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"./SeekBarBoxAdPoint":154}],156:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{pointerWrapper:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",roundedLook:"boolean"}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,roundedLook:!1}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("span",{className:"sznp-ui-aux-pointer"}),this._dom.refs.pointerWrapper=(0,r.createElm)("span",{className:"sznp-ui-aux-pointer-wrapper"}),this.__setDisplayed(e.displayed),this.__setRoundedLook(e.roundedLook),(0,r.elm)(this._dom.root).append(this._dom.refs.pointerWrapper)}},{key:"_onUiCanUpdate",value:function(e){return e.displayed||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.roundedLook!=e.roundedLook&&this.__setRoundedLook(e.roundedLook)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setRoundedLook",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-rounded-look":e})}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],157:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{
value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/env"),a=e.interopRequireDefault(r),l=t("../common/uiDom"),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{animatedBar:null,fallback:null,fallbackText:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",fallbackText:"string"}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!1,fallbackText:""}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,l.createElm)("div",{className:"sznp-ui-loading-bar",innerHTML:'\n\t\t\t\t<svg class="sznp-ui-svg-animated-bar" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<pattern id="sznp-ui-loading-pattern" patternUnits="userSpaceOnUse" x="0" y="0" width="24" height="100%">\n\t\t\t\t\t\t\t<line x1="7" y1="-1" x2="2" y2="100%" stroke-width="3" stroke="#fff" stroke-opacity="0.8" stroke-linecap="butt"></line>\n\t\t\t\t\t\t\t<line x1="15" y1="-1" x2="10" y2="100%" stroke-width="3" stroke="#fff" stroke-opacity="0.8" stroke-linecap="butt"></line>\n\t\t\t\t\t\t\t<line x1="23" y1="-1" x2="18" y2="100%" stroke-width="3" stroke="#fff" stroke-opacity="0.8" stroke-linecap="butt"></line>\n\t\t\t\t\t\t</pattern>\n\t\t\t\t\t</defs>\n\t\t\t\t\t<rect fill="url(#sznp-ui-loading-pattern)" width="100%" height="100%"></rect>\n\t\t\t\t</svg>\n\t\t\t\t<div class="sznp-ui-svg-animated-bar-fallback">\n\t\t\t\t\t<span class="sznp-ui-fallback-text"></span>\n\t\t\t\t</div>\n\t\t\t'}),this._dom.refs.animatedBar=this._dom.root.querySelector(".sznp-ui-svg-animated-bar"),this._dom.refs.fallback=this._dom.root.querySelector(".sznp-ui-svg-animated-bar-fallback"),this._dom.refs.fallbackText=this._dom.root.querySelector(".sznp-ui-fallback-text"),this.__setDisplayed(e.displayed),this.__setFallbackText(e.fallbackText)}},{key:"_onUiCanUpdate",value:function(e){return e.displayed||this._props.displayed!=e.displayed}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.fallbackText!=e.fallbackText&&this.__setFallbackText(e.fallbackText)}},{key:"__setDisplayed",value:function(e){(0,l.elm)(this._dom.root).setDisplayed(e),(0,l.elm)(this._dom.refs.animatedBar).setDisplayed(!a.default.isWindowsPhone()),(0,l.elm)(this._dom.refs.fallback).setDisplayed(a.default.isWindowsPhone())}},{key:"__setFallbackText",value:function(e){this._dom.refs.fallbackText.innerHTML=e}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/env":17,"../common/uiDom":20}],158:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{color:"string",progress:"number",transparent:"boolean"}}},{key:"uiGetDefaultProps",value:function(){return{color:"",progress:0,transparent:!1}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-progress-bar"}),this.__setProgress(e.progress),this.__setAsTransparent(e.transparent),this.__setColor(e.color)}},{key:"_onUiUpdate",value:function(e){this._props.progress!=e.progress&&this.__setProgress(e.progress),this._props.color!=e.color&&this.__setColor(e.color),this._props.transparent!=e.transparent&&this.__setAsTransparent(e.transparent)}},{key:"__setProgress",value:function(e){var t=100*e;(0,r.elm)(this._dom.root).setStyle({width:t+"%"})}},{key:"__setColor",value:function(e){this._dom.root.style.backgroundColor=e}},{key:"__setAsTransparent",value:function(e){(0,r.elm)(this._dom.root).cssClasses({"sznp-ui-transparent":e})}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],159:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./PlayTimer"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{block:null,poster:null,tHeading:null,tPrimary:null,tSecundary:null,close:null}},n._component={playTimer:null},n._bind=["__onTeaserClick","__onCloseClick","__onTimer"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{id:"string",poster:"string",label:"string",title:"string",subtitle:"string",close:"string",closeDisplayed:"boolean",onTeaserClick:["function","object"],onCloseClick:["function","object"],time:"number",timerColor:"string",timerText:"string",onTimer:["function","object"]}}},{key:"uiGetDefaultProps",value:function(){return{poster:"",label:"",title:"",subtitle:"",close:"",closeDisplayed:!0,onTeaserClick:null,onCloseClick:null,time:0,timerColor:"",timerText:"",onTimer:null}}},{key:"_onUiInit",value:function(e){this._component.playTimer=new l.default(this.__getPropsForPlayTimer(e))}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("section",{className:"sznp-teaser"}),this._dom.refs.block=(0,r.createElm)("div",{className:"sznp-teaser-block"}),this._dom.refs.actionArea=(0,r.createElm)("button",{className:"sznp-teaser-action-button"}),this._dom.refs.poster=(0,r.createElm)("img",{className:"sznp-teaser-poster"}),this._dom.refs.tHeading=(0,r.createElm)("h1",{className:"sznp-teaser-title-heading"}),this._dom.refs.tPrimary=(0,r.createElm)("h2",{className:"sznp-teaser-title-primary"}),this._dom.refs.tSecundary=(0,r.createElm)("h3",{className:"sznp-teaser-title-secundary"}),this._dom.refs.close=(0,r.createElm)("button",{className:"sznp-teaser-close"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.block).append((0,r.elm)(this._dom.refs.actionArea).append(this._dom.refs.poster,this._component.playTimer.uiGetElement()),this._dom.refs.tHeading,this._dom.refs.tPrimary,this._dom.refs.tSecundary,this._dom.refs.close)),this._dom.refs.actionArea.addEventListener("click",this.__onTeaserClick),this._dom.refs.close.addEventListener("click",this.__onCloseClick)}},{key:"_onUiUpdate",value:function(e){this.__setDisplayed(e.poster||e.title||e.subtitle),this.__setCloseDisplayed(e.closeDisplayed),this._dom.refs.poster.src=e.poster,this._dom.refs.tHeading.innerHTML=e.label,this._dom.refs.tPrimary.innerHTML=e.title,this._dom.refs.tSecundary.innerHTML=e.subtitle,this._dom.refs.close.innerHTML=e.close,this._component.playTimer.uiUpdate(this.__getPropsForPlayTimer(e))}},{key:"__getPropsForPlayTimer",value:function(e){return{displayed:!0,time:e.time,text:e.timerText,timerColor:e.timerColor,onTimer:this.__onTimer}}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setCloseDisplayed",value:function(e){(0,r.elm)(this._dom.refs.close).setDisplayed(e)}},{key:"__onTeaserClick",value:function(e){this._props.onTeaserClick&&this._props.onTeaserClick()}},{key:"__onCloseClick",value:function(e){this._props.onCloseClick&&this._props.onCloseClick()}},{key:"__onTimer",value:function(){this._props.onTimer&&this._props.onTimer()}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"./PlayTimer":147}],160:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null},n._bind=["__clickOn"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{text:"string",onClick:"function",extraClass:"object"}}},{key:"uiGetDefaultProps",value:function(){return{onClick:null,extraClass:[]}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("button",{className:"sznp-ui-widget-text-button",type:"button"}),this.__setText(e.text),this.__setClass(e.extraClass),this._dom.root.addEventListener("click",this.__clickOn)}},{key:"_onUiUpdate",value:function(e){this._props.text!=e.text&&this.__setText(e.text),this._props.extraClass!=e.extraClass&&this.__setClass(e.extraClass)}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("click",this.__clickOn)}},{key:"__setClass",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="sznp-ui-widget-text-button"+(e&&e.length?" "+e.join(" "):"");this._dom.root.setAttribute("class",t)}},{key:"__setText",value:function(e){this._dom.root.innerHTML=e}},{key:"__clickOn",value:function(){this._props.onClick&&this._props.onClick()}}]),i}(s.default);n.default=a},{"../common/UiComponent":14,"../common/uiDom":20}],161:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("../common/utils"),l=e.interopRequireDefault(a),u=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{timeValue:null,valueText:null}},n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{cssClassWithExtraLook:"object",time:"number",desc:"string",displayed:"boolean"}}},{key:"uiGetDefaultProps",value:function(){return{cssClassWithExtraLook:[],time:0,desc:"",displayed:!1}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-time-info"}),this._dom.refs.timeValue=(0,r.createElm)("div",{className:"sznp-ui-time-value"}),this._dom.refs.valueText=(0,r.createElm)("span",{className:"sznp-ui-value-text"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.timeValue).append(this._dom.refs.valueText)),this.__setDisplayed(e.displayed),this.__setCssClassWithExtraLook(e.cssClassWithExtraLook),this.__setTime(e.time,e.desc)}},{key:"_onUiUpdate",value:function(e){this._props.time==e.time&&this._props.desc==e.desc||this.__setTime(e.time,e.desc),this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.cssClassWithExtraLook!=e.cssClassWithExtraLook&&this.__setCssClassWithExtraLook(e.cssClassWithExtraLook)}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__setCssClassWithExtraLook",value:function(e){var t={"sznp-ui-dark-look":!1,"sznp-ui-light-look":!1,"sznp-ui-small-font-look":!1};e.forEach(function(e){if(e){if(!(e in t))throw new Error('Unknown CSS class with look "'+e+'".');t[e]=!0}}),(0,r.elm)(this._dom.root).cssClasses(t)}},{key:"__setTime",value:function(e,t){this._dom.refs.valueText.innerHTML=""!=t?t:l.default.formatTime(e)}}]),i}(s.default);n.default=u},{"../common/UiComponent":14,"../common/uiDom":20,"../common/utils":23}],162:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=t("./VolumeBar"),l=e.interopRequireDefault(a),u=t("./Icon"),c=e.interopRequireDefault(u),d=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{iconContainer:null,volumeBarContainer:null}},n._component={volumeBar:null,icon:null},n._bind=["__onVolumeChange","__onIconClick"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{displayed:"boolean",muted:"boolean",onMuteClick:["function","object"],onVolumeChange:["function","object"],titleMute:"string",titleUnmute:"string",titleVolume:"string",volume:"number"}}},{key:"uiGetDefaultProps",value:function(){return{displayed:!0,muted:!1,onMuteClick:null,onVolumeChange:null,titleMute:"",titleUnmute:"",titleVolume:"",volume:0}}},{key:"_onUiInit",value:function(e){this._component.icon=new c.default(this.__getPropsForIcon(e.volume,e.muted)),this._component.volumeBar=new l.default({volume:this.__getVolume(e.volume,e.muted),onVolumeChange:this.__onVolumeChange})}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-widget-volume"}),this._dom.refs.iconContainer=(0,r.createElm)("button",{className:"sznp-ui-widget-icon-container",type:"button"}),this._dom.refs.volumeBarContainer=(0,r.createElm)("div",{className:"sznp-ui-volume-bar-container"}),(0,r.elm)(this._dom.root).append((0,r.elm)(this._dom.refs.iconContainer).append(this._component.icon.uiGetElement()),(0,r.elm)(this._dom.refs.volumeBarContainer).append(this._component.volumeBar.uiGetElement())),this.__setDisplayed(e.displayed),this.__setTitleMute(e.muted?e.titleUnmute:e.titleMute),this.__setTitleVolume(e.titleVolume),this._dom.refs.iconContainer.addEventListener("click",this.__onIconClick)}},{key:"_onUiUpdate",value:function(e){this._props.displayed!=e.displayed&&this.__setDisplayed(e.displayed),this._props.volume==e.volume&&this._props.muted==e.muted&&this._props.titleMute==e.titleMute&&this._props.titleUnmute==e.titleUnmute||(this.__updateVolumeBar(e.volume,e.muted),this.__updateIcon(e.volume,e.muted),this.__setTitleMute(e.muted?e.titleUnmute:e.titleMute)),this._props.titleVolume!=e.titleVolume&&this.__setTitleVolume(e.titleVolume)}},{key:"__getPropsForIcon",value:function(e,t){var i=this.__isEvaluatedAsMuted(e,t);return{volume:{displayed:!i},mute:{displayed:i}}}},{key:"__getVolume",value:function(e,t){return t?0:e}},{key:"__setDisplayed",value:function(e){(0,r.elm)(this._dom.root).setDisplayed(e)}},{key:"__isEvaluatedAsMuted",value:function(e,t){return 0===e||t}},{key:"__updateVolumeBar",value:function(e,t){this._component.volumeBar.uiUpdate({volume:this.__getVolume(e,t)})}},{key:"__updateIcon",value:function(e,t){this._component.icon.uiUpdate(this.__getPropsForIcon(e,t))}},{key:"__setTitleMute",value:function(e){this._dom.refs.iconContainer.title=e}},{key:"__setTitleVolume",value:function(e){this._component.volumeBar.uiUpdate({title:e})}},{key:"__onVolumeChange",value:function(e){this._props.onVolumeChange&&this._props.onVolumeChange(e)}},{key:"__onIconClick",value:function(e){this._props.onMuteClick&&this._props.onMuteClick()}}]),i}(s.default);n.default=d},{"../common/UiComponent":14,"../common/uiDom":20,"./Icon":140,"./VolumeBar":163}],163:[function(t,i,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../common/UiComponent"),s=e.interopRequireDefault(o),r=t("../common/uiDom"),a=7,l=function(t){function i(t){e.classCallCheck(this,i);var n=e.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t));return n._dom={root:null,refs:{fillableItems:[],spaceItems:[],document:document}},n._bind=["__onMouseDown","__onMouseMove","__onMouseUp"],n}return e.inherits(i,t),e.createClass(i,[{key:"uiGetDeclaredProps",value:function(){return{volume:"number",onVolumeChange:["function","object"],title:"string"}}},{key:"uiGetDefaultProps",value:function(){return{volume:0,onVolumeChange:null,title:""}}},{key:"_onUiBuild",value:function(e){this._dom.root=(0,r.createElm)("div",{className:"sznp-ui-volume-bar",tabindex:"0"});for(var t=0;t<a;){var i=(0,r.createElm)("span",{className:"sznp-ui-volume-bar-item sznp-ui-fillable"});if(this._dom.refs.fillableItems.push(i),t<a-1){var n=(0,r.createElm)("span",{className:"sznp-ui-volume-bar-item sznp-ui-space"});this._dom.refs.spaceItems.push(n),(0,r.elm)(this._dom.root).append(i,n)}else(0,r.elm)(this._dom.root).append(i);t++}this.__fillVolumeItems(e.volume),this.__setTitle(e.title),this._dom.root.addEventListener("mousedown",this.__onMouseDown)}},{key:"_onUiUpdate",value:function(e){this._props.volume!=e.volume&&this.__fillVolumeItems(e.volume),this._props.title!=e.title&&this.__setTitle(e.title)}},{key:"_onUiDestroy",value:function(){this._dom.root.removeEventListener("mousedown",this.__onMouseDown),this._dom.refs.document.removeEventListener("mousemove",this.__onMouseMove),this._dom.refs.document.removeEventListener("mouseup",this.__onMouseUp)}},{key:"__fillVolumeItems",value:function(e){this._dom.refs.fillableItems.forEach(function(e){e.style.boxShadow="",e.style.webkitBoxShadow=""});var t=Math.floor(a*e);this._dom.refs.fillableItems.slice(0,t).forEach(function(e){var t="inset 3px 0 0 #fff";(0,r.elm)(e).setBoxShadow(t)});var i=a*e-t;if(i){var n=this._dom.refs.fillableItems[t],o=3*i,s="inset "+o+"px 0 0 #fff";(0,r.elm)(n).setBoxShadow(s)}}},{key:"__setTitle",value:function(e){this._dom.root.title=e}},{key:"__onMouseDown",value:function(e){e.preventDefault();var t=e.clientX,i=window.pageXOffset+t,n=this._dom.root.getBoundingClientRect();this.__callOnVolumeChange(i,n),this._dom.refs.document.addEventListener("mousemove",this.__onMouseMove),this._dom.refs.document.addEventListener("mouseup",this.__onMouseUp)}},{key:"__onMouseMove",value:function(e){var t=e.clientX,i=window.pageXOffset+t,n=this._dom.root.getBoundingClientRect();this.__callOnVolumeChange(i,n)}},{key:"__onMouseUp",value:function(e){var t=e.clientX,i=window.pageXOffset+t,n=this._dom.root.getBoundingClientRect();this.__callOnVolumeChange(i,n),this._dom.refs.document.removeEventListener("mousemove",this.__onMouseMove),this._dom.refs.document.removeEventListener("mouseup",this.__onMouseUp)}},{key:"__callOnVolumeChange",value:function(e,t){var i=this.__transformPartXOfClientRectToVolume(e,t);this._props.onVolumeChange&&this._props.onVolumeChange(i)}},{key:"__transformPartXOfClientRectToVolume",value:function(e,t){var i=t.width,n=t.left,o=(t.right,Math.min(Math.max(e-n,0),i));return o/i}}]),i}(s.default);n.default=l},{"../common/UiComponent":14,"../common/uiDom":20}]},{},[24])(24)})}();